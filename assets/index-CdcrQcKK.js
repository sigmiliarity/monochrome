import{initializeApp as gm}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";import{getAuth as hm,GoogleAuthProvider as pm,onAuthStateChanged as ym,signInWithPopup as bm,signInWithEmailAndPassword as Em,createUserWithEmailAndPassword as Tm,signOut as vm}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";import{getDatabase as wm}from"https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&o(u)}).observe(document,{childList:!0,subtree:!0});function t(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=t(n);fetch(n.href,r)}})();const _m={STORAGE_KEY:"monochrome-api-instances-v3",INSTANCES_URL:"instances.json",SPEED_TEST_CACHE_KEY:"monochrome-instance-speeds",SPEED_TEST_CACHE_DURATION:1e3*60*60,defaultInstances:{api:[],streaming:[]},instancesLoaded:!1,async loadInstancesFromGitHub(){if(this.instancesLoaded)return this.defaultInstances;try{const h=await fetch(this.INSTANCES_URL);if(!h.ok)throw new Error("Failed to fetch instances");const e=await h.json();let t={api:[],streaming:[]};if(Array.isArray(e))t.api=[...e],t.streaming=[...e];else{if(e.api&&Array.isArray(e.api))if(e.api.length>0&&typeof e.api[0]=="string")t.api=[...e.api];else for(const[,n]of Object.entries(e.api))n.cors===!1&&Array.isArray(n.urls)&&t.api.push(...n.urls);e.streaming&&Array.isArray(e.streaming)?t.streaming=[...e.streaming]:t.api.length>0&&(t.streaming=[...t.api])}return this.defaultInstances=t,this.instancesLoaded=!0,t}catch(h){return console.error("Failed to load instances from GitHub:",h),this.defaultInstances={api:["https://triton.squid.wtf","https://wolf.qqdl.site","https://tidal-api.binimum.org","https://monochrome-api.samidy.com"],streaming:["https://triton.squid.wtf","https://wolf.qqdl.site","https://maus.qqdl.site","https://vogel.qqdl.site","https://katze.qqdl.site","https://hund.qqdl.site","https://tidal.kinoplus.online","https://tidal-api.binimum.org","https://hifi-one.spotisaver.net","https://hifi-two.spotisaver.net"]},this.instancesLoaded=!0,this.defaultInstances}},async speedTestInstance(h,e="api"){let t;e==="streaming"?t=h.endsWith("/")?`${h}track/?id=204567804&quality=HIGH`:`${h}/track/?id=204567804&quality=HIGH`:t=h.endsWith("/")?`${h}artist/?id=3532302`:`${h}/artist/?id=3532302`;const o=performance.now();try{const n=new AbortController,r=setTimeout(()=>n.abort(),5e3),u=await fetch(t,{signal:n.signal,cache:"no-store"});if(clearTimeout(r),!u.ok)return{url:h,type:e,speed:1/0,error:`HTTP ${u.status}`};const m=performance.now()-o;return{url:h,type:e,speed:m,error:null}}catch(n){return{url:h,type:e,speed:1/0,error:n.message}}},getCachedSpeedTests(){try{const h=localStorage.getItem(this.SPEED_TEST_CACHE_KEY);if(!h)return{speeds:{},timestamp:Date.now()};const e=JSON.parse(h);return Date.now()-e.timestamp>this.SPEED_TEST_CACHE_DURATION?{speeds:{},timestamp:Date.now()}:e}catch{return{speeds:{},timestamp:Date.now()}}},updateSpeedCache(h){const e=this.getCachedSpeedTests();h.forEach(t=>{const o=t.type==="streaming"?`${t.url}#streaming`:t.url;e.speeds[o]={speed:t.speed,error:t.error}}),e.timestamp=Date.now();try{localStorage.setItem(this.SPEED_TEST_CACHE_KEY,JSON.stringify(e))}catch{console.warn("[SpeedTest] Failed to cache results")}return e},async testSpecificUrls(h,e){if(!h||h.length===0)return[];console.log(`[SpeedTest] Testing ${h.length} instances for ${e}...`);const t=await Promise.all(h.map(n=>this.speedTestInstance(n,e))),o=t.filter(n=>n.speed!==1/0);return console.log(`[SpeedTest] ${e} Results:`,o.map(n=>`${n.url}: ${n.speed.toFixed(0)}ms`)),t},async getInstances(h="api"){let e;const t=localStorage.getItem(this.STORAGE_KEY);if(t&&(e=JSON.parse(t),e?.api?.length===2)){const g=e.api.some(f=>f.includes("tidal-api.binimum.org")),T=e.api.some(f=>f.includes("monochrome-api.samidy.com"));g&&T&&(localStorage.removeItem(this.STORAGE_KEY),e=null)}e||(e=await this.loadInstancesFromGitHub());const o=e[h]||e.api||[];if(o.length===0)return[];const n=this.getCachedSpeedTests(),r=g=>h==="streaming"?`${g}#streaming`:g,u=o.filter(g=>!n.speeds[r(g)]);if(u.length>0){const g=await this.testSpecificUrls(u,h);this.updateSpeedCache(g),Object.assign(n,this.getCachedSpeedTests())}const m=(g=>[...g].sort((T,f)=>{const c=n.speeds[r(T)]?.speed??1/0,v=n.speeds[r(f)]?.speed??1/0;return c-v}))(o);return e[h]=m,this.saveInstances(e),m},async refreshSpeedTests(){const h=await this.loadInstancesFromGitHub(),e=[];h.api&&h.api.length&&e.push(this.testSpecificUrls(h.api,"api")),h.streaming&&h.streaming.length&&e.push(this.testSpecificUrls(h.streaming,"streaming"));const o=(await Promise.all(e)).flat();return this.updateSpeedCache(o),this.getInstances("api")},saveInstances(h,e){if(e)try{const t=localStorage.getItem(this.STORAGE_KEY);let o=t?JSON.parse(t):{api:[],streaming:[]};o[e]=h,localStorage.setItem(this.STORAGE_KEY,JSON.stringify(o))}catch(t){console.error("Failed to save instances:",t)}else localStorage.setItem(this.STORAGE_KEY,JSON.stringify(h))}},gr={STORAGE_KEY:"monochrome-recent-activity",LIMIT:10,_get(){try{const h=localStorage.getItem(this.STORAGE_KEY),e=h?JSON.parse(h):{artists:[],albums:[],playlists:[],mixes:[]};return e.playlists||(e.playlists=[]),e.mixes||(e.mixes=[]),e}catch{return{artists:[],albums:[],playlists:[],mixes:[]}}},_save(h){localStorage.setItem(this.STORAGE_KEY,JSON.stringify(h))},getRecents(){return this._get()},_add(h,e){const t=this._get();t[h]=t[h].filter(o=>o.id!==e.id),t[h].unshift(e),t[h]=t[h].slice(0,this.LIMIT),this._save(t)},clear(){this._save({artists:[],albums:[],playlists:[],mixes:[]})},addArtist(h){this._add("artists",h)},addAlbum(h){this._add("albums",h)},addPlaylist(h){this._add("playlists",h)},addMix(h){this._add("mixes",h)}},ar={STORAGE_KEY:"monochrome-theme",CUSTOM_THEME_KEY:"monochrome-custom-theme",defaultThemes:{light:{},dark:{},monochrome:{},ocean:{},purple:{},forest:{},mocha:{},machiatto:{},frappe:{},latte:{}},getTheme(){try{return localStorage.getItem(this.STORAGE_KEY)||"system"}catch{return"system"}},setTheme(h){if(localStorage.setItem(this.STORAGE_KEY,h),h==="system"){const e=window.matchMedia("(prefers-color-scheme: dark)").matches;document.documentElement.setAttribute("data-theme",e?"dark":"light")}else document.documentElement.setAttribute("data-theme",h);if(h!=="custom"){const e=document.documentElement;["background","foreground","primary","secondary","muted","border","highlight"].forEach(t=>{e.style.removeProperty(`--${t}`)})}else{const e=this.getCustomTheme();e&&this.applyCustomTheme(e)}},getCustomTheme(){try{const h=localStorage.getItem(this.CUSTOM_THEME_KEY);return h?JSON.parse(h):null}catch{return null}},setCustomTheme(h){localStorage.setItem(this.CUSTOM_THEME_KEY,JSON.stringify(h)),this.applyCustomTheme(h),this.setTheme("custom")},applyCustomTheme(h){const e=document.documentElement;for(const[t,o]of Object.entries(h))e.style.setProperty(`--${t}`,o)}},rr={isEnabled(){try{return localStorage.getItem(this.STORAGE_KEY)==="true"}catch{return!1}},setEnabled(h){localStorage.setItem(this.STORAGE_KEY,h?"true":"false")},shouldLoveOnLike(){try{return localStorage.getItem(this.LOVE_ON_LIKE_KEY)==="true"}catch{return!1}},setLoveOnLike(h){localStorage.setItem(this.LOVE_ON_LIKE_KEY,h?"true":"false")}},Ns={STORAGE_KEY:"now-playing-mode",getMode(){try{return localStorage.getItem(this.STORAGE_KEY)||"cover"}catch{return"cover"}},setMode(h){localStorage.setItem(this.STORAGE_KEY,h)}},Mr={DOWNLOAD_WITH_TRACKS:"lyrics-download-with-tracks",shouldDownloadLyrics(){try{return localStorage.getItem(this.DOWNLOAD_WITH_TRACKS)==="true"}catch{return!1}},setDownloadLyrics(h){localStorage.setItem(this.DOWNLOAD_WITH_TRACKS,h?"true":"false")}},Cr={STORAGE_KEY:"album-background-enabled",isEnabled(){try{return localStorage.getItem(this.STORAGE_KEY)!=="false"}catch{return!0}},setEnabled(h){localStorage.setItem(this.STORAGE_KEY,h?"true":"false")}},xs={STORAGE_KEY:"track-list-actions-mode",getMode(){try{const h=localStorage.getItem(this.STORAGE_KEY)||"dropdown";return document.documentElement.setAttribute("data-track-actions-mode",h),h}catch{return"dropdown"}},setMode(h){localStorage.setItem(this.STORAGE_KEY,h),document.documentElement.setAttribute("data-track-actions-mode",h)}},Ha={COMPACT_ARTIST_KEY:"card-compact-artist",COMPACT_ALBUM_KEY:"card-compact-album",isCompactArtist(){try{const h=localStorage.getItem(this.COMPACT_ARTIST_KEY);return h===null?!0:h==="true"}catch{return!0}},setCompactArtist(h){localStorage.setItem(this.COMPACT_ARTIST_KEY,h?"true":"false")},isCompactAlbum(){try{return localStorage.getItem(this.COMPACT_ALBUM_KEY)==="true"}catch{return!1}},setCompactAlbum(h){localStorage.setItem(this.COMPACT_ALBUM_KEY,h?"true":"false")}},Nr={STORAGE_KEY_MODE:"replay-gain-mode",STORAGE_KEY_PREAMP:"replay-gain-preamp",getMode(){return localStorage.getItem(this.STORAGE_KEY_MODE)||"track"},setMode(h){localStorage.setItem(this.STORAGE_KEY_MODE,h)},getPreamp(){const h=parseFloat(localStorage.getItem(this.STORAGE_KEY_PREAMP));return isNaN(h)?3:h},setPreamp(h){localStorage.setItem(this.STORAGE_KEY_PREAMP,h)}},ir={STORAGE_KEY:"download-quality",getQuality(){try{return localStorage.getItem(this.STORAGE_KEY)||"LOSSLESS"}catch{return"LOSSLESS"}},setQuality(h){localStorage.setItem(this.STORAGE_KEY,h)}},Ds={STORAGE_KEY:"waveform-seekbar-enabled",isEnabled(){try{return localStorage.getItem(this.STORAGE_KEY)==="true"}catch{return!1}},setEnabled(h){localStorage.setItem(this.STORAGE_KEY,h?"true":"false")}},Ls={STORAGE_KEY:"smooth-scrolling-enabled",isEnabled(){try{return localStorage.getItem(this.STORAGE_KEY)==="true"}catch{return!1}},setEnabled(h){localStorage.setItem(this.STORAGE_KEY,h?"true":"false")}},Ms={STORAGE_KEY:"show-quality-badges",isEnabled(){try{const h=localStorage.getItem(this.STORAGE_KEY);return h===null?!0:h==="true"}catch{return!0}},setEnabled(h){localStorage.setItem(this.STORAGE_KEY,h?"true":"false")}},Fi={STORAGE_KEY:"force-individual-downloads",shouldForceIndividual(){try{return localStorage.getItem(this.STORAGE_KEY)==="true"}catch{return!1}},setForceIndividual(h){localStorage.setItem(this.STORAGE_KEY,h?"true":"false")}},ku={STORAGE_KEY:"monochrome-queue",getQueue(){try{const h=localStorage.getItem(this.STORAGE_KEY);return h?JSON.parse(h):null}catch{return null}},saveQueue(h){try{const e={queue:h.queue,shuffledQueue:h.shuffledQueue,originalQueueBeforeShuffle:h.originalQueueBeforeShuffle,currentQueueIndex:h.currentQueueIndex,shuffleActive:h.shuffleActive,repeatMode:h.repeatMode};localStorage.setItem(this.STORAGE_KEY,JSON.stringify(e))}catch(e){console.warn("Failed to save queue to localStorage:",e)}}};typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",h=>{ar.getTheme()==="system"&&document.documentElement.setAttribute("data-theme",h.matches?"dark":"light")});const Ea={OFF:0,ALL:1,ONE:2},Sm=["HI_RES_LOSSLESS","LOSSLESS","HIGH","LOW"],km={HI_RES_LOSSLESS:["HI_RES_LOSSLESS","HIRES_LOSSLESS","HIRESLOSSLESS","HIFI_PLUS","HI_RES_FLAC","HI_RES","HIRES","MASTER","MASTER_QUALITY","MQA"],LOSSLESS:["LOSSLESS","HIFI"],HIGH:["HIGH","HIGH_QUALITY"],LOW:["LOW","LOW_QUALITY"]},$u="Too Many Requests. Please wait a moment and try again.",pr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><polygon points="7 3 21 12 7 21 7 3"></polygon></svg>',Im='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>',Am='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>',Rm='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>',Ir='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',Cm='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="1"></circle><circle cx="12" cy="5" r="1"></circle><circle cx="12" cy="19" r="1"></circle></svg>',tr='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="heart-icon"><path d="M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"></path></svg>',Bi='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>',Wu='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg>',Pr=h=>{if(isNaN(h))return"0:00";const e=Math.floor(h/60),t=Math.floor(h%60);return`${e}:${String(t).padStart(2,"0")}`},Bn=(h,e=!1)=>`<div class="placeholder-text ${e?"loading":""}">${h}</div>`,Gn=new WeakMap,Ar=h=>h?h.replace(/[\\/:*?"<>|]/g,"_").replace(/\s+/g," ").trim():"Unknown",Qu=h=>{switch(h){case"LOW":case"HIGH":return"m4a";default:return"flac"}},ni=(h,e)=>{const t=localStorage.getItem("filename-template")||"{trackNumber} - {artist} - {title}",o=Qu(e),n=h.artist?.name||h.artists?.[0]?.name||"Unknown Artist",r={trackNumber:h.trackNumber,artist:n,title:za(h),album:h.album?.title};return ji(t,r)+"."+o},Nm=h=>h?h.trim().toUpperCase().replace(/[^A-Z0-9]+/g,"_"):"",Xu=h=>{if(!h)return null;const e=Nm(h);for(const[t,o]of Object.entries(km))if(o.includes(e))return t;return null},Zr=h=>Ms.isEnabled()&&Zu(h)==="HI_RES_LOSSLESS"?'<span class="quality-badge quality-hires" title="Hi-Res Lossless">HD</span>':"",Iu=h=>{if(!Array.isArray(h))return null;const e=[];for(const t of h){if(typeof t!="string")continue;const o=Xu(t);o&&!e.includes(o)&&e.push(o)}return Ju(e)},Ju=h=>{let e=null,t=1/0;for(const o of h){if(!o)continue;const n=Sm.indexOf(o),r=n===-1?1/0:n;r<t&&(e=o,t=r)}return e},Zu=h=>{if(!h)return null;const e=[Iu(h.mediaMetadata?.tags),Iu(h.album?.mediaMetadata?.tags),Xu(h.audioQuality)];return Ju(e)},Au=h=>new Promise(e=>setTimeout(e,h)),Ss=h=>h?.explicit===!0||h?.explicitLyrics===!0,xm=h=>h?h.isLocal?!1:h.allowStreaming===!1||h.streamReady===!1||h.title==="Unavailable":!0,Dm=(h,e)=>{let t;return function(...n){const r=()=>{clearTimeout(t),h(...n)};clearTimeout(t),t=setTimeout(r,e)}},ua=h=>typeof h!="string"?h:h.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;"),za=(h,{fallback:e="Unknown Title"}={})=>h?.title?h?.version?`${h.title} (${h.version})`:h.title:e,Da=(h={},{fallback:e="Unknown Artist"}={})=>h?.artists?.length?h.artists.map(t=>t?.name).join(", "):e,Ru=(h={},{fallback:e="Unknown Artist"}={})=>h?.artists?.length?h.artists.map(t=>`<span class="artist-link" data-artist-id="${t.id}">${t.name}</span>`).join(", "):e,ji=(h,e)=>{let t=h;return t=t.replace(/\{trackNumber\}/g,e.trackNumber?String(e.trackNumber).padStart(2,"0"):"00"),t=t.replace(/\{artist\}/g,Ar(e.artist||"Unknown Artist")),t=t.replace(/\{title\}/g,Ar(e.title||"Unknown Title")),t=t.replace(/\{album\}/g,Ar(e.album||"Unknown Album")),t=t.replace(/\{albumArtist\}/g,Ar(e.albumArtist||"Unknown Artist")),t=t.replace(/\{albumTitle\}/g,Ar(e.albumTitle||"Unknown Album")),t=t.replace(/\{year\}/g,e.year||"Unknown"),t},Wr=h=>!Array.isArray(h)||h.length===0?0:h.reduce((e,t)=>e+(t.duration||0),0),Qr=h=>{if(!h||isNaN(h))return"0 min";const e=Math.floor(h/3600),t=Math.floor(h%3600/60);return e>0?`${e} hr ${t} min`:`${t} min`},Xr=new Map;async function ai(h,e){if(!e)return null;if(Xr.has(e))return Xr.get(e);const t=async o=>{try{const n=`https://corsproxy.io/?${encodeURIComponent(o)}`,r=await fetch(n);if(r.ok)return await r.blob()}catch(n){console.warn("Proxy fetch failed:",n)}return null};try{const o=h.getCoverUrl(e,"1280"),n=await fetch(o);if(n.ok){const r=await n.blob();return Xr.set(e,r),r}else{const r=await t(o);if(r)return Xr.set(e,r),r}}catch{const o=h.getCoverUrl(e,"1280"),n=await t(o);if(n)return Xr.set(e,n),n}return null}class Lm{constructor(e={}){this.memoryCache=new Map,this.maxSize=e.maxSize||200,this.ttl=e.ttl||1e3*60*30,this.dbName="monochrome-cache",this.dbVersion=1,this.db=null,this.initDB()}async initDB(){if(!(typeof indexedDB>"u"))return new Promise((e,t)=>{const o=indexedDB.open(this.dbName,this.dbVersion);o.onerror=()=>t(o.error),o.onsuccess=()=>{this.db=o.result,e(this.db)},o.onupgradeneeded=n=>{const r=n.target.result;r.objectStoreNames.contains("responses")||r.createObjectStore("responses",{keyPath:"key"}).createIndex("timestamp","timestamp",{unique:!1})}})}generateKey(e,t){const o=typeof t=="object"?JSON.stringify(t):String(t);return`${e}:${o}`}async get(e,t){const o=this.generateKey(e,t);if(this.memoryCache.has(o)){const n=this.memoryCache.get(o);if(Date.now()-n.timestamp<this.ttl)return n.data;this.memoryCache.delete(o)}if(this.db)try{const n=await this.getFromIndexedDB(o);if(n&&Date.now()-n.timestamp<this.ttl)return this.memoryCache.set(o,n),n.data}catch(n){console.log("IndexedDB read error:",n)}return null}async set(e,t,o){const n=this.generateKey(e,t),r={key:n,data:o,timestamp:Date.now()};if(this.memoryCache.set(n,r),this.memoryCache.size>this.maxSize){const u=this.memoryCache.keys().next().value;this.memoryCache.delete(u)}if(this.db)try{await this.setInIndexedDB(r)}catch(u){console.log("IndexedDB write error:",u)}}getFromIndexedDB(e){return new Promise((t,o)=>{if(!this.db){t(null);return}const u=this.db.transaction(["responses"],"readonly").objectStore("responses").get(e);u.onsuccess=()=>t(u.result||null),u.onerror=()=>o(u.error)})}setInIndexedDB(e){return new Promise((t,o)=>{if(!this.db){t();return}const u=this.db.transaction(["responses"],"readwrite").objectStore("responses").put(e);u.onsuccess=()=>t(),u.onerror=()=>o(u.error)})}async clear(){if(this.memoryCache.clear(),this.db)return new Promise((e,t)=>{const r=this.db.transaction(["responses"],"readwrite").objectStore("responses").clear();r.onsuccess=()=>e(),r.onerror=()=>t(r.error)})}async clearExpired(){const e=Date.now(),t=[];for(const[o,n]of this.memoryCache.entries())e-n.timestamp>=this.ttl&&t.push(o);if(t.forEach(o=>this.memoryCache.delete(o)),this.db)try{const r=this.db.transaction(["responses"],"readwrite").objectStore("responses").index("timestamp"),u=IDBKeyRange.upperBound(e-this.ttl),p=r.openCursor(u);p.onsuccess=m=>{const g=m.target.result;g&&(g.delete(),g.continue())}}catch(o){console.log("Failed to clear expired IndexedDB entries:",o)}}getCacheStats(){return{memoryEntries:this.memoryCache.size,maxSize:this.maxSize,ttl:this.ttl}}}const Mm="Monochrome",Pm="Unknown Title",Cu="Unknown Artist",Om="Unknown Album";async function ec(h,e,t,o){const n=Qu(o);if(o==="HI_RES_LOSSLESS"){const r=await Nu(h,e,t);return n==="flac"?new Blob([r],{type:"audio/flac"}):r}return n==="flac"?await jm(h,e,t):n==="m4a"?await Nu(h,e,t):h}async function zm(h){const e={title:h.name.replace(/\.[^/.]+$/,""),artists:[],artist:{name:"Unknown Artist"},album:{title:"Unknown Album",cover:"assets/appicon.png",releaseDate:null},duration:0,isLocal:!0,file:h,id:`local-${h.name}-${h.lastModified}`};try{h.type==="audio/flac"||h.name.endsWith(".flac")?await Fm(h,e):h.type==="audio/mp4"||h.name.endsWith(".m4a")?await Um(h,e):(h.type==="audio/mpeg"||h.name.endsWith(".mp3"))&&await Bm(h,e)}catch(t){console.warn("Error reading metadata for",h.name,t)}return e.artists.length>0&&(e.artist=e.artists[0]),e}async function Fm(h,e){const t=await h.arrayBuffer(),o=new DataView(t);if(!tc(o))return;const r=nc(o).find(p=>p.type===4),u=[];if(r){const p=r.offset,m=o.getUint32(p,!0);let g=p+4+m;const T=o.getUint32(g,!0);g+=4;for(let f=0;f<T;f++){const c=o.getUint32(g,!0);g+=4;const v=new TextDecoder().decode(new Uint8Array(t,g,c));g+=c;const _=v.indexOf("=");if(_>-1){const x=v.substring(0,_),te=v.substring(_+1),oe=x.toUpperCase();oe==="TITLE"&&(e.title=te),(oe==="ARTIST"||oe==="ALBUMARTIST")&&u.push(te),oe==="ALBUM"&&(e.album.title=te)}}}u.length>0&&(e.artists=u.flatMap(p=>p.split(/; |\/|\\/)).map(p=>({name:p.trim()})))}async function Um(h,e){try{const t=Math.min(h.size,5242880),o=await h.slice(0,t).arrayBuffer(),n=new DataView(o),u=nr(n).find(ke=>ke.type==="moov");if(!u)return;const p=u.offset+8,m=u.size-8,g=new DataView(n.buffer,p,m),f=nr(g).find(ke=>ke.type==="udta");if(!f)return;const c=p+f.offset+8,v=f.size-8,_=new DataView(n.buffer,c,v),te=nr(_).find(ke=>ke.type==="meta");if(!te)return;const oe=c+te.offset+12,Te=te.size-12,Se=new DataView(n.buffer,oe,Te),Be=nr(Se).find(ke=>ke.type==="ilst");if(!Be)return;const De=oe+Be.offset+8,re=Be.size-8,se=new DataView(n.buffer,De,re),he=nr(se);let ve=null;for(const ke of he){const Fe=De+ke.offset+8,ye=ke.size-8,Qe=new DataView(n.buffer,Fe,ye),xe=nr(Qe).find(Le=>Le.type==="data");if(xe){const Le=xe.size-16,ot=Fe+xe.offset+16;ke.type==="©nam"?e.title=new TextDecoder().decode(new Uint8Array(n.buffer,ot,Le)):ke.type==="©ART"?ve=new TextDecoder().decode(new Uint8Array(n.buffer,ot,Le)):ke.type==="©alb"&&(e.album.title=new TextDecoder().decode(new Uint8Array(n.buffer,ot,Le)))}}ve&&(e.artists=ve.split(/; |\/|\\/).map(ke=>({name:ke.trim()})))}catch(t){console.warn("Error parsing M4A:",t)}}async function Bm(h,e){let t=await h.slice(0,10).arrayBuffer(),o=new DataView(t);if(o.getUint8(0)===73&&o.getUint8(1)===68&&o.getUint8(2)===51){const n=o.getUint8(3),u=ks(o,6)+10;t=await h.slice(0,u).arrayBuffer(),o=new DataView(t);let p=10;if((o.getUint8(5)&64)!==0){const f=ks(o,p);p+=f}let m=null,g=null;for(;p<o.byteLength;){let f,c;if(n===3)f=new TextDecoder().decode(new Uint8Array(t,p,4)),c=o.getUint32(p+4,!1),p+=10;else if(n===4)f=new TextDecoder().decode(new Uint8Array(t,p,4)),c=ks(o,p+4),p+=10;else break;if(f.charCodeAt(0)===0||p+c>o.byteLength)break;const v=new DataView(t,p,c);if(f==="TIT2"&&(e.title=Jr(v)),f==="TPE1"&&(m=Jr(v)),f==="TPE2"&&(g=Jr(v)),f==="TALB"&&(e.album.title=Jr(v)),f==="TYER"||f==="TDRC"){const _=Jr(v);_&&(e.album.releaseDate=_)}p+=c}const T=m||g;T&&(e.artists=T.split("/").map(f=>({name:f.trim()})))}if(h.size>128){const n=await h.slice(h.size-128).arrayBuffer();if(new TextDecoder().decode(new Uint8Array(n,0,3))==="TAG"){const u=new TextDecoder().decode(new Uint8Array(n,3,30)).replace(/\0/g,"").trim(),p=new TextDecoder().decode(new Uint8Array(n,33,30)).replace(/\0/g,"").trim(),m=new TextDecoder().decode(new Uint8Array(n,63,30)).replace(/\0/g,"").trim();u&&(e.title=u),p&&e.artists.length===0&&(e.artists=[{name:p}]),m&&(e.album.title=m)}}}function ks(h,e){return(h.getUint8(e)&127)<<21|(h.getUint8(e+1)&127)<<14|(h.getUint8(e+2)&127)<<7|h.getUint8(e+3)&127}function Jr(h){const e=h.getUint8(0),t=h.buffer.slice(h.byteOffset+1,h.byteOffset+h.byteLength);let o;return e===0?o=new TextDecoder("iso-8859-1"):e===1?o=new TextDecoder("utf-16"):e===2?o=new TextDecoder("utf-16be"):o=new TextDecoder("utf-8"),o.decode(t).replace(/\0/g,"")}async function jm(h,e,t){try{const o=await h.arrayBuffer(),n=new DataView(o);if(!tc(n))return console.warn("Not a valid FLAC file, returning original"),h;const r=nc(n),u=qm(e);let p=null;if(e.album?.cover)try{p=await Hm(e.album.cover,t)}catch(g){console.warn("Failed to embed album art:",g)}const m=Gm(n,r,u,p);return new Blob([m],{type:"audio/flac"})}catch(o){return console.error("Failed to add FLAC metadata:",o),h}}function tc(h){return h.byteLength>=4&&h.getUint8(0)===102&&h.getUint8(1)===76&&h.getUint8(2)===97&&h.getUint8(3)===67}function nc(h){const e=[];let t=4;for(;t+4<=h.byteLength;){const o=h.getUint8(t),n=(o&128)!==0,r=o&127,u=h.getUint8(t+1)<<16|h.getUint8(t+2)<<8|h.getUint8(t+3);if(t+4+u>h.byteLength){console.warn("Invalid block size detected, stopping parse");break}if(e.push({type:r,isLast:n,size:u,offset:t+4,headerOffset:t}),t+=4+u,n){e.audioDataOffset=t;break}}return e}function qm(h){const e=[];h.title&&e.push(["TITLE",h.title]),h.artist?.name&&e.push(["ARTIST",h.artist.name]),h.album?.title&&e.push(["ALBUM",h.album.title]);const t=h.album?.artist?.name||h.artist?.name;t&&e.push(["ALBUMARTIST",t]),h.trackNumber&&e.push(["TRACKNUMBER",String(h.trackNumber)]),h.album?.numberOfTracks&&e.push(["TRACKTOTAL",String(h.album.numberOfTracks)]);const o=h.album?.releaseDate||(h.streamStartDate?h.streamStartDate.split("T")[0]:"");if(o)try{const c=new Date(o).getFullYear();isNaN(c)||e.push(["DATE",String(c)])}catch{}h.copyright&&e.push(["COPYRIGHT",h.copyright]),h.isrc&&e.push(["ISRC",h.isrc]);const n=Mm,r=new TextEncoder().encode(n);let u=4+r.length+4;const p=e.map(([c,v])=>{const _=`${c}=${v}`,x=new TextEncoder().encode(_);return u+=4+x.length,x}),m=new ArrayBuffer(u),g=new DataView(m),T=new Uint8Array(m);let f=0;g.setUint32(f,r.length,!0),f+=4,T.set(r,f),f+=r.length,g.setUint32(f,e.length,!0),f+=4;for(const c of p)g.setUint32(f,c.length,!0),f+=4,T.set(c,f),f+=c.length;return T}async function Hm(h,e){try{const t=await ai(e,h);if(!t)throw new Error("Failed to fetch album art");const o=new Uint8Array(await t.arrayBuffer()),n=t.type||"image/jpeg",r=new TextEncoder().encode(n),p=new TextEncoder().encode(""),m=8+r.length+4+p.length+4+4+4+4+4+o.length,g=new ArrayBuffer(m),T=new DataView(g),f=new Uint8Array(g);let c=0;return T.setUint32(c,3,!1),c+=4,T.setUint32(c,r.length,!1),c+=4,f.set(r,c),c+=r.length,T.setUint32(c,p.length,!1),c+=4,p.length>0&&(f.set(p,c),c+=p.length),T.setUint32(c,0,!1),c+=4,T.setUint32(c,0,!1),c+=4,T.setUint32(c,0,!1),c+=4,T.setUint32(c,0,!1),c+=4,T.setUint32(c,o.length,!1),c+=4,f.set(o,c),f}catch(t){return console.error("Failed to create FLAC picture block:",t),null}}function Gm(h,e,t,o){const n=new Uint8Array(h.buffer),r=e.filter(_=>_.type!==4&&_.type!==6);let u=4;for(const _ of r)u+=4+_.size;u+=4+t.length,o&&(u+=4+o.length);const p=e.audioDataOffset;if(p===void 0)throw new Error("Invalid FLAC file structure: unable to locate audio data stream");const m=h.byteLength-p;u+=m;const g=new Uint8Array(u);let T=0;g[T++]=102,g[T++]=76,g[T++]=97,g[T++]=67;for(let _=0;_<r.length;_++){const x=r[_],te=0|x.type;g[T++]=te,g[T++]=x.size>>16&255,g[T++]=x.size>>8&255,g[T++]=x.size&255,g.set(n.subarray(x.offset,x.offset+x.size),T),T+=x.size}const f=T,c=4;g[T++]=c,g[T++]=t.length>>16&255,g[T++]=t.length>>8&255,g[T++]=t.length&255,g.set(t,T),T+=t.length;let v=f;if(o){const _=T,x=6;g[T++]=x,g[T++]=o.length>>16&255,g[T++]=o.length>>8&255,g[T++]=o.length&255,g.set(o,T),T+=o.length,v=_}return g[v]|=128,m>0&&g.set(n.subarray(p,p+m),T),g}async function Nu(h,e,t){try{const o=await h.arrayBuffer(),n=new DataView(o),r=nr(n),u=Ym(e);if(e.album?.cover)try{const m=await ai(t,e.album.cover);if(m){const g=new Uint8Array(await m.arrayBuffer());u.cover={type:"covr",data:g}}}catch(m){console.warn("Failed to embed album art in M4A:",m)}const p=Km(n,r,u);return new Blob([p],{type:"audio/mp4"})}catch(o){return console.error("Failed to add M4A metadata:",o),h}}function nr(h){const e=[];let t=0;for(;t+8<=h.byteLength;){let o=h.getUint32(t,!1);if(o===0)o=h.byteLength-t;else if(o===1){if(t+16>h.byteLength)break;const r=h.getUint32(t+8,!1),u=h.getUint32(t+12,!1);if(r!==0){console.warn("64-bit MP4 atoms larger than 4GB are not supported - file may be processed incompletely");break}o=u}if(o<8||t+o>h.byteLength)break;const n=String.fromCharCode(h.getUint8(t+4),h.getUint8(t+5),h.getUint8(t+6),h.getUint8(t+7));e.push({type:n,offset:t,size:o}),t+=o}return e}function Ym(h){const e={"©nam":h.title||Pm,"©ART":h.artist?.name||Cu,"©alb":h.album?.title||Om,aART:h.album?.artist?.name||h.artist?.name||Cu};h.trackNumber&&(e.trkn=h.trackNumber);const t=h.album?.releaseDate||(h.streamStartDate?h.streamStartDate.split("T")[0]:"");if(t)try{const o=new Date(t).getFullYear();isNaN(o)||(e["©day"]=String(o))}catch{}return{tags:e}}function Km(h,e,t){const o=new Uint8Array(h.buffer),n=e.find(oe=>oe.type==="moov");if(!n)return console.warn("No moov atom found in M4A file"),o;const r=Vm(t),p=nr(new DataView(o.buffer,n.offset+8,n.size-8)).filter(oe=>oe.type!=="udta");let m=8;for(const oe of p)m+=oe.size;m+=r.length;const g=m-n.size,T=o.length+g,f=new Uint8Array(T);let c=0,v=0;const _=e.filter(oe=>oe.offset<n.offset);for(const oe of _)f.set(o.subarray(oe.offset,oe.offset+oe.size),c),c+=oe.size,v+=oe.size;f[c++]=m>>24&255,f[c++]=m>>16&255,f[c++]=m>>8&255,f[c++]=m&255,f[c++]=109,f[c++]=111,f[c++]=111,f[c++]=118;for(const oe of p){const Te=n.offset+8+oe.offset;f.set(o.subarray(Te,Te+oe.size),c),c+=oe.size}f.set(r,c),c+=r.length,v=n.offset+n.size;const x=e.find(oe=>oe.type==="mdat");return x&&n.offset<x.offset&&Xm(f,c-m,m,g),v<o.length&&f.set(o.subarray(v),c),f}function Vm(h){const{tags:e,cover:t}=h,o=[];for(const[te,oe]of Object.entries(e))te==="trkn"?o.push(Wm(te,oe)):o.push($m(te,oe));t&&o.push(Qm(t.data));const n=8+o.reduce((te,oe)=>te+oe.length,0),r=new Uint8Array(n);let u=0;xa(r,u,n,"ilst"),u+=8;for(const te of o)r.set(te,u),u+=te.length;const p=12+n,m=new Uint8Array(p);u=0,xa(m,u,p,"meta"),u+=8,m[u++]=0,m[u++]=0,m[u++]=0,m[u++]=0,m.set(r,u);const g=new Uint8Array([0,0,0,0,0,0,0,0,109,100,105,114,97,112,112,108,0,0,0,0,0,0,0,0,0,0]),T=8+g.length,f=new Uint8Array(T);xa(f,0,T,"hdlr"),f.set(g,8);const c=12+T+n,v=new Uint8Array(c);u=0,xa(v,u,c,"meta"),u+=8,v[u++]=0,v[u++]=0,v[u++]=0,v[u++]=0,v.set(f,u),u+=T,v.set(r,u);const _=8+c,x=new Uint8Array(_);return xa(x,0,_,"udta"),x.set(v,8),x}function $m(h,e){const t=new TextEncoder().encode(e),o=16+t.length,n=8+o,r=new Uint8Array(n);let u=0;return xa(r,u,n,h),u+=8,xa(r,u,o,"data"),u+=8,r[u++]=0,r[u++]=0,r[u++]=0,r[u++]=1,r[u++]=0,r[u++]=0,r[u++]=0,r[u++]=0,r.set(t,u),r}function Wm(h,e){const n=new Uint8Array(32);let r=0;xa(n,r,32,h),r+=8,xa(n,r,24,"data"),r+=8,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0;const u=parseInt(e)||0;return n[r++]=u>>8&255,n[r++]=u&255,n[r++]=0,n[r++]=0,n[r++]=0,n[r++]=0,n}function Qm(h){const e=16+h.length,t=8+e,o=new Uint8Array(t);let n=0;xa(o,n,t,"covr"),n+=8,xa(o,n,e,"data"),n+=8;let r=13;return h[0]===137&&h[1]===80&&(r=14),o[n++]=0,o[n++]=0,o[n++]=0,o[n++]=r,o[n++]=0,o[n++]=0,o[n++]=0,o[n++]=0,o.set(h,n),o}function xa(h,e,t,o){h[e++]=t>>24&255,h[e++]=t>>16&255,h[e++]=t>>8&255,h[e++]=t&255;for(let n=0;n<4;n++)h[e++]=o.charCodeAt(n)}function Xm(h,e,t,o){const n=new DataView(h.buffer,h.byteOffset,h.byteLength);let r=e+8;const u=e+t;ac(n,r,u,o)}function ac(h,e,t,o){let n=e;for(;n+8<=t;){const r=h.getUint32(n,!1),u=String.fromCharCode(h.getUint8(n+4),h.getUint8(n+5),h.getUint8(n+6),h.getUint8(n+7));if(r<8)break;if(u==="trak"||u==="mdia"||u==="minf"||u==="stbl")ac(h,n+8,n+r,o);else if(u==="stco"){const p=h.getUint32(n+12,!1);for(let m=0;m<p;m++){const g=n+16+m*4,T=h.getUint32(g,!1);h.setUint32(g,T+o,!1)}}else if(u==="co64"){const p=h.getUint32(n+12,!1);for(let m=0;m<p;m++){const g=n+16+m*8,T=h.getUint32(g,!1);let c=h.getUint32(g+4,!1)+o,v=0;c>4294967295&&(v=Math.floor(c/4294967296),c=c>>>0);const _=T+v;h.setUint32(g,_,!1),h.setUint32(g+4,c,!1)}}n+=r}}class rc{constructor(){}async downloadDashStream(e,t={}){const{onProgress:o,signal:n}=t,u=await(await fetch(e)).text(),p=this.parseManifest(u);if(!p)throw new Error("Failed to parse DASH manifest");const m=this.generateSegmentUrls(p),g=[];let T=0;const f=m.length;for(let c=0;c<m.length;c++){if(n?.aborted)throw new Error("AbortError");const v=m[c],_=await fetch(v,{signal:n});if(_.ok){const x=await _.arrayBuffer();g.push(x),T+=x.byteLength}else{console.warn(`Failed to fetch segment ${c}, retrying...`),await new Promise(oe=>setTimeout(oe,1e3));const x=await fetch(v,{signal:n});if(!x.ok)throw new Error(`Failed to fetch segment ${c}: ${x.status}`);const te=await x.arrayBuffer();g.push(te),T+=te.byteLength}o&&o({stage:"downloading",receivedBytes:T,totalBytes:void 0,currentSegment:c+1,totalSegments:f})}return new Blob(g,{type:"audio/mp4"})}parseManifest(e){const n=new DOMParser().parseFromString(e,"text/xml").querySelector("MPD");if(!n)throw new Error("Invalid DASH manifest: No MPD tag");const r=n.querySelector("Period");if(!r)throw new Error("Invalid DASH manifest: No Period tag");const u=Array.from(r.querySelectorAll("AdaptationSet"));let p=u.find(Se=>Se.getAttribute("mimeType")?.startsWith("audio"));if(!p&&u.length>0&&(p=u[0]),!p)throw new Error("No AdaptationSet found");const m=Array.from(p.querySelectorAll("Representation")).sort((Se,Re)=>{const Be=parseInt(Se.getAttribute("bandwidth")||"0");return parseInt(Re.getAttribute("bandwidth")||"0")-Be});if(m.length===0)throw new Error("No Representation found");const g=m[0],T=g.getAttribute("id"),f=g.querySelector("SegmentTemplate")||p.querySelector("SegmentTemplate");if(!f)throw new Error("No SegmentTemplate found");const c=f.getAttribute("initialization"),v=f.getAttribute("media"),_=parseInt(f.getAttribute("startNumber")||"1",10),x=g.querySelector("BaseURL")||p.querySelector("BaseURL")||r.querySelector("BaseURL")||n.querySelector("BaseURL"),te=x?x.textContent.trim():"",oe=f.querySelector("SegmentTimeline"),Te=[];if(oe){const Se=oe.querySelectorAll("S");let Re=0,Be=_;Se.forEach(De=>{const re=De.getAttribute("t");re&&(Re=parseInt(re,10));const se=parseInt(De.getAttribute("d"),10),he=parseInt(De.getAttribute("r")||"0",10);Te.push({number:Be,time:Re}),Re+=se,Be++;for(let ve=0;ve<he;ve++)Te.push({number:Be,time:Re}),Re+=se,Be++})}return{baseUrl:te,initialization:c,media:v,segments:Te,repId:T}}generateSegmentUrls(e){const{baseUrl:t,initialization:o,media:n,segments:r,repId:u}=e,p=[],m=(T,f,c)=>T.replace(/\$RepresentationID\$/g,u).replace(/\$Number(?:%0([0-9]+)d)?\$/g,(v,_)=>_?f.toString().padStart(parseInt(_),"0"):f).replace(/\$Time(?:%0([0-9]+)d)?\$/g,(v,_)=>_?c.toString().padStart(parseInt(_),"0"):c),g=(T,f)=>!T||f.startsWith("http")?f:T.endsWith("/")?T+f:T+"/"+f;if(o){const T=m(o,0,0);p.push(g(t,T))}return r&&r.length>0&&r.forEach(T=>{const f=m(n,T.number,T.time);p.push(g(t,f))}),p}}class Jm{constructor(e){this.settings=e,this.cache=new Lm({maxSize:200,ttl:1e3*60*30}),this.streamCache=new Map,setInterval(()=>{this.cache.clearExpired(),this.pruneStreamCache()},1e3*60*5)}pruneStreamCache(){if(this.streamCache.size>50){const e=Array.from(this.streamCache.entries());e.slice(0,e.length-50).forEach(([o])=>this.streamCache.delete(o))}}async fetchWithRetry(e,t={}){const o=t.type||"api",n=await this.settings.getInstances(o);if(n.length===0)throw new Error(`No API instances configured for type: ${o}`);const r=n.length*2;let u=null,p=0;for(let m=1;m<=r;m++){const g=n[p%n.length],T=g.endsWith("/")?`${g}${e.substring(1)}`:`${g}${e}`;try{const f=await fetch(T,{signal:t.signal});if(f.status===429){console.warn(`Rate limit hit on ${g}. Trying next instance...`),p++,await Au(500);continue}if(f.ok)return f;if(f.status===401&&(await f.clone().json())?.subStatus===11002){console.warn(`Auth failed on ${g}. Trying next instance...`),p++;continue}if(f.status>=500){console.warn(`Server error ${f.status} on ${g}. Trying next instance...`),p++;continue}u=new Error(`Request failed with status ${f.status}`),p++}catch(f){if(f.name==="AbortError")throw f;u=f,console.warn(`Network error on ${g}: ${f.message}. Trying next instance...`),p++,await Au(200)}}throw u||new Error(`All API instances failed for: ${e}`)}findSearchSection(e,t,o){if(!(!e||typeof e!="object")){if(Array.isArray(e)){for(const n of e){const r=this.findSearchSection(n,t,o);if(r)return r}return}if(!o.has(e)){if(o.add(e),"items"in e&&Array.isArray(e.items))return e;if(t in e){const n=this.findSearchSection(e[t],t,o);if(n)return n}for(const n of Object.values(e)){const r=this.findSearchSection(n,t,o);if(r)return r}}}}buildSearchResponse(e){const t=e?.items??[];return{items:t,limit:e?.limit??t.length,offset:e?.offset??0,totalNumberOfItems:e?.totalNumberOfItems??t.length}}normalizeSearchResponse(e,t){const o=this.findSearchSection(e,t,new Set);return this.buildSearchResponse(o)}prepareTrack(e){let t=e;!e.artist&&Array.isArray(e.artists)&&e.artists.length>0&&(t={...e,artist:e.artists[0]});const o=Zu(t);return o&&t.audioQuality!==o&&(t={...t,audioQuality:o}),t.isUnavailable=xm(t),t}prepareAlbum(e){return!e.artist&&Array.isArray(e.artists)&&e.artists.length>0?{...e,artist:e.artists[0]}:e}preparePlaylist(e){return e}prepareArtist(e){return!e.type&&Array.isArray(e.artistTypes)&&e.artistTypes.length>0?{...e,type:e.artistTypes[0]}:e}parseTrackLookup(e){const t=Array.isArray(e)?e:[e];let o,n,r;for(const u of t)if(!(!u||typeof u!="object")){if(!o&&"duration"in u){o=u;continue}if(!n&&"manifest"in u){n=u;continue}if(!r&&"OriginalTrackUrl"in u){const p=u.OriginalTrackUrl;typeof p=="string"&&(r=p)}}if(!o||!n)throw new Error("Malformed track response");return{track:o,info:n,originalTrackUrl:r}}extractStreamUrlFromManifest(e){try{const t=atob(e);if(t.includes("<MPD")){const o=new Blob([t],{type:"application/dash+xml"});return URL.createObjectURL(o)}try{const o=JSON.parse(t);if(o?.urls?.[0])return o.urls[0]}catch{const o=t.match(/https?:\/\/[\w\-.~:?#[@!$&'()*+,;=%/]+/);return o?o[0]:null}}catch(t){return console.error("Failed to decode manifest:",t),null}}deduplicateAlbums(e){const t=new Map;for(const o of e){const n=JSON.stringify([o.title,o.numberOfTracks||0]);if(t.has(n)){const r=t.get(n);if(o.explicit&&!r.explicit){t.set(n,o);continue}if(!o.explicit&&r.explicit)continue;const u=r.mediaMetadata?.tags?.length||0;(o.mediaMetadata?.tags?.length||0)>u&&t.set(n,o)}else t.set(n,o)}return Array.from(t.values())}async searchTracks(e,t={}){const o=await this.cache.get("search_tracks",e);if(o)return o;try{const r=await(await this.fetchWithRetry(`/search/?s=${encodeURIComponent(e)}`,t)).json(),u=this.normalizeSearchResponse(r,"tracks"),p={...u,items:u.items.map(m=>this.prepareTrack(m))};return await this.cache.set("search_tracks",e,p),p}catch(n){if(n.name==="AbortError")throw n;return console.error("Track search failed:",n),{items:[],limit:0,offset:0,totalNumberOfItems:0}}}async searchArtists(e,t={}){const o=await this.cache.get("search_artists",e);if(o)return o;try{const r=await(await this.fetchWithRetry(`/search/?a=${encodeURIComponent(e)}`,t)).json(),u=this.normalizeSearchResponse(r,"artists"),p={...u,items:u.items.map(m=>this.prepareArtist(m))};return await this.cache.set("search_artists",e,p),p}catch(n){if(n.name==="AbortError")throw n;return console.error("Artist search failed:",n),{items:[],limit:0,offset:0,totalNumberOfItems:0}}}async searchAlbums(e,t={}){const o=await this.cache.get("search_albums",e);if(o)return o;try{const r=await(await this.fetchWithRetry(`/search/?al=${encodeURIComponent(e)}`,t)).json(),u=this.normalizeSearchResponse(r,"albums"),p=u.items.map(g=>this.prepareAlbum(g)),m={...u,items:this.deduplicateAlbums(p)};return await this.cache.set("search_albums",e,m),m}catch(n){if(n.name==="AbortError")throw n;return console.error("Album search failed:",n),{items:[],limit:0,offset:0,totalNumberOfItems:0}}}async searchPlaylists(e,t={}){const o=await this.cache.get("search_playlists",e);if(o)return o;try{const r=await(await this.fetchWithRetry(`/search/?p=${encodeURIComponent(e)}`,t)).json(),u=this.normalizeSearchResponse(r,"playlists"),p={...u,items:u.items.map(m=>this.preparePlaylist(m))};return await this.cache.set("search_playlists",e,p),p}catch(n){if(n.name==="AbortError")throw n;return console.error("Playlist search failed:",n),{items:[],limit:0,offset:0,totalNumberOfItems:0}}}async getAlbum(e){const t=await this.cache.get("album",e);if(t)return t;const n=await(await this.fetchWithRetry(`/album/?id=${e}`)).json(),r=n.data||n;let u,p;if(r&&typeof r=="object"&&!Array.isArray(r)&&(("numberOfTracks"in r||"title"in r)&&(u=this.prepareAlbum(r)),"items"in r&&(p=r,!u&&r.items&&r.items.length>0))){const T=r.items[0],f=T.item||T;f&&f.album&&(u=this.prepareAlbum(f.album))}if(!u)throw new Error("Album not found");if(u&&!u.artist&&p?.items&&p.items.length>0){const T=p.items[0],f=T.item||T;f&&f.artist&&(u={...u,artist:f.artist})}if(u&&!u.releaseDate&&p?.items&&p.items.length>0){const T=p.items[0],f=T.item||T;f&&(f.album&&f.album.releaseDate?u={...u,releaseDate:f.album.releaseDate}:f.streamStartDate&&(u={...u,releaseDate:f.streamStartDate.split("T")[0]}))}let m=(p?.items||[]).map(T=>this.prepareTrack(T.item||T));if(u&&u.numberOfTracks>m.length){let T=m.length;const f=1e4;for(;m.length<u.numberOfTracks&&m.length<f;)try{const v=await(await this.fetchWithRetry(`/album/?id=${e}&offset=${T}&limit=500`)).json(),_=v.data||v;let x=[];if(_.items)x=_.items;else if(Array.isArray(_)){for(const oe of _)if(oe&&typeof oe=="object"&&"items"in oe&&Array.isArray(oe.items)){x=oe.items;break}}if(!x||x.length===0)break;const te=x.map(oe=>this.prepareTrack(oe.item||oe));if(te.length===0||m.length>0&&te[0].id===m[0].id)break;m.length>0&&(te[0].id,m[m.length-1].id),m=m.concat(te),T+=te.length}catch(c){console.error(`Error fetching album tracks at offset ${T}:`,c);break}}const g={album:u,tracks:m};return await this.cache.set("album",e,g),g}async getPlaylist(e){const t=await this.cache.get("playlist",e);if(t)return t;const n=await(await this.fetchWithRetry(`/playlist/?id=${e}`)).json(),r=n.data||n;let u=null,p=null;if(r.playlist&&(u=r.playlist),r.items&&(p={items:r.items}),!u||!p){const T=Array.isArray(r)?r:[r];for(const f of T)!f||typeof f!="object"||(!u&&("uuid"in f||"numberOfTracks"in f||"title"in f&&"id"in f)&&(u=f),!p&&"items"in f&&(p=f))}if(!u&&Array.isArray(r)){for(const T of r)if(T&&typeof T=="object"&&("uuid"in T||"numberOfTracks"in T)){u=T;break}}if(!u)throw new Error("Playlist not found");let m=(p?.items||[]).map(T=>this.prepareTrack(T.item||T));if(u.numberOfTracks>m.length){let T=m.length;const f=1e4;for(;m.length<u.numberOfTracks&&m.length<f;)try{const v=await(await this.fetchWithRetry(`/playlist/?id=${e}&offset=${T}`)).json(),_=v.data||v;let x=[];if(_.items)x=_.items;else if(Array.isArray(_)){for(const oe of _)if(oe&&typeof oe=="object"&&"items"in oe&&Array.isArray(oe.items)){x=oe.items;break}}if(!x||x.length===0)break;const te=x.map(oe=>this.prepareTrack(oe.item||oe));if(te.length===0||m.length>0&&te[0].id===m[0].id)break;m=m.concat(te),T+=te.length}catch(c){console.error(`Error fetching playlist tracks at offset ${T}:`,c);break}}const g={playlist:u,tracks:m};return await this.cache.set("playlist",e,g),g}async getMix(e){const t=await this.cache.get("mix",e);if(t)return t;const n=await(await this.fetchWithRetry(`/mix/?id=${e}`,{type:"api"})).json(),r=n.mix,u=n.items||[];if(!r)throw new Error("Mix metadata not found");const p=u.map(T=>this.prepareTrack(T.item||T)),g={mix:{id:r.id,title:r.title,subTitle:r.subTitle,description:r.description,mixType:r.mixType,cover:r.images?.LARGE?.url||r.images?.MEDIUM?.url||r.images?.SMALL?.url||null},tracks:p};return await this.cache.set("mix",e,g),g}async getArtist(e){const t=await this.cache.get("artist",e);if(t)return t;const[o,n]=await Promise.all([this.fetchWithRetry(`/artist/?id=${e}`),this.fetchWithRetry(`/artist/?f=${e}&skip_tracks=true`)]),r=await o.json();let u=r.data||r;const p=u.artist||(Array.isArray(u)?u[0]:u);if(!p)throw new Error("Primary artist details not found.");const m={...this.prepareArtist(p),picture:p.picture||u.cover||null,name:p.name||"Unknown Artist"},g=await n.json(),T=g.data||g,f=Array.isArray(T)?T:[T],c=new Map,v=new Map,_=re=>re?.id&&re.duration&&re.album,x=re=>re?.id&&"numberOfTracks"in re,te=(re,se=new Set)=>{if(!re||typeof re!="object"||se.has(re))return;if(se.add(re),Array.isArray(re)){re.forEach(ve=>te(ve,se));return}const he=re.item||re;x(he)&&c.set(he.id,this.prepareAlbum(he)),_(he)&&v.set(he.id,this.prepareTrack(he)),Object.values(re).forEach(ve=>te(ve,se))};f.forEach(re=>te(re));try{const re=await this.searchAlbums(m.name);if(re&&re.items){const se=Number(e);for(const he of re.items)(he.artist?.id===se||Array.isArray(he.artists)&&he.artists.some(Fe=>Fe.id===se))&&!c.has(he.id)&&c.set(he.id,he)}}catch(re){console.warn("Failed to fetch additional albums via search:",re)}const oe=Array.from(c.values()),Te=this.deduplicateAlbums(oe).sort((re,se)=>new Date(se.releaseDate||0)-new Date(re.releaseDate||0)),Se=Te.filter(re=>re.type==="EP"||re.type==="SINGLE"),Re=Te.filter(re=>!Se.includes(re)),Be=Array.from(v.values()).sort((re,se)=>(se.popularity||0)-(re.popularity||0)).slice(0,15),De={...m,albums:Re,eps:Se,tracks:Be};return await this.cache.set("artist",e,De),De}async getSimilarArtists(e){const t=await this.cache.get("similar_artists",e);if(t)return t;try{const n=await(await this.fetchWithRetry(`/artist/similar/?id=${e}`,{type:"api"})).json(),u=(n.artists||n.items||n.data||(Array.isArray(n)?n:[])).map(p=>this.prepareArtist(p));return await this.cache.set("similar_artists",e,u),u}catch(o){return console.warn("Failed to fetch similar artists:",o),[]}}async getSimilarAlbums(e){const t=await this.cache.get("similar_albums",e);if(t)return t;try{const n=await(await this.fetchWithRetry(`/album/similar/?id=${e}`,{type:"api"})).json(),u=(n.items||n.albums||n.data||(Array.isArray(n)?n:[])).map(p=>this.prepareAlbum(p));return await this.cache.set("similar_albums",e,u),u}catch(o){return console.warn("Failed to fetch similar albums:",o),[]}}async getRecommendedTracksForPlaylist(e,t=20){const o=new Map;for(const g of e)if(g.artist&&g.artist.id&&o.set(g.artist.id,g.artist),g.artists&&Array.isArray(g.artists))for(const T of g.artists)T.id&&o.set(T.id,T);if(o.size<3){console.log("Not enough artists from stored data, trying search approach...");for(const g of e.slice(0,5))try{const T=`"${g.title}" ${g.artist?.name||""}`.trim(),f=await this.searchTracks(T,{signal:AbortSignal.timeout(5e3)});if(f.items&&f.items.length>0){const c=f.items[0];if(c.artist&&c.artist.id&&o.set(c.artist.id,c.artist),c.artists&&Array.isArray(c.artists))for(const v of c.artists)v.id&&o.set(v.id,v)}}catch(T){console.warn(`Search failed for track "${g.title}":`,T)}}const n=Array.from(o.values());if(console.log(`Found ${n.length} unique artists from ${e.length} tracks`),n.length===0)return console.log("No artists found, cannot generate recommendations"),[];const r=[],u=new Set(e.map(g=>g.id)),p=n.slice(0,Math.min(5,n.length));console.log(`Processing ${p.length} artists for recommendations`);for(const g of p)try{console.log(`Fetching tracks for artist: ${g.name} (ID: ${g.id})`);const T=await this.getArtist(g.id);if(T&&T.tracks&&T.tracks.length>0){const f=T.tracks.filter(c=>!u.has(c.id)).slice(0,4);console.log(`Found ${f.length} new tracks from ${g.name}`),r.push(...f),u.add(...f.map(c=>c.id))}else console.warn(`No tracks found for artist ${g.name}`)}catch(T){console.warn(`Failed to get tracks for artist ${g.name}:`,T)}return console.log(`Total recommended tracks found: ${r.length}`),r.sort(()=>.5-Math.random()).slice(0,t)}normalizeTrackResponse(e){if(!e||typeof e!="object")return e;const t=e.data??e;return[{duration:t.duration??0,id:t.trackId??null},t]}async getTrack(e,t="LOSSLESS"){const o=`${e}_${t}`,n=await this.cache.get("track",o);if(n)return n;const u=await(await this.fetchWithRetry(`/track/?id=${e}&quality=${t}`,{type:"streaming"})).json(),p=this.parseTrackLookup(this.normalizeTrackResponse(u));return await this.cache.set("track",o,p),p}async getStreamUrl(e,t="LOSSLESS"){const o=`stream_${e}_${t}`;if(this.streamCache.has(o))return this.streamCache.get(o);const n=await this.getTrack(e,t);let r;if(n.originalTrackUrl)r=n.originalTrackUrl;else if(r=this.extractStreamUrlFromManifest(n.info.manifest),!r)throw new Error("Could not resolve stream URL");return this.streamCache.set(o,r),r}async downloadTrack(e,t="LOSSLESS",o,n={}){const{onProgress:r,track:u}=n;try{const p=await this.getTrack(e,t);let m,g;if(p.originalTrackUrl)m=p.originalTrackUrl;else if(m=this.extractStreamUrlFromManifest(p.info.manifest),!m)throw new Error("Could not resolve stream URL");if(m.startsWith("blob:"))try{g=await new rc().downloadDashStream(m,{signal:n.signal,onProgress:n.onProgress})}catch(T){if(console.error("DASH download failed:",T),t!=="LOSSLESS")return console.warn("Falling back to LOSSLESS (16-bit) download."),this.downloadTrack(e,"LOSSLESS",o,n);throw T}else{const T=await fetch(m,{cache:"no-store",signal:n.signal});if(!T.ok)throw new Error(`Fetch failed: ${T.status}`);const f=T.headers.get("Content-Length"),c=f?parseInt(f,10):0;let v=0;if(T.body&&r){const _=T.body.getReader(),x=[];for(;;){const{done:te,value:oe}=await _.read();if(te)break;oe&&(x.push(oe),v+=oe.byteLength,r({stage:"downloading",receivedBytes:v,totalBytes:c||void 0}))}g=new Blob(x,{type:T.headers.get("Content-Type")||"audio/flac"})}else g=await T.blob(),r&&r({stage:"downloading",receivedBytes:g.size,totalBytes:g.size})}u&&(r&&r({stage:"processing",message:"Adding metadata..."}),g=await ec(g,u,this,t)),this.triggerDownload(g,o)}catch(p){throw p.name==="AbortError"||(console.error("Download failed:",p),p.message===$u)?p:new Error("Download failed. The stream may require a proxy.")}}triggerDownload(e,t){const o=URL.createObjectURL(e),n=document.createElement("a");n.href=o,n.download=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(o)}getCoverUrl(e,t="320"){return e?`https://resources.tidal.com/images/${e.replace(/-/g,"/")}/${t}x${t}.jpg`:`https://picsum.photos/seed/${Math.random()}/${t}`}getArtistPictureUrl(e,t="320"){return e?typeof e=="string"&&(e.startsWith("blob:")||e.startsWith("assets/"))?e:`https://resources.tidal.com/images/${e.replace(/-/g,"/")}/${t}x${t}.jpg`:`https://picsum.photos/seed/${Math.random()}/${t}`}async clearCache(){await this.cache.clear(),this.streamCache.clear()}getCacheStats(){return{...this.cache.getCacheStats(),streamUrls:this.streamCache.size}}}const Zm="modulepreload",eg=function(h,e){return new URL(h,e).href},xu={},aa=function(e,t,o){let n=Promise.resolve();if(t&&t.length>0){let g=function(T){return Promise.all(T.map(f=>Promise.resolve(f).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};const u=document.getElementsByTagName("link"),p=document.querySelector("meta[property=csp-nonce]"),m=p?.nonce||p?.getAttribute("nonce");n=g(t.map(T=>{if(T=eg(T,o),T in xu)return;xu[T]=!0;const f=T.endsWith(".css"),c=f?'[rel="stylesheet"]':"";if(o)for(let _=u.length-1;_>=0;_--){const x=u[_];if(x.href===T&&(!f||x.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${T}"]${c}`))return;const v=document.createElement("link");if(v.rel=f?"stylesheet":Zm,f||(v.as="script"),v.crossOrigin="",v.href=T,m&&v.setAttribute("nonce",m),document.head.appendChild(v),f)return new Promise((_,x)=>{v.addEventListener("load",_),v.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${T}`)))})}))}function r(u){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=u,window.dispatchEvent(p),!p.defaultPrevented)throw u}return n.then(u=>{for(const p of u||[])p.status==="rejected"&&r(p.reason);return e().catch(r)})},ei=new Map,Or=new Map,Is=new Set;let da=null;async function ic(){try{return await aa(()=>import("https://cdn.jsdelivr.net/npm/client-zip@2.4.5/+esm"),[],import.meta.url)}catch(h){throw console.error("Failed to load client-zip:",h),new Error("Failed to load ZIP library")}}function Bs(){return da||(da=document.createElement("div"),da.id="download-notifications",document.body.appendChild(da)),da}function Jn(h){const e=Bs(),t=document.createElement("div");t.className="download-task",t.innerHTML=`
        <div style="display: flex; align-items: start;">
            ${h}
        </div>
    `,e.appendChild(t),setTimeout(()=>{t.style.animation="slide-out 0.3s ease forwards",setTimeout(()=>t.remove(),300)},1500)}function sc(h,e,t,o,n){const r=Bs(),u=document.createElement("div");u.className="download-task",u.dataset.trackId=h;const p=za(e),m=Da(e);return u.innerHTML=`
        <div style="display: flex; align-items: start; gap: 0.75rem;">
            <img src="${o.getCoverUrl(e.album?.cover)}"
                 style="width: 40px; height: 40px; border-radius: 4px; flex-shrink: 0;">
            <div style="flex: 1; min-width: 0;">
                <div style="font-weight: 500; font-size: 0.9rem; margin-bottom: 0.25rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${p}</div>
                <div style="font-size: 0.8rem; color: var(--muted-foreground); margin-bottom: 0.5rem;">${m}</div>
                <div class="download-progress-bar" style="height: 4px; background: var(--secondary); border-radius: 2px; overflow: hidden;">
                    <div class="download-progress-fill" style="width: 0%; height: 100%; background: var(--highlight); transition: width 0.2s;"></div>
                </div>
                <div class="download-status" style="font-size: 0.75rem; color: var(--muted-foreground); margin-top: 0.25rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Starting...</div>
            </div>
            <button class="download-cancel" style="background: transparent; border: none; color: var(--muted-foreground); cursor: pointer; padding: 4px; border-radius: 4px; transition: all 0.2s;">
                ${Bi}
            </button>
        </div>
    `,r.appendChild(u),ei.set(h,{taskEl:u,abortController:n}),u.querySelector(".download-cancel").addEventListener("click",()=>{n.abort(),Pi(h)}),{taskEl:u,abortController:n}}function oc(h,e){const t=ei.get(h);if(!t)return;const{taskEl:o}=t,n=o.querySelector(".download-progress-fill"),r=o.querySelector(".download-status");if(e.stage==="downloading"){const u=e.totalBytes?Math.round(e.receivedBytes/e.totalBytes*100):0;n.style.width=`${u}%`;const p=(e.receivedBytes/(1024*1024)).toFixed(1),m=e.totalBytes?(e.totalBytes/(1024*1024)).toFixed(1):"?";r.textContent=`Downloading: ${p}MB / ${m}MB (${u}%)`}}function Ps(h,e=!0,t=null){const o=ei.get(h);if(!o)return;const{taskEl:n}=o,r=n.querySelector(".download-progress-fill"),u=n.querySelector(".download-status"),p=n.querySelector(".download-cancel");e?(r.style.width="100%",r.style.background="#10b981",u.textContent="✓ Downloaded",u.style.color="#10b981",p.remove(),setTimeout(()=>Pi(h),3e3)):(r.style.background="#ef4444",u.textContent=t||"✗ Download failed",u.style.color="#ef4444",p.innerHTML=`
            ${Bi}
        `,p.onclick=()=>Pi(h),setTimeout(()=>Pi(h),5e3))}function Pi(h){const e=ei.get(h);if(!e)return;const{taskEl:t}=e;t.style.animation="slide-out 0.3s ease forwards",setTimeout(()=>{t.remove(),ei.delete(h),da&&da.children.length===0&&(da.remove(),da=null)},300)}function js(h){Or.get(h)&&(h.style.animation="slide-out 0.3s ease forwards",setTimeout(()=>{h.remove(),Or.delete(h),da&&da.children.length===0&&(da.remove(),da=null)},300))}async function qi(h,e,t,o=null,n=null){let r={...h,artist:h.artist||(h.artists&&h.artists.length>0?h.artists[0]:null)};if(r.album&&(!r.album.title||!r.album.artist)&&r.album.id)try{const g=await t.getAlbum(r.album.id);g.album&&(r.album={...r.album,...g.album})}catch(g){console.warn("Failed to fetch album data for metadata:",g)}const u=await t.getTrack(h.id,e);let p;if(u.originalTrackUrl)p=u.originalTrackUrl;else if(p=t.extractStreamUrlFromManifest(u.info.manifest),!p)throw new Error("Could not resolve stream URL");let m;if(p.startsWith("blob:"))try{m=await new rc().downloadDashStream(p,{signal:n})}catch(g){if(console.error("DASH download failed:",g),e!=="LOSSLESS")return console.warn("Falling back to LOSSLESS (16-bit) download."),qi(h,"LOSSLESS",t,o,n);throw g}else{const g=await fetch(p,{signal:n});if(!g.ok)throw new Error(`Failed to fetch track: ${g.status}`);m=await g.blob()}return m=await ec(m,r,t,e),m}function Du(h,e){const t=URL.createObjectURL(h),o=document.createElement("a");o.href=t,o.download=e,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(t)}async function lc(h,e,t,o,n){const{abortController:r}=Or.get(n),u=r.signal;for(let p=0;p<h.length&&!u.aborted;p++){const m=h[p],g=za(m),T=ni(m,t);Ui(n,p,h.length,g);try{const f=await qi(m,t,e,null,u);if(Du(f,T),o&&Mr.shouldDownloadLyrics())try{const c=await o.fetchLyrics(m.id,m);if(c){const v=o.generateLRCContent(c,m);if(v){const _=T.replace(/\.[^.]+$/,".lrc"),x=new Blob([v],{type:"text/plain"});Du(x,_)}}}catch{}}catch(f){if(f.name==="AbortError")throw f;console.error(`Failed to download track ${g}:`,f)}}}async function tg(h,e,t,o,n,r,u,p=null){const{abortController:m}=Or.get(r),g=m.signal,{downloadZip:T}=await ic(),f=await u.createWritable();async function*c(){p&&(yield{name:`${e}/cover.jpg`,lastModified:new Date,input:p});for(let v=0;v<h.length&&!g.aborted;v++){const _=h[v],x=za(_),te=ni(_,o);Ui(r,v,h.length,x);try{const oe=await qi(_,o,t,null,g);if(yield{name:`${e}/${te}`,lastModified:new Date,input:oe},n&&Mr.shouldDownloadLyrics())try{const Te=await n.fetchLyrics(_.id,_);if(Te){const Se=n.generateLRCContent(Te,_);if(Se){const Re=te.replace(/\.[^.]+$/,".lrc");yield{name:`${e}/${Re}`,lastModified:new Date,input:Se}}}}catch{}}catch(oe){if(oe.name==="AbortError")throw oe;console.error(`Failed to download track ${x}:`,oe)}}}try{await T(c()).body.pipeTo(f)}catch(v){if(v.name==="AbortError")return;throw v}}async function qs(h,e,t,o,n,r,u,p=null){const m=dc(r,u,h.length);try{if(window.showSaveFilePicker&&!Fi.shouldForceIndividual())try{const T=await window.showSaveFilePicker({suggestedName:`${e}.zip`,types:[{description:"ZIP Archive",accept:{"application/zip":[".zip"]}}]});await tg(h,e,t,o,n,m,T,p),xr(m,!0)}catch(T){if(T.name==="AbortError"){js(m);return}throw T}else await lc(h,t,o,n,m),xr(m,!0)}catch(g){console.error("Bulk download failed:",g),xr(m,!1,g.message)}}async function ng(h,e,t,o=null){const n=`Queue - ${new Date().toISOString().slice(0,10)}`;await qs(h,n,e,t,o,"queue","Queue")}async function uc(h,e,t,o,n=null){const r=h.releaseDate||(e[0]?.streamStartDate?e[0].streamStartDate.split("T")[0]:""),u=r?new Date(r):null,p=u&&!isNaN(u.getTime())?u.getFullYear():"",m=ji(localStorage.getItem("zip-folder-template")||"{albumTitle} - {albumArtist}",{albumTitle:h.title,albumArtist:h.artist?.name,year:p}),g=await ai(t,h.cover||h.album?.cover||h.coverId);await qs(e,m,t,o,n,"album",h.title,g)}async function Os(h,e,t,o,n=null){const r=ji(localStorage.getItem("zip-folder-template")||"{albumTitle} - {albumArtist}",{albumTitle:h.title,albumArtist:"Playlist",year:new Date().getFullYear()}),u=e.find(m=>m.album?.cover),p=await ai(t,u?.album?.cover);await qs(e,r,t,o,n,"playlist",h.title,p)}async function cc(h,e,t,o,n=null){const r=`${Ar(h.name)} discography`,u=dc("discography",h.name,e.length),{abortController:p}=Or.get(u),m=p.signal;try{if(window.showSaveFilePicker&&!Fi.shouldForceIndividual()){const f=await(await window.showSaveFilePicker({suggestedName:`${r}.zip`,types:[{description:"ZIP Archive",accept:{"application/zip":[".zip"]}}]})).createWritable(),{downloadZip:c}=await ic();async function*v(){for(let x=0;x<e.length&&!m.aborted;x++){const te=e[x];Ui(u,x,e.length,te.title);try{const{album:oe,tracks:Te}=await t.getAlbum(te.id),Se=await ai(t,oe.cover||te.cover),Re=oe.releaseDate||(Te[0]?.streamStartDate?Te[0].streamStartDate.split("T")[0]:""),Be=Re?new Date(Re):null,De=Be&&!isNaN(Be.getTime())?Be.getFullYear():"",re=ji(localStorage.getItem("zip-folder-template")||"{albumTitle} - {albumArtist}",{albumTitle:oe.title,albumArtist:oe.artist?.name,year:De}),se=`${r}/${re}`;Se&&(yield{name:`${se}/cover.jpg`,lastModified:new Date,input:Se});for(const he of Te){if(m.aborted)break;const ve=ni(he,o);try{const ke=await qi(he,o,t,null,m);if(yield{name:`${se}/${ve}`,lastModified:new Date,input:ke},n&&Mr.shouldDownloadLyrics())try{const Fe=await n.fetchLyrics(he.id,he);if(Fe){const ye=n.generateLRCContent(Fe,he);if(ye){const Qe=ve.replace(/\.[^.]+$/,".lrc");yield{name:`${se}/${Qe}`,lastModified:new Date,input:ye}}}}catch{}}catch(ke){if(ke.name==="AbortError")throw ke;console.error(`Failed to download track ${he.title}:`,ke)}}}catch(oe){if(oe.name==="AbortError")throw oe;console.error(`Failed to download album ${te.title}:`,oe)}}}await c(v()).body.pipeTo(f),xr(u,!0)}else{for(let T=0;T<e.length&&!m.aborted;T++){const f=e[T];Ui(u,T,e.length,f.title);const{tracks:c}=await t.getAlbum(f.id);await lc(c,t,o,n,u)}xr(u,!0)}}catch(g){if(g.name==="AbortError"){js(u);return}xr(u,!1,g.message)}}function dc(h,e,t){const o=Bs(),n=document.createElement("div");n.className="download-task bulk-download",n.dataset.bulkType=h,n.dataset.bulkName=e;const r=h==="album"?"Album":h==="playlist"?"Playlist":"Discography";n.innerHTML=`
        <div style="display: flex; align-items: start; gap: 0.75rem;">
            <div style="flex: 1; min-width: 0;">
                <div style="font-weight: 600; font-size: 0.95rem; margin-bottom: 0.25rem;">
                    Downloading ${r}
                </div>
                <div style="font-size: 0.85rem; color: var(--muted-foreground); margin-bottom: 0.5rem; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">${e}</div>
                <div class="download-progress-bar" style="height: 4px; background: var(--secondary); border-radius: 2px; overflow: hidden;">
                    <div class="download-progress-fill" style="width: 0%; height: 100%; background: var(--highlight); transition: width 0.2s;"></div>
                </div>
                <div class="download-status" style="font-size: 0.75rem; color: var(--muted-foreground); margin-top: 0.25rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">Starting...</div>
            </div>
            <button class="download-cancel" style="background: transparent; border: none; color: var(--muted-foreground); cursor: pointer; padding: 4px; border-radius: 4px; transition: all 0.2s;">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
            </button>
        </div>
    `,o.appendChild(n);const u=new AbortController;return Or.set(n,{abortController:u}),n.querySelector(".download-cancel").addEventListener("click",()=>{u.abort(),js(n)}),n}function Ui(h,e,t,o){const n=h.querySelector(".download-progress-fill"),r=h.querySelector(".download-status"),u=t>0?Math.round(e/t*100):0;n.style.width=`${u}%`,r.textContent=`${e}/${t} - ${o}`}function xr(h,e=!0,t=null){const o=h.querySelector(".download-progress-fill"),n=h.querySelector(".download-status");e?(o.style.width="100%",o.style.background="#10b981",n.textContent="✓ Download complete",n.style.color="#10b981",setTimeout(()=>{h.style.animation="slide-out 0.3s ease forwards",setTimeout(()=>h.remove(),300)},3e3)):(o.style.background="#ef4444",n.textContent=t||"✗ Download failed",n.style.color="#ef4444",setTimeout(()=>{h.style.animation="slide-out 0.3s ease forwards",setTimeout(()=>h.remove(),300)},5e3))}async function fc(h,e,t,o=null,n=null){if(!h){alert("No track is currently playing");return}const r=`track-${h.id}`;if(Is.has(r)){Jn("This track is already being downloaded");return}let u={...h,artist:h.artist||(h.artists&&h.artists.length>0?h.artists[0]:null)};if(u.album&&(!u.album.title||!u.album.artist)&&u.album.id)try{const g=await t.getAlbum(u.album.id);g.album&&(u.album={...u.album,...g.album})}catch(g){console.warn("Failed to fetch album data for metadata:",g)}const p=ni(u,e),m=n||new AbortController;Is.add(r);try{if(sc(h.id,u,p,t,m),await t.downloadTrack(h.id,e,p,{signal:m.signal,track:u,onProgress:g=>{oc(h.id,g)}}),Ps(h.id,!0),o&&Mr.shouldDownloadLyrics())try{const g=await o.fetchLyrics(h.id,h);g&&o.downloadLRC(g,h)}catch{console.log("Could not download lyrics for track")}}catch(g){if(g.name!=="AbortError"){const T=g.message===$u?g.message:"Download failed. Please try again.";Ps(h.id,!1,T)}}finally{Is.delete(r)}}const Ni=Object.freeze(Object.defineProperty({__proto__:null,addDownloadTask:sc,completeDownloadTask:Ps,downloadAlbumAsZip:uc,downloadDiscography:cc,downloadPlaylistAsZip:Os,downloadTrackWithMetadata:fc,downloadTracks:ng,showNotification:Jn,updateDownloadProgress:oc},Symbol.toStringTag,{value:"Module"}));class ag{constructor(){this.panel=document.getElementById("side-panel"),this.titleElement=document.getElementById("side-panel-title"),this.controlsElement=document.getElementById("side-panel-controls"),this.contentElement=document.getElementById("side-panel-content"),this.currentView=null}open(e,t,o,n,r=!1){if(!r&&this.currentView===e&&this.panel.classList.contains("active")){this.close();return}this.currentView=e,this.panel.dataset.view=e,this.titleElement.textContent=t,this.controlsElement.innerHTML="",this.contentElement.innerHTML="",o&&o(this.controlsElement),n&&n(this.contentElement),this.panel.classList.add("active")}close(){this.panel.classList.remove("active"),this.currentView=null,setTimeout(()=>{this.panel.classList.contains("active")||(this.controlsElement.innerHTML="",this.contentElement.innerHTML="")},300)}isActive(e){return this.currentView===e&&this.panel.classList.contains("active")}refresh(e,t,o){this.isActive(e)&&(t&&(this.controlsElement.innerHTML="",t(this.controlsElement)),o&&(this.contentElement.innerHTML="",o(this.contentElement)))}updateContent(e,t){this.isActive(e)&&(this.contentElement.innerHTML="",t(this.contentElement))}}const $n=new ag;class mc{constructor(e){this.api=e,this.currentLyrics=null,this.syncedLyrics=[],this.lyricsCache=new Map,this.componentLoaded=!1,this.amLyricsElement=null,this.animationFrameId=null,this.currentTrackId=null,this.mutationObserver=null,this.romajiObserver=null,this.isRomajiMode=!1,this.originalLyricsData=null,this.kuroshiroLoaded=!1,this.kuroshiroLoading=!1,this.romajiTextCache=new Map,this.convertedTracksCache=new Set}async loadKuroshiro(){if(this.kuroshiroLoaded)return!0;if(this.kuroshiroLoading)return new Promise(e=>{const t=setInterval(()=>{this.kuroshiroLoading||(clearInterval(t),e(this.kuroshiroLoaded))},100)});this.kuroshiroLoading=!0;try{window._originalXHROpen||(window._originalXHROpen=XMLHttpRequest.prototype.open,XMLHttpRequest.prototype.open=function(o,n,...r){const u=n.toString();if(u.includes("/dict/")&&u.includes(".dat.gz")){const m=`https://cdn.jsdelivr.net/npm/kuromoji@0.1.2/dict/${u.split("/").pop()}`;return window._originalXHROpen.call(this,o,m,...r)}return window._originalXHROpen.call(this,o,n,...r)}),window._originalFetch||(window._originalFetch=window.fetch,window.fetch=async(o,n)=>{const r=o.toString();if(r.includes("/dict/")&&r.includes(".dat.gz")){const u=r.split("/").pop(),p=`https://cdn.jsdelivr.net/npm/kuromoji@0.1.2/dict/${u}`;return console.log(`Redirecting dict fetch: ${u} -> CDN`),window._originalFetch(p,n)}return window._originalFetch(o,n)}),window.Kuroshiro||await this.loadScript("https://unpkg.com/kuroshiro@1.2.0/dist/kuroshiro.min.js"),window.KuromojiAnalyzer||await this.loadScript("https://unpkg.com/kuroshiro-analyzer-kuromoji@1.1.0/dist/kuroshiro-analyzer-kuromoji.min.js");const e=window.Kuroshiro.default||window.Kuroshiro,t=window.KuromojiAnalyzer.default||window.KuromojiAnalyzer;return this.kuroshiro=new e,await this.kuroshiro.init(new t({dictPath:"/dict/"})),this.kuroshiroLoaded=!0,this.kuroshiroLoading=!1,console.log("✓ Kuroshiro loaded and initialized successfully"),!0}catch(e){return console.error("✗ Failed to load Kuroshiro:",e),this.kuroshiroLoaded=!1,this.kuroshiroLoading=!1,!1}}loadScript(e){return new Promise((t,o)=>{if(document.querySelector(`script[src="${e}"]`)){t();return}const n=document.createElement("script");n.src=e,n.onload=t,n.onerror=()=>o(new Error(`Failed to load script: ${e}`)),document.head.appendChild(n)})}containsJapanese(e){return e?/[\u3040-\u30FF\u31F0-\u9FFF]/.test(e):!1}async convertToRomaji(e){if(!e)return e;if(this.romajiTextCache.has(e))return this.romajiTextCache.get(e);if(!this.kuroshiroLoaded&&!await this.loadKuroshiro()||!this.kuroshiro)return console.warn("Kuroshiro not available, skipping conversion"),e;try{const t=await this.kuroshiro.convert(e,{to:"romaji",mode:"spaced",romajiSystem:"hepburn"});return this.romajiTextCache.set(e,t),t}catch(t){return console.warn("Romaji conversion failed for text:",e.substring(0,30),t),e}}setRomajiMode(e){this.isRomajiMode=e;try{localStorage.setItem("lyricsRomajiMode",e?"true":"false")}catch(t){console.warn("Failed to save Romaji mode preference:",t)}}getRomajiMode(){try{return localStorage.getItem("lyricsRomajiMode")==="true"}catch{return!1}}async ensureComponentLoaded(){if(!this.componentLoaded){if(typeof customElements<"u"&&customElements.get("am-lyrics")){this.componentLoaded=!0;return}return new Promise((e,t)=>{const o=document.createElement("script");o.type="module",o.src="https://cdn.jsdelivr.net/npm/@uimaxbai/am-lyrics@0.6.2/dist/src/am-lyrics.min.js",o.onload=()=>{typeof customElements<"u"?customElements.whenDefined("am-lyrics").then(()=>{this.componentLoaded=!0,e()}).catch(t):e()},o.onerror=()=>t(new Error("Failed to load lyrics component")),document.head.appendChild(o)})}}async fetchLyrics(e,t=null){if(t){if(this.lyricsCache.has(e))return this.lyricsCache.get(e);try{const o=Array.isArray(t.artists)?t.artists.map(g=>g.name||g).join(", "):t.artist?.name||"",n=t.title||"",r=t.album?.title||"",u=t.duration?Math.round(t.duration):null;if(!n||!o)return console.warn("Missing required fields for LRCLIB"),null;const p=new URLSearchParams({track_name:n,artist_name:o});r&&p.append("album_name",r),u&&p.append("duration",u.toString());const m=await fetch(`https://lrclib.net/api/get?${p.toString()}`);if(m.ok){const g=await m.json();if(g.syncedLyrics){const T={subtitles:g.syncedLyrics,lyricsProvider:"LRCLIB"};return this.lyricsCache.set(e,T),T}}}catch(o){console.warn("LRCLIB fetch failed:",o)}}return null}parseSyncedLyrics(e){return e?e.split(`
`).filter(o=>o.trim()).map(o=>{const n=o.match(/\[(\d+):(\d+)\.(\d+)\]\s*(.+)/);if(n){const[,r,u,p,m]=n;return{time:parseInt(r)*60+parseInt(u)+parseInt(p)/100,text:m.trim()}}return null}).filter(Boolean):[]}generateLRCContent(e,t){if(!e||!e.subtitles)return null;const o=za(t),n=Da(t);let r=`[ti:${o}]
`;return r+=`[ar:${n}]
`,r+=`[al:${t.album?.title||"Unknown Album"}]
`,r+=`[by:${e.lyricsProvider||"Unknown"}]
`,r+=`
`,r+=e.subtitles,r}downloadLRC(e,t){const o=this.generateLRCContent(e,t);if(!o){alert("No synced lyrics available for this track");return}const n=new Blob([o],{type:"application/octet-stream"}),r=URL.createObjectURL(n),u=document.createElement("a");u.href=r,u.download=ni(t,"LOSSLESS").replace(/\.flac$/,".lrc"),document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(r)}getCurrentLine(e){if(!this.syncedLyrics||this.syncedLyrics.length===0)return-1;let t=-1;for(let o=0;o<this.syncedLyrics.length&&e>=this.syncedLyrics[o].time;o++)t=o;return t}setupLyricsObserver(e){if(this.stopLyricsObserver(),!e)return;const t=e.shadowRoot||e;this.romajiObserver=new MutationObserver(o=>{o.some(r=>r.type==="childList"&&r.addedNodes.length>0?!0:r.type==="characterData"&&r.target.textContent?this.containsJapanese(r.target.textContent):!1)&&(this.observerTimeout&&clearTimeout(this.observerTimeout),this.observerTimeout=setTimeout(async()=>{await this.convertLyricsContent(e)},100))}),this.romajiObserver.observe(t,{childList:!0,subtree:!0,characterData:!0,attributes:!1}),this.isRomajiMode&&this.convertLyricsContent(e)}async convertLyricsContent(e){if(!e||!this.isRomajiMode)return;const t=e.shadowRoot||e;if(!this.kuroshiroLoaded&&!await this.loadKuroshiro()){console.warn("Cannot convert lyrics - Kuroshiro load failed");return}const o=[],n=document.createTreeWalker(t,NodeFilter.SHOW_TEXT,null,!1);let r;for(;r=n.nextNode();)o.push(r);for(const u of o){if(!u.parentElement)continue;const p=u.parentElement.tagName?.toLowerCase(),m=String(u.parentElement.className||"");if(["script","style","code","input","textarea","time"].includes(p))continue;const T=u.textContent;if(!(m.includes("progress")&&!m.includes("progress-text")||m.includes("time")&&!m.includes("progress-text")||m.includes("timestamp"))&&!(!T||T.trim().length===0)&&this.containsJapanese(T)){const f=await this.convertToRomaji(T);f&&f!==T&&(u.textContent=f)}}this.currentTrackId&&this.convertedTracksCache.add(this.currentTrackId)}stopLyricsObserver(){this.romajiObserver&&(this.romajiObserver.disconnect(),this.romajiObserver=null),this.observerTimeout&&(clearTimeout(this.observerTimeout),this.observerTimeout=null)}async toggleRomajiMode(e){return this.isRomajiMode=!this.isRomajiMode,this.setRomajiMode(this.isRomajiMode),e&&(this.isRomajiMode?(this.setupLyricsObserver(e),await this.convertLyricsContent(e)):this.stopLyricsObserver()),this.isRomajiMode}}function Oi(h,e,t,o=!1){const n=t||new mc;!n.kuroshiroLoaded&&!n.kuroshiroLoading&&n.loadKuroshiro().catch(p=>{console.warn("Failed to load Kuroshiro for Romaji conversion:",p)});const r=p=>{const m=n.getRomajiMode();n.isRomajiMode=m,p.innerHTML=`
            <button id="close-side-panel-btn" class="btn-icon" title="Close">
                ${Bi}
            </button>
            <button id="romaji-toggle-btn" class="btn-icon" title="Toggle Romaji (Japanese to Latin)" data-enabled="${m}" style="color: ${m?"var(--primary)":""}">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <circle cx="12" cy="12" r="10"></circle>
                    <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                </svg>
            </button>
        `,p.querySelector("#close-side-panel-btn").addEventListener("click",()=>{$n.close(),ti(e,$n.panel)});const g=p.querySelector("#romaji-toggle-btn");if(g){const T=()=>{const f=n.isRomajiMode;g.setAttribute("data-enabled",f),g.style.color=f?"var(--primary)":""};T(),g.addEventListener("click",async()=>{const f=$n.panel.querySelector("am-lyrics");f&&(await n.toggleRomajiMode(f),T())})}},u=async p=>{ti(e,$n.panel),await rg(p,h,e,n),p.lyricsCleanup&&($n.panel.lyricsCleanup=p.lyricsCleanup,$n.panel.lyricsManager=p.lyricsManager)};$n.open("lyrics","Lyrics",r,u,o)}async function rg(h,e,t,o){h.innerHTML='<div class="lyrics-loading">Loading lyrics...</div>';try{await o.ensureComponentLoaded(),o.isRomajiMode=o.getRomajiMode(),o.currentTrackId=e.id;const n=e.title,r=Da(e),u=e.album?.title,p=e.duration?Math.round(e.duration*1e3):void 0,m=e.isrc||"";h.innerHTML="";const g=document.createElement("am-lyrics");g.setAttribute("song-title",n),g.setAttribute("song-artist",r),u&&g.setAttribute("song-album",u),p&&g.setAttribute("song-duration",p),g.setAttribute("query",`${n} ${r}`.trim()),m&&g.setAttribute("isrc",m),g.setAttribute("highlight-color","#93c5fd"),g.setAttribute("hover-background-color","rgba(59, 130, 246, 0.14)"),g.setAttribute("autoscroll",""),g.setAttribute("interpolate",""),g.style.height="100%",g.style.width="100%",h.appendChild(g),o.setupLyricsObserver(g),o.isRomajiMode&&!o.kuroshiroLoaded&&await o.loadKuroshiro(),await new Promise(c=>{const v=()=>g.querySelector(".lyric-line, [class*='lyric']")||g.shadowRoot&&g.shadowRoot.querySelector("[class*='lyric']")||g.textContent&&g.textContent.length>50;if(v()){c();return}let _=0;const x=25,te=setInterval(()=>{_++,(v()||_>=x)&&(clearInterval(te),c())},200)}),o.isRomajiMode&&(await o.convertLyricsContent(g),setTimeout(()=>o.convertLyricsContent(g),500));const f=ig(e,t,g);return h.lyricsCleanup=f,h.lyricsManager=o,g}catch(n){return console.error("Failed to load lyrics:",n),h.innerHTML='<div class="lyrics-error">Failed to load lyrics</div>',null}}function ig(h,e,t){let o=0,n=performance.now(),r=null;const u=()=>{const f=e.currentTime*1e3;o=f,n=performance.now(),t.currentTime=f},p=()=>{if(!e.paused){const c=performance.now()-n,v=o+c;t.currentTime=v,r=requestAnimationFrame(p)}},m=()=>{o=e.currentTime*1e3,n=performance.now(),p()},g=()=>{r&&(cancelAnimationFrame(r),r=null)},T=f=>{f.detail&&f.detail.timestamp&&(e.currentTime=f.detail.timestamp/1e3,e.play())};return e.addEventListener("timeupdate",u),e.addEventListener("play",m),e.addEventListener("pause",g),e.addEventListener("seeked",u),t.addEventListener("line-click",T),e.paused||p(),()=>{r&&cancelAnimationFrame(r),e.removeEventListener("timeupdate",u),e.removeEventListener("play",m),e.removeEventListener("pause",g),e.removeEventListener("seeked",u),t.removeEventListener("line-click",T)}}function ti(h,e){e&&e.lyricsCleanup&&(e.lyricsCleanup(),e.lyricsCleanup=null),e&&e.lyricsManager&&e.lyricsManager.stopLyricsObserver()}class gc{constructor(){this.dbName="MonochromeDB",this.version=6,this.db=null}async open(){return this.db?this.db:new Promise((e,t)=>{const o=indexedDB.open(this.dbName,this.version);o.onerror=n=>{console.error("Database error:",n.target.error),t(n.target.error)},o.onsuccess=n=>{this.db=n.target.result,e(this.db)},o.onupgradeneeded=n=>{const r=n.target.result;r.objectStoreNames.contains("favorites_tracks")||r.createObjectStore("favorites_tracks",{keyPath:"id"}).createIndex("addedAt","addedAt",{unique:!1}),r.objectStoreNames.contains("favorites_albums")||r.createObjectStore("favorites_albums",{keyPath:"id"}).createIndex("addedAt","addedAt",{unique:!1}),r.objectStoreNames.contains("favorites_artists")||r.createObjectStore("favorites_artists",{keyPath:"id"}).createIndex("addedAt","addedAt",{unique:!1}),r.objectStoreNames.contains("favorites_playlists")||r.createObjectStore("favorites_playlists",{keyPath:"uuid"}).createIndex("addedAt","addedAt",{unique:!1}),r.objectStoreNames.contains("favorites_mixes")||r.createObjectStore("favorites_mixes",{keyPath:"id"}).createIndex("addedAt","addedAt",{unique:!1}),r.objectStoreNames.contains("history_tracks")||r.createObjectStore("history_tracks",{keyPath:"timestamp"}).createIndex("timestamp","timestamp",{unique:!0}),r.objectStoreNames.contains("user_playlists")||r.createObjectStore("user_playlists",{keyPath:"id"}).createIndex("createdAt","createdAt",{unique:!1}),r.objectStoreNames.contains("settings")||r.createObjectStore("settings")}})}async performTransaction(e,t,o){const n=await this.open();return new Promise((r,u)=>{const p=n.transaction(e,t),m=p.objectStore(e),g=o(m);p.oncomplete=()=>{r(g?.result)},p.onerror=T=>{u(T.target.error)}})}async addToHistory(e){const t="history_tracks",n={...this._minifyItem("track",e),timestamp:Date.now()};return(await this.open()).transaction(t,"readwrite").objectStore(t).put(n),n}async getHistory(){const e="history_tracks",t=await this.open();return new Promise((o,n)=>{const m=t.transaction(e,"readonly").objectStore(e).index("timestamp").getAll();m.onsuccess=()=>{o(m.result.reverse())},m.onerror=()=>n(m.error)})}async toggleFavorite(e,t){const n=`favorites_${e==="mix"?"mixes":`${e}s`}`,r=e==="playlist"?t.uuid:t.id;if(await this.isFavorite(e,r))return await this.performTransaction(n,"readwrite",p=>p.delete(r)),!1;{const m={...this._minifyItem(e,t),addedAt:Date.now()};return await this.performTransaction(n,"readwrite",g=>g.put(m)),!0}}async isFavorite(e,t){const n=`favorites_${e==="mix"?"mixes":`${e}s`}`;try{return!!await this.performTransaction(n,"readonly",u=>u.get(t))}catch{return!1}}async getFavorites(e){const o=`favorites_${e==="mix"?"mixes":`${e}s`}`,n=await this.open();return new Promise((r,u)=>{const g=n.transaction(o,"readonly").objectStore(o).getAll();g.onsuccess=()=>{const T=g.result;T.sort((f,c)=>{const v=f.addedAt||0;return(c.addedAt||0)-v}),r(T)},g.onerror=()=>u(g.error)})}_minifyItem(e,t){if(!t)return t;const o={id:t.id,addedAt:t.addedAt||null};return e==="track"?{...o,title:t.title||null,duration:t.duration||null,explicit:t.explicit||!1,artist:t.artist||(t.artists&&t.artists.length>0?t.artists[0]:null)||null,artists:t.artists?.map(n=>({id:n.id,name:n.name||null}))||[],album:t.album?{id:t.album.id,title:t.album.title||null,cover:t.album.cover||null,releaseDate:t.album.releaseDate||null,vibrantColor:t.album.vibrantColor||null,artist:t.album.artist||null,numberOfTracks:t.album.numberOfTracks||null}:null,copyright:t.copyright||null,isrc:t.isrc||null,trackNumber:t.trackNumber||null,streamStartDate:t.streamStartDate||null,version:t.version||null,mixes:t.mixes||null}:e==="album"?{...o,title:t.title||null,cover:t.cover||null,releaseDate:t.releaseDate||null,explicit:t.explicit||!1,artist:t.artist?{name:t.artist.name||null,id:t.artist.id}:t.artists?.[0]?{name:t.artists[0].name||null,id:t.artists[0].id}:null,type:t.type||null,numberOfTracks:t.numberOfTracks||null}:e==="artist"?{...o,name:t.name||null,picture:t.picture||t.image||null}:e==="playlist"?{uuid:t.uuid||t.id,addedAt:t.addedAt||t.createdAt||null,title:t.title||t.name||null,image:t.image||t.squareImage||t.cover||null,numberOfTracks:t.numberOfTracks||(t.tracks?t.tracks.length:0),user:t.user?{name:t.user.name||null}:null}:e==="mix"?{id:t.id,addedAt:t.addedAt,title:t.title,subTitle:t.subTitle,description:t.description,mixType:t.mixType,cover:t.cover}:t}async exportData(){const e=await this.getFavorites("track"),t=await this.getFavorites("album"),o=await this.getFavorites("artist"),n=await this.getFavorites("playlist"),r=await this.getFavorites("mix"),u=await this.getHistory(),p=await this.getPlaylists(!0);return{favorites_tracks:e.map(g=>this._minifyItem("track",g)),favorites_albums:t.map(g=>this._minifyItem("album",g)),favorites_artists:o.map(g=>this._minifyItem("artist",g)),favorites_playlists:n.map(g=>this._minifyItem("playlist",g)),favorites_mixes:r.map(g=>this._minifyItem("mix",g)),history_tracks:u.map(g=>this._minifyItem("track",g)),user_playlists:p}}async importData(e,t=!1){const o=await this.open(),n=async(u,p)=>{if(p===void 0)return!1;let m=Array.isArray(p)?p:Object.values(p||{});return console.log(`Importing to ${u}: ${m.length} items`),m.length===0?t?new Promise((g,T)=>{const f=o.transaction(u,"readwrite"),c=f.objectStore(u),v=c.count();v.onsuccess=()=>{v.result>0&&c.clear()},f.oncomplete=()=>{g(v.result>0)},f.onerror=()=>T(f.error)}):!1:new Promise((g,T)=>{const f=o.transaction(u,"readwrite"),c=f.objectStore(u);console.log(`Clearing ${u} to Make Sure Everythings Good`),c.clear(),m.forEach(v=>{v.id&&typeof v.id=="string"&&!isNaN(v.id)&&(v.id=parseInt(v.id,10)),v.album?.id&&typeof v.album.id=="string"&&!isNaN(v.album.id)&&(v.album.id=parseInt(v.album.id,10)),v.artists&&v.artists.forEach(x=>{x.id&&typeof x.id=="string"&&!isNaN(x.id)&&(x.id=parseInt(x.id,10))}),console.log(`${u}: Adding item with ID ${v.id||v.uuid||v.timestamp}`);const _=c.keyPath;_&&!v[_]&&(console.warn(`Item missing keyPath "${_}" in ${u}, generating fallback.`),_==="uuid"?v.uuid=crypto.randomUUID():_==="id"?v.id=v.trackId||v.albumId||v.artistId||Date.now()+Math.random():_==="timestamp"&&(v.timestamp=Date.now()+Math.random())),c.put(v)}),f.oncomplete=()=>{console.log(`${u}: Imported ${m.length} items`),g(!0)},f.onerror=v=>{console.error(`${u}: Transaction error:`,v.target.error),T(f.error)}})};console.log("Starting import with data:",{tracks:e.favorites_tracks?.length||0,albums:e.favorites_albums?.length||0,artists:e.favorites_artists?.length||0,playlists:e.favorites_playlists?.length||0,mixes:e.favorites_mixes?.length||0,history:e.history_tracks?.length||0,userPlaylists:e.user_playlists?.length||0});const r=await Promise.all([n("favorites_tracks",e.favorites_tracks),n("favorites_albums",e.favorites_albums),n("favorites_artists",e.favorites_artists),n("favorites_playlists",e.favorites_playlists),n("favorites_mixes",e.favorites_mixes),n("history_tracks",e.history_tracks),e.user_playlists?n("user_playlists",e.user_playlists):Promise.resolve(!1)]);return console.log("Import results:",r),r.some(u=>u)}_updatePlaylistMetadata(e){if(e.numberOfTracks=e.tracks?e.tracks.length:0,!e.cover){const t=[],o=new Set,n=e.tracks||[];for(const r of n){const u=r.album?.cover;if(u&&!o.has(u)&&(o.add(u),t.push(u),t.length>=4))break}e.images=t}return e}_dispatchPlaylistSync(e,t){window.dispatchEvent(new CustomEvent("sync-playlist-change",{detail:{action:e,playlist:t}}))}async createPlaylist(e,t=[],o=""){const r={id:crypto.randomUUID(),name:e,tracks:t.map(u=>this._minifyItem("track",u)),cover:o,createdAt:Date.now(),updatedAt:Date.now(),numberOfTracks:t.length,images:[]};return this._updatePlaylistMetadata(r),await this.performTransaction("user_playlists","readwrite",u=>u.put(r)),this._dispatchPlaylistSync("create",r),r}async addTrackToPlaylist(e,t){const o=await this.performTransaction("user_playlists","readonly",r=>r.get(e));if(!o)throw new Error("Playlist not found");o.tracks=o.tracks||[];const n=this._minifyItem("track",t);if(!o.tracks.some(r=>r.id===t.id))return o.tracks.push(n),o.updatedAt=Date.now(),this._updatePlaylistMetadata(o),await this.performTransaction("user_playlists","readwrite",r=>r.put(o)),this._dispatchPlaylistSync("update",o),o}async removeTrackFromPlaylist(e,t){const o=await this.performTransaction("user_playlists","readonly",n=>n.get(e));if(!o)throw new Error("Playlist not found");return o.tracks=o.tracks||[],o.tracks=o.tracks.filter(n=>n.id!==t),o.updatedAt=Date.now(),this._updatePlaylistMetadata(o),await this.performTransaction("user_playlists","readwrite",n=>n.put(o)),this._dispatchPlaylistSync("update",o),o}async deletePlaylist(e){await this.performTransaction("user_playlists","readwrite",t=>t.delete(e)),this._dispatchPlaylistSync("delete",{id:e})}async getPlaylist(e){return await this.performTransaction("user_playlists","readonly",t=>t.get(e))}async updatePlaylist(e){return e.updatedAt=Date.now(),this._updatePlaylistMetadata(e),await this.performTransaction("user_playlists","readwrite",t=>t.put(e)),this._dispatchPlaylistSync("update",e),e}async getPlaylists(e=!1){const t=await this.open();return new Promise((o,n)=>{const u=t.transaction("user_playlists","readwrite").objectStore("user_playlists"),m=u.index("createdAt").getAll();m.onsuccess=()=>{const T=m.result.reverse().map(f=>{let c=!1;if(typeof f.numberOfTracks>"u"&&(f.numberOfTracks=f.tracks?f.tracks.length:0,c=!0),!f.cover&&(!f.images||f.images.length===0)&&(this._updatePlaylistMetadata(f),c=!0),c)try{u.put(f)}catch(x){console.warn("Failed to update playlist metadata",x)}if(e)return f;const{tracks:v,..._}=f;return _});o(T)},m.onerror=()=>n(m.error)})}async updatePlaylistName(e,t){const o=await this.performTransaction("user_playlists","readonly",n=>n.get(e));if(!o)throw new Error("Playlist not found");return o.name=t,o.updatedAt=Date.now(),await this.performTransaction("user_playlists","readwrite",n=>n.put(o)),o}async updatePlaylistTracks(e,t){const o=await this.open();return new Promise((n,r)=>{const u=o.transaction("user_playlists","readwrite"),p=u.objectStore("user_playlists"),m=p.get(e);m.onsuccess=()=>{const g=m.result;if(!g){r(new Error("Playlist not found"));return}g.tracks=t,g.updatedAt=Date.now(),this._updatePlaylistMetadata(g);const T=p.put(g);T.onsuccess=()=>{n(g)},T.onerror=()=>{r(T.error)}},m.onerror=()=>{r(m.error)},u.onerror=g=>{r(g.target.error)}})}async saveSetting(e,t){await this.performTransaction("settings","readwrite",o=>o.put(t,e))}async getSetting(e){return await this.performTransaction("settings","readonly",t=>t.get(e))}}const Tn=new gc,Rr=Object.freeze(Object.defineProperty({__proto__:null,MusicDatabase:gc,db:Tn},Symbol.toStringTag,{value:"Module"}));function Lu(h,e,t){h/=255,e/=255,t/=255;const o=Math.max(h,e,t),n=Math.min(h,e,t);let r,u,p=(o+n)/2;if(o===n)r=u=0;else{const m=o-n;switch(u=p>.5?m/(2-o-n):m/(o+n),o){case h:r=(e-t)/m+(e<t?6:0);break;case e:r=(t-h)/m+2;break;case t:r=(h-e)/m+4;break}r/=6}return[r,u,p]}function sg(h,e,t){let o,n,r;if(e===0)o=n=r=t;else{const p=(T,f,c)=>(c<0&&(c+=1),c>1&&(c-=1),c<.16666666666666666?T+(f-T)*6*c:c<.5?f:c<.6666666666666666?T+(f-T)*(.6666666666666666-c)*6:T),m=t<.5?t*(1+e):t+e-t*e,g=2*t-m;o=p(g,m,h+1/3),n=p(g,m,h),r=p(g,m,h-1/3)}const u=p=>{const m=Math.round(p*255).toString(16);return m.length===1?"0"+m:m};return`#${u(o)}${u(n)}${u(r)}`}function og(h){const e=document.createElement("canvas"),t=e.getContext("2d");if(!t)return null;const o=64;let n=h.naturalWidth||h.width,r=h.naturalHeight||h.height;if(n>o||r>o){const T=Math.min(o/n,o/r);n=Math.floor(n*T),r=Math.floor(r*T)}e.width=n,e.height=r,t.drawImage(h,0,0,n,r);const p=t.getImageData(0,0,n,r).data,m=[];for(let T=0;T<p.length;T+=4){const f=p[T],c=p[T+1],v=p[T+2];if(p[T+3]<125)continue;const[x,te,oe]=Lu(f,c,v);te>=.3&&oe>=.3&&oe<=.8&&m.push({r:f,g:c,b:v,h:x,s:te,l:oe})}if(m.length===0)for(let T=0;T<p.length;T+=4){const f=p[T],c=p[T+1],v=p[T+2];if(p[T+3]<125)continue;const[x,te,oe]=Lu(f,c,v);oe>.1&&oe<.95&&m.push({r:f,g:c,b:v,h:x,s:te,l:oe})}if(m.length===0)return null;m.sort((T,f)=>f.s-T.s||.5-Math.abs(T.l-.5)-(.5-Math.abs(f.l-.5)));const g=m[0];return sg(g.h,g.s,g.l)}class fa extends Error{constructor(e){super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,fa.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof fa||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(e.name=="AbortError"||e.code==20)&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=this.response?.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":this.originalError?.cause?.message?.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong."),this.cause=this.originalError}get data(){return this.response}toJSON(){return{...this}}}const xi=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function lg(h,e){const t={};if(typeof h!="string")return t;const o=Object.assign({},{}).decode||ug;let n=0;for(;n<h.length;){const r=h.indexOf("=",n);if(r===-1)break;let u=h.indexOf(";",n);if(u===-1)u=h.length;else if(u<r){n=h.lastIndexOf(";",r-1)+1;continue}const p=h.slice(n,r).trim();if(t[p]===void 0){let m=h.slice(r+1,u).trim();m.charCodeAt(0)===34&&(m=m.slice(1,-1));try{t[p]=o(m)}catch{t[p]=m}}n=u+1}return t}function Mu(h,e,t){const o=Object.assign({},t||{}),n=o.encode||cg;if(!xi.test(h))throw new TypeError("argument name is invalid");const r=n(e);if(r&&!xi.test(r))throw new TypeError("argument val is invalid");let u=h+"="+r;if(o.maxAge!=null){const p=o.maxAge-0;if(isNaN(p)||!isFinite(p))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(p)}if(o.domain){if(!xi.test(o.domain))throw new TypeError("option domain is invalid");u+="; Domain="+o.domain}if(o.path){if(!xi.test(o.path))throw new TypeError("option path is invalid");u+="; Path="+o.path}if(o.expires){if(!(function(m){return Object.prototype.toString.call(m)==="[object Date]"||m instanceof Date})(o.expires)||isNaN(o.expires.valueOf()))throw new TypeError("option expires is invalid");u+="; Expires="+o.expires.toUTCString()}if(o.httpOnly&&(u+="; HttpOnly"),o.secure&&(u+="; Secure"),o.priority)switch(typeof o.priority=="string"?o.priority.toLowerCase():o.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(o.sameSite)switch(typeof o.sameSite=="string"?o.sameSite.toLowerCase():o.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return u}function ug(h){return h.indexOf("%")!==-1?decodeURIComponent(h):h}function cg(h){return encodeURIComponent(h)}const dg=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let hc;function Dr(h){if(h)try{const e=decodeURIComponent(hc(h.split(".")[1]).split("").map((function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)})).join(""));return JSON.parse(e)||{}}catch{}return{}}function pc(h,e=0){let t=Dr(h);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}hc=typeof atob!="function"||dg?h=>{let e=String(h).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,o,n=0,r=0,u="";o=e.charAt(r++);~o&&(t=n%4?64*t+o:o,n++%4)?u+=String.fromCharCode(255&t>>(-2*n&6)):0)o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return u}:atob;const Pu="pb_auth";class Hs{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!pc(this.token)}get isSuperuser(){let e=Dr(this.token);return e.type=="auth"&&(this.record?.collectionName=="_superusers"||!this.record?.collectionName&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),Dr(this.token).type=="auth"&&!this.isSuperuser}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=Pu){const o=lg(e||"")[t]||"";let n={};try{n=JSON.parse(o),(typeof n===null||typeof n!="object"||Array.isArray(n))&&(n={})}catch{}this.save(n.token||"",n.record||n.model||null)}exportToCookie(e,t=Pu){const o={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},n=Dr(this.token);o.expires=n?.exp?new Date(1e3*n.exp):new Date("1970-01-01"),e=Object.assign({},o,e);const r={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let u=Mu(t,JSON.stringify(r),e);const p=typeof Blob<"u"?new Blob([u]).size:u.length;if(r.record&&p>4096){r.record={id:r.record?.id,email:r.record?.email};const m=["collectionId","collectionName","verified"];for(const g in this.record)m.includes(g)&&(r.record[g]=this.record[g]);u=Mu(t,JSON.stringify(r),e)}return u}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let o=this._onChangeCallbacks.length-1;o>=0;o--)if(this._onChangeCallbacks[o]==e)return delete this._onChangeCallbacks[o],void this._onChangeCallbacks.splice(o,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class fg extends Hs{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&window?.localStorage){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&window?.localStorage){let o=t;typeof t!="string"&&(o=JSON.stringify(t)),window.localStorage.setItem(e,o)}else this.storageFallback[e]=t}_storageRemove(e){typeof window<"u"&&window?.localStorage&&window.localStorage?.removeItem(e),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&window?.localStorage&&window.addEventListener&&window.addEventListener("storage",(e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.record||t.model||null)}))}}class Ga{constructor(e){this.client=e}}class mg extends Ga{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then((()=>!0))}async testEmail(e,t,o,n){return n=Object.assign({method:"POST",body:{email:t,template:o,collection:e}},n),this.client.send("/api/settings/test/email",n).then((()=>!0))}async generateAppleClientSecret(e,t,o,n,r,u){return u=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:o,privateKey:n,duration:r}},u),this.client.send("/api/settings/apple/generate-client-secret",u)}}const gg=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function Gs(h){if(h){h.query=h.query||{};for(let e in h)gg.includes(e)||(h.query[e]=h[e],delete h[e])}}function yc(h){const e=[];for(const t in h){const o=encodeURIComponent(t),n=Array.isArray(h[t])?h[t]:[h[t]];for(let r of n)r=hg(r),r!==null&&e.push(o+"="+r)}return e.join("&")}function hg(h){return h==null?null:h instanceof Date?encodeURIComponent(h.toISOString().replace("T"," ")):encodeURIComponent(typeof h=="object"?JSON.stringify(h):h)}class bc extends Ga{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,o){if(!e)throw new Error("topic must be set.");let n=e;if(o){Gs(o=Object.assign({},o));const u="options="+encodeURIComponent(JSON.stringify({query:o.query,headers:o.headers}));n+=(n.includes("?")?"&":"?")+u}const r=function(u){const p=u;let m;try{m=JSON.parse(p?.data)}catch{}t(m||{})};return this.subscriptions[n]||(this.subscriptions[n]=[]),this.subscriptions[n].push(r),this.isConnected?this.subscriptions[n].length===1?await this.submitSubscriptions():this.eventSource?.addEventListener(n,r):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,r)}async unsubscribe(e){let t=!1;if(e){const o=this.getSubscriptionsByTopic(e);for(let n in o)if(this.hasSubscriptionListeners(n)){for(let r of this.subscriptions[n])this.eventSource?.removeEventListener(n,r);delete this.subscriptions[n],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){let t=!1;for(let o in this.subscriptions)if((o+"?").startsWith(e)){t=!0;for(let n of this.subscriptions[o])this.eventSource?.removeEventListener(o,n);delete this.subscriptions[o]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){let o=!1;const n=this.getSubscriptionsByTopic(e);for(let r in n){if(!Array.isArray(this.subscriptions[r])||!this.subscriptions[r].length)continue;let u=!1;for(let p=this.subscriptions[r].length-1;p>=0;p--)this.subscriptions[r][p]===t&&(u=!0,delete this.subscriptions[r][p],this.subscriptions[r].splice(p,1),this.eventSource?.removeEventListener(r,t));u&&(this.subscriptions[r].length||delete this.subscriptions[r],o||this.hasSubscriptionListeners(r)||(o=!0))}this.hasSubscriptionListeners()?o&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){if(this.subscriptions=this.subscriptions||{},e)return!!this.subscriptions[e]?.length;for(let t in this.subscriptions)if(this.subscriptions[t]?.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch((e=>{if(!e?.isAbort)throw e}))}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let o in this.subscriptions)(o+"?").startsWith(e)&&(t[o]=this.subscriptions[o]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise(((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()}))}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout((()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))}),this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",(e=>{const t=e;this.clientId=t?.lastEventId,this.submitSubscriptions().then((async()=>{let o=3;for(;this.hasUnsentSubscriptions()&&o>0;)o--,await this.submitSubscriptions()})).then((()=>{for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const o=this.getSubscriptionsByTopic("PB_CONNECT");for(let n in o)for(let r of o[n])r(e)})).catch((o=>{this.clientId="",this.connectErrorHandler(o)}))}))}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let o of this.pendingConnects)o.reject(new fa(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout((()=>{this.initConnect()}),t)}disconnect(e=!1){if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),this.eventSource?.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let t of this.pendingConnects)t.resolve();this.pendingConnects=[]}}}class Ec extends Ga{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let o=500;return(t=Object.assign({},e,t)).batch&&(o=t.batch,delete t.batch),this._getFullList(o,t)}async getList(e=1,t=30,o){return(o=Object.assign({method:"GET"},o)).query=Object.assign({page:e,perPage:t},o.query),this.client.send(this.baseCrudPath,o).then((n=>(n.items=n.items?.map((r=>this.decode(r)))||[],n)))}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then((o=>{if(!o?.items?.length)throw new fa({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return o.items[0]}))}async getOne(e,t){if(!e)throw new fa({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then((o=>this.decode(o)))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then((o=>this.decode(o)))}async update(e,t,o){return o=Object.assign({method:"PATCH",body:t},o),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),o).then((n=>this.decode(n)))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then((()=>!0))}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let o=[],n=async r=>this.getList(r,e||500,t).then((u=>{const p=u.items;return o=o.concat(p),p.length==u.perPage?n(r+1):o}));return n(1)}}function er(h,e,t,o){const n=o!==void 0;return n||t!==void 0?n?(console.warn(h),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,o),e):Object.assign(e,t):e}function As(h){h._resetAutoRefresh?.()}class pg extends Ec{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,t,o){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,o)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const o=Object.assign({},e,t);return super.getFullList(o)}async getList(e=1,t=30,o){return super.getList(e,t,o)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,o){return super.update(e,t,o).then((n=>{if(this.client.authStore.record?.id===n?.id&&(this.client.authStore.record?.collectionId===this.collectionIdOrName||this.client.authStore.record?.collectionName===this.collectionIdOrName)){let r=Object.assign({},this.client.authStore.record.expand),u=Object.assign({},this.client.authStore.record,n);r&&(u.expand=Object.assign(r,n.expand)),this.client.authStore.save(this.client.authStore.token,u)}return n}))}async delete(e,t){return super.delete(e,t).then((o=>(!o||this.client.authStore.record?.id!==e||this.client.authStore.record?.collectionId!==this.collectionIdOrName&&this.client.authStore.record?.collectionName!==this.collectionIdOrName||this.client.authStore.clear(),o)))}authResponse(e){const t=this.decode(e?.record||{});return this.client.authStore.save(e?.token,t),Object.assign({},e,{token:e?.token||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,t,o){let n;o=Object.assign({method:"POST",body:{identity:e,password:t}},o),this.isSuperusers&&(n=o.autoRefreshThreshold,delete o.autoRefreshThreshold,o.autoRefresh||As(this.client));let r=await this.client.send(this.baseCollectionPath+"/auth-with-password",o);return r=this.authResponse(r),n&&this.isSuperusers&&(function(p,m,g,T){As(p);const f=p.beforeSend,c=p.authStore.record,v=p.authStore.onChange(((_,x)=>{(!_||x?.id!=c?.id||(x?.collectionId||c?.collectionId)&&x?.collectionId!=c?.collectionId)&&As(p)}));p._resetAutoRefresh=function(){v(),p.beforeSend=f,delete p._resetAutoRefresh},p.beforeSend=async(_,x)=>{const te=p.authStore.token;if(x.query?.autoRefresh)return f?f(_,x):{url:_,sendOptions:x};let oe=p.authStore.isValid;if(oe&&pc(p.authStore.token,m))try{await g()}catch{oe=!1}oe||await T();const Te=x.headers||{};for(let Se in Te)if(Se.toLowerCase()=="authorization"&&te==Te[Se]&&p.authStore.token){Te[Se]=p.authStore.token;break}return x.headers=Te,f?f(_,x):{url:_,sendOptions:x}}})(this.client,n,(()=>this.authRefresh({autoRefresh:!0})),(()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},o)))),r}async authWithOAuth2Code(e,t,o,n,r,u,p){let m={method:"POST",body:{provider:e,code:t,codeVerifier:o,redirectURL:n,createData:r}};return m=er("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",m,u,p),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",m).then((g=>this.authResponse(g)))}authWithOAuth2(...e){if(e.length>1||typeof e?.[0]=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code(e?.[0]||"",e?.[1]||"",e?.[2]||"",e?.[3]||"",e?.[4]||{},e?.[5]||{},e?.[6]||{});const t=e?.[0]||{};let o=null;t.urlCallback||(o=Ou(void 0));const n=new bc(this.client);function r(){o?.close(),n.unsubscribe()}const u={},p=t.requestKey;return p&&(u.requestKey=p),this.listAuthMethods(u).then((m=>{const g=m.oauth2.providers.find((c=>c.name===t.provider));if(!g)throw new fa(new Error(`Missing or invalid provider "${t.provider}".`));const T=this.client.buildURL("/api/oauth2-redirect"),f=p?this.client.cancelControllers?.[p]:void 0;return f&&(f.signal.onabort=()=>{r()}),new Promise((async(c,v)=>{try{await n.subscribe("@oauth2",(async oe=>{const Te=n.clientId;try{if(!oe.state||Te!==oe.state)throw new Error("State parameters don't match.");if(oe.error||!oe.code)throw new Error("OAuth2 redirect error or missing code: "+oe.error);const Se=Object.assign({},t);delete Se.provider,delete Se.scopes,delete Se.createData,delete Se.urlCallback,f?.signal?.onabort&&(f.signal.onabort=null);const Re=await this.authWithOAuth2Code(g.name,oe.code,g.codeVerifier,T,t.createData,Se);c(Re)}catch(Se){v(new fa(Se))}r()}));const _={state:n.clientId};t.scopes?.length&&(_.scope=t.scopes.join(" "));const x=this._replaceQueryParams(g.authURL+T,_);await(t.urlCallback||function(oe){o?o.location.href=oe:o=Ou(oe)})(x)}catch(_){r(),v(new fa(_))}}))})).catch((m=>{throw r(),m}))}async authRefresh(e,t){let o={method:"POST"};return o=er("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",o,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",o).then((n=>this.authResponse(n)))}async requestPasswordReset(e,t,o){let n={method:"POST",body:{email:e}};return n=er("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",n,t,o),this.client.send(this.baseCollectionPath+"/request-password-reset",n).then((()=>!0))}async confirmPasswordReset(e,t,o,n,r){let u={method:"POST",body:{token:e,password:t,passwordConfirm:o}};return u=er("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",u,n,r),this.client.send(this.baseCollectionPath+"/confirm-password-reset",u).then((()=>!0))}async requestVerification(e,t,o){let n={method:"POST",body:{email:e}};return n=er("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",n,t,o),this.client.send(this.baseCollectionPath+"/request-verification",n).then((()=>!0))}async confirmVerification(e,t,o){let n={method:"POST",body:{token:e}};return n=er("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",n,t,o),this.client.send(this.baseCollectionPath+"/confirm-verification",n).then((()=>{const r=Dr(e),u=this.client.authStore.record;return u&&!u.verified&&u.id===r.id&&u.collectionId===r.collectionId&&(u.verified=!0,this.client.authStore.save(this.client.authStore.token,u)),!0}))}async requestEmailChange(e,t,o){let n={method:"POST",body:{newEmail:e}};return n=er("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",n,t,o),this.client.send(this.baseCollectionPath+"/request-email-change",n).then((()=>!0))}async confirmEmailChange(e,t,o,n){let r={method:"POST",body:{token:e,password:t}};return r=er("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",r,o,n),this.client.send(this.baseCollectionPath+"/confirm-email-change",r).then((()=>{const u=Dr(e),p=this.client.authStore.record;return p&&p.id===u.id&&p.collectionId===u.collectionId&&this.client.authStore.clear(),!0}))}async listExternalAuths(e,t){return this.client.collection("_externalAuths").getFullList(Object.assign({},t,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,t,o){const n=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:t}));return this.client.collection("_externalAuths").delete(n.id,o).then((()=>!0))}async requestOTP(e,t){return t=Object.assign({method:"POST",body:{email:e}},t),this.client.send(this.baseCollectionPath+"/request-otp",t)}async authWithOTP(e,t,o){return o=Object.assign({method:"POST",body:{otpId:e,password:t}},o),this.client.send(this.baseCollectionPath+"/auth-with-otp",o).then((n=>this.authResponse(n)))}async impersonate(e,t,o){(o=Object.assign({method:"POST",body:{duration:t}},o)).headers=o.headers||{},o.headers.Authorization||(o.headers.Authorization=this.client.authStore.token);const n=new Tc(this.client.baseURL,new Hs,this.client.lang),r=await n.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),o);return n.authStore.save(r?.token,this.decode(r?.record||{})),n}_replaceQueryParams(e,t={}){let o=e,n="";e.indexOf("?")>=0&&(o=e.substring(0,e.indexOf("?")),n=e.substring(e.indexOf("?")+1));const r={},u=n.split("&");for(const p of u){if(p=="")continue;const m=p.split("=");r[decodeURIComponent(m[0].replace(/\+/g," "))]=decodeURIComponent((m[1]||"").replace(/\+/g," "))}for(let p in t)t.hasOwnProperty(p)&&(t[p]==null?delete r[p]:r[p]=t[p]);n="";for(let p in r)r.hasOwnProperty(p)&&(n!=""&&(n+="&"),n+=encodeURIComponent(p.replace(/%20/g,"+"))+"="+encodeURIComponent(r[p].replace(/%20/g,"+")));return n!=""?o+"?"+n:o}}function Ou(h){if(typeof window>"u"||!window?.open)throw new fa(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,o=window.innerWidth,n=window.innerHeight;e=e>o?o:e,t=t>n?n:t;let r=o/2-e/2,u=n/2-t/2;return window.open(h,"popup_window","width="+e+",height="+t+",top="+u+",left="+r+",resizable,menubar=no")}class yg extends Ec{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,o){return o=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},o),this.client.send(this.baseCrudPath+"/import",o).then((()=>!0))}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",t).then((()=>!0))}}class bg extends Ga{async getList(e=1,t=30,o){return(o=Object.assign({method:"GET"},o)).query=Object.assign({page:e,perPage:t},o.query),this.client.send("/api/logs",o)}async getOne(e,t){if(!e)throw new fa({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class Eg extends Ga{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class Tg extends Ga{getUrl(e,t,o={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,t,o)}getURL(e,t,o={}){if(!t||!e?.id||!e?.collectionId&&!e?.collectionName)return"";const n=[];n.push("api"),n.push("files"),n.push(encodeURIComponent(e.collectionId||e.collectionName)),n.push(encodeURIComponent(e.id)),n.push(encodeURIComponent(t));let r=this.client.buildURL(n.join("/"));if(Object.keys(o).length){o.download===!1&&delete o.download;const u=new URLSearchParams(o);r+=(r.includes("?")?"&":"?")+u}return r}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then((t=>t?.token||""))}}class vg extends Ga{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then((()=>!0))}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then((()=>!0))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then((()=>!0))}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then((()=>!0))}getDownloadUrl(e,t){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class wg extends Ga{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then((()=>!0))}}function zs(h){return typeof Blob<"u"&&h instanceof Blob||typeof File<"u"&&h instanceof File||h!==null&&typeof h=="object"&&h.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function Fs(h){return h&&(h.constructor?.name==="FormData"||typeof FormData<"u"&&h instanceof FormData)}function zu(h){for(const e in h){const t=Array.isArray(h[e])?h[e]:[h[e]];for(const o of t)if(zs(o))return!0}return!1}const _g=/^[\-\.\d]+$/;function Fu(h){if(typeof h!="string")return h;if(h=="true")return!0;if(h=="false")return!1;if((h[0]==="-"||h[0]>="0"&&h[0]<="9")&&_g.test(h)){let e=+h;if(""+e===h)return e}return h}class Sg extends Ga{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new kg(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,o=[];for(let n=0;n<this.requests.length;n++){const r=this.requests[n];if(o.push({method:r.method,url:r.url,headers:r.headers,body:r.json}),r.files)for(let u in r.files){const p=r.files[u]||[];for(let m of p)t.append("requests."+n+"."+u,m)}}return t.append("@jsonPayload",JSON.stringify({requests:o})),e=Object.assign({method:"POST",body:t},e),this.client.send("/api/batch",e)}}class kg{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const o={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(o,t),this.requests.push(o)}create(e,t){t=Object.assign({body:e||{}},t);const o={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(o,t),this.requests.push(o)}update(e,t,o){o=Object.assign({body:t||{}},o);const n={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(n,o),this.requests.push(n)}delete(e,t){t=Object.assign({},t);const o={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(o,t),this.requests.push(o)}prepareRequest(e,t){if(Gs(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){const n=yc(t.query);n&&(e.url+=(e.url.includes("?")?"&":"?")+n)}let o=t.body;Fs(o)&&(o=(function(r){let u={};return r.forEach(((p,m)=>{if(m==="@jsonPayload"&&typeof p=="string")try{let g=JSON.parse(p);Object.assign(u,g)}catch(g){console.warn("@jsonPayload error:",g)}else u[m]!==void 0?(Array.isArray(u[m])||(u[m]=[u[m]]),u[m].push(Fu(p))):u[m]=Fu(p)})),u})(o));for(const n in o){const r=o[n];if(zs(r))e.files[n]=e.files[n]||[],e.files[n].push(r);else if(Array.isArray(r)){const u=[],p=[];for(const m of r)zs(m)?u.push(m):p.push(m);if(u.length>0&&u.length==r.length){e.files[n]=e.files[n]||[];for(let m of u)e.files[n].push(m)}else if(e.json[n]=p,u.length>0){let m=n;n.startsWith("+")||n.endsWith("+")||(m+="+"),e.files[m]=e.files[m]||[];for(let g of u)e.files[m].push(g)}}else e.json[n]=r}}}class Tc{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",t,o="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=o,t?this.authStore=t:typeof window<"u"&&window.Deno?this.authStore=new Hs:this.authStore=new fg,this.collections=new yg(this),this.files=new Tg(this),this.logs=new bg(this),this.settings=new mg(this),this.realtime=new bc(this),this.health=new Eg(this),this.backups=new vg(this),this.crons=new wg(this)}get admins(){return this.collection("_superusers")}createBatch(){return new Sg(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new pg(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let o in t){let n=t[o];switch(typeof n){case"boolean":case"number":n=""+n;break;case"string":n="'"+n.replace(/'/g,"\\'")+"'";break;default:n=n===null?"null":n instanceof Date?"'"+n.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(n).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+o+"}",n)}return e}getFileUrl(e,t,o={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,t,o)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){let t=this.baseURL;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=window.location.origin?.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseURL),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let o=this.buildURL(e);if(this.beforeSend){const n=Object.assign({},await this.beforeSend(o,t));n.url!==void 0||n.options!==void 0?(o=n.url||o,t=n.options||t):Object.keys(n).length&&(t=n,console?.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const n=yc(t.query);n&&(o+=(o.includes("?")?"&":"?")+n),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(o,t).then((async n=>{let r={};try{r=await n.json()}catch(u){if(t.signal?.aborted||typeof DOMException<"u"&&u instanceof DOMException&&(u.name=="AbortError"||u.code==20))throw u}if(this.afterSend&&(r=await this.afterSend(n,r,t)),n.status>=400)throw new fa({url:n.url,status:n.status,data:r});return r})).catch((n=>{throw new fa(n)}))}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=(function(n){if(typeof FormData>"u"||n===void 0||typeof n!="object"||n===null||Fs(n)||!zu(n))return n;const r=new FormData;for(const u in n){const p=n[u];if(p!==void 0)if(typeof p!="object"||zu({data:p})){const m=Array.isArray(p)?p:[p];for(let g of m)r.append(u,g)}else{let m={};m[u]=p,r.append("@jsonPayload",JSON.stringify(m))}}return r})(t.body),Gs(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||Fs(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const o=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(o);const n=new AbortController;this.cancelControllers[o]=n,t.signal=n.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let o in e)if(o.toLowerCase()==t)return e[o];return null}}let Rs=null,Na=null,Ig=null,vc=null;const Ys="monochrome-firebase-config",Ag={apiKey:"AIzaSyDPU-unAjuLtQJt4IkGS5faG50UCF7lYyA",authDomain:"monochrome-database.firebaseapp.com",projectId:"monochrome-database",storageBucket:"monochrome-database.firebasestorage.app",messagingSenderId:"895657412760",appId:"1:895657412760:web:e81c5044c7f4e9b799e8ed"};function Rg(){try{const h=localStorage.getItem(Ys);return h?JSON.parse(h):null}catch(h){return console.warn("Failed to parse Firebase config from storage",h),null}}const wc=Rg(),Uu=wc||Ag;if(Uu)try{Rs=gm(Uu),Na=hm(Rs),Ig=wm(Rs),vc=new pm,console.log("Firebase initialized from "+(wc?"saved":"default")+" config")}catch(h){console.error("Error initializing Firebase:",h)}else console.log("No Firebase config found.");function Cg(h){h&&localStorage.setItem(Ys,JSON.stringify(h))}function Bu(){localStorage.removeItem(Ys)}class Ng{constructor(){this.user=null,this.unsubscribe=null,this.authListeners=[],this.init()}init(){Na&&(this.unsubscribe=ym(Na,e=>{this.user=e,this.updateUI(e),this.authListeners.forEach(t=>t(e))}))}onAuthStateChanged(e){this.authListeners.push(e),this.user!==null&&e(this.user)}async signInWithGoogle(){if(!Na){alert("Firebase is not configured. Please check console.");return}try{return(await bm(Na,vc)).user}catch(e){throw console.error("Login failed:",e),alert(`Login failed: ${e.message}`),e}}async signInWithEmail(e,t){if(!Na){alert("Firebase is not configured.");return}try{return(await Em(Na,e,t)).user}catch(o){throw console.error("Email Login failed:",o),alert(`Login failed: ${o.message}`),o}}async signUpWithEmail(e,t){if(!Na){alert("Firebase is not configured.");return}try{return(await Tm(Na,e,t)).user}catch(o){throw console.error("Sign Up failed:",o),alert(`Sign Up failed: ${o.message}`),o}}async signOut(){if(Na)try{await vm(Na)}catch(e){throw console.error("Logout failed:",e),e}}updateUI(e){const t=document.getElementById("firebase-connect-btn"),o=document.getElementById("firebase-clear-cloud-btn"),n=document.getElementById("firebase-status"),r=document.getElementById("email-auth-container"),u=document.getElementById("toggle-email-auth-btn");t&&(e?(t.textContent="Sign Out",t.classList.add("danger"),t.onclick=()=>this.signOut(),o&&(o.style.display="block"),r&&(r.style.display="none"),u&&(u.style.display="none"),n&&(n.textContent=`Signed in as ${e.email}`)):(t.textContent="Connect with Google",t.classList.remove("danger"),t.onclick=()=>this.signInWithGoogle(),o&&(o.style.display="none"),u&&(u.style.display="inline-block"),n&&(n.textContent="Sync your library across devices")))}}const ca=new Ng,Di="public_playlists",xg="https://monodb.samidy.com",Hi=new Tc(xg);Hi.autoCancellation(!1);const Yn={pb:Hi,_userRecordCache:null,_isSyncing:!1,async _getUserRecord(h){if(!h)return console.warn("_getUserRecord called with no UID."),null;if(this._userRecordCache&&this._userRecordCache.firebase_id===h)return this._userRecordCache;try{const e=await this.pb.collection("DB_users").getFirstListItem(`firebase_id="${h}"`,{f_id:h});return this._userRecordCache=e,e}catch(e){if(e.status===404)try{const t=await this.pb.collection("DB_users").create({firebase_id:h,library:{},history:[]},{f_id:h});return this._userRecordCache=t,t}catch(t){return console.error("Failed to create user record in PocketBase:",t),null}return console.error("Failed to get user record from PocketBase:",e),null}},async getUserData(){const h=ca.user;if(!h)return null;const e=await this._getUserRecord(h.uid);if(!e)return null;const t=this.safeParseInternal(e.library,"library",{}),o=this.safeParseInternal(e.history,"history",[]),n=this.safeParseInternal(e.user_playlists,"user_playlists",{});return{library:t,history:o,userPlaylists:n}},async _updateUserJSON(h,e,t){const o=await this._getUserRecord(h);if(!o){console.error("Cannot update: no user record found");return}try{const n=typeof t=="string"?t:JSON.stringify(t),r=await this.pb.collection("DB_users").update(o.id,{[e]:n},{f_id:h});this._userRecordCache=r}catch(n){console.error(`Failed to sync ${e} to PocketBase:`,n)}},safeParseInternal(h,e,t){if(!h)return t;if(typeof h!="string")return h;try{return JSON.parse(h)}catch{try{const o=h.replace(/(:\s*")(.+?)("(?=\s*[,}\n\r]))/g,(n,r,u,p)=>{const m=u.replace(new RegExp('(?<!\\\\)"',"g"),'\\"');return r+m+p});return JSON.parse(o)}catch{return t}}},async syncLibraryItem(h,e,t){const o=ca.user;if(!o)return;const n=await this._getUserRecord(o.uid);if(!n)return;let r=this.safeParseInternal(n.library,"library",{});const u=h==="mix"?"mixes":`${h}s`,p=h==="playlist"?e.uuid:e.id;r[u]||(r[u]={}),t?r[u][p]=this._minifyItem(h,e):delete r[u][p],await this._updateUserJSON(o.uid,"library",r)},_minifyItem(h,e){if(!e)return e;const t={id:e.id,addedAt:e.addedAt||Date.now()};return h==="track"?{...t,title:e.title||null,duration:e.duration||null,explicit:e.explicit||!1,artist:e.artist||(e.artists&&e.artists.length>0?e.artists[0]:null)||null,artists:e.artists?.map(o=>({id:o.id,name:o.name||null}))||[],album:e.album?{id:e.album.id,title:e.album.title||null,cover:e.album.cover||null,releaseDate:e.album.releaseDate||null,vibrantColor:e.album.vibrantColor||null,artist:e.album.artist||null,numberOfTracks:e.album.numberOfTracks||null}:null,copyright:e.copyright||null,isrc:e.isrc||null,trackNumber:e.trackNumber||null,streamStartDate:e.streamStartDate||null,version:e.version||null,mixes:e.mixes||null}:h==="album"?{...t,title:e.title||null,cover:e.cover||null,releaseDate:e.releaseDate||null,explicit:e.explicit||!1,artist:e.artist?{name:e.artist.name||null,id:e.artist.id}:e.artists?.[0]?{name:e.artists[0].name||null,id:e.artists[0].id}:null,type:e.type||null,numberOfTracks:e.numberOfTracks||null}:h==="artist"?{...t,name:e.name||null,picture:e.picture||e.image||null}:h==="playlist"?{uuid:e.uuid||e.id,addedAt:e.addedAt||Date.now(),title:e.title||e.name||null,image:e.image||e.squareImage||e.cover||null,numberOfTracks:e.numberOfTracks||(e.tracks?e.tracks.length:0),user:e.user?{name:e.user.name||null}:null}:h==="mix"?{id:e.id,addedAt:e.addedAt||Date.now(),title:e.title,subTitle:e.subTitle,mixType:e.mixType,cover:e.cover}:e},async syncHistoryItem(h){const e=ca.user;if(!e)return;const t=await this._getUserRecord(e.uid);if(!t)return;let o=this.safeParseInternal(t.history,"history",[]);const n=[h,...o].slice(0,100);await this._updateUserJSON(e.uid,"history",n)},async syncUserPlaylist(h,e){const t=ca.user;if(!t)return;const o=await this._getUserRecord(t.uid);if(!o)return;let n=this.safeParseInternal(o.user_playlists,"user_playlists",{});e==="delete"?delete n[h.id]:n[h.id]={id:h.id,name:h.name,cover:h.cover||null,tracks:h.tracks?h.tracks.map(r=>this._minifyItem("track",r)):[],createdAt:h.createdAt||Date.now(),updatedAt:h.updatedAt||Date.now(),numberOfTracks:h.tracks?h.tracks.length:0,images:h.images||[],isPublic:h.isPublic||!1},await this._updateUserJSON(t.uid,"user_playlists",n)},async getPublicPlaylist(h){try{const e=await this.pb.collection(Di).getFirstListItem(`uuid="${h}"`,{p_id:h});let t=e.image||e.cover||e.playlist_cover||"",o=this.safeParseInternal(e.data,"data",{});!t&&o&&typeof o=="object"&&(t=o.cover||o.image||"");let n=t;t&&!t.startsWith("http")&&!t.startsWith("data:")&&(n=this.pb.files.getUrl(e,t));let r=[],u=this.safeParseInternal(e.tracks,"tracks",[]);if(!n&&u&&u.length>0){const m=[],g=new Set;for(const T of u){const f=T.album?.cover;if(f&&!g.has(f)&&(g.add(f),m.push(f),m.length>=4))break}r=m}let p=e.title||e.name||e.playlist_name;return!p&&o&&typeof o=="object"&&(p=o.title||o.name),p||(p="Untitled Playlist"),{...e,id:e.uuid,name:p,title:p,cover:n,image:n,tracks:u,images:r,numberOfTracks:u.length,type:"user-playlist",isPublic:!0,user:{name:"Community Playlist"}}}catch(e){if(e.status===404)return null;throw console.error("Failed to fetch public playlist:",e),e}},async publishPlaylist(h){if(!h||!h.id)return;const e=ca.user?.uid;if(!e)return;const t={uuid:h.id,uid:e,title:h.name,name:h.name,playlist_name:h.name,image:h.cover,cover:h.cover,playlist_cover:h.cover,tracks:h.tracks,isPublic:!0,data:{title:h.name,cover:h.cover}};try{const o=await this.pb.collection(Di).getList(1,1,{filter:`uuid="${h.id}"`,p_id:h.id});o.items.length>0?await this.pb.collection(Di).update(o.items[0].id,t):await this.pb.collection(Di).create(t)}catch(o){console.error("Failed to publish playlist:",o)}},async unpublishPlaylist(h){if(ca.user?.uid)try{const t=await this.pb.collection("public_playlists").getList(1,1,{filter:`uuid="${h}"`,p_id:h});t.items&&t.items.length>0&&await this.pb.collection("public_playlists").delete(t.items[0].id,{p_id:h})}catch(t){console.error("Failed to unpublish playlist:",t)}},async clearCloudData(){const h=ca.user;if(h)try{const e=await this._getUserRecord(h.uid);e&&(await this.pb.collection("DB_users").delete(e.id,{f_id:h.uid}),this._userRecordCache=null,alert("Cloud data cleared successfully."))}catch(e){console.error("Failed to clear cloud data!",e),alert("Failed to clear cloud data! :( Check console for details.")}},async onAuthStateChanged(h){if(h){if(this._isSyncing)return;this._isSyncing=!0;try{const e=await this.getUserData();if(e){const t={favorites_tracks:e.library.tracks?Object.values(e.library.tracks).filter(o=>o&&typeof o=="object"):[],favorites_albums:e.library.albums?Object.values(e.library.albums).filter(o=>o&&typeof o=="object"):[],favorites_artists:e.library.artists?Object.values(e.library.artists).filter(o=>o&&typeof o=="object"):[],favorites_playlists:e.library.playlists?Object.values(e.library.playlists).filter(o=>o&&typeof o=="object"):[],favorites_mixes:e.library.mixes?Object.values(e.library.mixes).filter(o=>o&&typeof o=="object"):[],history_tracks:e.history||[],user_playlists:e.userPlaylists?Object.values(e.userPlaylists).filter(o=>o&&typeof o=="object"):[]};await Tn.importData(t),await new Promise(o=>setTimeout(o,300)),window.dispatchEvent(new CustomEvent("library-changed")),window.dispatchEvent(new CustomEvent("history-changed")),window.dispatchEvent(new HashChangeEvent("hashchange"))}}catch(e){console.error("Error during PocketBase sync!",e)}finally{this._isSyncing=!1}}else this._userRecordCache=null,this._isSyncing=!1}};Hi&&ca.onAuthStateChanged(Yn.onAuthStateChanged.bind(Yn));const Cs=Object.freeze(Object.defineProperty({__proto__:null,pb:Hi,syncManager:Yn},Symbol.toStringTag,{value:"Module"}));class Dg{constructor(e,t){this.api=e,this.player=t,this.currentTrack=null,this.searchAbortController=null,this.vibrantColorCache=new Map}createHeartIcon(e=!1){return e?tr.replace('class="heart-icon"','class="heart-icon filled"'):tr}async extractAndApplyColor(e){if(!Cr.isEnabled()||!e){this.resetVibrantColor();return}if(this.vibrantColorCache.has(e)){const n=this.vibrantColorCache.get(e);if(n){this.setVibrantColor(n);return}}const t=new Image;t.crossOrigin="Anonymous";const o=e.includes("?")?"&":"?";t.src=`${e}${o}not-from-cache-please`,t.onload=()=>{try{const n=og(t);n?(this.vibrantColorCache.set(e,n),this.setVibrantColor(n)):(this.vibrantColorCache.set(e,null),this.resetVibrantColor())}catch{this.vibrantColorCache.set(e,null),this.resetVibrantColor()}},t.onerror=()=>{this.vibrantColorCache.set(e,null),this.resetVibrantColor()}}async updateLikeState(e,t,o){const n=await Tn.isFavorite(t,o),r=e.querySelector(".like-btn");r&&(r.innerHTML=this.createHeartIcon(n),r.classList.toggle("active",n),r.title=n?"Remove from Liked":"Add to Liked")}setCurrentTrack(e){this.currentTrack=e,this.updateGlobalTheme();const t=document.getElementById("now-playing-like-btn"),o=document.getElementById("now-playing-add-playlist-btn"),n=document.getElementById("mobile-add-playlist-btn"),r=document.getElementById("toggle-lyrics-btn");if(e){const u=e.isLocal;t&&(u?t.style.display="none":(t.style.display="flex",this.updateLikeState(t.parentElement,"track",e.id))),o&&(u?o.style.setProperty("display","none","important"):o.style.removeProperty("display")),n&&(u?n.style.setProperty("display","none","important"):n.style.removeProperty("display")),r&&(u?r.style.display="none":r.style.removeProperty("display"))}else t&&(t.style.display="none"),o&&o.style.setProperty("display","none","important"),n&&n.style.setProperty("display","none","important"),r&&(r.style.display="none")}updateGlobalTheme(){document.getElementById("page-album").classList.contains("active")||(Cr.isEnabled()&&this.currentTrack?.album?.cover?this.extractAndApplyColor(this.api.getCoverUrl(this.currentTrack.album.cover,"80")):this.resetVibrantColor())}createExplicitBadge(){return'<span class="explicit-badge" title="Explicit">E</span>'}adjustTitleFontSize(e,t){e.classList.remove("long-title","very-long-title"),t.length>40?e.classList.add("very-long-title"):t.length>25&&e.classList.add("long-title")}createTrackItemHTML(e,t,o=!1,n=!1){const r=e.isUnavailable,u=o?`<img src="${this.api.getCoverUrl(e.album?.cover)}" alt="Track Cover" class="track-item-cover" loading="lazy">`:"";let p;n&&!o?p=`${e.volumeNumber??e.discNumber??1}-${e.trackNumber}`:p=t+1;const m=`<div class="track-number">${o?u:p}</div>`,g=Ss(e)?this.createExplicitBadge():"",T=Zr(e),f=Da(e),c=za(e),v=this.player?.currentTrack?.id===e.id;e.isLocal&&(o=!1);let _="";const x=e.album?.releaseDate||e.streamStartDate;if(x){const oe=new Date(x);isNaN(oe.getTime())||(_=` • ${oe.getFullYear()}`)}const te=r?"":`
            <div class="track-actions-inline">
                <button class="track-action-btn like-btn" data-action="toggle-like" title="Add to Liked">
                    ${this.createHeartIcon(!1)}
                </button>
                <button class="track-action-btn" data-action="play-next" title="Play Next">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M2 6h6" />
                        <path d="M5 3v6" />
                        <path d="M11 6h10" />
                        <path d="M3 12h18" />
                        <path d="M3 18h18" />
                    </svg>
                </button>
                <button class="track-action-btn" data-action="add-to-queue" title="Add to Queue">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 6h18" />
                        <path d="M3 12h18" />
                        <path d="M3 18h10" />
                        <path d="M16 18h6" />
                        <path d="M19 15v6" />
                    </svg>
                </button>
                <button class="track-action-btn" data-action="download" title="Download" ${e.isLocal?'style="display:none"':""}>
                    ${Ir}
                </button>
            </div>
            <button class="track-menu-btn" type="button" title="More options" ${e.isLocal?'style="display:none"':""}>
                ${Cm}
            </button>
        `;return`
            <div class="track-item ${v?"playing":""} ${r?"unavailable":""}" 
                 data-track-id="${e.id}" 
                 ${e.isLocal?'data-is-local="true"':""}
                 ${r?'title="This track is currently unavailable"':""}>
                ${m}
                <div class="track-item-info">
                    <div class="track-item-details">
                        <div class="title">
                            ${ua(c)}
                            ${g}
                            ${T}
                        </div>
                        <div class="artist">${ua(f)}${_}</div>
                    </div>
                </div>
                <div class="track-item-duration">${r?"--:--":e.duration?Pr(e.duration):"--:--"}</div>
                <div class="track-item-actions">
                    ${te}
                </div>
            </div>
        `}createBaseCardHTML({type:e,id:t,href:o,title:n,subtitle:r,imageHTML:u,actionButtonsHTML:p,isCompact:m,extraClasses:g=""}){const T=e!=="artist"?`
            <button class="play-btn card-play-btn" data-action="play-card" data-type="${e}" data-id="${t}" title="Play">
                ${pr}
            </button>
        `:"",f=e==="artist"?`<h4 class="card-title">${n}</h4>`:`<div class="card-info">
                    <h4 class="card-title">${n}</h4>
                    <p class="card-subtitle">${r}</p>
               </div>`;return`
            <div class="card ${g} ${m?"compact":""}" data-${e}-id="${t}" data-href="${o}" style="cursor: pointer;">
                <div class="card-image-wrapper">
                    ${u}
                    ${p}
                    ${m?"":T}
                </div>
                ${f}
                ${m?T:""}
            </div>
        `}createPlaylistCardHTML(e){const t=e.squareImage||e.image||e.uuid,o=Ha.isCompactAlbum();return this.createBaseCardHTML({type:"playlist",id:e.uuid,href:`#playlist/${e.uuid}`,title:e.title,subtitle:`${e.numberOfTracks||0} tracks`,imageHTML:`<img src="${this.api.getCoverUrl(t)}" alt="${e.title}" class="card-image" loading="lazy">`,actionButtonsHTML:`
                <button class="like-btn card-like-btn" data-action="toggle-like" data-type="playlist" title="Add to Liked">
                    ${this.createHeartIcon(!1)}
                </button>
            `,isCompact:o})}createMixCardHTML(e){const t=e.cover||"assets/appicon.png",o=e.subTitle||e.description||"",n=Ha.isCompactAlbum();return this.createBaseCardHTML({type:"mix",id:e.id,href:`#mix/${e.id}`,title:e.title,subtitle:o,imageHTML:`<img src="${t}" alt="${e.title}" class="card-image" loading="lazy">`,actionButtonsHTML:`
                <button class="like-btn card-like-btn" data-action="toggle-like" data-type="mix" title="Add to Liked">
                    ${this.createHeartIcon(!1)}
                </button>
            `,isCompact:n})}createUserPlaylistCardHTML(e){let t="";if(e.cover)t=`<img src="${e.cover}" alt="${e.name}" class="card-image" loading="lazy">`;else{const n=e.tracks||[];let r=e.images||[];const u=new Set(r);if(r.length===0)for(const p of n){const m=p.album?.cover;if(m&&!u.has(m)&&(u.add(m),r.push(m),r.length>=4))break}if(r.length>=2){const p=Math.min(r.length,4),m=p<4?`items-${p}`:"",g=r.slice(0,4);t=`
                    <div class="card-image card-collage ${m}">
                        ${g.map(T=>`<img src="${this.api.getCoverUrl(T)}" alt="" loading="lazy">`).join("")}
                    </div>
                `}else r.length>0?t=`<img src="${this.api.getCoverUrl(r[0])}" alt="${e.name}" class="card-image" loading="lazy">`:t=`<img src="assets/appicon.png" alt="${e.name}" class="card-image" loading="lazy">`}const o=Ha.isCompactAlbum();return this.createBaseCardHTML({type:"user-playlist",id:e.id,href:`#userplaylist/${e.id}`,title:ua(e.name),subtitle:`${e.tracks?e.tracks.length:e.numberOfTracks||0} tracks`,imageHTML:t,actionButtonsHTML:`
                <button class="edit-playlist-btn" data-action="edit-playlist" title="Edit Playlist">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                        <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                    </svg>
                </button>
                <button class="delete-playlist-btn" data-action="delete-playlist" title="Delete Playlist">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 6h18"/>
                        <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                        <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                        <line x1="10" y1="11" x2="10" y2="17"/>
                        <line x1="14" y1="11" x2="14" y2="17"/>
                    </svg>
                </button>
            `,isCompact:o,extraClasses:"user-playlist"})}createAlbumCardHTML(e){const t=Ss(e)?this.createExplicitBadge():"",o=Zr(e);let n="";if(e.releaseDate){const p=new Date(e.releaseDate);isNaN(p.getTime())||(n=`${p.getFullYear()}`)}let r="";e.type==="EP"?r=" • EP":e.type==="SINGLE"&&(r=" • Single");const u=Ha.isCompactAlbum();return this.createBaseCardHTML({type:"album",id:e.id,href:`#album/${e.id}`,title:`${ua(e.title)} ${t} ${o}`,subtitle:`${ua(e.artist?.name??"")} • ${n}${r}`,imageHTML:`<img src="${this.api.getCoverUrl(e.cover)}" alt="${ua(e.title)}" class="card-image" loading="lazy">`,actionButtonsHTML:`
                <button class="like-btn card-like-btn" data-action="toggle-like" data-type="album" title="Add to Liked">
                    ${this.createHeartIcon(!1)}
                </button>
            `,isCompact:u})}createArtistCardHTML(e){const t=Ha.isCompactArtist();return this.createBaseCardHTML({type:"artist",id:e.id,href:`#artist/${e.id}`,title:ua(e.name),subtitle:"",imageHTML:`<img src="${this.api.getArtistPictureUrl(e.picture)}" alt="${ua(e.name)}" class="card-image" loading="lazy">`,actionButtonsHTML:`
                <button class="like-btn card-like-btn" data-action="toggle-like" data-type="artist" title="Add to Liked">
                    ${this.createHeartIcon(!1)}
                </button>
            `,isCompact:t,extraClasses:"artist"})}createSkeletonTrack(e=!1){return`
            <div class="skeleton-track">
                ${e?'<div class="skeleton skeleton-track-cover"></div>':'<div class="skeleton skeleton-track-number"></div>'}
                <div class="skeleton-track-info">
                    <div class="skeleton-track-details">
                        <div class="skeleton skeleton-track-title"></div>
                        <div class="skeleton skeleton-track-artist"></div>
                    </div>
                </div>
                <div class="skeleton skeleton-track-duration"></div>
            </div>
        `}createSkeletonCard(e=!1){return`
            <div class="skeleton-card ${e?"artist":""}">
                <div class="skeleton skeleton-card-image"></div>
                <div class="skeleton skeleton-card-title"></div>
                ${e?"":'<div class="skeleton skeleton-card-subtitle"></div>'}
            </div>
        `}createSkeletonTracks(e=5,t=!1){return`<div class="skeleton-container">${Array(e).fill(0).map(()=>this.createSkeletonTrack(t)).join("")}</div>`}createSkeletonCards(e=6,t=!1){return`<div class="card-grid">${Array(e).fill(0).map(()=>this.createSkeletonCard(t)).join("")}</div>`}renderListWithTracks(e,t,o,n=!1){const r=document.createDocumentFragment(),u=document.createElement("div"),p=t.some(m=>(m.volumeNumber||m.discNumber||1)>1);for(u.innerHTML=t.map((m,g)=>this.createTrackItemHTML(m,g,o,p)).join("");u.firstChild;)r.appendChild(u.firstChild);n||(e.innerHTML=""),e.appendChild(r),t.forEach(m=>{const g=e.querySelector(`[data-track-id="${m.id}"]`);g&&(Gn.set(g,m),this.updateLikeState(g,"track",m.id))})}setPageBackground(e){const t=document.getElementById("page-background");Cr.isEnabled()&&e?(t.style.backgroundImage=`url('${e}')`,t.classList.add("active"),document.body.classList.add("has-page-background")):(t.classList.remove("active"),document.body.classList.remove("has-page-background"),setTimeout(()=>{t.classList.contains("active")||(t.style.backgroundImage="")},500))}setVibrantColor(e){if(!e)return;const t=document.documentElement,n=t.getAttribute("data-theme")==="light";let r=e.replace("#","");r.length===3&&(r=r.split("").map(v=>v+v).join(""));let u=parseInt(r.substr(0,2),16),p=parseInt(r.substr(2,2),16),m=parseInt(r.substr(4,2),16),g=(u*299+p*587+m*114)/1e3;if(n)for(;g>150;)u=Math.floor(u*.9),p=Math.floor(p*.9),m=Math.floor(m*.9),g=(u*299+p*587+m*114)/1e3;else for(;g<80&&(u=Math.min(255,Math.max(u+1,Math.floor(u*1.15))),p=Math.min(255,Math.max(p+1,Math.floor(p*1.15))),m=Math.min(255,Math.max(m+1,Math.floor(m*1.15))),g=(u*299+p*587+m*114)/1e3,!(u>=255&&p>=255&&m>=255)););const T=`#${u.toString(16).padStart(2,"0")}${p.toString(16).padStart(2,"0")}${m.toString(16).padStart(2,"0")}`,f=g>128?"#000000":"#ffffff";t.style.setProperty("--primary",T),t.style.setProperty("--primary-foreground",f),t.style.setProperty("--highlight",T),t.style.setProperty("--highlight-rgb",`${u}, ${p}, ${m}`),t.style.setProperty("--active-highlight",T),t.style.setProperty("--ring",T);let c;if(g>200){const v=Math.floor(u*.85),_=Math.floor(p*.85),x=Math.floor(m*.85);c=`rgba(${v}, ${_}, ${x}, 0.25)`}else c=`rgba(${u}, ${p}, ${m}, 0.15)`;t.style.setProperty("--track-hover-bg",c)}resetVibrantColor(){const e=document.documentElement;e.style.removeProperty("--primary"),e.style.removeProperty("--primary-foreground"),e.style.removeProperty("--highlight"),e.style.removeProperty("--highlight-rgb"),e.style.removeProperty("--active-highlight"),e.style.removeProperty("--ring"),e.style.removeProperty("--track-hover-bg")}async showFullscreenCover(e,t,o,n){if(!e)return;const r=document.getElementById("fullscreen-cover-overlay"),u=document.getElementById("fullscreen-cover-image"),p=document.getElementById("fullscreen-track-title"),m=document.getElementById("fullscreen-track-artist"),g=document.getElementById("fullscreen-next-track"),T=document.getElementById("toggle-fullscreen-lyrics-btn"),f=this.api.getCoverUrl(e.album?.cover,"1280");u.src=f;const c=Zr(e);if(p.innerHTML=`${ua(e.title)} ${c}`,m.textContent=Da(e),t?(g.style.display="flex",g.querySelector(".value").textContent=`${t.title} • ${Da(t)}`,g.classList.remove("animate-in"),g.offsetWidth,g.classList.add("animate-in")):(g.style.display="none",g.classList.remove("animate-in")),r.style.setProperty("--bg-image",`url('${f}')`),o&&n){T.style.display="flex",T.classList.remove("active");const v=()=>{Oi(e,n,o),T.classList.toggle("active")},_=T.cloneNode(!0);T.parentNode.replaceChild(_,T),_.addEventListener("click",v)}else T.style.display="none";r.style.display="flex"}closeFullscreenCover(){const e=document.getElementById("fullscreen-cover-overlay");e.style.display="none"}showPage(e){document.querySelectorAll(".page").forEach(t=>{t.classList.toggle("active",t.id===`page-${e}`)}),document.querySelectorAll(".sidebar-nav a").forEach(t=>{t.classList.toggle("active",t.hash===`#${e}`)}),document.querySelector(".main-content").scrollTop=0,["album","artist","playlist","mix"].includes(e)||(this.setPageBackground(null),this.updateGlobalTheme()),e==="settings"&&this.renderApiSettings()}async renderLibraryPage(){this.showPage("library");const e=document.getElementById("library-tracks-container"),t=document.getElementById("library-albums-container"),o=document.getElementById("library-artists-container"),n=document.getElementById("library-playlists-container"),r=document.getElementById("library-local-container"),u=await Tn.getFavorites("track"),p=document.getElementById("shuffle-liked-tracks-btn");u.length?(p&&(p.style.display="flex"),this.renderListWithTracks(e,u,!0)):(p&&(p.style.display="none"),e.innerHTML=Bn("No liked tracks yet."));const m=await Tn.getFavorites("album");m.length?(t.innerHTML=m.map(x=>this.createAlbumCardHTML(x)).join(""),m.forEach(x=>{const te=t.querySelector(`[data-album-id="${x.id}"]`);te&&(Gn.set(te,x),this.updateLikeState(te,"album",x.id))})):t.innerHTML=Bn("No liked albums yet.");const g=await Tn.getFavorites("artist");g.length?(o.innerHTML=g.map(x=>this.createArtistCardHTML(x)).join(""),g.forEach(x=>{const te=o.querySelector(`[data-artist-id="${x.id}"]`);te&&(Gn.set(te,x),this.updateLikeState(te,"artist",x.id))})):o.innerHTML=Bn("No liked artists yet.");const T=await Tn.getFavorites("playlist"),f=await Tn.getFavorites("mix");let c=[];T.length&&c.push(...T.map(x=>({...x,_type:"playlist"}))),f.length&&c.push(...f.map(x=>({...x,_type:"mix"}))),c.sort((x,te)=>te.addedAt-x.addedAt),c.length?(n.innerHTML=c.map(x=>x._type==="playlist"?this.createPlaylistCardHTML(x):this.createMixCardHTML(x)).join(""),T.forEach(x=>{const te=n.querySelector(`[data-playlist-id="${x.uuid}"]`);te&&(Gn.set(te,x),this.updateLikeState(te,"playlist",x.uuid))}),f.forEach(x=>{const te=n.querySelector(`[data-mix-id="${x.id}"]`);te&&(Gn.set(te,x),this.updateLikeState(te,"mix",x.id))})):n.innerHTML=Bn("No liked playlists or mixes yet.");const v=document.getElementById("my-playlists-container"),_=await Tn.getPlaylists();_.length?(v.innerHTML=_.map(x=>this.createUserPlaylistCardHTML(x)).join(""),_.forEach(x=>{const te=v.querySelector(`[data-user-playlist-id="${x.id}"]`);te&&Gn.set(te,x)})):v.innerHTML=Bn("No playlists yet. Create your first playlist!"),this.renderLocalFiles(r)}async renderLocalFiles(e){if(!e)return;const t=document.getElementById("local-files-intro"),o=document.getElementById("local-files-header"),n=document.getElementById("local-files-list"),r=document.getElementById("select-local-folder-text"),u=await Tn.getSetting("local_folder_handle");u?(r&&(r.textContent=`Load "${u.name}"`),window.localFilesCache&&window.localFilesCache.length>0?(t&&(t.style.display="none"),o&&(o.style.display="flex",o.querySelector("h3").textContent=`Local Files (${window.localFilesCache.length})`),n&&this.renderListWithTracks(n,window.localFilesCache,!1)):(t&&(t.style.display="block"),o&&(o.style.display="none"),n&&(n.innerHTML=""))):(r&&(r.textContent="Select Music Folder"),t&&(t.style.display="block"),o&&(o.style.display="none"),n&&(n.innerHTML=""))}async renderHomePage(){this.showPage("home");const e=document.getElementById("home-welcome"),t=document.getElementById("home-content"),o=await Tn.getHistory(),n=await Tn.getFavorites("track"),r=await Tn.getPlaylists(!0);if(o.length===0&&n.length===0&&r.length===0){e&&(e.style.display="block"),t&&(t.style.display="none");return}e&&(e.style.display="none"),t&&(t.style.display="block");const u=document.getElementById("refresh-songs-btn"),p=document.getElementById("refresh-albums-btn"),m=document.getElementById("refresh-artists-btn"),g=document.getElementById("clear-recent-btn");u&&(u.onclick=()=>this.renderHomeSongs(!0)),p&&(p.onclick=()=>this.renderHomeAlbums(!0)),m&&(m.onclick=()=>this.renderHomeArtists(!0)),g&&(g.onclick=()=>{confirm("Clear recent activity?")&&(gr.clear(),this.renderHomeRecent())}),this.renderHomeSongs(),this.renderHomeAlbums(),this.renderHomeArtists(),this.renderHomeRecent()}async getSeeds(){const e=await Tn.getHistory(),t=await Tn.getFavorites("track"),n=(await Tn.getPlaylists(!0)).flatMap(p=>p.tracks||[]),r=p=>[...p].sort(()=>Math.random()-.5),u=[...r(n).slice(0,20),...r(t).slice(0,20),...r(e).slice(0,10)];return r(u)}async renderHomeSongs(e=!1){const t=document.getElementById("home-recommended-songs");if(t){if(e)t.innerHTML=this.createSkeletonTracks(5,!0);else if(t.children.length>0&&!t.querySelector(".skeleton"))return;try{const n=(await this.getSeeds()).slice(0,5),r=await this.api.getRecommendedTracksForPlaylist(n,20),u=await this.filterUserContent(r,"track");u.length>0?this.renderListWithTracks(t,u,!0):t.innerHTML=Bn("No song recommendations found.")}catch(o){console.error(o),t.innerHTML=Bn("Failed to load song recommendations.")}}}async renderHomeAlbums(e=!1){const t=document.getElementById("home-recommended-albums");if(t){if(e)t.innerHTML=this.createSkeletonCards(6);else if(t.children.length>0&&!t.querySelector(".skeleton"))return;try{const n=(await this.getSeeds()).find(r=>r.album&&r.album.id);if(n){const r=await this.api.getSimilarAlbums(n.album.id),u=await this.filterUserContent(r,"album");u.length>0?(t.innerHTML=u.slice(0,12).map(p=>this.createAlbumCardHTML(p)).join(""),u.slice(0,12).forEach(p=>{const m=t.querySelector(`[data-album-id="${p.id}"]`);m&&(Gn.set(m,p),this.updateLikeState(m,"album",p.id))})):t.innerHTML=`<div style="grid-column: 1/-1; padding: 2rem 0;">${Bn("Tell us more about what you like so we can recommend albums!")}</div>`}else t.innerHTML=`<div style="grid-column: 1/-1; padding: 2rem 0;">${Bn("Tell us more about what you like so we can recommend albums!")}</div>`}catch(o){console.error(o),t.innerHTML=Bn("Failed to load album recommendations.")}}}async renderHomeArtists(e=!1){const t=document.getElementById("home-recommended-artists");if(t){if(e)t.innerHTML=this.createSkeletonCards(6,!0);else if(t.children.length>0&&!t.querySelector(".skeleton"))return;try{const n=(await this.getSeeds()).find(u=>u.artist&&u.artist.id||u.artists&&u.artists.length>0),r=n?n.artist?.id||n.artists?.[0]?.id:null;if(r){const u=await this.api.getSimilarArtists(r),p=await this.filterUserContent(u,"artist");p.length>0?(t.innerHTML=p.slice(0,12).map(m=>this.createArtistCardHTML(m)).join(""),p.slice(0,12).forEach(m=>{const g=t.querySelector(`[data-artist-id="${m.id}"]`);g&&(Gn.set(g,m),this.updateLikeState(g,"artist",m.id))})):t.innerHTML=Bn("No artist recommendations found.")}else t.innerHTML=Bn("Listen to more music to get artist recommendations.")}catch(o){console.error(o),t.innerHTML=Bn("Failed to load artist recommendations.")}}}renderHomeRecent(){const e=document.getElementById("home-recent-mixed");if(e){const t=gr.getRecents(),o=[];t.albums&&o.push(...t.albums.slice(0,4).map(r=>({...r,_kind:"album"}))),t.playlists&&o.push(...t.playlists.slice(0,4).map(r=>({...r,_kind:"playlist"}))),t.mixes&&o.push(...t.mixes.slice(0,4).map(r=>({...r,_kind:"mix"}))),o.sort(()=>Math.random()-.5);const n=o.slice(0,6);n.length>0?(e.innerHTML=n.map(r=>r._kind==="album"?this.createAlbumCardHTML(r):r._kind==="playlist"?r.isUserPlaylist?this.createUserPlaylistCardHTML(r):this.createPlaylistCardHTML(r):r._kind==="mix"?this.createMixCardHTML(r):"").join(""),n.forEach(r=>{let u="";r._kind==="album"?u=`[data-album-id="${r.id}"]`:r._kind==="playlist"?u=r.isUserPlaylist?`[data-user-playlist-id="${r.id}"]`:`[data-playlist-id="${r.uuid}"]`:r._kind==="mix"&&(u=`[data-mix-id="${r.id}"]`);const p=e.querySelector(u);p&&(Gn.set(p,r),r._kind==="album"&&this.updateLikeState(p,"album",r.id),r._kind==="playlist"&&!r.isUserPlaylist&&this.updateLikeState(p,"playlist",r.uuid),r._kind==="mix"&&this.updateLikeState(p,"mix",r.id))})):e.innerHTML=Bn("No recent items yet...")}}async filterUserContent(e,t){if(!e||e.length===0)return[];const o=await Tn.getFavorites(t),n=new Set(o.map(m=>m.id)),r=await Tn.getFavorites("track"),u=await Tn.getPlaylists(!0),p=new Map;if(r.forEach(m=>p.set(m.id,m)),u.forEach(m=>{m.tracks&&m.tracks.forEach(g=>p.set(g.id,g))}),t==="track")return e.filter(m=>!p.has(m.id));if(t==="album"){const m=new Map;for(const g of p.values())if(g.album&&g.album.id){const T=g.album.id;m.set(T,(m.get(T)||0)+1)}return e.filter(g=>{if(n.has(g.id))return!1;const T=m.get(g.id)||0,f=g.numberOfTracks;return!(f&&f>0&&T/f>.5)})}return e.filter(m=>!n.has(m.id))}async renderSearchPage(e){this.showPage("search"),document.getElementById("search-results-title").textContent=`Search Results for "${e}"`;const t=document.getElementById("search-tracks-container"),o=document.getElementById("search-artists-container"),n=document.getElementById("search-albums-container"),r=document.getElementById("search-playlists-container");t.innerHTML=this.createSkeletonTracks(8,!0),o.innerHTML=this.createSkeletonCards(6,!0),n.innerHTML=this.createSkeletonCards(6,!1),r.innerHTML=this.createSkeletonCards(6,!1),this.searchAbortController&&this.searchAbortController.abort(),this.searchAbortController=new AbortController;const u=this.searchAbortController.signal;try{const[p,m,g,T]=await Promise.all([this.api.searchTracks(e,{signal:u}),this.api.searchArtists(e,{signal:u}),this.api.searchAlbums(e,{signal:u}),this.api.searchPlaylists(e,{signal:u})]);let f=p.items,c=m.items,v=g.items,_=T.items;if(c.length===0&&f.length>0){const x=new Map;f.forEach(te=>{te.artist&&!x.has(te.artist.id)&&x.set(te.artist.id,te.artist),te.artists&&te.artists.forEach(oe=>{x.has(oe.id)||x.set(oe.id,oe)})}),c=Array.from(x.values())}if(v.length===0&&f.length>0){const x=new Map;f.forEach(te=>{te.album&&!x.has(te.album.id)&&x.set(te.album.id,te.album)}),v=Array.from(x.values())}f.length?this.renderListWithTracks(t,f,!0):t.innerHTML=Bn("No tracks found."),o.innerHTML=c.length?c.map(x=>this.createArtistCardHTML(x)).join(""):Bn("No artists found."),c.forEach(x=>{const te=o.querySelector(`[data-artist-id="${x.id}"]`);te&&(Gn.set(te,x),this.updateLikeState(te,"artist",x.id))}),n.innerHTML=v.length?v.map(x=>this.createAlbumCardHTML(x)).join(""):Bn("No albums found."),v.forEach(x=>{const te=n.querySelector(`[data-album-id="${x.id}"]`);te&&(Gn.set(te,x),this.updateLikeState(te,"album",x.id))}),r.innerHTML=_.length?_.map(x=>this.createPlaylistCardHTML(x)).join(""):Bn("No playlists found."),_.forEach(x=>{const te=r.querySelector(`[data-playlist-id="${x.uuid}"]`);te&&(Gn.set(te,x),this.updateLikeState(te,"playlist",x.uuid))})}catch(p){if(p.name==="AbortError")return;console.error("Search failed:",p);const m=Bn(`Error during search. ${p.message}`);t.innerHTML=m,o.innerHTML=m,n.innerHTML=m,r.innerHTML=m}}async renderAlbumPage(e){this.showPage("album");const t=document.getElementById("album-detail-image"),o=document.getElementById("album-detail-title"),n=document.getElementById("album-detail-meta"),r=document.getElementById("album-detail-producer"),u=document.getElementById("album-detail-tracklist"),p=document.getElementById("play-album-btn");p&&(p.innerHTML=`${pr}<span>Play Album</span>`);const m=document.getElementById("download-album-btn");m&&(m.innerHTML=`${Ir}<span>Download Album</span>`);const g=document.getElementById("album-mix-btn");g&&(g.style.display="none"),t.src="",t.style.backgroundColor="var(--muted)",o.innerHTML='<div class="skeleton" style="height: 48px; width: 300px; max-width: 90%;"></div>',n.innerHTML='<div class="skeleton" style="height: 16px; width: 200px; max-width: 80%;"></div>',r.innerHTML='<div class="skeleton" style="height: 16px; width: 200px; max-width: 80%;"></div>',u.innerHTML=`
            <div class="track-list-header">
                <span style="width: 40px; text-align: center;">#</span>
                <span>Title</span>
                <span class="duration-header">Duration</span>
                <span style="display: flex; justify-content: flex-end; opacity: 0.8;">Menu</span>
            </div>
            ${this.createSkeletonTracks(10,!1)}
        `;try{const{album:T,tracks:f}=await this.api.getAlbum(e),c=this.api.getCoverUrl(T.cover);t.src=c,t.style.backgroundColor="",this.setPageBackground(c),Cr.isEnabled()&&T.cover&&this.extractAndApplyColor(this.api.getCoverUrl(T.cover,"80"));const v=Ss(T)?this.createExplicitBadge():"";o.innerHTML=`${ua(T.title)} ${v}`,this.adjustTitleFontSize(o,T.title);const _=Wr(f);let x="";if(T.releaseDate){const Fe=new Date(T.releaseDate);if(!isNaN(Fe.getTime())){const ye=Fe.getFullYear();x=window.innerWidth>768?Fe.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):ye}}const te=f.find(Fe=>Fe.copyright)?.copyright;n.innerHTML=(x?`${x} • `:"")+`${f.length} tracks • ${Qr(_)}`,r.innerHTML=`By <a href="#artist/${T.artist.id}">${T.artist.name}</a>`+(te?` • ${te}`:""),u.innerHTML=`
                <div class="track-list-header">
                    <span style="width: 40px; text-align: center;">#</span>
                    <span>Title</span>
                    <span class="duration-header">Duration</span>
                    <span style="display: flex; justify-content: flex-end; opacity: 0.8;">Menu</span>
                </div>
            `,f.sort((Fe,ye)=>{const Qe=Fe.volumeNumber??Fe.discNumber??1,xe=ye.volumeNumber??ye.discNumber??1;return Qe!==xe?Qe-xe:Fe.trackNumber-ye.trackNumber}),this.renderListWithTracks(u,f,!1,!0),gr.addAlbum(T);const oe=document.getElementById("like-album-btn");if(oe){const Fe=await Tn.isFavorite("album",T.id);oe.innerHTML=this.createHeartIcon(Fe),oe.classList.toggle("active",Fe)}document.title=`${T.title} - ${T.artist.name}`;const Te=document.getElementById("album-section-more-albums"),Se=document.getElementById("album-detail-more-albums"),Re=document.getElementById("album-title-more-albums"),Be=document.getElementById("album-section-eps"),De=document.getElementById("album-detail-eps"),re=document.getElementById("album-title-eps"),se=document.getElementById("album-section-similar-artists"),he=document.getElementById("album-detail-similar-artists"),ve=document.getElementById("album-section-similar-albums"),ke=document.getElementById("album-detail-similar-albums");[Te,Be,se,ve].forEach(Fe=>{Fe&&(Fe.style.display="none")});try{const Fe=await this.api.getArtist(T.artist.id),ye=document.getElementById("album-mix-btn");ye&&Fe.mixes&&Fe.mixes.ARTIST_MIX&&(ye.style.display="flex",ye.onclick=()=>window.location.hash=`#mix/${Fe.mixes.ARTIST_MIX}`);const Qe=(xe,Le,ot,Ht,Et)=>{if(!Le||!ot)return;const zt=(xe||[]).filter(Rt=>Rt.id!=T.id).filter((Rt,Xt,tn)=>Xt===tn.findIndex(cn=>cn.title===Rt.title)).slice(0,12);zt.length!==0&&(Le.innerHTML=zt.map(Rt=>this.createAlbumCardHTML(Rt)).join(""),Ht&&Et&&(Ht.textContent=Et),ot.style.display="block",zt.forEach(Rt=>{const Xt=Le.querySelector(`[data-album-id="${Rt.id}"]`);Xt&&(Gn.set(Xt,Rt),this.updateLikeState(Xt,"album",Rt.id))}))};Qe(Fe.albums,Se,Te,Re,`More albums from ${T.artist.name}`),Qe(Fe.eps,De,Be,re,`EPs and Singles from ${T.artist.name}`),this.api.getSimilarArtists(T.artist.id).then(xe=>{xe&&xe.length>0&&he&&se&&(he.innerHTML=xe.map(Le=>this.createArtistCardHTML(Le)).join(""),se.style.display="block")}).catch(xe=>console.warn("Failed to load similar artists:",xe)),this.api.getSimilarAlbums(e).then(xe=>{xe&&xe.length>0&&ke&&ve&&(ke.innerHTML=xe.map(Le=>this.createAlbumCardHTML(Le)).join(""),ve.style.display="block",xe.forEach(Le=>{const ot=ke.querySelector(`[data-album-id="${Le.id}"]`);ot&&(Gn.set(ot,Le),this.updateLikeState(ot,"album",Le.id))}))}).catch(xe=>console.warn("Failed to load similar albums:",xe))}catch(Fe){console.warn('Failed to load "More from artist":',Fe)}}catch(T){console.error("Failed to load album:",T),u.innerHTML=Bn(`Could not load album details. ${T.message}`)}}async loadRecommendedSongsForPlaylist(e){const t=document.getElementById("playlist-section-recommended"),o=document.getElementById("playlist-detail-recommended");if(!t||!o){console.warn("Recommended songs section not found in DOM");return}try{const n=await this.api.getRecommendedTracksForPlaylist(e,20);n.length>0?(this.renderListWithTracks(o,n,!0),o.querySelectorAll(".track-item").forEach(u=>{const p=u.querySelector(".track-item-actions");if(p){const m=document.createElement("button");m.className="track-action-btn add-to-playlist-btn",m.title="Add to this playlist",m.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 5v14"/><path d="M5 12h14"/></svg>',m.onclick=async T=>{T.stopPropagation();const f=Gn.get(u);if(f)try{const v=window.location.hash.match(/#userplaylist\/([^/]+)/);if(v){const _=v[1];await Tn.addTrackToPlaylist(_,f);const x=await Tn.getPlaylist(_);Yn.syncUserPlaylist(x,"update");const te=document.getElementById("playlist-detail-tracklist");if(te&&x.tracks){te.innerHTML=`
                                                                                                                                                <div class="track-list-header">
                                                                                                                                                    <span style="width: 40px; text-align: center;">#</span>
                                                                                                                                                    <span>Title</span>
                                                                                                                                                    <span class="duration-header">Duration</span>
                                                                                                                                                    <span style="display: flex; justify-content: flex-end; opacity: 0.8;">Menu</span>
                                                                                                                                                </div>                                            `,this.renderListWithTracks(te,x.tracks,!0),document.querySelector(".remove-from-playlist-btn")&&this.enableTrackReordering(te,x.tracks,_,Yn);const oe=document.getElementById("playlist-detail-meta");if(oe){const Te=Wr(x.tracks);oe.textContent=`${x.tracks.length} tracks • ${Qr(Te)}`}}Jn(`Added "${f.title}" to playlist`)}}catch(c){console.error("Failed to add track to playlist:",c),Jn("Failed to add track to playlist")}};const g=p.querySelector(".track-menu-btn");g?p.insertBefore(m,g):p.appendChild(m)}}),t.style.display="block"):t.style.display="none"}catch(n){console.error("Failed to load recommended songs:",n),t.style.display="none"}}async renderPlaylistPage(e,t=null){this.showPage("playlist");const o=document.getElementById("playlist-detail-image"),n=document.getElementById("playlist-detail-title"),r=document.getElementById("playlist-detail-meta"),u=document.getElementById("playlist-detail-description"),p=document.getElementById("playlist-detail-tracklist"),m=document.getElementById("play-playlist-btn");m&&(m.innerHTML=`${pr}<span>Play</span>`);const g=document.getElementById("download-playlist-btn");g&&(g.innerHTML=`${Ir}<span>Download</span>`),o.src="",o.style.backgroundColor="var(--muted)",n.innerHTML='<div class="skeleton" style="height: 48px; width: 300px; max-width: 90%;"></div>',r.innerHTML='<div class="skeleton" style="height: 16px; width: 200px; max-width: 80%;"></div>',u.innerHTML='<div class="skeleton" style="height: 16px; width: 100%;"></div>',p.innerHTML=`
            <div class="track-list-header">
                <span style="width: 40px; text-align: center;">#</span>
                <span>Title</span>
                <span class="duration-header">Duration</span>
                <span style="display: flex; justify-content: flex-end; opacity: 0.8;">Menu</span>
            </div>
            ${this.createSkeletonTracks(10,!0)}
        `;try{const T=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(e);let f=null,c=null;if((t==="user"||!t&&T)&&(c=await Tn.getPlaylist(e),f=c,!f))try{f=await Yn.getPublicPlaylist(e)}catch(v){console.warn("Failed to check public pocketbase playlists:",v)}if(f){o.src=f.cover||"assets/appicon.png",o.style.backgroundColor="",n.textContent=f.name||f.title,this.adjustTitleFontSize(n,n.textContent);const v=f.tracks||[],_=Wr(v);r.textContent=`${v.length} tracks • ${Qr(_)}`,u.textContent=f.description||"",p.innerHTML=`
                    <div class="track-list-header">
                        <span style="width: 40px; text-align: center;">#</span>
                        <span>Title</span>
                        <span class="duration-header">Duration</span>
                        <span style="display: flex; justify-content: flex-end; opacity: 0.8;">Menu</span>
                    </div>
                `,this.renderListWithTracks(p,v,!0,!0),c?(p.classList.add("is-editable"),p.querySelectorAll(".track-item").forEach((Re,Be)=>{const De=Re.querySelector(".track-item-actions"),re=document.createElement("button");re.className="track-action-btn remove-from-playlist-btn",re.title="Remove from playlist",re.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg>',re.dataset.trackIndex=Be;const se=De.querySelector(".track-menu-btn");De.insertBefore(re,se)}),this.enableTrackReordering(p,v,e,Yn)):p.classList.remove("is-editable");const x=document.getElementById("like-playlist-btn");x&&(x.style.display="none"),c&&this.loadRecommendedSongsForPlaylist(v),this.updatePlaylistHeaderActions(f,!!c,v);const te=[],oe=new Set,Te=f.tracks||[];for(const Se of Te){const Re=Se.album?.cover;if(Re&&!oe.has(Re)&&(oe.add(Re),te.push(Re),te.length>=4))break}gr.addPlaylist({id:f.id||f.uuid,name:f.name||f.title,title:f.title||f.name,uuid:f.uuid||f.id,cover:f.cover,images:te,numberOfTracks:f.tracks?f.tracks.length:0,isUserPlaylist:!0}),document.title=`${f.name||f.title} - Monochrome`}else{if(t==="user")throw new Error("Playlist not found. If this is a custom playlist, make sure it is set to Public.");let v=await this.api.getPlaylist(e);const{playlist:_,tracks:x}=v,te=_.squareImage||_.image;te?(o.src=this.api.getCoverUrl(te,"1080"),this.setPageBackground(o.src),this.extractAndApplyColor(this.api.getCoverUrl(te,"160"))):(o.src="assets/appicon.png",this.setPageBackground(null),this.resetVibrantColor()),n.textContent=_.title,this.adjustTitleFontSize(n,_.title);const oe=Wr(x);r.textContent=`${_.numberOfTracks} tracks • ${Qr(oe)}`,u.textContent=_.description||"",p.innerHTML=`
                    <div class="track-list-header">
                        <span style="width: 40px; text-align: center;">#</span>
                        <span>Title</span>
                        <span class="duration-header">Duration</span>
                        <span style="display: flex; justify-content: flex-end; opacity: 0.8;">Menu</span>
                    </div>
                `,this.renderListWithTracks(p,x,!0,!0);const Te=document.getElementById("like-playlist-btn");if(Te){const Be=await Tn.isFavorite("playlist",_.uuid);Te.innerHTML=this.createHeartIcon(Be),Te.classList.toggle("active",Be),Te.style.display="flex"}const Se=document.getElementById("delete-playlist-btn");Se&&(Se.style.display="none");const Re=document.getElementById("playlist-section-recommended");Re&&(Re.style.display="none"),this.updatePlaylistHeaderActions(_,!1,x,!1),gr.addPlaylist(_),document.title=_.title||"Artist Mix"}}catch(T){console.error("Failed to load playlist:",T),p.innerHTML=Bn(`Could not load playlist details. ${T.message}`)}}async renderMixPage(e){this.showPage("mix");const t=document.getElementById("mix-detail-image"),o=document.getElementById("mix-detail-title"),n=document.getElementById("mix-detail-meta"),r=document.getElementById("mix-detail-description"),u=document.getElementById("mix-detail-tracklist"),p=document.getElementById("play-mix-btn");p&&(p.innerHTML=`${pr}<span>Play</span>`);const m=document.getElementById("download-mix-btn");m&&(m.innerHTML=`${Ir}<span>Download</span>`),t.src="",t.style.backgroundColor="var(--muted)",o.innerHTML='<div class="skeleton" style="height: 48px; width: 300px; max-width: 90%;"></div>',n.innerHTML='<div class="skeleton" style="height: 16px; width: 200px; max-width: 80%;"></div>',r.innerHTML='<div class="skeleton" style="height: 16px; width: 100%;"></div>',u.innerHTML=`
            <div class="track-list-header">
                <span style="width: 40px; text-align: center;">#</span>
                <span>Title</span>
                <span class="duration-header">Duration</span>
                <span style="display: flex; justify-content: flex-end; opacity: 0.8;">Menu</span>
            </div>
            ${this.createSkeletonTracks(10,!0)}
        `;try{const{mix:g,tracks:T}=await this.api.getMix(e);g.cover?(t.src=g.cover,this.setPageBackground(g.cover),this.extractAndApplyColor(g.cover)):T.length>0&&T[0].album?.cover?(t.src=this.api.getCoverUrl(T[0].album.cover),this.setPageBackground(t.src),this.extractAndApplyColor(this.api.getCoverUrl(T[0].album.cover,"160"))):(t.src="assets/appicon.png",this.setPageBackground(null),this.resetVibrantColor()),t.style.backgroundColor="";const f=g.title||"Mix";o.textContent=f,this.adjustTitleFontSize(o,f);const c=Wr(T);n.textContent=`${T.length} tracks • ${Qr(c)}`,r.innerHTML=`${g.subTitle}`,u.innerHTML=`
                <div class="track-list-header">
                    <span style="width: 40px; text-align: center;">#</span>
                    <span>Title</span>
                    <span class="duration-header">Duration</span>
                    <span style="display: flex; justify-content: flex-end; opacity: 0.8;">Menu</span>
                </div>
            `,this.renderListWithTracks(u,T,!0,!0),p.onclick=()=>{this.player.setQueue(T,0),this.player.playTrackFromQueue()},gr.addMix(g);const v=document.getElementById("like-mix-btn");if(v){v.style.display="flex";const _=await Tn.isFavorite("mix",g.id);v.innerHTML=this.createHeartIcon(_),v.classList.toggle("active",_)}document.title=f}catch(g){console.error("Failed to load mix:",g),u.innerHTML=Bn(`Could not load mix details. ${g.message}`)}}async renderArtistPage(e){this.showPage("artist");const t=document.getElementById("artist-detail-image"),o=document.getElementById("artist-detail-name"),n=document.getElementById("artist-detail-meta"),r=document.getElementById("artist-detail-tracks"),u=document.getElementById("artist-detail-albums"),p=document.getElementById("artist-detail-eps"),m=document.getElementById("artist-section-eps"),g=document.getElementById("artist-detail-similar"),T=document.getElementById("artist-section-similar"),f=document.getElementById("download-discography-btn");f&&(f.innerHTML=`${Ir}<span>Download Discography</span>`),t.src="",t.style.backgroundColor="var(--muted)",o.innerHTML='<div class="skeleton" style="height: 48px; width: 300px; max-width: 90%;"></div>',n.innerHTML='<div class="skeleton" style="height: 16px; width: 150px;"></div>',r.innerHTML=this.createSkeletonTracks(5,!0),u.innerHTML=this.createSkeletonCards(6,!1),p&&(p.innerHTML=this.createSkeletonCards(6,!1)),m&&(m.style.display="none"),g&&(g.innerHTML=this.createSkeletonCards(6,!0)),T&&(T.style.display="block");try{const c=await this.api.getArtist(e),v=document.getElementById("artist-mix-btn");v&&(c.mixes&&c.mixes.ARTIST_MIX?(v.style.display="flex",v.onclick=()=>window.location.hash=`#mix/${c.mixes.ARTIST_MIX}`):v.style.display="none"),g&&T&&this.api.getSimilarArtists(e).then(te=>{te&&te.length>0?(g.innerHTML=te.map(oe=>this.createArtistCardHTML(oe)).join(""),T.style.display="block"):T.style.display="none"}).catch(()=>{T.style.display="none"}),t.src=this.api.getArtistPictureUrl(c.picture),t.style.backgroundColor="",o.textContent=c.name,this.setPageBackground(t.src);const _=this.api.getArtistPictureUrl(c.picture,"160");this.extractAndApplyColor(_),this.adjustTitleFontSize(o,c.name),n.innerHTML=`
                <span>${c.popularity}% popularity</span>
                <div class="artist-tags">
                    ${(c.artistRoles||[]).filter(te=>te.category).map(te=>`<span class="artist-tag">${te.category}</span>`).join("")}
                </div>
            `,this.renderListWithTracks(r,c.tracks,!0);const x=document.getElementById("like-artist-btn");if(x){const te=await Tn.isFavorite("artist",c.id);x.innerHTML=this.createHeartIcon(te),x.classList.toggle("active",te)}u.innerHTML=c.albums.map(te=>this.createAlbumCardHTML(te)).join(""),u.innerHTML=c.albums.length?c.albums.map(te=>this.createAlbumCardHTML(te)).join(""):Bn("No albums found."),p&&m&&(c.eps&&c.eps.length>0?(p.innerHTML=c.eps.map(te=>this.createAlbumCardHTML(te)).join(""),m.style.display="block",c.eps.forEach(te=>{const oe=p.querySelector(`[data-album-id="${te.id}"]`);oe&&(Gn.set(oe,te),this.updateLikeState(oe,"album",te.id))})):m.style.display="none"),c.albums.forEach(te=>{const oe=u.querySelector(`[data-album-id="${te.id}"]`);oe&&(Gn.set(oe,te),this.updateLikeState(oe,"album",te.id))}),gr.addArtist(c),document.title=c.name}catch(c){console.error("Failed to load artist:",c),r.innerHTML=u.innerHTML=Bn(`Could not load artist details. ${c.message}`)}}async renderRecentPage(){this.showPage("recent");const e=document.getElementById("recent-tracks-container");e.innerHTML=this.createSkeletonTracks(10,!0);try{const t=await Tn.getHistory();if(t.length===0){e.innerHTML=Bn("You haven't played any tracks yet.");return}const o={},n=new Date().setHours(0,0,0,0),r=new Date(n-864e5).setHours(0,0,0,0);t.forEach(u=>{const p=new Date(u.timestamp),m=new Date(p).setHours(0,0,0,0);let g;m===n?g="Today":m===r?g="Yesterday":g=p.toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"}),o[g]||(o[g]=[]),o[g].push(u)}),e.innerHTML="";for(const[u,p]of Object.entries(o)){const m=document.createElement("h3");m.className="track-list-header-group",m.textContent=u,m.style.margin="1.5rem 0 0.5rem 0",m.style.fontSize="1.1rem",m.style.fontWeight="600",m.style.color="var(--foreground)",m.style.paddingLeft="0.5rem",e.appendChild(m);const g=document.createElement("div");for(this.renderListWithTracks(g,p,!0);g.firstChild;)e.appendChild(g.firstChild)}}catch(t){console.error("Failed to load history:",t),e.innerHTML=Bn("Failed to load history.")}}updatePlaylistHeaderActions(e,t,o,n=!1){const r=document.getElementById("page-playlist").querySelector(".detail-header-actions");["shuffle-playlist-btn","edit-playlist-btn","delete-playlist-btn","share-playlist-btn"].forEach(g=>{const T=r.querySelector(`#${g}`);T&&T.remove()});const u=document.createDocumentFragment(),p=document.createElement("button");if(p.id="shuffle-playlist-btn",p.className="btn-primary",p.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m18 14 4 4-4 4"/><path d="m18 2 4 4-4 4"/><path d="M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22"/><path d="M2 6h1.972a4 4 0 0 1 3.6 2.2"/><path d="M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45"/></svg><span>Shuffle</span>',p.onclick=()=>{const g=[...o].sort(()=>Math.random()-.5);this.player.setQueue(g,0),this.player.playTrackFromQueue()},u.appendChild(p),t){const g=document.createElement("button");g.id="edit-playlist-btn",g.className="btn-secondary",g.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/></svg><span>Edit</span>',u.appendChild(g);const T=document.createElement("button");T.id="delete-playlist-btn",T.className="btn-secondary danger",T.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/><line x1="10" y1="11" x2="10" y2="17"/><line x1="14" y1="11" x2="14" y2="17"/></svg><span>Delete</span>',u.appendChild(T)}if(n||t&&e.isPublic){const g=document.createElement("button");g.id="share-playlist-btn",g.className="btn-secondary",g.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"/><polyline points="16 6 12 2 8 6"/><line x1="12" y1="2" x2="12" y2="15"/></svg><span>Share</span>',g.onclick=()=>{const T=`${window.location.origin}${window.location.pathname}#userplaylist/${e.id||e.uuid}`;navigator.clipboard.writeText(T).then(()=>alert("Link copied to clipboard!"))},u.appendChild(g)}const m=r.querySelector("#download-playlist-btn");if(m)for(r.insertBefore(p,m);u.firstChild;)r.appendChild(u.firstChild);else r.appendChild(u)}enableTrackReordering(e,t,o,n){let r=null,u=-1;Array.from(e.querySelectorAll(".track-item")).forEach((v,_)=>{v.draggable=!0,v.dataset.index=_});const m=v=>{r=v.target,u=parseInt(v.target.dataset.index),v.dataTransfer.effectAllowed="move",v.dataTransfer.setData("text/plain",u),r.classList.add("dragging")},g=()=>{r&&(r.classList.remove("dragging"),r=null)},T=v=>{if(v.preventDefault(),v.dataTransfer.dropEffect="move",!r)return;const _=c(e,v.clientY);_!==r&&(_?e.insertBefore(r,_):e.appendChild(r))},f=async v=>{if(v.preventDefault(),!!r)try{const _=Array.from(e.querySelectorAll(".track-item")),x=_.map(oe=>{const Te=parseInt(oe.dataset.index);return t[Te]});_.forEach((oe,Te)=>{oe.dataset.index=Te}),t.splice(0,t.length,...x);const te=await Tn.updatePlaylistTracks(o,x);n.syncUserPlaylist(te,"update"),r=null,u=-1}catch(_){console.error("Error updating playlist tracks:",_),r&&(r.classList.remove("dragging"),r=null),u=-1}};e.addEventListener("dragstart",m),e.addEventListener("dragend",g),e.addEventListener("dragover",T),e.addEventListener("drop",f);function c(v,_){return[...v.querySelectorAll(".track-item:not(.dragging)")].reduce((te,oe)=>{const Te=oe.getBoundingClientRect(),Se=_-Te.top-Te.height/2;return Se<0&&Se>te.offset?{offset:Se,element:oe}:te},{offset:Number.NEGATIVE_INFINITY}).element}}getDragAfterElement(e,t){return[...e.querySelectorAll(".track-item:not(.dragging)")].reduce((n,r)=>{const u=r.getBoundingClientRect(),p=t-u.top-u.height/2;return p<0&&p>n.offset?{offset:p,element:r}:n},{offset:Number.NEGATIVE_INFINITY}).element}renderApiSettings(){const e=document.getElementById("api-instance-list");Promise.all([this.api.settings.getInstances("api"),this.api.settings.getInstances("streaming")]).then(([t,o])=>{const r=this.api.settings.getCachedSpeedTests()?.speeds||{},u=(g,T)=>{if(!g||g.length===0)return"";const f=g.map((c,v)=>{const _=T==="streaming"?`${c}#streaming`:c,x=r[_],te=x?x.speed===1/0||typeof x.speed!="number"?'<span style="color: var(--muted-foreground); font-size: 0.8rem;">Failed</span>':`<span style="color: var(--muted-foreground); font-size: 0.8rem;">${x.speed.toFixed(0)}ms</span>`:"";return`
                        <li data-index="${v}" data-type="${T}">
                            <div style="flex: 1; min-width: 0;">
                                <div class="instance-url">${c}</div>
                                ${te}
                            </div>
                            <div class="controls">
                                <button class="move-up" title="Move Up" ${v===0?"disabled":""}>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 19V5M5 12l7-7 7 7"/>
                                    </svg>
                                </button>
                                <button class="move-down" title="Move Down" ${v===g.length-1?"disabled":""}>
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 5v14M19 12l-7 7-7-7"/>
                                    </svg>
                                </button>
                            </div>
                        </li>
                    `}).join("");return`
                    <li class="group-header" style="font-weight: bold; padding: 1rem 0 0.5rem; background: transparent; border: none; pointer-events: none;">
                        ${T==="api"?"API Instances":"Streaming Instances"}
                    </li>
                    ${f}
                `};e.innerHTML=u(t,"api")+u(o,"streaming");const p=this.api.getCacheStats(),m=document.getElementById("cache-info");m&&(m.textContent=`Cache: ${p.memoryEntries}/${p.maxSize} entries`)})}}var Lg={7267:function(h,e){e.byteLength=function(g){var T=p(g),f=T[0],c=T[1];return 3*(f+c)/4-c},e.toByteArray=function(g){var T,f,c=p(g),v=c[0],_=c[1],x=new n((function(Te,Se,Re){return 3*(Se+Re)/4-Re})(0,v,_)),te=0,oe=_>0?v-4:v;for(f=0;f<oe;f+=4)T=o[g.charCodeAt(f)]<<18|o[g.charCodeAt(f+1)]<<12|o[g.charCodeAt(f+2)]<<6|o[g.charCodeAt(f+3)],x[te++]=T>>16&255,x[te++]=T>>8&255,x[te++]=255&T;return _===2&&(T=o[g.charCodeAt(f)]<<2|o[g.charCodeAt(f+1)]>>4,x[te++]=255&T),_===1&&(T=o[g.charCodeAt(f)]<<10|o[g.charCodeAt(f+1)]<<4|o[g.charCodeAt(f+2)]>>2,x[te++]=T>>8&255,x[te++]=255&T),x},e.fromByteArray=function(g){for(var T,f=g.length,c=f%3,v=[],_=16383,x=0,te=f-c;x<te;x+=_)v.push(m(g,x,x+_>te?te:x+_));return c===1?(T=g[f-1],v.push(t[T>>2]+t[T<<4&63]+"==")):c===2&&(T=(g[f-2]<<8)+g[f-1],v.push(t[T>>10]+t[T>>4&63]+t[T<<2&63]+"=")),v.join("")};for(var t=[],o=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=0;u<64;++u)t[u]=r[u],o[r.charCodeAt(u)]=u;function p(g){var T=g.length;if(T%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=g.indexOf("=");return f===-1&&(f=T),[f,f===T?0:4-f%4]}function m(g,T,f){for(var c,v,_=[],x=T;x<f;x+=3)c=(g[x]<<16&16711680)+(g[x+1]<<8&65280)+(255&g[x+2]),_.push(t[(v=c)>>18&63]+t[v>>12&63]+t[v>>6&63]+t[63&v]);return _.join("")}o[45]=62,o[95]=63},44:function(h,e,t){var o=t(7267),n=t(7986),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=m,e.SlowBuffer=function($){return+$!=$&&($=0),m.alloc(+$)},e.INSPECT_MAX_BYTES=50;var u=2147483647;function p($){if($>u)throw new RangeError('The value "'+$+'" is invalid for option "size"');var Y=new Uint8Array($);return Object.setPrototypeOf(Y,m.prototype),Y}function m($,Y,A){if(typeof $=="number"){if(typeof Y=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return f($)}return g($,Y,A)}function g($,Y,A){if(typeof $=="string")return(function(G,Ae){if(typeof Ae=="string"&&Ae!==""||(Ae="utf8"),!m.isEncoding(Ae))throw new TypeError("Unknown encoding: "+Ae);var Ye=0|x(G,Ae),ze=p(Ye),je=ze.write(G,Ae);return je!==Ye&&(ze=ze.slice(0,je)),ze})($,Y);if(ArrayBuffer.isView($))return(function(G){if(Ne(G,Uint8Array)){var Ae=new Uint8Array(G);return v(Ae.buffer,Ae.byteOffset,Ae.byteLength)}return c(G)})($);if($==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $);if(Ne($,ArrayBuffer)||$&&Ne($.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Ne($,SharedArrayBuffer)||$&&Ne($.buffer,SharedArrayBuffer)))return v($,Y,A);if(typeof $=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');var I=$.valueOf&&$.valueOf();if(I!=null&&I!==$)return m.from(I,Y,A);var J=(function(G){if(m.isBuffer(G)){var Ae=0|_(G.length),Ye=p(Ae);return Ye.length===0||G.copy(Ye,0,0,Ae),Ye}return G.length!==void 0?typeof G.length!="number"||Ce(G.length)?p(0):c(G):G.type==="Buffer"&&Array.isArray(G.data)?c(G.data):void 0})($);if(J)return J;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof $[Symbol.toPrimitive]=="function")return m.from($[Symbol.toPrimitive]("string"),Y,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof $)}function T($){if(typeof $!="number")throw new TypeError('"size" argument must be of type number');if($<0)throw new RangeError('The value "'+$+'" is invalid for option "size"')}function f($){return T($),p($<0?0:0|_($))}function c($){for(var Y=$.length<0?0:0|_($.length),A=p(Y),I=0;I<Y;I+=1)A[I]=255&$[I];return A}function v($,Y,A){if(Y<0||$.byteLength<Y)throw new RangeError('"offset" is outside of buffer bounds');if($.byteLength<Y+(A||0))throw new RangeError('"length" is outside of buffer bounds');var I;return I=Y===void 0&&A===void 0?new Uint8Array($):A===void 0?new Uint8Array($,Y):new Uint8Array($,Y,A),Object.setPrototypeOf(I,m.prototype),I}function _($){if($>=u)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+u.toString(16)+" bytes");return 0|$}function x($,Y){if(m.isBuffer($))return $.length;if(ArrayBuffer.isView($)||Ne($,ArrayBuffer))return $.byteLength;if(typeof $!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof $);var A=$.length,I=arguments.length>2&&arguments[2]===!0;if(!I&&A===0)return 0;for(var J=!1;;)switch(Y){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return Xt($).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*A;case"hex":return A>>>1;case"base64":return tn($).length;default:if(J)return I?-1:Xt($).length;Y=(""+Y).toLowerCase(),J=!0}}function te($,Y,A){var I=!1;if((Y===void 0||Y<0)&&(Y=0),Y>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0)<=(Y>>>=0))return"";for($||($="utf8");;)switch($){case"hex":return Qe(this,Y,A);case"utf8":case"utf-8":return ve(this,Y,A);case"ascii":return Fe(this,Y,A);case"latin1":case"binary":return ye(this,Y,A);case"base64":return he(this,Y,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return xe(this,Y,A);default:if(I)throw new TypeError("Unknown encoding: "+$);$=($+"").toLowerCase(),I=!0}}function oe($,Y,A){var I=$[Y];$[Y]=$[A],$[A]=I}function Te($,Y,A,I,J){if($.length===0)return-1;if(typeof A=="string"?(I=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),Ce(A=+A)&&(A=J?0:$.length-1),A<0&&(A=$.length+A),A>=$.length){if(J)return-1;A=$.length-1}else if(A<0){if(!J)return-1;A=0}if(typeof Y=="string"&&(Y=m.from(Y,I)),m.isBuffer(Y))return Y.length===0?-1:Se($,Y,A,I,J);if(typeof Y=="number")return Y&=255,typeof Uint8Array.prototype.indexOf=="function"?J?Uint8Array.prototype.indexOf.call($,Y,A):Uint8Array.prototype.lastIndexOf.call($,Y,A):Se($,[Y],A,I,J);throw new TypeError("val must be string, number or Buffer")}function Se($,Y,A,I,J){var G,Ae=1,Ye=$.length,ze=Y.length;if(I!==void 0&&((I=String(I).toLowerCase())==="ucs2"||I==="ucs-2"||I==="utf16le"||I==="utf-16le")){if($.length<2||Y.length<2)return-1;Ae=2,Ye/=2,ze/=2,A/=2}function je(Je,mt){return Ae===1?Je[mt]:Je.readUInt16BE(mt*Ae)}if(J){var Oe=-1;for(G=A;G<Ye;G++)if(je($,G)===je(Y,Oe===-1?0:G-Oe)){if(Oe===-1&&(Oe=G),G-Oe+1===ze)return Oe*Ae}else Oe!==-1&&(G-=G-Oe),Oe=-1}else for(A+ze>Ye&&(A=Ye-ze),G=A;G>=0;G--){for(var Ve=!0,tt=0;tt<ze;tt++)if(je($,G+tt)!==je(Y,tt)){Ve=!1;break}if(Ve)return G}return-1}function Re($,Y,A,I){A=Number(A)||0;var J=$.length-A;I?(I=Number(I))>J&&(I=J):I=J;var G=Y.length;I>G/2&&(I=G/2);for(var Ae=0;Ae<I;++Ae){var Ye=parseInt(Y.substr(2*Ae,2),16);if(Ce(Ye))return Ae;$[A+Ae]=Ye}return Ae}function Be($,Y,A,I){return cn(Xt(Y,$.length-A),$,A,I)}function De($,Y,A,I){return cn((function(J){for(var G=[],Ae=0;Ae<J.length;++Ae)G.push(255&J.charCodeAt(Ae));return G})(Y),$,A,I)}function re($,Y,A,I){return cn(tn(Y),$,A,I)}function se($,Y,A,I){return cn((function(J,G){for(var Ae,Ye,ze,je=[],Oe=0;Oe<J.length&&!((G-=2)<0);++Oe)Ye=(Ae=J.charCodeAt(Oe))>>8,ze=Ae%256,je.push(ze),je.push(Ye);return je})(Y,$.length-A),$,A,I)}function he($,Y,A){return Y===0&&A===$.length?o.fromByteArray($):o.fromByteArray($.slice(Y,A))}function ve($,Y,A){A=Math.min($.length,A);for(var I=[],J=Y;J<A;){var G,Ae,Ye,ze,je=$[J],Oe=null,Ve=je>239?4:je>223?3:je>191?2:1;if(J+Ve<=A)switch(Ve){case 1:je<128&&(Oe=je);break;case 2:(192&(G=$[J+1]))==128&&(ze=(31&je)<<6|63&G)>127&&(Oe=ze);break;case 3:G=$[J+1],Ae=$[J+2],(192&G)==128&&(192&Ae)==128&&(ze=(15&je)<<12|(63&G)<<6|63&Ae)>2047&&(ze<55296||ze>57343)&&(Oe=ze);break;case 4:G=$[J+1],Ae=$[J+2],Ye=$[J+3],(192&G)==128&&(192&Ae)==128&&(192&Ye)==128&&(ze=(15&je)<<18|(63&G)<<12|(63&Ae)<<6|63&Ye)>65535&&ze<1114112&&(Oe=ze)}Oe===null?(Oe=65533,Ve=1):Oe>65535&&(Oe-=65536,I.push(Oe>>>10&1023|55296),Oe=56320|1023&Oe),I.push(Oe),J+=Ve}return(function(tt){var Je=tt.length;if(Je<=ke)return String.fromCharCode.apply(String,tt);for(var mt="",Vt=0;Vt<Je;)mt+=String.fromCharCode.apply(String,tt.slice(Vt,Vt+=ke));return mt})(I)}e.kMaxLength=u,m.TYPED_ARRAY_SUPPORT=(function(){try{var $=new Uint8Array(1),Y={foo:function(){return 42}};return Object.setPrototypeOf(Y,Uint8Array.prototype),Object.setPrototypeOf($,Y),$.foo()===42}catch{return!1}})(),m.TYPED_ARRAY_SUPPORT||typeof console>"u"||typeof console.error!="function"||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(m.prototype,"parent",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.buffer}}),Object.defineProperty(m.prototype,"offset",{enumerable:!0,get:function(){if(m.isBuffer(this))return this.byteOffset}}),m.poolSize=8192,m.from=function($,Y,A){return g($,Y,A)},Object.setPrototypeOf(m.prototype,Uint8Array.prototype),Object.setPrototypeOf(m,Uint8Array),m.alloc=function($,Y,A){return(function(I,J,G){return T(I),I<=0?p(I):J!==void 0?typeof G=="string"?p(I).fill(J,G):p(I).fill(J):p(I)})($,Y,A)},m.allocUnsafe=function($){return f($)},m.allocUnsafeSlow=function($){return f($)},m.isBuffer=function($){return $!=null&&$._isBuffer===!0&&$!==m.prototype},m.compare=function($,Y){if(Ne($,Uint8Array)&&($=m.from($,$.offset,$.byteLength)),Ne(Y,Uint8Array)&&(Y=m.from(Y,Y.offset,Y.byteLength)),!m.isBuffer($)||!m.isBuffer(Y))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if($===Y)return 0;for(var A=$.length,I=Y.length,J=0,G=Math.min(A,I);J<G;++J)if($[J]!==Y[J]){A=$[J],I=Y[J];break}return A<I?-1:I<A?1:0},m.isEncoding=function($){switch(String($).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},m.concat=function($,Y){if(!Array.isArray($))throw new TypeError('"list" argument must be an Array of Buffers');if($.length===0)return m.alloc(0);var A;if(Y===void 0)for(Y=0,A=0;A<$.length;++A)Y+=$[A].length;var I=m.allocUnsafe(Y),J=0;for(A=0;A<$.length;++A){var G=$[A];if(Ne(G,Uint8Array))J+G.length>I.length?m.from(G).copy(I,J):Uint8Array.prototype.set.call(I,G,J);else{if(!m.isBuffer(G))throw new TypeError('"list" argument must be an Array of Buffers');G.copy(I,J)}J+=G.length}return I},m.byteLength=x,m.prototype._isBuffer=!0,m.prototype.swap16=function(){var $=this.length;if($%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var Y=0;Y<$;Y+=2)oe(this,Y,Y+1);return this},m.prototype.swap32=function(){var $=this.length;if($%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var Y=0;Y<$;Y+=4)oe(this,Y,Y+3),oe(this,Y+1,Y+2);return this},m.prototype.swap64=function(){var $=this.length;if($%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var Y=0;Y<$;Y+=8)oe(this,Y,Y+7),oe(this,Y+1,Y+6),oe(this,Y+2,Y+5),oe(this,Y+3,Y+4);return this},m.prototype.toString=function(){var $=this.length;return $===0?"":arguments.length===0?ve(this,0,$):te.apply(this,arguments)},m.prototype.toLocaleString=m.prototype.toString,m.prototype.equals=function($){if(!m.isBuffer($))throw new TypeError("Argument must be a Buffer");return this===$||m.compare(this,$)===0},m.prototype.inspect=function(){var $="",Y=e.INSPECT_MAX_BYTES;return $=this.toString("hex",0,Y).replace(/(.{2})/g,"$1 ").trim(),this.length>Y&&($+=" ... "),"<Buffer "+$+">"},r&&(m.prototype[r]=m.prototype.inspect),m.prototype.compare=function($,Y,A,I,J){if(Ne($,Uint8Array)&&($=m.from($,$.offset,$.byteLength)),!m.isBuffer($))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof $);if(Y===void 0&&(Y=0),A===void 0&&(A=$?$.length:0),I===void 0&&(I=0),J===void 0&&(J=this.length),Y<0||A>$.length||I<0||J>this.length)throw new RangeError("out of range index");if(I>=J&&Y>=A)return 0;if(I>=J)return-1;if(Y>=A)return 1;if(this===$)return 0;for(var G=(J>>>=0)-(I>>>=0),Ae=(A>>>=0)-(Y>>>=0),Ye=Math.min(G,Ae),ze=this.slice(I,J),je=$.slice(Y,A),Oe=0;Oe<Ye;++Oe)if(ze[Oe]!==je[Oe]){G=ze[Oe],Ae=je[Oe];break}return G<Ae?-1:Ae<G?1:0},m.prototype.includes=function($,Y,A){return this.indexOf($,Y,A)!==-1},m.prototype.indexOf=function($,Y,A){return Te(this,$,Y,A,!0)},m.prototype.lastIndexOf=function($,Y,A){return Te(this,$,Y,A,!1)},m.prototype.write=function($,Y,A,I){if(Y===void 0)I="utf8",A=this.length,Y=0;else if(A===void 0&&typeof Y=="string")I=Y,A=this.length,Y=0;else{if(!isFinite(Y))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");Y>>>=0,isFinite(A)?(A>>>=0,I===void 0&&(I="utf8")):(I=A,A=void 0)}var J=this.length-Y;if((A===void 0||A>J)&&(A=J),$.length>0&&(A<0||Y<0)||Y>this.length)throw new RangeError("Attempt to write outside buffer bounds");I||(I="utf8");for(var G=!1;;)switch(I){case"hex":return Re(this,$,Y,A);case"utf8":case"utf-8":return Be(this,$,Y,A);case"ascii":case"latin1":case"binary":return De(this,$,Y,A);case"base64":return re(this,$,Y,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return se(this,$,Y,A);default:if(G)throw new TypeError("Unknown encoding: "+I);I=(""+I).toLowerCase(),G=!0}},m.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var ke=4096;function Fe($,Y,A){var I="";A=Math.min($.length,A);for(var J=Y;J<A;++J)I+=String.fromCharCode(127&$[J]);return I}function ye($,Y,A){var I="";A=Math.min($.length,A);for(var J=Y;J<A;++J)I+=String.fromCharCode($[J]);return I}function Qe($,Y,A){var I=$.length;(!Y||Y<0)&&(Y=0),(!A||A<0||A>I)&&(A=I);for(var J="",G=Y;G<A;++G)J+=lt[$[G]];return J}function xe($,Y,A){for(var I=$.slice(Y,A),J="",G=0;G<I.length-1;G+=2)J+=String.fromCharCode(I[G]+256*I[G+1]);return J}function Le($,Y,A){if($%1!=0||$<0)throw new RangeError("offset is not uint");if($+Y>A)throw new RangeError("Trying to access beyond buffer length")}function ot($,Y,A,I,J,G){if(!m.isBuffer($))throw new TypeError('"buffer" argument must be a Buffer instance');if(Y>J||Y<G)throw new RangeError('"value" argument is out of bounds');if(A+I>$.length)throw new RangeError("Index out of range")}function Ht($,Y,A,I,J,G){if(A+I>$.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function Et($,Y,A,I,J){return Y=+Y,A>>>=0,J||Ht($,0,A,4),n.write($,Y,A,I,23,4),A+4}function zt($,Y,A,I,J){return Y=+Y,A>>>=0,J||Ht($,0,A,8),n.write($,Y,A,I,52,8),A+8}m.prototype.slice=function($,Y){var A=this.length;($=~~$)<0?($+=A)<0&&($=0):$>A&&($=A),(Y=Y===void 0?A:~~Y)<0?(Y+=A)<0&&(Y=0):Y>A&&(Y=A),Y<$&&(Y=$);var I=this.subarray($,Y);return Object.setPrototypeOf(I,m.prototype),I},m.prototype.readUintLE=m.prototype.readUIntLE=function($,Y,A){$>>>=0,Y>>>=0,A||Le($,Y,this.length);for(var I=this[$],J=1,G=0;++G<Y&&(J*=256);)I+=this[$+G]*J;return I},m.prototype.readUintBE=m.prototype.readUIntBE=function($,Y,A){$>>>=0,Y>>>=0,A||Le($,Y,this.length);for(var I=this[$+--Y],J=1;Y>0&&(J*=256);)I+=this[$+--Y]*J;return I},m.prototype.readUint8=m.prototype.readUInt8=function($,Y){return $>>>=0,Y||Le($,1,this.length),this[$]},m.prototype.readUint16LE=m.prototype.readUInt16LE=function($,Y){return $>>>=0,Y||Le($,2,this.length),this[$]|this[$+1]<<8},m.prototype.readUint16BE=m.prototype.readUInt16BE=function($,Y){return $>>>=0,Y||Le($,2,this.length),this[$]<<8|this[$+1]},m.prototype.readUint32LE=m.prototype.readUInt32LE=function($,Y){return $>>>=0,Y||Le($,4,this.length),(this[$]|this[$+1]<<8|this[$+2]<<16)+16777216*this[$+3]},m.prototype.readUint32BE=m.prototype.readUInt32BE=function($,Y){return $>>>=0,Y||Le($,4,this.length),16777216*this[$]+(this[$+1]<<16|this[$+2]<<8|this[$+3])},m.prototype.readIntLE=function($,Y,A){$>>>=0,Y>>>=0,A||Le($,Y,this.length);for(var I=this[$],J=1,G=0;++G<Y&&(J*=256);)I+=this[$+G]*J;return I>=(J*=128)&&(I-=Math.pow(2,8*Y)),I},m.prototype.readIntBE=function($,Y,A){$>>>=0,Y>>>=0,A||Le($,Y,this.length);for(var I=Y,J=1,G=this[$+--I];I>0&&(J*=256);)G+=this[$+--I]*J;return G>=(J*=128)&&(G-=Math.pow(2,8*Y)),G},m.prototype.readInt8=function($,Y){return $>>>=0,Y||Le($,1,this.length),128&this[$]?-1*(255-this[$]+1):this[$]},m.prototype.readInt16LE=function($,Y){$>>>=0,Y||Le($,2,this.length);var A=this[$]|this[$+1]<<8;return 32768&A?4294901760|A:A},m.prototype.readInt16BE=function($,Y){$>>>=0,Y||Le($,2,this.length);var A=this[$+1]|this[$]<<8;return 32768&A?4294901760|A:A},m.prototype.readInt32LE=function($,Y){return $>>>=0,Y||Le($,4,this.length),this[$]|this[$+1]<<8|this[$+2]<<16|this[$+3]<<24},m.prototype.readInt32BE=function($,Y){return $>>>=0,Y||Le($,4,this.length),this[$]<<24|this[$+1]<<16|this[$+2]<<8|this[$+3]},m.prototype.readFloatLE=function($,Y){return $>>>=0,Y||Le($,4,this.length),n.read(this,$,!0,23,4)},m.prototype.readFloatBE=function($,Y){return $>>>=0,Y||Le($,4,this.length),n.read(this,$,!1,23,4)},m.prototype.readDoubleLE=function($,Y){return $>>>=0,Y||Le($,8,this.length),n.read(this,$,!0,52,8)},m.prototype.readDoubleBE=function($,Y){return $>>>=0,Y||Le($,8,this.length),n.read(this,$,!1,52,8)},m.prototype.writeUintLE=m.prototype.writeUIntLE=function($,Y,A,I){$=+$,Y>>>=0,A>>>=0,I||ot(this,$,Y,A,Math.pow(2,8*A)-1,0);var J=1,G=0;for(this[Y]=255&$;++G<A&&(J*=256);)this[Y+G]=$/J&255;return Y+A},m.prototype.writeUintBE=m.prototype.writeUIntBE=function($,Y,A,I){$=+$,Y>>>=0,A>>>=0,I||ot(this,$,Y,A,Math.pow(2,8*A)-1,0);var J=A-1,G=1;for(this[Y+J]=255&$;--J>=0&&(G*=256);)this[Y+J]=$/G&255;return Y+A},m.prototype.writeUint8=m.prototype.writeUInt8=function($,Y,A){return $=+$,Y>>>=0,A||ot(this,$,Y,1,255,0),this[Y]=255&$,Y+1},m.prototype.writeUint16LE=m.prototype.writeUInt16LE=function($,Y,A){return $=+$,Y>>>=0,A||ot(this,$,Y,2,65535,0),this[Y]=255&$,this[Y+1]=$>>>8,Y+2},m.prototype.writeUint16BE=m.prototype.writeUInt16BE=function($,Y,A){return $=+$,Y>>>=0,A||ot(this,$,Y,2,65535,0),this[Y]=$>>>8,this[Y+1]=255&$,Y+2},m.prototype.writeUint32LE=m.prototype.writeUInt32LE=function($,Y,A){return $=+$,Y>>>=0,A||ot(this,$,Y,4,4294967295,0),this[Y+3]=$>>>24,this[Y+2]=$>>>16,this[Y+1]=$>>>8,this[Y]=255&$,Y+4},m.prototype.writeUint32BE=m.prototype.writeUInt32BE=function($,Y,A){return $=+$,Y>>>=0,A||ot(this,$,Y,4,4294967295,0),this[Y]=$>>>24,this[Y+1]=$>>>16,this[Y+2]=$>>>8,this[Y+3]=255&$,Y+4},m.prototype.writeIntLE=function($,Y,A,I){if($=+$,Y>>>=0,!I){var J=Math.pow(2,8*A-1);ot(this,$,Y,A,J-1,-J)}var G=0,Ae=1,Ye=0;for(this[Y]=255&$;++G<A&&(Ae*=256);)$<0&&Ye===0&&this[Y+G-1]!==0&&(Ye=1),this[Y+G]=($/Ae|0)-Ye&255;return Y+A},m.prototype.writeIntBE=function($,Y,A,I){if($=+$,Y>>>=0,!I){var J=Math.pow(2,8*A-1);ot(this,$,Y,A,J-1,-J)}var G=A-1,Ae=1,Ye=0;for(this[Y+G]=255&$;--G>=0&&(Ae*=256);)$<0&&Ye===0&&this[Y+G+1]!==0&&(Ye=1),this[Y+G]=($/Ae|0)-Ye&255;return Y+A},m.prototype.writeInt8=function($,Y,A){return $=+$,Y>>>=0,A||ot(this,$,Y,1,127,-128),$<0&&($=255+$+1),this[Y]=255&$,Y+1},m.prototype.writeInt16LE=function($,Y,A){return $=+$,Y>>>=0,A||ot(this,$,Y,2,32767,-32768),this[Y]=255&$,this[Y+1]=$>>>8,Y+2},m.prototype.writeInt16BE=function($,Y,A){return $=+$,Y>>>=0,A||ot(this,$,Y,2,32767,-32768),this[Y]=$>>>8,this[Y+1]=255&$,Y+2},m.prototype.writeInt32LE=function($,Y,A){return $=+$,Y>>>=0,A||ot(this,$,Y,4,2147483647,-2147483648),this[Y]=255&$,this[Y+1]=$>>>8,this[Y+2]=$>>>16,this[Y+3]=$>>>24,Y+4},m.prototype.writeInt32BE=function($,Y,A){return $=+$,Y>>>=0,A||ot(this,$,Y,4,2147483647,-2147483648),$<0&&($=4294967295+$+1),this[Y]=$>>>24,this[Y+1]=$>>>16,this[Y+2]=$>>>8,this[Y+3]=255&$,Y+4},m.prototype.writeFloatLE=function($,Y,A){return Et(this,$,Y,!0,A)},m.prototype.writeFloatBE=function($,Y,A){return Et(this,$,Y,!1,A)},m.prototype.writeDoubleLE=function($,Y,A){return zt(this,$,Y,!0,A)},m.prototype.writeDoubleBE=function($,Y,A){return zt(this,$,Y,!1,A)},m.prototype.copy=function($,Y,A,I){if(!m.isBuffer($))throw new TypeError("argument should be a Buffer");if(A||(A=0),I||I===0||(I=this.length),Y>=$.length&&(Y=$.length),Y||(Y=0),I>0&&I<A&&(I=A),I===A||$.length===0||this.length===0)return 0;if(Y<0)throw new RangeError("targetStart out of bounds");if(A<0||A>=this.length)throw new RangeError("Index out of range");if(I<0)throw new RangeError("sourceEnd out of bounds");I>this.length&&(I=this.length),$.length-Y<I-A&&(I=$.length-Y+A);var J=I-A;return this===$&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(Y,A,I):Uint8Array.prototype.set.call($,this.subarray(A,I),Y),J},m.prototype.fill=function($,Y,A,I){if(typeof $=="string"){if(typeof Y=="string"?(I=Y,Y=0,A=this.length):typeof A=="string"&&(I=A,A=this.length),I!==void 0&&typeof I!="string")throw new TypeError("encoding must be a string");if(typeof I=="string"&&!m.isEncoding(I))throw new TypeError("Unknown encoding: "+I);if($.length===1){var J=$.charCodeAt(0);(I==="utf8"&&J<128||I==="latin1")&&($=J)}}else typeof $=="number"?$&=255:typeof $=="boolean"&&($=Number($));if(Y<0||this.length<Y||this.length<A)throw new RangeError("Out of range index");if(A<=Y)return this;var G;if(Y>>>=0,A=A===void 0?this.length:A>>>0,$||($=0),typeof $=="number")for(G=Y;G<A;++G)this[G]=$;else{var Ae=m.isBuffer($)?$:m.from($,I),Ye=Ae.length;if(Ye===0)throw new TypeError('The value "'+$+'" is invalid for argument "value"');for(G=0;G<A-Y;++G)this[G+Y]=Ae[G%Ye]}return this};var Rt=/[^+/0-9A-Za-z-_]/g;function Xt($,Y){var A;Y=Y||1/0;for(var I=$.length,J=null,G=[],Ae=0;Ae<I;++Ae){if((A=$.charCodeAt(Ae))>55295&&A<57344){if(!J){if(A>56319){(Y-=3)>-1&&G.push(239,191,189);continue}if(Ae+1===I){(Y-=3)>-1&&G.push(239,191,189);continue}J=A;continue}if(A<56320){(Y-=3)>-1&&G.push(239,191,189),J=A;continue}A=65536+(J-55296<<10|A-56320)}else J&&(Y-=3)>-1&&G.push(239,191,189);if(J=null,A<128){if((Y-=1)<0)break;G.push(A)}else if(A<2048){if((Y-=2)<0)break;G.push(A>>6|192,63&A|128)}else if(A<65536){if((Y-=3)<0)break;G.push(A>>12|224,A>>6&63|128,63&A|128)}else{if(!(A<1114112))throw new Error("Invalid code point");if((Y-=4)<0)break;G.push(A>>18|240,A>>12&63|128,A>>6&63|128,63&A|128)}}return G}function tn($){return o.toByteArray((function(Y){if((Y=(Y=Y.split("=")[0]).trim().replace(Rt,"")).length<2)return"";for(;Y.length%4!=0;)Y+="=";return Y})($))}function cn($,Y,A,I){for(var J=0;J<I&&!(J+A>=Y.length||J>=$.length);++J)Y[J+A]=$[J];return J}function Ne($,Y){return $ instanceof Y||$!=null&&$.constructor!=null&&$.constructor.name!=null&&$.constructor.name===Y.name}function Ce($){return $!=$}var lt=(function(){for(var $="0123456789abcdef",Y=new Array(256),A=0;A<16;++A)for(var I=16*A,J=0;J<16;++J)Y[I+J]=$[A]+$[J];return Y})()},6877:function(h,e){var t={parseBuffer:function(r){return new o(r).parse()},addBoxProcessor:function(r,u){typeof r=="string"&&typeof u=="function"&&(n.prototype._boxProcessors[r]=u)},createFile:function(){return new o},createBox:function(r,u,p){var m=n.create(r);return u&&u.append(m,p),m},createFullBox:function(r,u,p){var m=t.createBox(r,u,p);return m.version=0,m.flags=0,m},Utils:{}};t.Utils.dataViewToString=function(r,u){var p=u||"utf-8";if(typeof TextDecoder<"u")return new TextDecoder(p).decode(r);var m=[],g=0;if(p==="utf-8")for(;g<r.byteLength;){var T=r.getUint8(g++);T<128||(T<224?(T=(31&T)<<6,T|=63&r.getUint8(g++)):T<240?(T=(15&T)<<12,T|=(63&r.getUint8(g++))<<6,T|=63&r.getUint8(g++)):(T=(7&T)<<18,T|=(63&r.getUint8(g++))<<12,T|=(63&r.getUint8(g++))<<6,T|=63&r.getUint8(g++))),m.push(String.fromCharCode(T))}else for(;g<r.byteLength;)m.push(String.fromCharCode(r.getUint8(g++)));return m.join("")},t.Utils.utf8ToByteArray=function(r){var u,p;if(typeof TextEncoder<"u")u=new TextEncoder().encode(r);else for(u=[],p=0;p<r.length;++p){var m=r.charCodeAt(p);m<128?u.push(m):m<2048?(u.push(192|m>>6),u.push(128|63&m)):m<65536?(u.push(224|m>>12),u.push(128|63&m>>6),u.push(128|63&m)):(u.push(240|m>>18),u.push(128|63&m>>12),u.push(128|63&m>>6),u.push(128|63&m))}return u},t.Utils.appendBox=function(r,u,p){if(u._offset=r._cursor.offset,u._root=r._root?r._root:r,u._raw=r._raw,u._parent=r,p!==-1)if(p!=null){var m,g=-1;if(typeof p=="number")g=p;else{if(typeof p=="string")m=p;else{if(typeof p!="object"||!p.type)return void r.boxes.push(u);m=p.type}for(var T=0;T<r.boxes.length;T++)if(m===r.boxes[T].type){g=T+1;break}}r.boxes.splice(g,0,u)}else r.boxes.push(u)},e.parseBuffer=t.parseBuffer,e.addBoxProcessor=t.addBoxProcessor,e.createFile=t.createFile,e.createBox=t.createBox,e.createFullBox=t.createFullBox,e.Utils=t.Utils,t.Cursor=function(r){this.offset=r===void 0?0:r};var o=function(r){this._cursor=new t.Cursor,this.boxes=[],r&&(this._raw=new DataView(r))};o.prototype.fetch=function(r){var u=this.fetchAll(r,!0);return u.length?u[0]:null},o.prototype.fetchAll=function(r,u){var p=[];return o._sweep.call(this,r,p,u),p},o.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var r=n.parse(this);if(r.type===void 0)break;this.boxes.push(r)}return this},o._sweep=function(r,u,p){for(var m in this.type&&this.type==r&&u.push(this),this.boxes){if(u.length&&p)return;o._sweep.call(this.boxes[m],r,u,p)}},o.prototype.write=function(){var r,u=0;for(r=0;r<this.boxes.length;r++)u+=this.boxes[r].getLength(!1);var p=new Uint8Array(u);for(this._rawo=new DataView(p.buffer),this.bytes=p,this._cursor.offset=0,r=0;r<this.boxes.length;r++)this.boxes[r].write();return p.buffer},o.prototype.append=function(r,u){t.Utils.appendBox(this,r,u)};var n=function(){this._cursor=new t.Cursor};n.parse=function(r){var u=new n;return u._offset=r._cursor.offset,u._root=r._root?r._root:r,u._raw=r._raw,u._parent=r,u._parseBox(),r._cursor.offset=u._raw.byteOffset+u._raw.byteLength,u},n.create=function(r){var u=new n;return u.type=r,u.boxes=[],u},n.prototype._boxContainers=["dinf","edts","mdia","meco","mfra","minf","moof","moov","mvex","stbl","strk","traf","trak","tref","udta","vttc","sinf","schi","encv","enca","meta","grpl","prsl"],n.prototype._boxProcessors={},n.prototype._procField=function(r,u,p){this._parsing?this[r]=this._readField(u,p):this._writeField(u,p,this[r])},n.prototype._procFieldArray=function(r,u,p,m){var g;if(this._parsing)for(this[r]=[],g=0;g<u;g++)this[r][g]=this._readField(p,m);else for(g=0;g<this[r].length;g++)this._writeField(p,m,this[r][g])},n.prototype._procFullBox=function(){this._procField("version","uint",8),this._procField("flags","uint",24)},n.prototype._procEntries=function(r,u,p){var m;if(this._parsing)for(this[r]=[],m=0;m<u;m++)this[r].push({}),p.call(this,this[r][m]);else for(m=0;m<u;m++)p.call(this,this[r][m])},n.prototype._procSubEntries=function(r,u,p,m){var g;if(this._parsing)for(r[u]=[],g=0;g<p;g++)r[u].push({}),m.call(this,r[u][g]);else for(g=0;g<p;g++)m.call(this,r[u][g])},n.prototype._procEntryField=function(r,u,p,m){this._parsing?r[u]=this._readField(p,m):this._writeField(p,m,r[u])},n.prototype._procSubBoxes=function(r,u){var p;if(this._parsing)for(this[r]=[],p=0;p<u;p++)this[r].push(n.parse(this));else for(p=0;p<u;p++)this._rawo?this[r][p].write():this.size+=this[r][p].getLength()},n.prototype._readField=function(r,u){switch(r){case"uint":return this._readUint(u);case"int":return this._readInt(u);case"template":return this._readTemplate(u);case"string":return u===-1?this._readTerminatedString():this._readString(u);case"data":return this._readData(u);case"utf8":return this._readUTF8String();case"utf8string":return this._readUTF8TerminatedString();default:return-1}},n.prototype._readInt=function(r){var u=null,p=this._cursor.offset-this._raw.byteOffset;switch(r){case 8:u=this._raw.getInt8(p);break;case 16:u=this._raw.getInt16(p);break;case 32:u=this._raw.getInt32(p);break;case 64:var m=this._raw.getInt32(p),g=this._raw.getInt32(p+4);u=m*Math.pow(2,32)+g}return this._cursor.offset+=r>>3,u},n.prototype._readUint=function(r){var u,p,m=null,g=this._cursor.offset-this._raw.byteOffset;switch(r){case 8:m=this._raw.getUint8(g);break;case 16:m=this._raw.getUint16(g);break;case 24:m=((u=this._raw.getUint16(g))<<8)+(p=this._raw.getUint8(g+2));break;case 32:m=this._raw.getUint32(g);break;case 64:u=this._raw.getUint32(g),p=this._raw.getUint32(g+4),m=u*Math.pow(2,32)+p}return this._cursor.offset+=r>>3,m},n.prototype._readString=function(r){for(var u="",p=0;p<r;p++){var m=this._readUint(8);u+=String.fromCharCode(m)}return u},n.prototype._readTemplate=function(r){return this._readUint(r/2)+this._readUint(r/2)/Math.pow(2,r/2)},n.prototype._readTerminatedString=function(){for(var r="";this._cursor.offset-this._offset<this._raw.byteLength;){var u=this._readUint(8);if(u===0)break;r+=String.fromCharCode(u)}return r},n.prototype._readData=function(r){var u=r>0?r:this._raw.byteLength-(this._cursor.offset-this._offset);if(u>0){var p=new Uint8Array(this._raw.buffer,this._cursor.offset,u);return this._cursor.offset+=u,p}return null},n.prototype._readUTF8String=function(){var r=this._raw.byteLength-(this._cursor.offset-this._offset),u=null;return r>0&&(u=new DataView(this._raw.buffer,this._cursor.offset,r),this._cursor.offset+=r),u&&t.Utils.dataViewToString(u)},n.prototype._readUTF8TerminatedString=function(){var r=this._raw.byteLength-(this._cursor.offset-this._offset),u=null;if(r>0){var p;for(u=new DataView(this._raw.buffer,this._cursor.offset,r),p=0;p<r&&u.getUint8(p)!==0;p++);u=new DataView(this._raw.buffer,this._cursor.offset,p),this._cursor.offset+=Math.min(p+1,r)}return u&&t.Utils.dataViewToString(u)},n.prototype._parseBox=function(){if(this._parsing=!0,this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}this._incomplete||(this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1?this._parseContainerBox():this._data=this._readData())}},n.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},n.prototype._parseContainerBox=function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(n.parse(this))},n.prototype.append=function(r,u){t.Utils.appendBox(this,r,u)},n.prototype.getLength=function(){if(this._parsing=!1,this._rawo=null,this.size=0,this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var r=0;r<this.boxes.length;r++)this.size+=this.boxes[r].getLength();return this._data&&this._writeData(this._data),this.size},n.prototype.write=function(){switch(this._parsing=!1,this._cursor.offset=this._parent._cursor.offset,this.size){case 0:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.parent._rawo.byteLength-this._cursor.offset);break;case 1:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.largesize);break;default:this._rawo=new DataView(this._parent._rawo.buffer,this._cursor.offset,this.size)}if(this._procField("size","uint",32),this._procField("type","string",4),this.size===1&&this._procField("largesize","uint",64),this.type==="uuid"&&this._procFieldArray("usertype",16,"uint",8),this._boxProcessors[this.type]&&this._boxProcessors[this.type].call(this),this._boxContainers.indexOf(this.type)!==-1)for(var r=0;r<this.boxes.length;r++)this.boxes[r].write();return this._data&&this._writeData(this._data),this._parent._cursor.offset+=this.size,this.size},n.prototype._writeInt=function(r,u){if(this._rawo){var p=this._cursor.offset-this._rawo.byteOffset;switch(r){case 8:this._rawo.setInt8(p,u);break;case 16:this._rawo.setInt16(p,u);break;case 32:this._rawo.setInt32(p,u);break;case 64:var m=Math.floor(u/Math.pow(2,32)),g=u-m*Math.pow(2,32);this._rawo.setUint32(p,m),this._rawo.setUint32(p+4,g)}this._cursor.offset+=r>>3}else this.size+=r>>3},n.prototype._writeUint=function(r,u){if(this._rawo){var p,m,g=this._cursor.offset-this._rawo.byteOffset;switch(r){case 8:this._rawo.setUint8(g,u);break;case 16:this._rawo.setUint16(g,u);break;case 24:p=(16776960&u)>>8,m=255&u,this._rawo.setUint16(g,p),this._rawo.setUint8(g+2,m);break;case 32:this._rawo.setUint32(g,u);break;case 64:m=u-(p=Math.floor(u/Math.pow(2,32)))*Math.pow(2,32),this._rawo.setUint32(g,p),this._rawo.setUint32(g+4,m)}this._cursor.offset+=r>>3}else this.size+=r>>3},n.prototype._writeString=function(r,u){for(var p=0;p<r;p++)this._writeUint(8,u.charCodeAt(p))},n.prototype._writeTerminatedString=function(r){if(r.length!==0){for(var u=0;u<r.length;u++)this._writeUint(8,r.charCodeAt(u));this._writeUint(8,0)}},n.prototype._writeTemplate=function(r,u){var p=Math.floor(u),m=(u-p)*Math.pow(2,r/2);this._writeUint(r/2,p),this._writeUint(r/2,m)},n.prototype._writeData=function(r){if(r)if(this._rawo){if(r instanceof Array){for(var u=this._cursor.offset-this._rawo.byteOffset,p=0;p<r.length;p++)this._rawo.setInt8(u+p,r[p]);this._cursor.offset+=r.length}r instanceof Uint8Array&&(this._root.bytes.set(r,this._cursor.offset),this._cursor.offset+=r.length)}else this.size+=r.length},n.prototype._writeUTF8String=function(r){var u=t.Utils.utf8ToByteArray(r);if(this._rawo)for(var p=new DataView(this._rawo.buffer,this._cursor.offset,u.length),m=0;m<u.length;m++)p.setUint8(m,u[m]);else this.size+=u.length},n.prototype._writeField=function(r,u,p){switch(r){case"uint":this._writeUint(u,p);break;case"int":this._writeInt(u,p);break;case"template":this._writeTemplate(u,p);break;case"string":u==-1?this._writeTerminatedString(p):this._writeString(u,p);break;case"data":this._writeData(p);break;case"utf8":this._writeUTF8String(p)}},n.prototype._boxProcessors.ardi=function(){this._procFullBox(),this._procField("audio_rendering_indication","uint",8)},n.prototype._boxProcessors.avc1=n.prototype._boxProcessors.avc2=n.prototype._boxProcessors.avc3=n.prototype._boxProcessors.avc4=n.prototype._boxProcessors.hvc1=n.prototype._boxProcessors.hev1=n.prototype._boxProcessors.encv=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procField("pre_defined1","uint",16),this._procField("reserved2","uint",16),this._procFieldArray("pre_defined2",3,"uint",32),this._procField("width","uint",16),this._procField("height","uint",16),this._procField("horizresolution","template",32),this._procField("vertresolution","template",32),this._procField("reserved3","uint",32),this._procField("frame_count","uint",16),this._procFieldArray("compressorname",32,"uint",8),this._procField("depth","uint",16),this._procField("pre_defined3","int",16),this._procField("config","data",-1)},n.prototype._boxProcessors.ctts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(r){this._procEntryField(r,"sample_count","uint",32),this._procEntryField(r,"sample_offset",this.version===1?"int":"uint",32)}))},n.prototype._boxProcessors.dref=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},n.prototype._boxProcessors.elng=function(){this._procFullBox(),this._procField("extended_language","utf8string")},n.prototype._boxProcessors.elst=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(r){this._procEntryField(r,"segment_duration","uint",this.version===1?64:32),this._procEntryField(r,"media_time","int",this.version===1?64:32),this._procEntryField(r,"media_rate_integer","int",16),this._procEntryField(r,"media_rate_fraction","int",16)}))},n.prototype._boxProcessors.emsg=function(){this._procFullBox(),this.version==1?(this._procField("timescale","uint",32),this._procField("presentation_time","uint",64),this._procField("event_duration","uint",32),this._procField("id","uint",32),this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1)):(this._procField("scheme_id_uri","string",-1),this._procField("value","string",-1),this._procField("timescale","uint",32),this._procField("presentation_time_delta","uint",32),this._procField("event_duration","uint",32),this._procField("id","uint",32)),this._procField("message_data","data",-1)},n.prototype._boxProcessors.free=n.prototype._boxProcessors.skip=function(){this._procField("data","data",-1)},n.prototype._boxProcessors.frma=function(){this._procField("data_format","uint",32)},n.prototype._boxProcessors.ftyp=n.prototype._boxProcessors.styp=function(){this._procField("major_brand","string",4),this._procField("minor_version","uint",32);var r=-1;this._parsing&&(r=(this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset))/4),this._procFieldArray("compatible_brands",r,"string",4)},n.prototype._boxProcessors.hdlr=function(){this._procFullBox(),this._procField("pre_defined","uint",32),this._procField("handler_type","string",4),this._procFieldArray("reserved",3,"uint",32),this._procField("name","string",-1)},n.prototype._boxProcessors.imda=function(){this._procField("imda_identifier","uint",32),this._procField("data","data",-1)},n.prototype._boxProcessors.kind=function(){this._procFullBox(),this._procField("schemeURI","utf8string"),this._procField("value","utf8string")},n.prototype._boxProcessors.labl=function(){this._procFullBox(),this.is_group_label=!!(1&this.flags),this._procField("label_id","uint",16),this._procField("language","utf8string"),this._procField("label","utf8string")},n.prototype._boxProcessors.mdat=function(){this._procField("data","data",-1)},n.prototype._boxProcessors.mdhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._parsing||typeof this.language!="string"||(this.language=this.language.charCodeAt(0)-96<<10|this.language.charCodeAt(1)-96<<5|this.language.charCodeAt(2)-96),this._procField("language","uint",16),this._parsing&&(this.language=String.fromCharCode(96+(this.language>>10&31),96+(this.language>>5&31),96+(31&this.language))),this._procField("pre_defined","uint",16)},n.prototype._boxProcessors.mehd=function(){this._procFullBox(),this._procField("fragment_duration","uint",this.version==1?64:32)},n.prototype._boxProcessors.meta=function(){this._procFullBox()},n.prototype._boxProcessors.mfhd=function(){this._procFullBox(),this._procField("sequence_number","uint",32)},n.prototype._boxProcessors.mfro=function(){this._procFullBox(),this._procField("mfra_size","uint",32)},n.prototype._boxProcessors.mp4a=n.prototype._boxProcessors.enca=function(){this._procFieldArray("reserved1",6,"uint",8),this._procField("data_reference_index","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procField("channelcount","uint",16),this._procField("samplesize","uint",16),this._procField("pre_defined","uint",16),this._procField("reserved3","uint",16),this._procField("samplerate","template",32),this._procField("esds","data",-1)},n.prototype._boxProcessors.mvhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("timescale","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procField("rate","template",32),this._procField("volume","template",16),this._procField("reserved1","uint",16),this._procFieldArray("reserved2",2,"uint",32),this._procFieldArray("matrix",9,"template",32),this._procFieldArray("pre_defined",6,"uint",32),this._procField("next_track_ID","uint",32)},n.prototype._boxProcessors.payl=function(){this._procField("cue_text","utf8")},n.prototype._boxProcessors.prft=function(){this._procFullBox(),this._procField("reference_track_ID","uint",32),this._procField("ntp_timestamp_sec","uint",32),this._procField("ntp_timestamp_frac","uint",32),this._procField("media_time","uint",this.version==1?64:32)},n.prototype._boxProcessors.prsl=function(){this._procFullBox(),this._procField("group_id","uint",32),this._procField("num_entities_in_group","uint",32),this._procEntries("entities",this.num_entities_in_group,(function(r){this._procEntryField(r,"entity_id","uint",32)})),4096&this.flags&&this._procField("preselection_tag","utf8string"),8192&this.flags&&this._procField("selection_priority","uint",8),16384&this.flags&&this._procField("interleaving_tag","utf8string")},n.prototype._boxProcessors.pssh=function(){this._procFullBox(),this._procFieldArray("SystemID",16,"uint",8),this._procField("DataSize","uint",32),this._procFieldArray("Data",this.DataSize,"uint",8)},n.prototype._boxProcessors.schm=function(){this._procFullBox(),this._procField("scheme_type","uint",32),this._procField("scheme_version","uint",32),1&this.flags&&this._procField("scheme_uri","string",-1)},n.prototype._boxProcessors.sdtp=function(){this._procFullBox();var r=-1;this._parsing&&(r=this._raw.byteLength-(this._cursor.offset-this._raw.byteOffset)),this._procFieldArray("sample_dependency_table",r,"uint",8)},n.prototype._boxProcessors.sidx=function(){this._procFullBox(),this._procField("reference_ID","uint",32),this._procField("timescale","uint",32),this._procField("earliest_presentation_time","uint",this.version==1?64:32),this._procField("first_offset","uint",this.version==1?64:32),this._procField("reserved","uint",16),this._procField("reference_count","uint",16),this._procEntries("references",this.reference_count,(function(r){this._parsing||(r.reference=(1&r.reference_type)<<31,r.reference|=2147483647&r.referenced_size,r.sap=(1&r.starts_with_SAP)<<31,r.sap|=(3&r.SAP_type)<<28,r.sap|=268435455&r.SAP_delta_time),this._procEntryField(r,"reference","uint",32),this._procEntryField(r,"subsegment_duration","uint",32),this._procEntryField(r,"sap","uint",32),this._parsing&&(r.reference_type=r.reference>>31&1,r.referenced_size=2147483647&r.reference,r.starts_with_SAP=r.sap>>31&1,r.SAP_type=r.sap>>28&7,r.SAP_delta_time=268435455&r.sap)}))},n.prototype._boxProcessors.smhd=function(){this._procFullBox(),this._procField("balance","uint",16),this._procField("reserved","uint",16)},n.prototype._boxProcessors.ssix=function(){this._procFullBox(),this._procField("subsegment_count","uint",32),this._procEntries("subsegments",this.subsegment_count,(function(r){this._procEntryField(r,"ranges_count","uint",32),this._procSubEntries(r,"ranges",r.ranges_count,(function(u){this._procEntryField(u,"level","uint",8),this._procEntryField(u,"range_size","uint",24)}))}))},n.prototype._boxProcessors.stsd=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procSubBoxes("entries",this.entry_count)},n.prototype._boxProcessors.sttg=function(){this._procField("settings","utf8")},n.prototype._boxProcessors.stts=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(r){this._procEntryField(r,"sample_count","uint",32),this._procEntryField(r,"sample_delta","uint",32)}))},n.prototype._boxProcessors.subs=function(){this._procFullBox(),this._procField("entry_count","uint",32),this._procEntries("entries",this.entry_count,(function(r){this._procEntryField(r,"sample_delta","uint",32),this._procEntryField(r,"subsample_count","uint",16),this._procSubEntries(r,"subsamples",r.subsample_count,(function(u){this._procEntryField(u,"subsample_size","uint",this.version===1?32:16),this._procEntryField(u,"subsample_priority","uint",8),this._procEntryField(u,"discardable","uint",8),this._procEntryField(u,"codec_specific_parameters","uint",32)}))}))},n.prototype._boxProcessors.tenc=function(){this._procFullBox(),this._procField("default_IsEncrypted","uint",24),this._procField("default_IV_size","uint",8),this._procFieldArray("default_KID",16,"uint",8)},n.prototype._boxProcessors.tfdt=function(){this._procFullBox(),this._procField("baseMediaDecodeTime","uint",this.version==1?64:32)},n.prototype._boxProcessors.tfhd=function(){this._procFullBox(),this._procField("track_ID","uint",32),1&this.flags&&this._procField("base_data_offset","uint",64),2&this.flags&&this._procField("sample_description_offset","uint",32),8&this.flags&&this._procField("default_sample_duration","uint",32),16&this.flags&&this._procField("default_sample_size","uint",32),32&this.flags&&this._procField("default_sample_flags","uint",32)},n.prototype._boxProcessors.tfra=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._parsing||(this.reserved=0,this.reserved|=(48&this.length_size_of_traf_num)<<4,this.reserved|=(12&this.length_size_of_trun_num)<<2,this.reserved|=3&this.length_size_of_sample_num),this._procField("reserved","uint",32),this._parsing&&(this.length_size_of_traf_num=(48&this.reserved)>>4,this.length_size_of_trun_num=(12&this.reserved)>>2,this.length_size_of_sample_num=3&this.reserved),this._procField("number_of_entry","uint",32),this._procEntries("entries",this.number_of_entry,(function(r){this._procEntryField(r,"time","uint",this.version===1?64:32),this._procEntryField(r,"moof_offset","uint",this.version===1?64:32),this._procEntryField(r,"traf_number","uint",8*(this.length_size_of_traf_num+1)),this._procEntryField(r,"trun_number","uint",8*(this.length_size_of_trun_num+1)),this._procEntryField(r,"sample_number","uint",8*(this.length_size_of_sample_num+1))}))},n.prototype._boxProcessors.tkhd=function(){this._procFullBox(),this._procField("creation_time","uint",this.version==1?64:32),this._procField("modification_time","uint",this.version==1?64:32),this._procField("track_ID","uint",32),this._procField("reserved1","uint",32),this._procField("duration","uint",this.version==1?64:32),this._procFieldArray("reserved2",2,"uint",32),this._procField("layer","uint",16),this._procField("alternate_group","uint",16),this._procField("volume","template",16),this._procField("reserved3","uint",16),this._procFieldArray("matrix",9,"template",32),this._procField("width","template",32),this._procField("height","template",32)},n.prototype._boxProcessors.trex=function(){this._procFullBox(),this._procField("track_ID","uint",32),this._procField("default_sample_description_index","uint",32),this._procField("default_sample_duration","uint",32),this._procField("default_sample_size","uint",32),this._procField("default_sample_flags","uint",32)},n.prototype._boxProcessors.trun=function(){this._procFullBox(),this._procField("sample_count","uint",32),1&this.flags&&this._procField("data_offset","int",32),4&this.flags&&this._procField("first_sample_flags","uint",32),this._procEntries("samples",this.sample_count,(function(r){256&this.flags&&this._procEntryField(r,"sample_duration","uint",32),512&this.flags&&this._procEntryField(r,"sample_size","uint",32),1024&this.flags&&this._procEntryField(r,"sample_flags","uint",32),2048&this.flags&&this._procEntryField(r,"sample_composition_time_offset",this.version===1?"int":"uint",32)}))},n.prototype._boxProcessors["url "]=n.prototype._boxProcessors["urn "]=function(){this._procFullBox(),this.type==="urn "&&this._procField("name","string",-1),this._procField("location","string",-1)},n.prototype._boxProcessors.vlab=function(){this._procField("source_label","utf8")},n.prototype._boxProcessors.vmhd=function(){this._procFullBox(),this._procField("graphicsmode","uint",16),this._procFieldArray("opcolor",3,"uint",16)},n.prototype._boxProcessors.vttC=function(){this._procField("config","utf8")},n.prototype._boxProcessors.vtte=function(){}},9826:function(h){var e,t=typeof Reflect=="object"?Reflect:null,o=t&&typeof t.apply=="function"?t.apply:function(te,oe,Te){return Function.prototype.apply.call(te,oe,Te)};e=t&&typeof t.ownKeys=="function"?t.ownKeys:Object.getOwnPropertySymbols?function(te){return Object.getOwnPropertyNames(te).concat(Object.getOwnPropertySymbols(te))}:function(te){return Object.getOwnPropertyNames(te)};var n=Number.isNaN||function(te){return te!=te};function r(){r.init.call(this)}h.exports=r,h.exports.once=function(te,oe){return new Promise((function(Te,Se){function Re(De){te.removeListener(oe,Be),Se(De)}function Be(){typeof te.removeListener=="function"&&te.removeListener("error",Re),Te([].slice.call(arguments))}x(te,oe,Be,{once:!0}),oe!=="error"&&(function(De,re){typeof De.on=="function"&&x(De,"error",re,{once:!0})})(te,Re)}))},r.EventEmitter=r,r.prototype._events=void 0,r.prototype._eventsCount=0,r.prototype._maxListeners=void 0;var u=10;function p(te){if(typeof te!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof te)}function m(te){return te._maxListeners===void 0?r.defaultMaxListeners:te._maxListeners}function g(te,oe,Te,Se){var Re,Be,De,re;if(p(Te),(Be=te._events)===void 0?(Be=te._events=Object.create(null),te._eventsCount=0):(Be.newListener!==void 0&&(te.emit("newListener",oe,Te.listener?Te.listener:Te),Be=te._events),De=Be[oe]),De===void 0)De=Be[oe]=Te,++te._eventsCount;else if(typeof De=="function"?De=Be[oe]=Se?[Te,De]:[De,Te]:Se?De.unshift(Te):De.push(Te),(Re=m(te))>0&&De.length>Re&&!De.warned){De.warned=!0;var se=new Error("Possible EventEmitter memory leak detected. "+De.length+" "+String(oe)+" listeners added. Use emitter.setMaxListeners() to increase limit");se.name="MaxListenersExceededWarning",se.emitter=te,se.type=oe,se.count=De.length,re=se,console&&console.warn&&console.warn(re)}return te}function T(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function f(te,oe,Te){var Se={fired:!1,wrapFn:void 0,target:te,type:oe,listener:Te},Re=T.bind(Se);return Re.listener=Te,Se.wrapFn=Re,Re}function c(te,oe,Te){var Se=te._events;if(Se===void 0)return[];var Re=Se[oe];return Re===void 0?[]:typeof Re=="function"?Te?[Re.listener||Re]:[Re]:Te?(function(Be){for(var De=new Array(Be.length),re=0;re<De.length;++re)De[re]=Be[re].listener||Be[re];return De})(Re):_(Re,Re.length)}function v(te){var oe=this._events;if(oe!==void 0){var Te=oe[te];if(typeof Te=="function")return 1;if(Te!==void 0)return Te.length}return 0}function _(te,oe){for(var Te=new Array(oe),Se=0;Se<oe;++Se)Te[Se]=te[Se];return Te}function x(te,oe,Te,Se){if(typeof te.on=="function")Se.once?te.once(oe,Te):te.on(oe,Te);else{if(typeof te.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof te);te.addEventListener(oe,(function Re(Be){Se.once&&te.removeEventListener(oe,Re),Te(Be)}))}}Object.defineProperty(r,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(te){if(typeof te!="number"||te<0||n(te))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+te+".");u=te}}),r.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},r.prototype.setMaxListeners=function(te){if(typeof te!="number"||te<0||n(te))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+te+".");return this._maxListeners=te,this},r.prototype.getMaxListeners=function(){return m(this)},r.prototype.emit=function(te){for(var oe=[],Te=1;Te<arguments.length;Te++)oe.push(arguments[Te]);var Se=te==="error",Re=this._events;if(Re!==void 0)Se=Se&&Re.error===void 0;else if(!Se)return!1;if(Se){var Be;if(oe.length>0&&(Be=oe[0]),Be instanceof Error)throw Be;var De=new Error("Unhandled error."+(Be?" ("+Be.message+")":""));throw De.context=Be,De}var re=Re[te];if(re===void 0)return!1;if(typeof re=="function")o(re,this,oe);else{var se=re.length,he=_(re,se);for(Te=0;Te<se;++Te)o(he[Te],this,oe)}return!0},r.prototype.addListener=function(te,oe){return g(this,te,oe,!1)},r.prototype.on=r.prototype.addListener,r.prototype.prependListener=function(te,oe){return g(this,te,oe,!0)},r.prototype.once=function(te,oe){return p(oe),this.on(te,f(this,te,oe)),this},r.prototype.prependOnceListener=function(te,oe){return p(oe),this.prependListener(te,f(this,te,oe)),this},r.prototype.removeListener=function(te,oe){var Te,Se,Re,Be,De;if(p(oe),(Se=this._events)===void 0)return this;if((Te=Se[te])===void 0)return this;if(Te===oe||Te.listener===oe)--this._eventsCount==0?this._events=Object.create(null):(delete Se[te],Se.removeListener&&this.emit("removeListener",te,Te.listener||oe));else if(typeof Te!="function"){for(Re=-1,Be=Te.length-1;Be>=0;Be--)if(Te[Be]===oe||Te[Be].listener===oe){De=Te[Be].listener,Re=Be;break}if(Re<0)return this;Re===0?Te.shift():(function(re,se){for(;se+1<re.length;se++)re[se]=re[se+1];re.pop()})(Te,Re),Te.length===1&&(Se[te]=Te[0]),Se.removeListener!==void 0&&this.emit("removeListener",te,De||oe)}return this},r.prototype.off=r.prototype.removeListener,r.prototype.removeAllListeners=function(te){var oe,Te,Se;if((Te=this._events)===void 0)return this;if(Te.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):Te[te]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete Te[te]),this;if(arguments.length===0){var Re,Be=Object.keys(Te);for(Se=0;Se<Be.length;++Se)(Re=Be[Se])!=="removeListener"&&this.removeAllListeners(Re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(oe=Te[te])=="function")this.removeListener(te,oe);else if(oe!==void 0)for(Se=oe.length-1;Se>=0;Se--)this.removeListener(te,oe[Se]);return this},r.prototype.listeners=function(te){return c(this,te,!0)},r.prototype.rawListeners=function(te){return c(this,te,!1)},r.listenerCount=function(te,oe){return typeof te.listenerCount=="function"?te.listenerCount(oe):v.call(te,oe)},r.prototype.listenerCount=v,r.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},7316:function(h){h.exports=function e(t,o){if(t===o)return!0;if(t&&o&&typeof t=="object"&&typeof o=="object"){if(t.constructor!==o.constructor)return!1;var n,r,u;if(Array.isArray(t)){if((n=t.length)!=o.length)return!1;for(r=n;r--!=0;)if(!e(t[r],o[r]))return!1;return!0}if(t.constructor===RegExp)return t.source===o.source&&t.flags===o.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===o.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===o.toString();if((n=(u=Object.keys(t)).length)!==Object.keys(o).length)return!1;for(r=n;r--!=0;)if(!Object.prototype.hasOwnProperty.call(o,u[r]))return!1;for(r=n;r--!=0;){var p=u[r];if(!e(t[p],o[p]))return!1}return!0}return t!=t&&o!=o}},7986:function(h,e){e.read=function(t,o,n,r,u){var p,m,g=8*u-r-1,T=(1<<g)-1,f=T>>1,c=-7,v=n?u-1:0,_=n?-1:1,x=t[o+v];for(v+=_,p=x&(1<<-c)-1,x>>=-c,c+=g;c>0;p=256*p+t[o+v],v+=_,c-=8);for(m=p&(1<<-c)-1,p>>=-c,c+=r;c>0;m=256*m+t[o+v],v+=_,c-=8);if(p===0)p=1-f;else{if(p===T)return m?NaN:1/0*(x?-1:1);m+=Math.pow(2,r),p-=f}return(x?-1:1)*m*Math.pow(2,p-r)},e.write=function(t,o,n,r,u,p){var m,g,T,f=8*p-u-1,c=(1<<f)-1,v=c>>1,_=u===23?Math.pow(2,-24)-Math.pow(2,-77):0,x=r?0:p-1,te=r?1:-1,oe=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(g=isNaN(o)?1:0,m=c):(m=Math.floor(Math.log(o)/Math.LN2),o*(T=Math.pow(2,-m))<1&&(m--,T*=2),(o+=m+v>=1?_/T:_*Math.pow(2,1-v))*T>=2&&(m++,T/=2),m+v>=c?(g=0,m=c):m+v>=1?(g=(o*T-1)*Math.pow(2,u),m+=v):(g=o*Math.pow(2,v-1)*Math.pow(2,u),m=0));u>=8;t[n+x]=255&g,x+=te,g/=256,u-=8);for(m=m<<u|g,f+=u;f>0;t[n+x]=255&m,x+=te,m/=256,f-=8);t[n+x-te]|=128*oe}},5474:function(h,e,t){(function(o){o.parser=function(A,I){return new u(A,I)},o.SAXParser=u,o.SAXStream=m,o.createStream=function(A,I){return new m(A,I)},o.MAX_BUFFER_LENGTH=65536;var n,r=["comment","sgmlDecl","textNode","tagName","doctype","procInstName","procInstBody","entity","attribName","attribValue","cdata","script"];function u(A,I){if(!(this instanceof u))return new u(A,I);var J=this;(function(G){for(var Ae=0,Ye=r.length;Ae<Ye;Ae++)G[r[Ae]]=""})(J),J.q=J.c="",J.bufferCheckPosition=o.MAX_BUFFER_LENGTH,J.opt=I||{},J.opt.lowercase=J.opt.lowercase||J.opt.lowercasetags,J.looseCase=J.opt.lowercase?"toLowerCase":"toUpperCase",J.tags=[],J.closed=J.closedRoot=J.sawRoot=!1,J.tag=J.error=null,J.strict=!!A,J.noscript=!(!A&&!J.opt.noscript),J.state=ye.BEGIN,J.strictEntities=J.opt.strictEntities,J.ENTITIES=J.strictEntities?Object.create(o.XML_ENTITIES):Object.create(o.ENTITIES),J.attribList=[],J.opt.xmlns&&(J.ns=Object.create(Te)),J.trackPosition=J.opt.position!==!1,J.trackPosition&&(J.position=J.line=J.column=0),xe(J,"onready")}o.EVENTS=["text","processinginstruction","sgmldeclaration","doctype","comment","opentagstart","attribute","opentag","closetag","opencdata","cdata","closecdata","error","end","ready","script","opennamespace","closenamespace"],Object.create||(Object.create=function(A){function I(){}return I.prototype=A,new I}),Object.keys||(Object.keys=function(A){var I=[];for(var J in A)A.hasOwnProperty(J)&&I.push(J);return I}),u.prototype={end:function(){zt(this)},write:function(A){var I=this;if(this.error)throw this.error;if(I.closed)return Et(I,"Cannot write after close. Assign an onready handler.");if(A===null)return zt(I);typeof A=="object"&&(A=A.toString());for(var J=0,G="";G=Y(A,J++),I.c=G,G;)switch(I.trackPosition&&(I.position++,G===`
`?(I.line++,I.column=0):I.column++),I.state){case ye.BEGIN:if(I.state=ye.BEGIN_WHITESPACE,G==="\uFEFF")continue;$(I,G);continue;case ye.BEGIN_WHITESPACE:$(I,G);continue;case ye.TEXT:if(I.sawRoot&&!I.closedRoot){for(var Ae=J-1;G&&G!=="<"&&G!=="&";)(G=Y(A,J++))&&I.trackPosition&&(I.position++,G===`
`?(I.line++,I.column=0):I.column++);I.textNode+=A.substring(Ae,J-1)}G!=="<"||I.sawRoot&&I.closedRoot&&!I.strict?(!he(g,G)||I.sawRoot&&!I.closedRoot||Rt(I,"Text data outside of root node."),G==="&"?I.state=ye.TEXT_ENTITY:I.textNode+=G):(I.state=ye.OPEN_WAKA,I.startTagPosition=I.position);continue;case ye.SCRIPT:G==="<"?I.state=ye.SCRIPT_ENDING:I.script+=G;continue;case ye.SCRIPT_ENDING:G==="/"?I.state=ye.CLOSE_TAG:(I.script+="<"+G,I.state=ye.SCRIPT);continue;case ye.OPEN_WAKA:if(G==="!")I.state=ye.SGML_DECL,I.sgmlDecl="";else if(!se(g,G))if(se(Se,G))I.state=ye.OPEN_TAG,I.tagName=G;else if(G==="/")I.state=ye.CLOSE_TAG,I.tagName="";else if(G==="?")I.state=ye.PROC_INST,I.procInstName=I.procInstBody="";else{if(Rt(I,"Unencoded <"),I.startTagPosition+1<I.position){var Ye=I.position-I.startTagPosition;G=new Array(Ye).join(" ")+G}I.textNode+="<"+G,I.state=ye.TEXT}continue;case ye.SGML_DECL:(I.sgmlDecl+G).toUpperCase()===_?(Le(I,"onopencdata"),I.state=ye.CDATA,I.sgmlDecl="",I.cdata=""):I.sgmlDecl+G==="--"?(I.state=ye.COMMENT,I.comment="",I.sgmlDecl=""):(I.sgmlDecl+G).toUpperCase()===x?(I.state=ye.DOCTYPE,(I.doctype||I.sawRoot)&&Rt(I,"Inappropriately located doctype declaration"),I.doctype="",I.sgmlDecl=""):G===">"?(Le(I,"onsgmldeclaration",I.sgmlDecl),I.sgmlDecl="",I.state=ye.TEXT):(se(c,G)&&(I.state=ye.SGML_DECL_QUOTED),I.sgmlDecl+=G);continue;case ye.SGML_DECL_QUOTED:G===I.q&&(I.state=ye.SGML_DECL,I.q=""),I.sgmlDecl+=G;continue;case ye.DOCTYPE:G===">"?(I.state=ye.TEXT,Le(I,"ondoctype",I.doctype),I.doctype=!0):(I.doctype+=G,G==="["?I.state=ye.DOCTYPE_DTD:se(c,G)&&(I.state=ye.DOCTYPE_QUOTED,I.q=G));continue;case ye.DOCTYPE_QUOTED:I.doctype+=G,G===I.q&&(I.q="",I.state=ye.DOCTYPE);continue;case ye.DOCTYPE_DTD:I.doctype+=G,G==="]"?I.state=ye.DOCTYPE:se(c,G)&&(I.state=ye.DOCTYPE_DTD_QUOTED,I.q=G);continue;case ye.DOCTYPE_DTD_QUOTED:I.doctype+=G,G===I.q&&(I.state=ye.DOCTYPE_DTD,I.q="");continue;case ye.COMMENT:G==="-"?I.state=ye.COMMENT_ENDING:I.comment+=G;continue;case ye.COMMENT_ENDING:G==="-"?(I.state=ye.COMMENT_ENDED,I.comment=Ht(I.opt,I.comment),I.comment&&Le(I,"oncomment",I.comment),I.comment=""):(I.comment+="-"+G,I.state=ye.COMMENT);continue;case ye.COMMENT_ENDED:G!==">"?(Rt(I,"Malformed comment"),I.comment+="--"+G,I.state=ye.COMMENT):I.state=ye.TEXT;continue;case ye.CDATA:G==="]"?I.state=ye.CDATA_ENDING:I.cdata+=G;continue;case ye.CDATA_ENDING:G==="]"?I.state=ye.CDATA_ENDING_2:(I.cdata+="]"+G,I.state=ye.CDATA);continue;case ye.CDATA_ENDING_2:G===">"?(I.cdata&&Le(I,"oncdata",I.cdata),Le(I,"onclosecdata"),I.cdata="",I.state=ye.TEXT):G==="]"?I.cdata+="]":(I.cdata+="]]"+G,I.state=ye.CDATA);continue;case ye.PROC_INST:G==="?"?I.state=ye.PROC_INST_ENDING:se(g,G)?I.state=ye.PROC_INST_BODY:I.procInstName+=G;continue;case ye.PROC_INST_BODY:if(!I.procInstBody&&se(g,G))continue;G==="?"?I.state=ye.PROC_INST_ENDING:I.procInstBody+=G;continue;case ye.PROC_INST_ENDING:G===">"?(Le(I,"onprocessinginstruction",{name:I.procInstName,body:I.procInstBody}),I.procInstName=I.procInstBody="",I.state=ye.TEXT):(I.procInstBody+="?"+G,I.state=ye.PROC_INST_BODY);continue;case ye.OPEN_TAG:se(Re,G)?I.tagName+=G:(Xt(I),G===">"?Ne(I):G==="/"?I.state=ye.OPEN_TAG_SLASH:(he(g,G)&&Rt(I,"Invalid character in tag name"),I.state=ye.ATTRIB));continue;case ye.OPEN_TAG_SLASH:G===">"?(Ne(I,!0),Ce(I)):(Rt(I,"Forward-slash in opening tag not followed by >"),I.state=ye.ATTRIB);continue;case ye.ATTRIB:if(se(g,G))continue;G===">"?Ne(I):G==="/"?I.state=ye.OPEN_TAG_SLASH:se(Se,G)?(I.attribName=G,I.attribValue="",I.state=ye.ATTRIB_NAME):Rt(I,"Invalid attribute name");continue;case ye.ATTRIB_NAME:G==="="?I.state=ye.ATTRIB_VALUE:G===">"?(Rt(I,"Attribute without value"),I.attribValue=I.attribName,cn(I),Ne(I)):se(g,G)?I.state=ye.ATTRIB_NAME_SAW_WHITE:se(Re,G)?I.attribName+=G:Rt(I,"Invalid attribute name");continue;case ye.ATTRIB_NAME_SAW_WHITE:if(G==="=")I.state=ye.ATTRIB_VALUE;else{if(se(g,G))continue;Rt(I,"Attribute without value"),I.tag.attributes[I.attribName]="",I.attribValue="",Le(I,"onattribute",{name:I.attribName,value:""}),I.attribName="",G===">"?Ne(I):se(Se,G)?(I.attribName=G,I.state=ye.ATTRIB_NAME):(Rt(I,"Invalid attribute name"),I.state=ye.ATTRIB)}continue;case ye.ATTRIB_VALUE:if(se(g,G))continue;se(c,G)?(I.q=G,I.state=ye.ATTRIB_VALUE_QUOTED):(Rt(I,"Unquoted attribute value"),I.state=ye.ATTRIB_VALUE_UNQUOTED,I.attribValue=G);continue;case ye.ATTRIB_VALUE_QUOTED:if(G!==I.q){G==="&"?I.state=ye.ATTRIB_VALUE_ENTITY_Q:I.attribValue+=G;continue}cn(I),I.q="",I.state=ye.ATTRIB_VALUE_CLOSED;continue;case ye.ATTRIB_VALUE_CLOSED:se(g,G)?I.state=ye.ATTRIB:G===">"?Ne(I):G==="/"?I.state=ye.OPEN_TAG_SLASH:se(Se,G)?(Rt(I,"No whitespace between attributes"),I.attribName=G,I.attribValue="",I.state=ye.ATTRIB_NAME):Rt(I,"Invalid attribute name");continue;case ye.ATTRIB_VALUE_UNQUOTED:if(he(v,G)){G==="&"?I.state=ye.ATTRIB_VALUE_ENTITY_U:I.attribValue+=G;continue}cn(I),G===">"?Ne(I):I.state=ye.ATTRIB;continue;case ye.CLOSE_TAG:if(I.tagName)G===">"?Ce(I):se(Re,G)?I.tagName+=G:I.script?(I.script+="</"+I.tagName,I.tagName="",I.state=ye.SCRIPT):(he(g,G)&&Rt(I,"Invalid tagname in closing tag"),I.state=ye.CLOSE_TAG_SAW_WHITE);else{if(se(g,G))continue;he(Se,G)?I.script?(I.script+="</"+G,I.state=ye.SCRIPT):Rt(I,"Invalid tagname in closing tag."):I.tagName=G}continue;case ye.CLOSE_TAG_SAW_WHITE:if(se(g,G))continue;G===">"?Ce(I):Rt(I,"Invalid characters in closing tag");continue;case ye.TEXT_ENTITY:case ye.ATTRIB_VALUE_ENTITY_Q:case ye.ATTRIB_VALUE_ENTITY_U:var ze,je;switch(I.state){case ye.TEXT_ENTITY:ze=ye.TEXT,je="textNode";break;case ye.ATTRIB_VALUE_ENTITY_Q:ze=ye.ATTRIB_VALUE_QUOTED,je="attribValue";break;case ye.ATTRIB_VALUE_ENTITY_U:ze=ye.ATTRIB_VALUE_UNQUOTED,je="attribValue"}G===";"?(I[je]+=lt(I),I.entity="",I.state=ze):se(I.entity.length?De:Be,G)?I.entity+=G:(Rt(I,"Invalid character in entity name"),I[je]+="&"+I.entity+G,I.entity="",I.state=ze);continue;default:throw new Error(I,"Unknown state: "+I.state)}return I.position>=I.bufferCheckPosition&&(function(Oe){for(var Ve=Math.max(o.MAX_BUFFER_LENGTH,10),tt=0,Je=0,mt=r.length;Je<mt;Je++){var Vt=Oe[r[Je]].length;if(Vt>Ve)switch(r[Je]){case"textNode":ot(Oe);break;case"cdata":Le(Oe,"oncdata",Oe.cdata),Oe.cdata="";break;case"script":Le(Oe,"onscript",Oe.script),Oe.script="";break;default:Et(Oe,"Max buffer length exceeded: "+r[Je])}tt=Math.max(tt,Vt)}var Dt=o.MAX_BUFFER_LENGTH-tt;Oe.bufferCheckPosition=Dt+Oe.position})(I),I},resume:function(){return this.error=null,this},close:function(){return this.write(null)},flush:function(){var A;ot(A=this),A.cdata!==""&&(Le(A,"oncdata",A.cdata),A.cdata=""),A.script!==""&&(Le(A,"onscript",A.script),A.script="")}};try{n=t(3515).Stream}catch{n=function(){}}var p=o.EVENTS.filter((function(A){return A!=="error"&&A!=="end"}));function m(A,I){if(!(this instanceof m))return new m(A,I);n.apply(this),this._parser=new u(A,I),this.writable=!0,this.readable=!0;var J=this;this._parser.onend=function(){J.emit("end")},this._parser.onerror=function(G){J.emit("error",G),J._parser.error=null},this._decoder=null,p.forEach((function(G){Object.defineProperty(J,"on"+G,{get:function(){return J._parser["on"+G]},set:function(Ae){if(!Ae)return J.removeAllListeners(G),J._parser["on"+G]=Ae,Ae;J.on(G,Ae)},enumerable:!0,configurable:!1})}))}m.prototype=Object.create(n.prototype,{constructor:{value:m}}),m.prototype.write=function(A){if(typeof Buffer=="function"&&typeof Buffer.isBuffer=="function"&&Buffer.isBuffer(A)){if(!this._decoder){var I=t(748).StringDecoder;this._decoder=new I("utf8")}A=this._decoder.write(A)}return this._parser.write(A.toString()),this.emit("data",A),!0},m.prototype.end=function(A){return A&&A.length&&this.write(A),this._parser.end(),!0},m.prototype.on=function(A,I){var J=this;return J._parser["on"+A]||p.indexOf(A)===-1||(J._parser["on"+A]=function(){var G=arguments.length===1?[arguments[0]]:Array.apply(null,arguments);G.splice(0,0,A),J.emit.apply(J,G)}),n.prototype.on.call(J,A,I)};var g=`\r
	 `,T="0124356789",f="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",c=`'"`,v=g+">",_="[CDATA[",x="DOCTYPE",te="http://www.w3.org/XML/1998/namespace",oe="http://www.w3.org/2000/xmlns/",Te={xml:te,xmlns:oe};g=re(g),T=re(T),f=re(f);var Se=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,Re=/[:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/,Be=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,De=/[#:_A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\u00B7\u0300-\u036F\u203F-\u2040\.\d-]/;function re(A){return A.split("").reduce((function(I,J){return I[J]=!0,I}),{})}function se(A,I){return(function(J){return Object.prototype.toString.call(J)==="[object RegExp]"})(A)?!!I.match(A):A[I]}function he(A,I){return!se(A,I)}c=re(c),v=re(v);var ve,ke,Fe,ye=0;for(var Qe in o.STATE={BEGIN:ye++,BEGIN_WHITESPACE:ye++,TEXT:ye++,TEXT_ENTITY:ye++,OPEN_WAKA:ye++,SGML_DECL:ye++,SGML_DECL_QUOTED:ye++,DOCTYPE:ye++,DOCTYPE_QUOTED:ye++,DOCTYPE_DTD:ye++,DOCTYPE_DTD_QUOTED:ye++,COMMENT_STARTING:ye++,COMMENT:ye++,COMMENT_ENDING:ye++,COMMENT_ENDED:ye++,CDATA:ye++,CDATA_ENDING:ye++,CDATA_ENDING_2:ye++,PROC_INST:ye++,PROC_INST_BODY:ye++,PROC_INST_ENDING:ye++,OPEN_TAG:ye++,OPEN_TAG_SLASH:ye++,ATTRIB:ye++,ATTRIB_NAME:ye++,ATTRIB_NAME_SAW_WHITE:ye++,ATTRIB_VALUE:ye++,ATTRIB_VALUE_QUOTED:ye++,ATTRIB_VALUE_CLOSED:ye++,ATTRIB_VALUE_UNQUOTED:ye++,ATTRIB_VALUE_ENTITY_Q:ye++,ATTRIB_VALUE_ENTITY_U:ye++,CLOSE_TAG:ye++,CLOSE_TAG_SAW_WHITE:ye++,SCRIPT:ye++,SCRIPT_ENDING:ye++},o.XML_ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},o.ENTITIES={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,OElig:338,oelig:339,Scaron:352,scaron:353,Yuml:376,fnof:402,circ:710,tilde:732,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,ndash:8211,mdash:8212,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,dagger:8224,Dagger:8225,bull:8226,hellip:8230,permil:8240,prime:8242,Prime:8243,lsaquo:8249,rsaquo:8250,oline:8254,frasl:8260,euro:8364,image:8465,weierp:8472,real:8476,trade:8482,alefsym:8501,larr:8592,uarr:8593,rarr:8594,darr:8595,harr:8596,crarr:8629,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,forall:8704,part:8706,exist:8707,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,prod:8719,sum:8721,minus:8722,lowast:8727,radic:8730,prop:8733,infin:8734,ang:8736,and:8743,or:8744,cap:8745,cup:8746,int:8747,there4:8756,sim:8764,cong:8773,asymp:8776,ne:8800,equiv:8801,le:8804,ge:8805,sub:8834,sup:8835,nsub:8836,sube:8838,supe:8839,oplus:8853,otimes:8855,perp:8869,sdot:8901,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,loz:9674,spades:9824,clubs:9827,hearts:9829,diams:9830},Object.keys(o.ENTITIES).forEach((function(A){var I=o.ENTITIES[A],J=typeof I=="number"?String.fromCharCode(I):I;o.ENTITIES[A]=J})),o.STATE)o.STATE[o.STATE[Qe]]=Qe;function xe(A,I,J){A[I]&&A[I](J)}function Le(A,I,J){A.textNode&&ot(A),xe(A,I,J)}function ot(A){A.textNode=Ht(A.opt,A.textNode),A.textNode&&xe(A,"ontext",A.textNode),A.textNode=""}function Ht(A,I){return A.trim&&(I=I.trim()),A.normalize&&(I=I.replace(/\s+/g," ")),I}function Et(A,I){return ot(A),A.trackPosition&&(I+=`
Line: `+A.line+`
Column: `+A.column+`
Char: `+A.c),I=new Error(I),A.error=I,xe(A,"onerror",I),A}function zt(A){return A.sawRoot&&!A.closedRoot&&Rt(A,"Unclosed root tag"),A.state!==ye.BEGIN&&A.state!==ye.BEGIN_WHITESPACE&&A.state!==ye.TEXT&&Et(A,"Unexpected end"),ot(A),A.c="",A.closed=!0,xe(A,"onend"),u.call(A,A.strict,A.opt),A}function Rt(A,I){if(typeof A!="object"||!(A instanceof u))throw new Error("bad call to strictFail");A.strict&&Et(A,I)}function Xt(A){A.strict||(A.tagName=A.tagName[A.looseCase]());var I=A.tags[A.tags.length-1]||A,J=A.tag={name:A.tagName,attributes:{}};A.opt.xmlns&&(J.ns=I.ns),A.attribList.length=0,Le(A,"onopentagstart",J)}function tn(A,I){var J=A.indexOf(":")<0?["",A]:A.split(":"),G=J[0],Ae=J[1];return I&&A==="xmlns"&&(G="xmlns",Ae=""),{prefix:G,local:Ae}}function cn(A){if(A.strict||(A.attribName=A.attribName[A.looseCase]()),A.attribList.indexOf(A.attribName)!==-1||A.tag.attributes.hasOwnProperty(A.attribName))A.attribName=A.attribValue="";else{if(A.opt.xmlns){var I=tn(A.attribName,!0),J=I.prefix,G=I.local;if(J==="xmlns")if(G==="xml"&&A.attribValue!==te)Rt(A,"xml: prefix must be bound to "+te+`
Actual: `+A.attribValue);else if(G==="xmlns"&&A.attribValue!==oe)Rt(A,"xmlns: prefix must be bound to "+oe+`
Actual: `+A.attribValue);else{var Ae=A.tag,Ye=A.tags[A.tags.length-1]||A;Ae.ns===Ye.ns&&(Ae.ns=Object.create(Ye.ns)),Ae.ns[G]=A.attribValue}A.attribList.push([A.attribName,A.attribValue])}else A.tag.attributes[A.attribName]=A.attribValue,Le(A,"onattribute",{name:A.attribName,value:A.attribValue});A.attribName=A.attribValue=""}}function Ne(A,I){if(A.opt.xmlns){var J=A.tag,G=tn(A.tagName);J.prefix=G.prefix,J.local=G.local,J.uri=J.ns[G.prefix]||"",J.prefix&&!J.uri&&(Rt(A,"Unbound namespace prefix: "+JSON.stringify(A.tagName)),J.uri=G.prefix);var Ae=A.tags[A.tags.length-1]||A;J.ns&&Ae.ns!==J.ns&&Object.keys(J.ns).forEach((function(Ut){Le(A,"onopennamespace",{prefix:Ut,uri:J.ns[Ut]})}));for(var Ye=0,ze=A.attribList.length;Ye<ze;Ye++){var je=A.attribList[Ye],Oe=je[0],Ve=je[1],tt=tn(Oe,!0),Je=tt.prefix,mt=tt.local,Vt=Je===""?"":J.ns[Je]||"",Dt={name:Oe,value:Ve,prefix:Je,local:mt,uri:Vt};Je&&Je!=="xmlns"&&!Vt&&(Rt(A,"Unbound namespace prefix: "+JSON.stringify(Je)),Dt.uri=Je),A.tag.attributes[Oe]=Dt,Le(A,"onattribute",Dt)}A.attribList.length=0}A.tag.isSelfClosing=!!I,A.sawRoot=!0,A.tags.push(A.tag),Le(A,"onopentag",A.tag),I||(A.noscript||A.tagName.toLowerCase()!=="script"?A.state=ye.TEXT:A.state=ye.SCRIPT,A.tag=null,A.tagName=""),A.attribName=A.attribValue="",A.attribList.length=0}function Ce(A){if(!A.tagName)return Rt(A,"Weird empty close tag."),A.textNode+="</>",void(A.state=ye.TEXT);if(A.script){if(A.tagName!=="script")return A.script+="</"+A.tagName+">",A.tagName="",void(A.state=ye.SCRIPT);Le(A,"onscript",A.script),A.script=""}var I=A.tags.length,J=A.tagName;A.strict||(J=J[A.looseCase]());for(var G=J;I--&&A.tags[I].name!==G;)Rt(A,"Unexpected close tag");if(I<0)return Rt(A,"Unmatched closing tag: "+A.tagName),A.textNode+="</"+A.tagName+">",void(A.state=ye.TEXT);A.tagName=J;for(var Ae=A.tags.length;Ae-- >I;){var Ye=A.tag=A.tags.pop();A.tagName=A.tag.name,Le(A,"onclosetag",A.tagName);var ze={};for(var je in Ye.ns)ze[je]=Ye.ns[je];var Oe=A.tags[A.tags.length-1]||A;A.opt.xmlns&&Ye.ns!==Oe.ns&&Object.keys(Ye.ns).forEach((function(Ve){var tt=Ye.ns[Ve];Le(A,"onclosenamespace",{prefix:Ve,uri:tt})}))}I===0&&(A.closedRoot=!0),A.tagName=A.attribValue=A.attribName="",A.attribList.length=0,A.state=ye.TEXT}function lt(A){var I,J=A.entity,G=J.toLowerCase(),Ae="";return A.ENTITIES[J]?A.ENTITIES[J]:A.ENTITIES[G]?A.ENTITIES[G]:((J=G).charAt(0)==="#"&&(J.charAt(1)==="x"?(J=J.slice(2),Ae=(I=parseInt(J,16)).toString(16)):(J=J.slice(1),Ae=(I=parseInt(J,10)).toString(10))),J=J.replace(/^0+/,""),Ae.toLowerCase()!==J?(Rt(A,"Invalid character entity"),"&"+A.entity+";"):String.fromCodePoint(I))}function $(A,I){I==="<"?(A.state=ye.OPEN_WAKA,A.startTagPosition=A.position):he(g,I)&&(Rt(A,"Non-whitespace before first tag."),A.textNode=I,A.state=ye.TEXT)}function Y(A,I){var J="";return I<A.length&&(J=A.charAt(I)),J}ye=o.STATE,String.fromCodePoint||(ve=String.fromCharCode,ke=Math.floor,Fe=function(){var A,I,J=[],G=-1,Ae=arguments.length;if(!Ae)return"";for(var Ye="";++G<Ae;){var ze=Number(arguments[G]);if(!isFinite(ze)||ze<0||ze>1114111||ke(ze)!==ze)throw RangeError("Invalid code point: "+ze);ze<=65535?J.push(ze):(A=55296+((ze-=65536)>>10),I=ze%1024+56320,J.push(A,I)),(G+1===Ae||J.length>16384)&&(Ye+=ve.apply(null,J),J.length=0)}return Ye},Object.defineProperty?Object.defineProperty(String,"fromCodePoint",{value:Fe,configurable:!0,writable:!0}):String.fromCodePoint=Fe)})(e)},6739:function(h,e,t){(function(o,n,r,u,p){function m(Y){if("contents"in Y)for(var A=("styleAttrs"in Y)?Y.styleAttrs[u.byName.ruby.qname]:null,I=Y.kind==="span"&&(A==="container"||A==="textContainer"||A==="baseContainer"),J=Y.contents.length-1;J>=0;J--)!I||"styleAttrs"in Y.contents[J]&&u.byName.ruby.qname in Y.contents[J].styleAttrs?m(Y.contents[J]):delete Y.contents[J]}function g(Y,A,I,J){var G=J&&J.timeContainer==="seq",Ae=0;J&&(Ae=G&&I?I.end:J.begin),A.begin=A.explicit_begin?A.explicit_begin+Ae:Ae;var Ye=A.begin,ze=null;if("sets"in A)for(var je=0;je<A.sets.length;je++)g(Y,A.sets[je],ze,A),Ye=A.timeContainer==="seq"?A.sets[je].end:Math.max(Ye,A.sets[je].end),ze=A.sets[je];if("contents"in A){if("contents"in A)for(var Oe=0;Oe<A.contents.length;Oe++)g(Y,A.contents[Oe],ze,A),Ye=A.timeContainer==="seq"?A.contents[Oe].end:Math.max(Ye,A.contents[Oe].end),ze=A.contents[Oe]}else Ye=G?A.begin:Number.POSITIVE_INFINITY;A.explicit_end!==null&&A.explicit_dur!==null?A.end=Math.min(A.begin+A.explicit_dur,Ae+A.explicit_end):A.explicit_end===null&&A.explicit_dur!==null?A.end=A.begin+A.explicit_dur:A.explicit_end!==null&&A.explicit_dur===null?A.end=Ae+A.explicit_end:A.end=Ye,delete A.explicit_begin,delete A.explicit_dur,delete A.explicit_end,Y._registerEvent(A)}function T(Y){this.node=Y}function f(){this.events=[],this.head=new c,this.body=null}function c(){this.styling=new v,this.layout=new te}function v(){this.styles={},this.initials={}}function _(){this.id=null,this.styleAttrs=null,this.styleRefs=null}function x(){this.styleAttrs=null}function te(){this.regions={}}function oe(Y,A){Te.call(this,"image"),this.src=Y,this.type=A}function Te(Y){this.kind=Y}function Se(Y){this.id=Y}function Re(Y){this.regionID=Y}function Be(Y){this.styleAttrs=Y}function De(Y){this.sets=Y}function re(Y){this.contents=Y}function se(Y,A,I){this.explicit_begin=Y,this.explicit_end=A,this.explicit_dur=I}function he(){Te.call(this,"body")}function ve(){Te.call(this,"div")}function ke(){Te.call(this,"p")}function Fe(){Te.call(this,"span")}function ye(){Te.call(this,"span")}function Qe(){Te.call(this,"br")}function xe(){}function Le(){}function ot(Y){return Y&&"xml:id"in Y.attributes&&Y.attributes["xml:id"].value||null}function Ht(Y){return Y&&"style"in Y.attributes?Y.attributes.style.value.split(" "):[]}function Et(Y,A){var I={};if(Y!==null)for(var J in Y.attributes){var G=Y.attributes[J].uri+" "+Y.attributes[J].local,Ae=u.byQName[G];if(Ae!==void 0){var Ye=Ae.parse(Y.attributes[J].value);Ye!==null?(I[G]=Ye,Ae===u.byName.zIndex&&Ne(A,"zIndex attribute present but not used by IMSC1 since regions do not overlap")):Ce(A,"Cannot parse styling attribute "+G+" --> "+Y.attributes[J].value)}}return I}function zt(Y,A,I){for(var J in Y.attributes)if(Y.attributes[J].uri===A&&Y.attributes[J].local===I)return Y.attributes[J].value;return null}function Rt(Y,A,I){var J,G=null;return(J=/^(\d+(?:\.\d+)?)f$/.exec(I))!==null?A!==null&&(G=parseFloat(J[1])/A):(J=/^(\d+(?:\.\d+)?)t$/.exec(I))!==null?Y!==null&&(G=parseFloat(J[1])/Y):(J=/^(\d+(?:\.\d+)?)ms$/.exec(I))!==null?G=parseFloat(J[1])/1e3:(J=/^(\d+(?:\.\d+)?)s$/.exec(I))!==null?G=parseFloat(J[1]):(J=/^(\d+(?:\.\d+)?)h$/.exec(I))!==null?G=3600*parseFloat(J[1]):(J=/^(\d+(?:\.\d+)?)m$/.exec(I))!==null?G=60*parseFloat(J[1]):(J=/^(\d{2,}):(\d\d):(\d\d(?:\.\d+)?)$/.exec(I))!==null?G=3600*parseInt(J[1])+60*parseInt(J[2])+parseFloat(J[3]):(J=/^(\d{2,}):(\d\d):(\d\d)\:(\d{2,})$/.exec(I))!==null&&A!==null&&(G=3600*parseInt(J[1])+60*parseInt(J[2])+parseInt(J[3])+(J[4]===null?0:parseInt(J[4])/A)),G}function Xt(Y,A,I){for(;A.styleRefs.length>0;){var J=A.styleRefs.pop();J in Y.styles?(Xt(Y,Y.styles[J],I),cn(Y.styles[J].styleAttrs,A.styleAttrs)):Ce(I,"Non-existant style id referenced")}}function tn(Y,A,I,J){for(var G=A.length-1;G>=0;G--){var Ae=A[G];Ae in Y.styles?cn(Y.styles[Ae].styleAttrs,I):Ce(J,"Non-existant style id referenced")}}function cn(Y,A){for(var I in Y)Y.hasOwnProperty(I)&&(I in A||(A[I]=Y[I]))}function Ne(Y,A){if(Y&&Y.warn&&Y.warn(A))throw A}function Ce(Y,A){if(Y&&Y.error&&Y.error(A))throw A}function lt(Y,A){throw Y&&Y.fatal&&Y.fatal(A),A}function $(Y,A){for(var I,J=0,G=Y.length-1;J<=G;){var Ae=Y[I=Math.floor((J+G)/2)];if(Ae<A)J=I+1;else{if(!(Ae>A))return{found:!0,index:I};G=I-1}}return{found:!1,index:J}}o.fromXML=function(Y,A,I){var J=n.parser(!0,{xmlns:!0}),G=[],Ae=[],Ye=[],ze=0,je=null;J.onclosetag=function(mt){if(G[0]instanceof xe)je.head!==null&&je.head.styling!==null&&tn(je.head.styling,G[0].styleRefs,G[0].styleAttrs,A),delete G[0].styleRefs;else if(G[0]instanceof v)for(var Vt in G[0].styles)G[0].styles.hasOwnProperty(Vt)&&Xt(G[0],G[0].styles[Vt],A);else if(G[0]instanceof ke||G[0]instanceof Fe){if(G[0].contents.length>1){var Dt,Ut=[G[0].contents[0]];for(Dt=1;Dt<G[0].contents.length;Dt++)G[0].contents[Dt]instanceof ye&&Ut[Ut.length-1]instanceof ye?Ut[Ut.length-1].text+=G[0].contents[Dt].text:Ut.push(G[0].contents[Dt]);G[0].contents=Ut}G[0]instanceof Fe&&G[0].contents.length===1&&G[0].contents[0]instanceof ye&&(G[0].text=G[0].contents[0].text,delete G[0].contents)}else G[0]instanceof T&&(G[0].node.uri===r.ns_tt&&G[0].node.local==="metadata"?ze--:ze>0&&I&&"onCloseTag"in I&&I.onCloseTag());Ye.shift(),Ae.shift(),G.shift()},J.ontext=function(mt){if(G[0]!==void 0)if(G[0]instanceof Fe||G[0]instanceof ke){if(G[0]instanceof Fe){var Vt=G[0].styleAttrs[u.byName.ruby.qname];if(Vt==="container"||Vt==="textContainer"||Vt==="baseContainer")return}var Dt=new ye;Dt.initFromText(je,G[0],mt,Ae[0],Ye[0],A),G[0].contents.push(Dt)}else G[0]instanceof T&&ze>0&&I&&"onText"in I&&I.onText(mt)},J.onopentag=function(mt){var Vt=mt.attributes["xml:space"];Vt?Ye.unshift(Vt.value):Ye.length===0?Ye.unshift("default"):Ye.unshift(Ye[0]);var Dt=mt.attributes["xml:lang"];if(Dt?Ae.unshift(Dt.value):Ae.length===0?Ae.unshift(""):Ae.unshift(Ae[0]),mt.uri===r.ns_tt)if(mt.local==="tt")je!==null&&lt(A,"Two <tt> elements at ("+this.line+","+this.column+")"),(je=new f).initFromNode(mt,Ae[0],A),G.unshift(je);else if(mt.local==="head")G[0]instanceof f||lt(A,"Parent of <head> element is not <tt> at ("+this.line+","+this.column+")"),G.unshift(je.head);else if(mt.local==="styling")G[0]instanceof c||lt(A,"Parent of <styling> element is not <head> at ("+this.line+","+this.column+")"),G.unshift(je.head.styling);else if(mt.local==="style"){var Ut;G[0]instanceof v?((Ut=new _).initFromNode(mt,A),Ut.id?je.head.styling.styles[Ut.id]=Ut:Ce(A,"<style> element missing @id attribute"),G.unshift(Ut)):G[0]instanceof xe?((Ut=new _).initFromNode(mt,A),cn(Ut.styleAttrs,G[0].styleAttrs),G.unshift(Ut)):lt(A,"Parent of <style> element is not <styling> or <region> at ("+this.line+","+this.column+")")}else if(mt.local==="initial"){var It;if(G[0]instanceof v){for(var gn in(It=new x).initFromNode(mt,A),It.styleAttrs)It.styleAttrs.hasOwnProperty(gn)&&(je.head.styling.initials[gn]=It.styleAttrs[gn]);G.unshift(It)}else lt(A,"Parent of <initial> element is not <styling> at ("+this.line+","+this.column+")")}else if(mt.local==="layout")G[0]instanceof c||lt(A,"Parent of <layout> element is not <head> at "+this.line+","+this.column+")"),G.unshift(je.head.layout);else if(mt.local==="region"){G[0]instanceof te||lt(A,"Parent of <region> element is not <layout> at "+this.line+","+this.column+")");var Rn=new xe;Rn.initFromNode(je,mt,Ae[0],A),!Rn.id||Rn.id in je.head.layout.regions?Ce(A,"Ignoring <region> with duplicate or missing @id at "+this.line+","+this.column+")"):je.head.layout.regions[Rn.id]=Rn,G.unshift(Rn)}else if(mt.local==="body"){G[0]instanceof f||lt(A,"Parent of <body> element is not <tt> at "+this.line+","+this.column+")"),je.body!==null&&lt(A,"Second <body> element at "+this.line+","+this.column+")");var jn=new he;jn.initFromNode(je,mt,Ae[0],A),je.body=jn,G.unshift(jn)}else if(mt.local==="div"){G[0]instanceof ve||G[0]instanceof he||lt(A,"Parent of <div> element is not <body> or <div> at "+this.line+","+this.column+")");var Zn=new ve;Zn.initFromNode(je,G[0],mt,Ae[0],A);var ra=Zn.styleAttrs[u.byName.backgroundImage.qname];ra&&(Zn.contents.push(new oe(ra)),delete Zn.styleAttrs[u.byName.backgroundImage.qname]),G[0].contents.push(Zn),G.unshift(Zn)}else if(mt.local==="image"){G[0]instanceof ve||lt(A,"Parent of <image> element is not <div> at "+this.line+","+this.column+")");var Wn=new oe;Wn.initFromNode(je,G[0],mt,Ae[0],A),G[0].contents.push(Wn),G.unshift(Wn)}else if(mt.local==="p"){G[0]instanceof ve||lt(A,"Parent of <p> element is not <div> at "+this.line+","+this.column+")");var Nt=new ke;Nt.initFromNode(je,G[0],mt,Ae[0],A),G[0].contents.push(Nt),G.unshift(Nt)}else if(mt.local==="span"){G[0]instanceof Fe||G[0]instanceof ke||lt(A,"Parent of <span> element is not <span> or <p> at "+this.line+","+this.column+")");var At=new Fe;At.initFromNode(je,G[0],mt,Ae[0],Ye[0],A),G[0].contents.push(At),G.unshift(At)}else if(mt.local==="br"){G[0]instanceof Fe||G[0]instanceof ke||lt(A,"Parent of <br> element is not <span> or <p> at "+this.line+","+this.column+")");var ft=new Qe;ft.initFromNode(je,G[0],mt,Ae[0],A),G[0].contents.push(ft),G.unshift(ft)}else if(mt.local==="set"){G[0]instanceof Fe||G[0]instanceof ke||G[0]instanceof ve||G[0]instanceof he||G[0]instanceof xe||G[0]instanceof Qe||lt(A,"Parent of <set> element is not a content element or a region at "+this.line+","+this.column+")");var at=new Le;at.initFromNode(je,G[0],mt,A),G[0].sets.push(at),G.unshift(at)}else G.unshift(new T(mt));else G.unshift(new T(mt));if(G[0]instanceof T){if(mt.uri===r.ns_tt&&mt.local==="metadata")ze++;else if(ze>0&&I&&"onOpenTag"in I){var xt=[];for(var Ct in mt.attributes)xt[mt.attributes[Ct].uri+" "+mt.attributes[Ct].local]={uri:mt.attributes[Ct].uri,local:mt.attributes[Ct].local,value:mt.attributes[Ct].value};I.onOpenTag(mt.uri,mt.local,xt)}}},J.write(Y).close(),delete je.head.styling.styles;var Oe=!1;for(var Ve in je.head.layout.regions)if(je.head.layout.regions.hasOwnProperty(Ve)){Oe=!0;break}if(!Oe){var tt=xe.prototype.createDefaultRegion(je.lang);je.head.layout.regions[tt.id]=tt}for(var Je in je.head.layout.regions)je.head.layout.regions.hasOwnProperty(Je)&&g(je,je.head.layout.regions[Je],null,null);return je.body&&g(je,je.body,null,null),je.body&&m(je.body),je},f.prototype.initFromNode=function(Y,A,I){var J=(function(ze,je){var Oe=zt(ze,r.ns_ttp,"cellResolution"),Ve=15,tt=32;if(Oe!==null){var Je=/(\d+) (\d+)/.exec(Oe);Je!==null?(tt=parseInt(Je[1]),Ve=parseInt(Je[2])):Ne(je,"Malformed cellResolution value (using initial value instead)")}return{w:tt,h:Ve}})(Y,I);this.cellLength={h:new p.ComputedLength(0,1/J.h),w:new p.ComputedLength(1/J.w,0)};var G=(function(ze,je){var Oe,Ve=zt(ze,r.ns_ttp,"frameRate"),tt=30;Ve!==null&&((Oe=/(\d+)/.exec(Ve))!==null?tt=parseInt(Oe[1]):Ne(je,"Malformed frame rate attribute (using initial value instead)"));var Je=zt(ze,r.ns_ttp,"frameRateMultiplier"),mt=1;Je!==null&&((Oe=/(\d+) (\d+)/.exec(Je))!==null?mt=parseInt(Oe[1])/parseInt(Oe[2]):Ne(je,"Malformed frame rate multiplier attribute (using initial value instead)"));var Vt=mt*tt,Dt=1,Ut=zt(ze,r.ns_ttp,"tickRate");return Ut===null?Ve!==null&&(Dt=Vt):(Oe=/(\d+)/.exec(Ut))!==null?Dt=parseInt(Oe[1]):Ne(je,"Malformed tick rate attribute (using initial value instead)"),{effectiveFrameRate:Vt,tickRate:Dt}})(Y,I);this.effectiveFrameRate=G.effectiveFrameRate,this.tickRate=G.tickRate,this.aspectRatio=(function(ze,je){var Oe=zt(ze,r.ns_ittp,"aspectRatio");Oe===null&&(Oe=zt(ze,r.ns_ttp,"displayAspectRatio"));var Ve=null;if(Oe!==null){var tt=/(\d+)\s+(\d+)/.exec(Oe);if(tt!==null){var Je=parseInt(tt[1]),mt=parseInt(tt[2]);Je!==0&&mt!==0?Ve=Je/mt:Ce(je,"Illegal aspectRatio values (ignoring)")}else Ce(je,"Malformed aspectRatio attribute (ignoring)")}return Ve})(Y,I);var Ae=zt(Y,r.ns_ttp,"timeBase");Ae!==null&&Ae!=="media"&&lt(I,"Unsupported time base");var Ye=(function(ze,je){var Oe=zt(ze,r.ns_tts,"extent");if(Oe===null)return null;var Ve=Oe.split(" ");if(Ve.length!==2)return Ne(je,"Malformed extent (ignoring)"),null;var tt=p.parseLength(Ve[0]),Je=p.parseLength(Ve[1]);return Je&&tt?{h:Je,w:tt}:(Ne(je,"Malformed extent values (ignoring)"),null)})(Y,I);Ye===null?this.pxLength={h:null,w:null}:(Ye.h.unit==="px"&&Ye.w.unit==="px"||lt(I,"Extent on TT must be in px or absent"),this.pxLength={h:new p.ComputedLength(0,1/Ye.h.value),w:new p.ComputedLength(1/Ye.w.value,0)}),this.dimensions={h:new p.ComputedLength(0,1),w:new p.ComputedLength(1,0)},this.lang=A},f.prototype._registerEvent=function(Y){if(!(Y.end<=Y.begin)){var A=$(this.events,Y.begin);if(A.found||this.events.splice(A.index,0,Y.begin),Y.end!==Number.POSITIVE_INFINITY){var I=$(this.events,Y.end);I.found||this.events.splice(I.index,0,Y.end)}}},f.prototype.getMediaTimeRange=function(){return[this.events[0],this.events[this.events.length-1]]},f.prototype.getMediaTimeEvents=function(){return this.events},_.prototype.initFromNode=function(Y,A){this.id=ot(Y),this.styleAttrs=Et(Y,A),this.styleRefs=Ht(Y)},x.prototype.initFromNode=function(Y,A){for(var I in this.styleAttrs={},Y.attributes)if(Y.attributes[I].uri===r.ns_itts||Y.attributes[I].uri===r.ns_ebutts||Y.attributes[I].uri===r.ns_tts){var J=Y.attributes[I].uri+" "+Y.attributes[I].local;this.styleAttrs[J]=Y.attributes[I].value}},oe.prototype.initFromNode=function(Y,A,I,J,G){this.src="src"in I.attributes?I.attributes.src.value:null,this.src||Ce(G,"Invalid image@src attribute"),this.type="type"in I.attributes?I.attributes.type.value:null,this.type||Ce(G,"Invalid image@type attribute"),Be.prototype.initFromNode.call(this,Y,A,I,G),se.prototype.initFromNode.call(this,Y,A,I,G),De.prototype.initFromNode.call(this,Y,A,I,G),Re.prototype.initFromNode.call(this,Y,A,I,G),this.lang=J},Se.prototype.initFromNode=function(Y,A,I,J){this.id=ot(I)},Re.prototype.initFromNode=function(Y,A,I,J){this.regionID=(function(G){return G&&"region"in G.attributes?G.attributes.region.value:""})(I)},Be.prototype.initFromNode=function(Y,A,I,J){this.styleAttrs=Et(I,J),Y.head!==null&&Y.head.styling!==null&&tn(Y.head.styling,Ht(I),this.styleAttrs,J)},De.prototype.initFromNode=function(Y,A,I,J){this.sets=[]},re.prototype.initFromNode=function(Y,A,I,J){this.contents=[]},se.prototype.initFromNode=function(Y,A,I,J){var G=(function(Ae,Ye,ze,je){var Oe=null;ze&&"begin"in ze.attributes&&(Oe=Rt(Ae.tickRate,Ae.effectiveFrameRate,ze.attributes.begin.value))===null&&Ne(je,"Malformed begin value "+ze.attributes.begin.value+" (using 0)");var Ve=null;ze&&"dur"in ze.attributes&&(Ve=Rt(Ae.tickRate,Ae.effectiveFrameRate,ze.attributes.dur.value))===null&&Ne(je,"Malformed dur value "+ze.attributes.dur.value+" (ignoring)");var tt=null;return ze&&"end"in ze.attributes&&(tt=Rt(Ae.tickRate,Ae.effectiveFrameRate,ze.attributes.end.value))===null&&Ne(je,"Malformed end value (ignoring)"),{explicit_begin:Oe,explicit_end:tt,explicit_dur:Ve}})(Y,0,I,J);this.explicit_begin=G.explicit_begin,this.explicit_end=G.explicit_end,this.explicit_dur=G.explicit_dur,this.timeContainer=(function(Ae,Ye){var ze=Ae&&"timeContainer"in Ae.attributes?Ae.attributes.timeContainer.value:null;return ze&&ze!=="par"?ze==="seq"?"seq":(Ce(Ye,"Illegal value of timeContainer (assuming 'par')"),"par"):"par"})(I,J)},he.prototype.initFromNode=function(Y,A,I,J){Be.prototype.initFromNode.call(this,Y,null,A,J),se.prototype.initFromNode.call(this,Y,null,A,J),De.prototype.initFromNode.call(this,Y,null,A,J),Re.prototype.initFromNode.call(this,Y,null,A,J),re.prototype.initFromNode.call(this,Y,null,A,J),this.lang=I},ve.prototype.initFromNode=function(Y,A,I,J,G){Be.prototype.initFromNode.call(this,Y,A,I,G),se.prototype.initFromNode.call(this,Y,A,I,G),De.prototype.initFromNode.call(this,Y,A,I,G),Re.prototype.initFromNode.call(this,Y,A,I,G),re.prototype.initFromNode.call(this,Y,A,I,G),this.lang=J},ke.prototype.initFromNode=function(Y,A,I,J,G){Be.prototype.initFromNode.call(this,Y,A,I,G),se.prototype.initFromNode.call(this,Y,A,I,G),De.prototype.initFromNode.call(this,Y,A,I,G),Re.prototype.initFromNode.call(this,Y,A,I,G),re.prototype.initFromNode.call(this,Y,A,I,G),this.lang=J},Fe.prototype.initFromNode=function(Y,A,I,J,G,Ae){Be.prototype.initFromNode.call(this,Y,A,I,Ae),se.prototype.initFromNode.call(this,Y,A,I,Ae),De.prototype.initFromNode.call(this,Y,A,I,Ae),Re.prototype.initFromNode.call(this,Y,A,I,Ae),re.prototype.initFromNode.call(this,Y,A,I,Ae),this.space=G,this.lang=J},ye.prototype.initFromText=function(Y,A,I,J,G,Ae){se.prototype.initFromNode.call(this,Y,A,null,Ae),this.text=I,this.space=G,this.lang=J},Qe.prototype.initFromNode=function(Y,A,I,J,G){Re.prototype.initFromNode.call(this,Y,A,I,G),se.prototype.initFromNode.call(this,Y,A,I,G),this.lang=J},xe.prototype.createDefaultRegion=function(Y){var A=new xe;return Se.call(A,""),Be.call(A,{}),De.call(A,[]),se.call(A,0,Number.POSITIVE_INFINITY,null),this.lang=Y,A},xe.prototype.initFromNode=function(Y,A,I,J){Se.prototype.initFromNode.call(this,Y,null,A,J),se.prototype.initFromNode.call(this,Y,null,A,J),De.prototype.initFromNode.call(this,Y,null,A,J),this.styleAttrs=Et(A,J),this.styleRefs=Ht(A),this.lang=I},Le.prototype.initFromNode=function(Y,A,I,J){se.prototype.initFromNode.call(this,Y,A,I,J);var G=Et(I,J);for(var Ae in this.qname=null,this.value=null,G)if(G.hasOwnProperty(Ae)){if(this.qname){Ce(J,"More than one style specified on set");break}this.qname=Ae,this.value=G[Ae]}}})(e,typeof sax>"u"?t(5474):sax,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},1612:function(h,e,t){var o=/firefox/i.test(navigator.userAgent);(function(n,r,u){function p(re,se,he,ve){var ke;if(he.kind==="region")(ke=document.createElement("div")).style.position="absolute";else if(he.kind==="body")ke=document.createElement("div");else if(he.kind==="div")ke=document.createElement("div");else if(he.kind==="image"){if(ke=document.createElement("img"),re.imgResolver!==null&&he.src!==null){var Fe=re.imgResolver(he.src,ke);Fe&&(ke.src=Fe),ke.height=re.regionH,ke.width=re.regionW}}else if(he.kind==="p")ke=document.createElement("p");else if(he.kind==="span")if(he.styleAttrs[u.byName.ruby.qname]==="container")ke=document.createElement("ruby"),re.ruby=!0;else if(he.styleAttrs[u.byName.ruby.qname]==="base")ke=document.createElement("span");else if(he.styleAttrs[u.byName.ruby.qname]==="text")ke=document.createElement("rt");else if(he.styleAttrs[u.byName.ruby.qname]==="baseContainer")ke=document.createElement("rbc");else if(he.styleAttrs[u.byName.ruby.qname]==="textContainer")ke=document.createElement("rtc");else{if(he.styleAttrs[u.byName.ruby.qname]==="delimiter")return;ke=document.createElement("span")}else he.kind==="br"&&(ke=document.createElement("br"));if(ke){if(he.lang&&(he.kind!=="region"&&he.lang===ve.lang||(ke.lang=he.lang)),se.appendChild(ke),ke.style.margin="0",he.kind==="region"){var ye=he.styleAttrs[u.byName.writingMode.qname];ye==="lrtb"||ye==="lr"?(re.ipd="lr",re.bpd="tb"):ye==="rltb"||ye==="rl"?(re.ipd="rl",re.bpd="tb"):ye==="tblr"?(re.ipd="tb",re.bpd="lr"):ye!=="tbrl"&&ye!=="tb"||(re.ipd="tb",re.bpd="rl")}else if(he.kind==="p"&&re.bpd==="tb"){var Qe=he.styleAttrs[u.byName.direction.qname];re.ipd=Qe==="ltr"?"lr":"rl"}for(var xe=0;xe<x.length;xe++){var Le=x[xe],ot=he.styleAttrs[Le.qname];ot!==void 0&&Le.map!==null&&Le.map(re,ke,he,ot)}var Ht=ke,Et=he.styleAttrs[u.byName.linePadding.qname];if(Et&&!Et.isZero()){var zt=Et.toUsedLength(re.w,re.h);if(zt>0){var Rt=Math.ceil(zt)+"px";re.bpd==="tb"?(Ht.style.paddingLeft=Rt,Ht.style.paddingRight=Rt):(Ht.style.paddingTop=Rt,Ht.style.paddingBottom=Rt),re.lp=Et}}var Xt=he.styleAttrs[u.byName.multiRowAlign.qname];if(Xt&&Xt!=="auto"){var tn=document.createElement("span");tn.style.display="inline-block",tn.style.textAlign=Xt,ke.appendChild(tn),Ht=tn,re.mra=Xt}var cn=he.styleAttrs[u.byName.rubyReserve.qname];if(cn&&cn[0]!=="none"&&(re.rubyReserve=cn),he.styleAttrs[u.byName.fillLineGap.qname]&&(re.flg=!0),he.kind==="span"&&he.text){var Ne=he.styleAttrs[u.byName.textEmphasis.qname];if(Ne&&Ne.style!=="none"&&(re.textEmphasis=!0),u.byName.textCombine.qname in he.styleAttrs&&he.styleAttrs[u.byName.textCombine.qname]==="all")ke.textContent=he.text,ke._isd_element=he,Ne&&v(re,ke,0,Ne);else for(var Ce="",lt=0;lt<he.text.length;lt++){Ce+=he.text.charAt(lt);var $=he.text.charCodeAt(lt);if($<55296||$>56319||lt===he.text.length-1){var Y=document.createElement("span");Y.textContent=Ce,Ne&&v(re,Y,0,Ne),ke.appendChild(Y),Ce="",Y._isd_element=he}}}if("contents"in he)for(var A=0;A<he.contents.length;A++)p(re,Ht,he.contents[A],he);var I=[];if(he.kind==="p"&&(c(re,Ht,I,null),re.rubyReserve&&((function(ze,je){for(var Oe=0;Oe<ze.length;Oe++){var Ve,tt,Je=document.createElement("ruby"),mt=document.createElement("span");mt.textContent="​",Je.appendChild(mt);var Vt,Dt=je.rubyReserve[1].toUsedLength(je.w,je.h)+"px";je.rubyReserve[0]==="both"||je.rubyReserve[0]==="outside"&&ze.length==1?((Ve=document.createElement("rtc")).style[Se]=Te?"after":"under",Ve.textContent="​",Ve.style.fontSize=Dt,(tt=document.createElement("rtc")).style[Se]=Te?"before":"over",tt.textContent="​",tt.style.fontSize=Dt,Je.appendChild(Ve),Je.appendChild(tt)):((Ve=document.createElement("rtc")).textContent="​",Ve.style.fontSize=Dt,Vt=je.rubyReserve[0]==="after"||je.rubyReserve[0]==="outside"&&Oe>0?Te?"after":je.bpd==="tb"||je.bpd==="rl"?"under":"over":Te?"before":je.bpd==="tb"||je.bpd==="rl"?"over":"under",Ve.style[Se]=Vt,Je.appendChild(Ve));for(var Ut=null,It=0;It<ze[Oe].rbc.length;It++)if(ze[Oe].rbc[It].localName==="ruby"){Ut=ze[Oe].rbc[It];for(var gn=0;gn<Ut.style.length;gn++)Je.style.setProperty(Ut.style.item(gn),Ut.style.getPropertyValue(Ut.style.item(gn)));break}(Ut=Ut||ze[Oe].elements[0].node).parentElement.insertBefore(Je,Ut)}})(I,re),re.rubyReserve=null),(re.ruby||re.rubyReserve)&&((function(ze,je){for(var Oe=0;Oe<ze.length;Oe++)for(var Ve=0;Ve<ze[Oe].rbc.length;Ve++){var tt;ze[Oe].rbc[Ve].style[Se]||(tt=Te?Oe===0?"before":"after":je.bpd==="tb"||je.bpd==="rl"?Oe===0?"over":"under":Oe===0?"under":"over",ze[Oe].rbc[Ve].style[Se]=tt)}})(I,re),re.ruby=null),re.textEmphasis&&((function(ze,je){for(var Oe=0;Oe<ze.length;Oe++)for(var Ve=0;Ve<ze[Oe].te.length;Ve++){var tt;ze[Oe].te[Ve].style[Be]&&ze[Oe].te[Ve].style[Be]!=="none"||(tt=je.bpd==="tb"?Oe===0?"left over":"left under":je.bpd==="rl"?Oe===0?"right under":"left under":Oe===0?"left under":"right under",ze[Oe].te[Ve].style[Be]=tt)}})(I,re),re.textEmphasis=null),re.mra&&((function(ze){for(var je=0;je<ze.length-1;je++){var Oe=ze[je].elements.length;if(Oe!==0&&ze[je].br===!1){var Ve=document.createElement("br"),tt=ze[je].elements[Oe-1].node;tt.parentElement.insertBefore(Ve,tt.nextSibling)}}})(I),re.mra=null),re.lp&&((function(ze,je,Oe){if(ze!==null)for(var Ve=0;Ve<ze.length;Ve++){var tt=ze[Ve].elements.length,Je=Math.ceil(je)+"px",mt="-"+Math.ceil(je)+"px";if(tt!==0){var Vt=ze[Ve].elements[ze[Ve].start_elem],Dt=ze[Ve].elements[ze[Ve].end_elem];if(Vt===Dt){var Ut=Vt.node.getBoundingClientRect();if(Ut.width==0||Ut.height==0)continue}Oe.ipd==="lr"?(Vt.node.style.marginLeft=mt,Vt.node.style.paddingLeft=Je):Oe.ipd==="rl"?(Vt.node.style.paddingRight=Je,Vt.node.style.marginRight=mt):Oe.ipd==="tb"&&(Vt.node.style.paddingTop=Je,Vt.node.style.marginTop=mt),Oe.ipd==="lr"?(o||(Dt.node.style.marginRight=mt),Dt.node.style.paddingRight=Je):Oe.ipd==="rl"?(Dt.node.style.paddingLeft=Je,o||(Dt.node.style.marginLeft=mt)):Oe.ipd==="tb"&&(Dt.node.style.paddingBottom=Je,Dt.node.style.marginBottom=mt)}}})(I,re.lp.toUsedLength(re.w,re.h),re),re.lp=null),(function(ze,je){for(var Oe=0;Oe<ze.length;Oe++)for(var Ve=ze[Oe],tt=1;tt<Ve.elements.length;){var Je=Ve.elements[tt-1],mt=Ve.elements[tt];g(Je.node,mt.node,je)?Ve.elements.splice(tt,1):tt++}for(var Vt,Dt,Ut=[],It=0;It<ze.length;It++)for(var gn=0;gn<ze[It].elements.length;gn++)(Dt=m(Vt=ze[It].elements[gn].node,Ut,!1))&&(Vt.style.backgroundColor=Dt);for(var Rn=0;Rn<Ut.length;Rn++)Ut[Rn].style.backgroundColor=""})(I,re),re.flg)){var J=f(Ht.getBoundingClientRect(),re);(function(ze,je,Oe,Ve){for(var tt=Math.sign(Oe-je),Je=0;Je<=ze.length;Je++){var mt,Vt,Dt,Ut;if(mt=Je===0?Math.round(je):Je===ze.length?Math.round(Oe):Math.round((ze[Je-1].after+ze[Je].before)/2),Je>0&&ze[Je-1])for(Dt=0;Dt<ze[Je-1].elements.length;Dt++)Vt=tt*(mt-(Ut=ze[Je-1].elements[Dt]).after)+"px",Ve.bpd==="lr"?Ut.node.style.paddingRight=Vt:Ve.bpd==="rl"?Ut.node.style.paddingLeft=Vt:Ve.bpd==="tb"&&(Ut.node.style.paddingBottom=Vt);if(Je<ze.length)for(Dt=0;Dt<ze[Je].elements.length;Dt++)Vt=tt*((Ut=ze[Je].elements[Dt]).before-mt)+"px",Ve.bpd==="lr"?Ut.node.style.paddingLeft=Vt:Ve.bpd==="rl"?Ut.node.style.paddingRight=Vt:Ve.bpd==="tb"&&(Ut.node.style.paddingTop=Vt)}})(I,J.before,J.after,re),re.flg=null}if(he.kind==="region"&&re.bpd==="tb"&&re.enableRollUp&&he.contents.length>0&&he.styleAttrs[u.byName.displayAlign.qname]==="after"){c(re,Ht,I,null);var G=new T(he.id===""?"_":he.id,I);if(re.currentISDState[G.id]=G,re.previousISDState&&G.id in re.previousISDState&&re.previousISDState[G.id].plist.length>0&&G.plist.length>1&&G.plist[G.plist.length-2].text===re.previousISDState[G.id].plist[re.previousISDState[G.id].plist.length-1].text){var Ae=ke.firstElementChild,Ye=G.plist[G.plist.length-1].after-G.plist[G.plist.length-1].before;Ae.style.bottom="-"+Ye+"px",Ae.style.transition="transform 0.4s",Ae.style.position="relative",Ae.style.transform="translateY(-"+Ye+"px)"}}}else De(re.errorHandler,"Error processing ISD element kind: "+he.kind)}function m(re,se,he){return re.style.backgroundColor?(he&&!se.includes(re)&&se.push(re),re.style.backgroundColor):re.parentElement.nodeName==="SPAN"||re.parentElement.nodeName==="RUBY"||re.parentElement.nodeName==="RBC"||re.parentElement.nodeName==="RTC"||re.parentElement.nodeName==="RT"?m(re.parentElement,se,!0):void 0}function g(re,se,he){if(re.tagName==="SPAN"&&se.tagName==="SPAN"&&re._isd_element===se._isd_element){if(!re._isd_element)return De(he.errorHandler,"Internal error: HTML span is not linked to a source element; cannot merge spans."),!1;re.textContent+=se.textContent;for(var ve=0;ve<se.style.length;ve++){var ke=se.style[ve];(ke.indexOf("border")>=0||ke.indexOf("padding")>=0||ke.indexOf("margin")>=0)&&(re.style[ke]=se.style[ke])}return se.parentElement.removeChild(se),!0}return!1}function T(re,se){this.id=re,this.plist=se}function f(re,se){var he={before:null,after:null,start:null,end:null};return se.bpd==="tb"?(he.before=re.top,he.after=re.bottom,se.ipd==="lr"?(he.start=re.left,he.end=re.right):(he.start=re.right,he.end=re.left)):se.bpd==="lr"?(he.before=re.left,he.after=re.right,he.start=re.top,he.end=re.bottom):se.bpd==="rl"&&(he.before=re.right,he.after=re.left,he.start=re.top,he.end=re.bottom),he}function c(re,se,he,ve){if(se.localName!=="rt"&&se.localName!=="rtc"){var ke,Fe,ye,Qe,xe=se.style.backgroundColor||ve;if(se.childElementCount===0)if(se.localName==="span"||se.localName==="rb"){var Le=f(se.getBoundingClientRect(),re);if(he.length!==0&&(ke=Le.before,Fe=Le.after,ye=he[he.length-1].before,Fe<(Qe=he[he.length-1].after)&&ke>ye||Qe<=Fe&&ye>=ke)){var ot=Math.sign(Le.after-Le.before),Ht=Math.sign(Le.end-Le.start);ot*(Le.before-he[he.length-1].before)<0&&(he[he.length-1].before=Le.before),ot*(Le.after-he[he.length-1].after)>0&&(he[he.length-1].after=Le.after),Ht*(Le.start-he[he.length-1].start)<0&&(he[he.length-1].start=Le.start,he[he.length-1].start_elem=he[he.length-1].elements.length),Ht*(Le.end-he[he.length-1].end)>0&&(he[he.length-1].end=Le.end,he[he.length-1].end_elem=he[he.length-1].elements.length)}else he.push({before:Le.before,after:Le.after,start:Le.start,end:Le.end,start_elem:0,end_elem:0,elements:[],rbc:[],te:[],text:"",br:!1});he[he.length-1].text+=se.textContent,he[he.length-1].elements.push({node:se,bgcolor:xe,before:Le.before,after:Le.after})}else se.localName==="br"&&he.length!==0&&(he[he.length-1].br=!0);else for(var Et=se.firstChild;Et;)Et.nodeType===Node.ELEMENT_NODE&&(c(re,Et,he,xe),Et.localName==="ruby"||Et.localName==="rtc"?he.length>0&&he[he.length-1].rbc.push(Et):Et.localName==="span"&&Et.style[Re]&&Et.style[Re]!=="none"&&he.length>0&&he[he.length-1].te.push(Et)),Et=Et.nextSibling}}function v(re,se,he,ve){var ke;ve.style!=="none"&&(ve.style==="auto"?se.style[Re]="filled":se.style[Re]=ve.style+" "+ve.symbol,(ve.position==="before"||ve.position==="after")&&(ke=re.bpd==="tb"?ve.position==="before"?"left over":"left under":re.bpd==="rl"?ve.position==="before"?"right under":"left under":ve.position==="before"?"left under":"right under",se.style[Be]=ke))}function _(re,se){this.qname=re,this.map=se}n.render=function(re,se,he,ve,ke,Fe,ye,Qe,xe){var Le=ve||se.clientHeight,ot=ke||se.clientWidth;if(re.aspectRatio!==null){var Ht=Le*re.aspectRatio;Ht>ot?Le=Math.round(ot/re.aspectRatio):ot=Ht}var Et=document.createElement("div");Et.style.position="relative",Et.style.width=ot+"px",Et.style.height=Le+"px",Et.style.margin="auto",Et.style.top=0,Et.style.bottom=0,Et.style.left=0,Et.style.right=0,Et.style.zIndex=0;var zt={h:Le,w:ot,regionH:null,regionW:null,imgResolver:he,displayForcedOnlyMode:Fe||!1,isd:re,errorHandler:ye,previousISDState:Qe,enableRollUp:xe||!1,currentISDState:{},flg:null,lp:null,mra:null,ipd:null,bpd:null,ruby:null,textEmphasis:null,rubyReserve:null};if(se.appendChild(Et),"contents"in re)for(var Rt=0;Rt<re.contents.length;Rt++)p(zt,Et,re.contents[Rt],re);return zt.currentISDState};for(var x=[new _("http://www.w3.org/ns/ttml#styling backgroundColor",(function(re,se,he,ve){ve[3]!==0&&(se.style.backgroundColor="rgba("+ve[0].toString()+","+ve[1].toString()+","+ve[2].toString()+","+(ve[3]/255).toString()+")")})),new _("http://www.w3.org/ns/ttml#styling color",(function(re,se,he,ve){se.style.color="rgba("+ve[0].toString()+","+ve[1].toString()+","+ve[2].toString()+","+(ve[3]/255).toString()+")"})),new _("http://www.w3.org/ns/ttml#styling direction",(function(re,se,he,ve){se.style.direction=ve})),new _("http://www.w3.org/ns/ttml#styling display",(function(re,se,he,ve){})),new _("http://www.w3.org/ns/ttml#styling displayAlign",(function(re,se,he,ve){se.style.display="flex",se.style.flexDirection="column",ve==="before"?se.style.justifyContent="flex-start":ve==="center"?se.style.justifyContent="center":ve==="after"&&(se.style.justifyContent="flex-end")})),new _("http://www.w3.org/ns/ttml#styling extent",(function(re,se,he,ve){re.regionH=ve.h.toUsedLength(re.w,re.h),re.regionW=ve.w.toUsedLength(re.w,re.h);var ke=0,Fe=0,ye=he.styleAttrs["http://www.w3.org/ns/ttml#styling padding"];ye&&(ke=ye[0].toUsedLength(re.w,re.h)+ye[2].toUsedLength(re.w,re.h),Fe=ye[1].toUsedLength(re.w,re.h)+ye[3].toUsedLength(re.w,re.h)),se.style.height=re.regionH-ke+"px",se.style.width=re.regionW-Fe+"px"})),new _("http://www.w3.org/ns/ttml#styling fontFamily",(function(re,se,he,ve){for(var ke=[],Fe=0;Fe<ve.length;Fe++)ve[Fe]=ve[Fe].trim(),ve[Fe]==="monospaceSerif"?(ke.push("Courier New"),ke.push('"Liberation Mono"'),ke.push("Courier"),ke.push("monospace")):ve[Fe]==="proportionalSansSerif"?(ke.push("Arial"),ke.push("Helvetica"),ke.push('"Liberation Sans"'),ke.push("sans-serif")):ve[Fe]==="monospace"?ke.push("monospace"):ve[Fe]==="sansSerif"?ke.push("sans-serif"):ve[Fe]==="serif"?ke.push("serif"):ve[Fe]==="monospaceSansSerif"?(ke.push("Consolas"),ke.push("monospace")):ve[Fe]==="proportionalSerif"?ke.push("serif"):ke.push(ve[Fe]);if(ke.length>0){for(var ye=[ke[0]],Qe=1;Qe<ke.length;Qe++)ye.indexOf(ke[Qe])==-1&&ye.push(ke[Qe]);ke=ye}se.style.fontFamily=ke.join(",")})),new _("http://www.w3.org/ns/ttml#styling shear",(function(re,se,he,ve){if(ve!==0){var ke=-.9*ve;re.bpd==="tb"?se.style.transform="skewX("+ke+"deg)":se.style.transform="skewY("+ke+"deg)"}})),new _("http://www.w3.org/ns/ttml#styling fontSize",(function(re,se,he,ve){se.style.fontSize=ve.toUsedLength(re.w,re.h)+"px"})),new _("http://www.w3.org/ns/ttml#styling fontStyle",(function(re,se,he,ve){se.style.fontStyle=ve})),new _("http://www.w3.org/ns/ttml#styling fontWeight",(function(re,se,he,ve){se.style.fontWeight=ve})),new _("http://www.w3.org/ns/ttml#styling lineHeight",(function(re,se,he,ve){se.style.lineHeight=ve==="normal"?"normal":ve.toUsedLength(re.w,re.h)+"px"})),new _("http://www.w3.org/ns/ttml#styling opacity",(function(re,se,he,ve){se.style.opacity=ve})),new _("http://www.w3.org/ns/ttml#styling origin",(function(re,se,he,ve){se.style.top=ve.h.toUsedLength(re.w,re.h)+"px",se.style.left=ve.w.toUsedLength(re.w,re.h)+"px"})),new _("http://www.w3.org/ns/ttml#styling overflow",(function(re,se,he,ve){se.style.overflow=ve})),new _("http://www.w3.org/ns/ttml#styling padding",(function(re,se,he,ve){var ke=[];ke[0]=ve[0].toUsedLength(re.w,re.h)+"px",ke[1]=ve[3].toUsedLength(re.w,re.h)+"px",ke[2]=ve[2].toUsedLength(re.w,re.h)+"px",ke[3]=ve[1].toUsedLength(re.w,re.h)+"px",se.style.padding=ke.join(" ")})),new _("http://www.w3.org/ns/ttml#styling position",(function(re,se,he,ve){se.style.top=ve.h.toUsedLength(re.w,re.h)+"px",se.style.left=ve.w.toUsedLength(re.w,re.h)+"px"})),new _("http://www.w3.org/ns/ttml#styling rubyAlign",(function(re,se,he,ve){se.style.rubyAlign=ve==="spaceAround"?"space-around":"center"})),new _("http://www.w3.org/ns/ttml#styling rubyPosition",(function(re,se,he,ve){var ke;ve!=="before"&&ve!=="after"||(ke=Te?ve:re.bpd==="tb"||re.bpd==="rl"?ve==="before"?"over":"under":ve==="before"?"under":"over",se.parentElement.style[Se]=ke)})),new _("http://www.w3.org/ns/ttml#styling showBackground",null),new _("http://www.w3.org/ns/ttml#styling textAlign",(function(re,se,he,ve){var ke;ke=ve==="start"?re.ipd==="rl"?"right":"left":ve==="end"?re.ipd==="rl"?"left":"right":ve,se.style.textAlign=ke})),new _("http://www.w3.org/ns/ttml#styling textDecoration",(function(re,se,he,ve){se.style.textDecoration=ve.join(" ").replace("lineThrough","line-through")})),new _("http://www.w3.org/ns/ttml#styling textOutline",(function(re,se,he,ve){})),new _("http://www.w3.org/ns/ttml#styling textShadow",(function(re,se,he,ve){var ke=he.styleAttrs[u.byName.textOutline.qname];if(ve==="none"&&ke==="none")se.style.textShadow="";else{var Fe=[];if(ke!=="none"){var ye="rgba("+ke.color[0].toString()+","+ke.color[1].toString()+","+ke.color[2].toString()+","+(ke.color[3]/255).toString()+")";Fe.push("1px 1px 1px "+ye),Fe.push("-1px 1px 1px "+ye),Fe.push("1px -1px 1px "+ye),Fe.push("-1px -1px 1px "+ye)}if(ve!=="none")for(var Qe=0;Qe<ve.length;Qe++)Fe.push(ve[Qe].x_off.toUsedLength(re.w,re.h)+"px "+ve[Qe].y_off.toUsedLength(re.w,re.h)+"px "+ve[Qe].b_radius.toUsedLength(re.w,re.h)+"px rgba("+ve[Qe].color[0].toString()+","+ve[Qe].color[1].toString()+","+ve[Qe].color[2].toString()+","+(ve[Qe].color[3]/255).toString()+")");se.style.textShadow=Fe.join(",")}})),new _("http://www.w3.org/ns/ttml#styling textCombine",(function(re,se,he,ve){se.style.textCombineUpright=ve})),new _("http://www.w3.org/ns/ttml#styling textEmphasis",(function(re,se,he,ve){})),new _("http://www.w3.org/ns/ttml#styling unicodeBidi",(function(re,se,he,ve){var ke;ke=ve==="bidiOverride"?"bidi-override":ve,se.style.unicodeBidi=ke})),new _("http://www.w3.org/ns/ttml#styling visibility",(function(re,se,he,ve){se.style.visibility=ve})),new _("http://www.w3.org/ns/ttml#styling wrapOption",(function(re,se,he,ve){ve==="wrap"?he.space==="preserve"?se.style.whiteSpace="pre-wrap":se.style.whiteSpace="normal":he.space==="preserve"?se.style.whiteSpace="pre":se.style.whiteSpace="noWrap"})),new _("http://www.w3.org/ns/ttml#styling writingMode",(function(re,se,he,ve){ve==="lrtb"||ve==="lr"||ve==="rltb"||ve==="rl"?se.style.writingMode="horizontal-tb":ve==="tblr"?se.style.writingMode="vertical-lr":ve!=="tbrl"&&ve!=="tb"||(se.style.writingMode="vertical-rl")})),new _("http://www.w3.org/ns/ttml#styling zIndex",(function(re,se,he,ve){se.style.zIndex=ve})),new _("http://www.w3.org/ns/ttml/profile/imsc1#styling forcedDisplay",(function(re,se,he,ve){re.displayForcedOnlyMode&&ve===!1&&(se.style.visibility="hidden")}))],te={},oe=0;oe<x.length;oe++)te[x[oe].qname]=x[oe];var Te="webkitRubyPosition"in window.getComputedStyle(document.documentElement),Se=Te?"webkitRubyPosition":"rubyPosition",Re="webkitTextEmphasisStyle"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisStyle":"textEmphasisStyle",Be="webkitTextEmphasisPosition"in window.getComputedStyle(document.documentElement)?"webkitTextEmphasisPosition":"textEmphasisPosition";function De(re,se){if(re&&re.error&&re.error(se))throw se}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},8905:function(h,e,t){(function(o,n,r,u){o.generateISD=function(_,x,te){var oe,Te=new f(_),Se={},Re={},Be=_.head.styling.initials[r.byName.showBackground.qname],De=_.head.styling.initials[r.byName.backgroundColor.qname];for(var re in _.head.layout.regions)if(_.head.layout.regions.hasOwnProperty(re)){var se=_.head.layout.regions[re],he=se.styleAttrs[r.byName.showBackground.qname]||Be,ve=se.styleAttrs[r.byName.backgroundColor.qname]||De;Re[se.id]=(he==="always"||he===void 0)&&ve!==void 0&&!(x<se.begin||x>=se.end)}for(var ke in _.body&&_.body.regionID&&(Re[_.body.regionID]=!0),oe=_.body!==null?(function ye(Qe,xe){if(xe.contents){var Le={};for(var ot in xe)xe.hasOwnProperty(ot)&&(Le[ot]=xe[ot]);return Le.contents=[],xe.contents.filter((function(Ht){return!(Qe<Ht.begin||Qe>=Ht.end)})).forEach((function(Ht){var Et=ye(Qe,Ht);Et.regionID&&(Re[Et.regionID]=!0),Et!==null&&Le.contents.push(Et)})),Le}return xe})(x,_.body):null,Re[""]!==void 0&&(Re[""]=!0),Re)if(Re[ke]){var Fe=m(_,x,_.head.layout.regions[ke],oe,null,"",_.head.layout.regions[ke],te,Se);Fe!==null&&Te.contents.push(Fe.element)}return Te};var p=[r.byName.color.qname,r.byName.textCombine.qname,r.byName.textDecoration.qname,r.byName.textEmphasis.qname,r.byName.textOutline.qname,r.byName.textShadow.qname];function m(_,x,te,oe,Te,Se,Re,Be,De){if(x<Re.begin||x>=Re.end)return null;var re="regionID"in Re&&Re.regionID!==""?Re.regionID:Se;if(Te!==null&&re!==te.id&&(!("contents"in Re)||"contents"in Re&&Re.contents.length===0||re!==""))return null;var se=new c(Re);if("sets"in Re)for(var he=0;he<Re.sets.length;he++)x<Re.sets[he].begin||x>=Re.sets[he].end||(se.styleAttrs[Re.sets[he].qname]=Re.sets[he].value);var ve={};for(var ke in se.styleAttrs)if(se.styleAttrs.hasOwnProperty(ke)&&(ve[ke]=!0,se.kind==="region"&&ke===r.byName.writingMode.qname&&!(r.byName.direction.qname in se.styleAttrs))){var Fe=se.styleAttrs[ke];Fe==="lrtb"||Fe==="lr"?se.styleAttrs[r.byName.direction.qname]="ltr":Fe!=="rltb"&&Fe!=="rl"||(se.styleAttrs[r.byName.direction.qname]="rtl")}if(Te!==null)for(var ye=0;ye<r.all.length;ye++){var Qe=r.all[ye];if(Qe.qname===r.byName.textDecoration.qname){var xe=Te.styleAttrs[Qe.qname],Le=se.styleAttrs[Qe.qname],ot=[];Le===void 0?ot=xe:Le.indexOf("none")===-1?((Le.indexOf("noUnderline")===-1&&xe.indexOf("underline")!==-1||Le.indexOf("underline")!==-1)&&ot.push("underline"),(Le.indexOf("noLineThrough")===-1&&xe.indexOf("lineThrough")!==-1||Le.indexOf("lineThrough")!==-1)&&ot.push("lineThrough"),(Le.indexOf("noOverline")===-1&&xe.indexOf("overline")!==-1||Le.indexOf("overline")!==-1)&&ot.push("overline")):ot.push("none"),se.styleAttrs[Qe.qname]=ot}else if(Qe.qname!==r.byName.fontSize.qname||Qe.qname in se.styleAttrs||se.kind!=="span"||se.styleAttrs[r.byName.ruby.qname]!=="textContainer")if(Qe.qname!==r.byName.fontSize.qname||Qe.qname in se.styleAttrs||se.kind!=="span"||se.styleAttrs[r.byName.ruby.qname]!=="text")Qe.inherit&&Qe.qname in Te.styleAttrs&&!(Qe.qname in se.styleAttrs)&&(se.styleAttrs[Qe.qname]=Te.styleAttrs[Qe.qname]);else{var Ht=Te.styleAttrs[r.byName.fontSize.qname];Te.styleAttrs[r.byName.ruby.qname]==="textContainer"?se.styleAttrs[Qe.qname]=Ht:se.styleAttrs[Qe.qname]=new u.ComputedLength(.5*Ht.rw,.5*Ht.rh)}else{var Et=Te.styleAttrs[r.byName.fontSize.qname];se.styleAttrs[Qe.qname]=new u.ComputedLength(.5*Et.rw,.5*Et.rh)}}for(var zt=0;zt<r.all.length;zt++){var Rt=r.all[zt];if(!(Rt.qname in se.styleAttrs)&&!(Rt.qname===r.byName.position.qname&&r.byName.origin.qname in se.styleAttrs||Rt.qname===r.byName.origin.qname&&r.byName.position.qname in se.styleAttrs)){var Xt=_.head.styling.initials[Rt.qname]||Rt.initial;if(Xt!==null&&(se.kind==="region"||Rt.inherit===!1&&Xt!==null)){var tn=Rt.parse(Xt);tn!==null?(se.styleAttrs[Rt.qname]=tn,ve[Rt.qname]=!0):v(Be,"Invalid initial value for '"+Rt.qname+"' on element '"+se.kind)}}}for(var cn=0;cn<r.all.length;cn++){var Ne=r.all[cn];if(Ne.qname in ve&&Ne.compute!==null){var Ce=Ne.compute(_,Te,se,se.styleAttrs[Ne.qname],De);Ce!==null?se.styleAttrs[Ne.qname]=Ce:(se.styleAttrs[Ne.qname]=Ne.compute(_,Te,se,Ne.parse(Ne.initial),De),v(Be,"Style '"+Ne.qname+"' on element '"+se.kind+"' cannot be computed"))}}if(se.styleAttrs[r.byName.display.qname]==="none")return null;var lt=null;Te===null?lt=oe===null?[]:[oe]:"contents"in Re&&(lt=Re.contents);for(var $=0;lt!==null&&$<lt.length;$++){var Y=m(_,x,te,oe,se,re,lt[$],Be,De);Y!==null&&se.contents.push(Y.element)}for(var A in se.styleAttrs)if(se.styleAttrs.hasOwnProperty(A)){var I=!1;if(se.kind==="span"){var J=se.styleAttrs[r.byName.ruby.qname];(I=(J==="container"||J==="textContainer"||J==="baseContainer")&&p.indexOf(A)!==-1)||(I=J!=="container"&&A===r.byName.rubyAlign.qname),I||(I=!(J==="textContainer"||J==="text")&&A===r.byName.rubyPosition.qname)}if(!I){var G=r.byQName[A];"applies"in G&&(I=G.applies.indexOf(se.kind)===-1)}I&&delete se.styleAttrs[A]}var Ae=se.styleAttrs[r.byName.ruby.qname];if(se.kind==="p"||se.kind==="span"&&(Ae==="textContainer"||Ae==="text")){var Ye=[];g(se,Ye),(function(ze){for(var je,Oe=0;Oe<ze.length;)if((je=ze[Oe]).kind!=="br"&&je.space!=="preserve"){var Ve=je.text.replace(/[\t\r\n ]+/g," ");/^[ ]/.test(Ve)&&(Oe===0||(tt=ze[Oe-1]).kind==="br"||/[\r\n\t ]$/.test(tt.text))&&(Ve=Ve.substring(1)),je.text=Ve,Ve.length===0?ze.splice(Oe,1):Oe++}else Oe++;var tt,Je;for(Oe=0;Oe<ze.length;Oe++)(je=ze[Oe]).kind!=="br"&&je.space!=="preserve"?/[ ]$/.test(je.text)&&(Oe===ze.length-1||(Je=ze[Oe+1]).kind==="br"||Je.space==="preserve"&&/^[\r\n]/.test(Je.text))&&(je.text=je.text.slice(0,-1)):Oe++})(Ye),T(se)}return se.kind==="div"&&r.byName.backgroundImage.qname in se.styleAttrs||se.kind==="br"||se.kind==="image"||"contents"in se&&se.contents.length>0||se.kind==="span"&&se.text!==null||se.kind==="region"&&se.styleAttrs[r.byName.showBackground.qname]==="always"?{region_id:re,element:se}:null}function g(_,x){if("contents"in _)for(var te=0;te<_.contents.length;te++){var oe=_.contents[te],Te=oe.styleAttrs[r.byName.ruby.qname];(oe.kind!=="span"||Te!=="textContainer"&&Te!=="text")&&("contents"in oe?g(oe,x):(oe.kind==="span"&&oe.text.length!==0||oe.kind==="br")&&x.push(oe))}}function T(_){if(_.kind==="br")return!1;if("text"in _)return _.text.length===0;if("contents"in _){for(var x=_.contents.length;x--;)T(_.contents[x])&&_.contents.splice(x,1);return _.contents.length===0}}function f(_){this.contents=[],this.aspectRatio=_.aspectRatio,this.lang=_.lang}function c(_){for(var x in this.kind=_.kind||"region",this.lang=_.lang,_.id&&(this.id=_.id),this.styleAttrs={},_.styleAttrs)_.styleAttrs.hasOwnProperty(x)&&(this.styleAttrs[x]=_.styleAttrs[x]);"src"in _&&(this.src=_.src),"type"in _&&(this.type=_.type),"text"in _?this.text=_.text:(this.kind==="region"||"contents"in _)&&(this.contents=[]),"space"in _&&(this.space=_.space)}function v(_,x){if(_&&_.error&&_.error(x))throw x}})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscStyles>"u"?t(1219):imscStyles,typeof imscUtils>"u"?t(6404):imscUtils)},7640:function(h,e,t){e.generateISD=t(8905).generateISD,e.fromXML=t(6739).fromXML,e.renderHTML=t(1612).render},977:function(h,e){(function(t){t.ns_tt="http://www.w3.org/ns/ttml",t.ns_tts="http://www.w3.org/ns/ttml#styling",t.ns_ttp="http://www.w3.org/ns/ttml#parameter",t.ns_xml="http://www.w3.org/XML/1998/namespace",t.ns_itts="http://www.w3.org/ns/ttml/profile/imsc1#styling",t.ns_ittp="http://www.w3.org/ns/ttml/profile/imsc1#parameter",t.ns_smpte="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt",t.ns_ebutts="urn:ebu:tt:style"})(e)},1219:function(h,e,t){(function(o,n,r){function u(g,T,f,c,v,_,x,te){this.name=T,this.ns=g,this.qname=g+" "+T,this.inherit=v,this.animatable=_,this.initial=f,this.applies=c,this.parse=x,this.compute=te}for(var p in o.all=[new u(n.ns_tts,"backgroundColor","transparent",["body","div","p","region","span"],!1,!0,r.parseColor,null),new u(n.ns_tts,"color","white",["span"],!0,!0,r.parseColor,null),new u(n.ns_tts,"direction","ltr",["p","span"],!0,!0,(function(g){return g}),null),new u(n.ns_tts,"display","auto",["body","div","p","region","span"],!1,!0,(function(g){return g}),null),new u(n.ns_tts,"displayAlign","before",["region"],!1,!0,(function(g){return g}),null),new u(n.ns_tts,"extent","auto",["tt","region"],!1,!0,(function(g){if(g==="auto")return g;var T=g.split(" ");if(T.length!==2)return null;var f=r.parseLength(T[0]),c=r.parseLength(T[1]);return c&&f?{h:c,w:f}:null}),(function(g,T,f,c,v){var _,x;if(c==="auto")_=new r.ComputedLength(0,1);else if((_=r.toComputedLength(c.h.value,c.h.unit,null,g.dimensions.h,null,g.pxLength.h))===null)return null;if(c==="auto")x=new r.ComputedLength(1,0);else if((x=r.toComputedLength(c.w.value,c.w.unit,null,g.dimensions.w,null,g.pxLength.w))===null)return null;return{h:_,w:x}})),new u(n.ns_tts,"fontFamily","default",["span","p"],!0,!0,(function(g){for(var T=g.split(","),f=[],c=0;c<T.length;c++)T[c]=T[c].trim(),T[c].charAt(0)!=="'"&&T[c].charAt(0)!=='"'&&T[c]==="default"?f.push("monospaceSerif"):f.push(T[c]);return f}),null),new u(n.ns_tts,"shear","0%",["p"],!0,!0,r.parseLength,(function(g,T,f,c){return c.unit!=="%"?null:Math.abs(c.value)>100?100*Math.sign(c.value):c.value})),new u(n.ns_tts,"fontSize","1c",["span","p"],!0,!0,r.parseLength,(function(g,T,f,c,v){return r.toComputedLength(c.value,c.unit,T!==null?T.styleAttrs[o.byName.fontSize.qname]:g.cellLength.h,T!==null?T.styleAttrs[o.byName.fontSize.qname]:g.cellLength.h,g.cellLength.h,g.pxLength.h)})),new u(n.ns_tts,"fontStyle","normal",["span","p"],!0,!0,(function(g){return g}),null),new u(n.ns_tts,"fontWeight","normal",["span","p"],!0,!0,(function(g){return g}),null),new u(n.ns_tts,"lineHeight","normal",["p"],!0,!0,(function(g){return g==="normal"?g:r.parseLength(g)}),(function(g,T,f,c,v){var _;if(c==="normal")_=c;else if((_=r.toComputedLength(c.value,c.unit,f.styleAttrs[o.byName.fontSize.qname],f.styleAttrs[o.byName.fontSize.qname],g.cellLength.h,g.pxLength.h))===null)return null;return _})),new u(n.ns_tts,"opacity",1,["region"],!1,!0,parseFloat,null),new u(n.ns_tts,"origin","auto",["region"],!1,!0,(function(g){if(g==="auto")return g;var T=g.split(" ");if(T.length!==2)return null;var f=r.parseLength(T[0]),c=r.parseLength(T[1]);return c&&f?{h:c,w:f}:null}),(function(g,T,f,c,v){var _,x;if(c==="auto")_=new r.ComputedLength(0,0);else if((_=r.toComputedLength(c.h.value,c.h.unit,null,g.dimensions.h,null,g.pxLength.h))===null)return null;if(c==="auto")x=new r.ComputedLength(0,0);else if((x=r.toComputedLength(c.w.value,c.w.unit,null,g.dimensions.w,null,g.pxLength.w))===null)return null;return{h:_,w:x}})),new u(n.ns_tts,"overflow","hidden",["region"],!1,!0,(function(g){return g}),null),new u(n.ns_tts,"padding","0px",["region"],!1,!0,(function(g){var T=g.split(" ");if(T.length>4)return null;for(var f=[],c=0;c<T.length;c++){var v=r.parseLength(T[c]);if(!v)return null;f.push(v)}return f}),(function(g,T,f,c,v){var _;if(c.length===1)_=[c[0],c[0],c[0],c[0]];else if(c.length===2)_=[c[0],c[1],c[0],c[1]];else if(c.length===3)_=[c[0],c[1],c[2],c[1]];else{if(c.length!==4)return null;_=[c[0],c[1],c[2],c[3]]}var x=f.styleAttrs[o.byName.writingMode.qname];if(x==="lrtb"||x==="lr")_=[_[0],_[3],_[2],_[1]];else if(x==="rltb"||x==="rl")_=[_[0],_[1],_[2],_[3]];else if(x==="tblr")_=[_[3],_[0],_[1],_[2]];else{if(x!=="tbrl"&&x!=="tb")return null;_=[_[3],_[2],_[1],_[0]]}for(var te=[],oe=0;oe<_.length;oe++)if(_[oe].value===0)te[oe]=new r.ComputedLength(0,0);else if(te[oe]=r.toComputedLength(_[oe].value,_[oe].unit,f.styleAttrs[o.byName.fontSize.qname],oe===0||oe===2?f.styleAttrs[o.byName.extent.qname].h:f.styleAttrs[o.byName.extent.qname].w,oe===0||oe===2?g.cellLength.h:g.cellLength.w,oe===0||oe===2?g.pxLength.h:g.pxLength.w),te[oe]===null)return null;return te})),new u(n.ns_tts,"position","top left",["region"],!1,!0,(function(g){return r.parsePosition(g)}),(function(g,T,f,c){var v,_;return(v=r.toComputedLength(c.v.offset.value,c.v.offset.unit,null,new r.ComputedLength(-f.styleAttrs[o.byName.extent.qname].h.rw,g.dimensions.h.rh-f.styleAttrs[o.byName.extent.qname].h.rh),null,g.pxLength.h))===null?null:(c.v.edge==="bottom"&&(v=new r.ComputedLength(-v.rw-f.styleAttrs[o.byName.extent.qname].h.rw,g.dimensions.h.rh-v.rh-f.styleAttrs[o.byName.extent.qname].h.rh)),_=r.toComputedLength(c.h.offset.value,c.h.offset.unit,null,new r.ComputedLength(g.dimensions.w.rw-f.styleAttrs[o.byName.extent.qname].w.rw,-f.styleAttrs[o.byName.extent.qname].w.rh),null,g.pxLength.w),v===null?null:(c.h.edge==="right"&&(_=new r.ComputedLength(g.dimensions.w.rw-_.rw-f.styleAttrs[o.byName.extent.qname].w.rw,-_.rh-f.styleAttrs[o.byName.extent.qname].w.rh)),{h:v,w:_}))})),new u(n.ns_tts,"ruby","none",["span"],!1,!0,(function(g){return g}),null),new u(n.ns_tts,"rubyAlign","center",["span"],!0,!0,(function(g){return g!=="center"&&g!=="spaceAround"?null:g}),null),new u(n.ns_tts,"rubyPosition","outside",["span"],!0,!0,(function(g){return g}),null),new u(n.ns_tts,"rubyReserve","none",["p"],!0,!0,(function(g){var T=g.split(" "),f=[null,null];if(T.length===0||T.length>2||T[0]!=="none"&&T[0]!=="both"&&T[0]!=="after"&&T[0]!=="before"&&T[0]!=="outside")return null;if(f[0]=T[0],T.length===2&&T[0]!=="none"){var c=r.parseLength(T[1]);if(!c)return null;f[1]=c}return f}),(function(g,T,f,c,v){if(c[0]==="none")return c;var _;return(_=c[1]===null?new r.ComputedLength(.5*f.styleAttrs[o.byName.fontSize.qname].rw,.5*f.styleAttrs[o.byName.fontSize.qname].rh):r.toComputedLength(c[1].value,c[1].unit,f.styleAttrs[o.byName.fontSize.qname],f.styleAttrs[o.byName.fontSize.qname],g.cellLength.h,g.pxLength.h))===null?null:[c[0],_]})),new u(n.ns_tts,"showBackground","always",["region"],!1,!0,(function(g){return g}),null),new u(n.ns_tts,"textAlign","start",["p"],!0,!0,(function(g){return g}),(function(g,T,f,c,v){return c==="left"?"start":c==="right"?"end":c})),new u(n.ns_tts,"textCombine","none",["span"],!0,!0,(function(g){return g==="none"||g==="all"?g:null}),null),new u(n.ns_tts,"textDecoration","none",["span"],!0,!0,(function(g){return g.split(" ")}),null),new u(n.ns_tts,"textEmphasis","none",["span"],!0,!0,(function(g){for(var T=g.split(" "),f={style:null,symbol:null,color:null,position:null},c=0;c<T.length;c++)if(T[c]==="none"||T[c]==="auto")f.style=T[c];else if(T[c]==="filled"||T[c]==="open")f.style=T[c];else if(T[c]==="circle"||T[c]==="dot"||T[c]==="sesame")f.symbol=T[c];else if(T[c]==="current")f.color=T[c];else if(T[c]==="outside"||T[c]==="before"||T[c]==="after")f.position=T[c];else if(f.color=r.parseColor(T[c]),f.color===null)return null;return f.style==null&&f.symbol==null?f.style="auto":(f.symbol=f.symbol||"circle",f.style=f.style||"filled"),f.position=f.position||"outside",f.color=f.color||"current",f}),null),new u(n.ns_tts,"textOutline","none",["span"],!0,!0,(function(g){if(g==="none")return g;var T={},f=g.split(" ");if(f.length===0||f.length>2)return null;var c=r.parseColor(f[0]);if(T.color=c,c!==null&&f.shift(),f.length!==1)return null;var v=r.parseLength(f[0]);return v?(T.thickness=v,T):null}),(function(g,T,f,c,v){if(c==="none")return c;var _={};return c.color===null?_.color=f.styleAttrs[o.byName.color.qname]:_.color=c.color,_.thickness=r.toComputedLength(c.thickness.value,c.thickness.unit,f.styleAttrs[o.byName.fontSize.qname],f.styleAttrs[o.byName.fontSize.qname],g.cellLength.h,g.pxLength.h),_.thickness===null?null:_})),new u(n.ns_tts,"textShadow","none",["span"],!0,!0,r.parseTextShadow,(function(g,T,f,c){if(c==="none")return c;for(var v=[],_=0;_<c.length;_++){var x={};if(x.x_off=r.toComputedLength(c[_][0].value,c[_][0].unit,null,f.styleAttrs[o.byName.fontSize.qname],null,g.pxLength.w),x.x_off===null||(x.y_off=r.toComputedLength(c[_][1].value,c[_][1].unit,null,f.styleAttrs[o.byName.fontSize.qname],null,g.pxLength.h),x.y_off===null))return null;if(c[_][2]===null)x.b_radius=0;else if(x.b_radius=r.toComputedLength(c[_][2].value,c[_][2].unit,null,f.styleAttrs[o.byName.fontSize.qname],null,g.pxLength.h),x.b_radius===null)return null;c[_][3]===null?x.color=f.styleAttrs[o.byName.color.qname]:x.color=c[_][3],v.push(x)}return v})),new u(n.ns_tts,"unicodeBidi","normal",["span","p"],!1,!0,(function(g){return g}),null),new u(n.ns_tts,"visibility","visible",["body","div","p","region","span"],!0,!0,(function(g){return g}),null),new u(n.ns_tts,"wrapOption","wrap",["span"],!0,!0,(function(g){return g}),null),new u(n.ns_tts,"writingMode","lrtb",["region"],!1,!0,(function(g){return g}),null),new u(n.ns_tts,"zIndex","auto",["region"],!1,!0,(function(g){var T;return g==="auto"?T=g:(T=parseInt(g),isNaN(T)&&(T=null)),T}),null),new u(n.ns_ebutts,"linePadding","0c",["p"],!0,!1,r.parseLength,(function(g,T,f,c,v){return r.toComputedLength(c.value,c.unit,null,null,g.cellLength.w,null)})),new u(n.ns_ebutts,"multiRowAlign","auto",["p"],!0,!1,(function(g){return g}),null),new u(n.ns_smpte,"backgroundImage",null,["div"],!1,!1,(function(g){return g}),null),new u(n.ns_itts,"forcedDisplay","false",["body","div","p","region","span"],!0,!0,(function(g){return g==="true"}),null),new u(n.ns_itts,"fillLineGap","false",["p"],!0,!0,(function(g){return g==="true"}),null)],o.byQName={},o.all)o.byQName[o.all[p].qname]=o.all[p];for(var m in o.byName={},o.all)o.byName[o.all[m].name]=o.all[m]})(e,typeof imscNames>"u"?t(977):imscNames,typeof imscUtils>"u"?t(6404):imscUtils)},6404:function(h,e){(function(t){var o=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})?/,n=/rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,r=/rgba\(\s*(\d+),\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/,u={transparent:[0,0,0,0],black:[0,0,0,255],silver:[192,192,192,255],gray:[128,128,128,255],white:[255,255,255,255],maroon:[128,0,0,255],red:[255,0,0,255],purple:[128,0,128,255],fuchsia:[255,0,255,255],magenta:[255,0,255,255],green:[0,128,0,255],lime:[0,255,0,255],olive:[128,128,0,255],yellow:[255,255,0,255],navy:[0,0,128,255],blue:[0,0,255,255],teal:[0,128,128,255],aqua:[0,255,255,255],cyan:[0,255,255,255]};t.parseColor=function(m){var g,T=null,f=u[m.toLowerCase()];return f!==void 0?T=f:(g=o.exec(m))!==null?T=[parseInt(g[1],16),parseInt(g[2],16),parseInt(g[3],16),g[4]!==void 0?parseInt(g[4],16):255]:(g=n.exec(m))!==null?T=[parseInt(g[1]),parseInt(g[2]),parseInt(g[3]),255]:(g=r.exec(m))!==null&&(T=[parseInt(g[1]),parseInt(g[2]),parseInt(g[3]),parseInt(g[4])]),T};var p=/^((?:\+|\-)?\d*(?:\.\d+)?)(px|em|c|%|rh|rw)$/;t.parseLength=function(m){var g,T=null;return(g=p.exec(m))!==null&&(T={value:parseFloat(g[1]),unit:g[2]}),T},t.parseTextShadow=function(m){for(var g=m.match(/([^\(,\)]|\([^\)]+\))+/g),T=[],f=0;f<g.length;f++){var c=g[f].split(" ");if(c.length===1&&c[0]==="none")return"none";if(c.length>1&&c.length<5){var v=[null,null,null,null],_=t.parseLength(c.shift());if(_===null||(v[0]=_,(_=t.parseLength(c.shift()))===null))return null;if(v[1]=_,c.length===0){T.push(v);continue}if((_=t.parseLength(c[0]))!==null&&(v[2]=_,c.shift()),c.length===0){T.push(v);continue}var x=t.parseColor(c[0]);if(x===null)return null;v[3]=x,T.push(v)}}return T},t.parsePosition=function(m){var g=m.split(" "),T=function(oe){return oe==="center"||oe==="left"||oe==="top"||oe==="bottom"||oe==="right"};if(g.length>4)return null;for(var f=0;f<g.length;f++)if(!T(g[f])){var c=t.parseLength(g[f]);if(c===null)return null;g[f]=c}for(var v={h:{edge:"left",offset:{value:50,unit:"%"}},v:{edge:"top",offset:{value:50,unit:"%"}}},_=0;_<g.length;){var x=g[_++];if(T(x)){var te={value:0,unit:"%"};g.length!==2&&_<g.length&&!T(g[_])&&(te=g[_++]),x==="right"?(v.h.edge=x,v.h.offset=te):x==="bottom"?(v.v.edge=x,v.v.offset=te):x==="left"?v.h.offset=te:x==="top"&&(v.v.offset=te)}else{if(g.length!==1&&g.length!==2)return null;_===1?v.h.offset=x:v.v.offset=x}}return v},t.ComputedLength=function(m,g){this.rw=m,this.rh=g},t.ComputedLength.prototype.toUsedLength=function(m,g){return m*this.rw+g*this.rh},t.ComputedLength.prototype.isZero=function(){return this.rw===0&&this.rh===0},t.toComputedLength=function(m,g,T,f,c,v){return g==="%"&&f?new t.ComputedLength(f.rw*m/100,f.rh*m/100):g==="em"&&T?new t.ComputedLength(T.rw*m,T.rh*m):g==="c"&&c?new t.ComputedLength(m*c.rw,m*c.rh):g==="px"&&v?new t.ComputedLength(m*v.rw,m*v.rh):g==="rh"?new t.ComputedLength(0,m/100):g==="rw"?new t.ComputedLength(m/100,0):null}})(e)},7523:function(h){typeof Object.create=="function"?h.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:h.exports=function(e,t){if(t){e.super_=t;var o=function(){};o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e}}},3282:function(h){function e(n){if(typeof n!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(n))}function t(n,r){for(var u,p="",m=0,g=-1,T=0,f=0;f<=n.length;++f){if(f<n.length)u=n.charCodeAt(f);else{if(u===47)break;u=47}if(u===47){if(!(g===f-1||T===1))if(g!==f-1&&T===2){if(p.length<2||m!==2||p.charCodeAt(p.length-1)!==46||p.charCodeAt(p.length-2)!==46){if(p.length>2){var c=p.lastIndexOf("/");if(c!==p.length-1){c===-1?(p="",m=0):m=(p=p.slice(0,c)).length-1-p.lastIndexOf("/"),g=f,T=0;continue}}else if(p.length===2||p.length===1){p="",m=0,g=f,T=0;continue}}r&&(p.length>0?p+="/..":p="..",m=2)}else p.length>0?p+="/"+n.slice(g+1,f):p=n.slice(g+1,f),m=f-g-1;g=f,T=0}else u===46&&T!==-1?++T:T=-1}return p}var o={resolve:function(){for(var n,r="",u=!1,p=arguments.length-1;p>=-1&&!u;p--){var m;p>=0?m=arguments[p]:(n===void 0&&(n=process.cwd()),m=n),e(m),m.length!==0&&(r=m+"/"+r,u=m.charCodeAt(0)===47)}return r=t(r,!u),u?r.length>0?"/"+r:"/":r.length>0?r:"."},normalize:function(n){if(e(n),n.length===0)return".";var r=n.charCodeAt(0)===47,u=n.charCodeAt(n.length-1)===47;return(n=t(n,!r)).length!==0||r||(n="."),n.length>0&&u&&(n+="/"),r?"/"+n:n},isAbsolute:function(n){return e(n),n.length>0&&n.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var n,r=0;r<arguments.length;++r){var u=arguments[r];e(u),u.length>0&&(n===void 0?n=u:n+="/"+u)}return n===void 0?".":o.normalize(n)},relative:function(n,r){if(e(n),e(r),n===r||(n=o.resolve(n))===(r=o.resolve(r)))return"";for(var u=1;u<n.length&&n.charCodeAt(u)===47;++u);for(var p=n.length,m=p-u,g=1;g<r.length&&r.charCodeAt(g)===47;++g);for(var T=r.length-g,f=m<T?m:T,c=-1,v=0;v<=f;++v){if(v===f){if(T>f){if(r.charCodeAt(g+v)===47)return r.slice(g+v+1);if(v===0)return r.slice(g+v)}else m>f&&(n.charCodeAt(u+v)===47?c=v:v===0&&(c=0));break}var _=n.charCodeAt(u+v);if(_!==r.charCodeAt(g+v))break;_===47&&(c=v)}var x="";for(v=u+c+1;v<=p;++v)v!==p&&n.charCodeAt(v)!==47||(x.length===0?x+="..":x+="/..");return x.length>0?x+r.slice(g+c):(g+=c,r.charCodeAt(g)===47&&++g,r.slice(g))},_makeLong:function(n){return n},dirname:function(n){if(e(n),n.length===0)return".";for(var r=n.charCodeAt(0),u=r===47,p=-1,m=!0,g=n.length-1;g>=1;--g)if((r=n.charCodeAt(g))===47){if(!m){p=g;break}}else m=!1;return p===-1?u?"/":".":u&&p===1?"//":n.slice(0,p)},basename:function(n,r){if(r!==void 0&&typeof r!="string")throw new TypeError('"ext" argument must be a string');e(n);var u,p=0,m=-1,g=!0;if(r!==void 0&&r.length>0&&r.length<=n.length){if(r.length===n.length&&r===n)return"";var T=r.length-1,f=-1;for(u=n.length-1;u>=0;--u){var c=n.charCodeAt(u);if(c===47){if(!g){p=u+1;break}}else f===-1&&(g=!1,f=u+1),T>=0&&(c===r.charCodeAt(T)?--T==-1&&(m=u):(T=-1,m=f))}return p===m?m=f:m===-1&&(m=n.length),n.slice(p,m)}for(u=n.length-1;u>=0;--u)if(n.charCodeAt(u)===47){if(!g){p=u+1;break}}else m===-1&&(g=!1,m=u+1);return m===-1?"":n.slice(p,m)},extname:function(n){e(n);for(var r=-1,u=0,p=-1,m=!0,g=0,T=n.length-1;T>=0;--T){var f=n.charCodeAt(T);if(f!==47)p===-1&&(m=!1,p=T+1),f===46?r===-1?r=T:g!==1&&(g=1):r!==-1&&(g=-1);else if(!m){u=T+1;break}}return r===-1||p===-1||g===0||g===1&&r===p-1&&r===u+1?"":n.slice(r,p)},format:function(n){if(n===null||typeof n!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof n);return(function(r,u){var p=u.dir||u.root,m=u.base||(u.name||"")+(u.ext||"");return p?p===u.root?p+m:p+"/"+m:m})(0,n)},parse:function(n){e(n);var r={root:"",dir:"",base:"",ext:"",name:""};if(n.length===0)return r;var u,p=n.charCodeAt(0),m=p===47;m?(r.root="/",u=1):u=0;for(var g=-1,T=0,f=-1,c=!0,v=n.length-1,_=0;v>=u;--v)if((p=n.charCodeAt(v))!==47)f===-1&&(c=!1,f=v+1),p===46?g===-1?g=v:_!==1&&(_=1):g!==-1&&(_=-1);else if(!c){T=v+1;break}return g===-1||f===-1||_===0||_===1&&g===f-1&&g===T+1?f!==-1&&(r.base=r.name=T===0&&m?n.slice(1,f):n.slice(T,f)):(T===0&&m?(r.name=n.slice(1,g),r.base=n.slice(1,f)):(r.name=n.slice(T,g),r.base=n.slice(T,f)),r.ext=n.slice(g,f)),T>0?r.dir=n.slice(0,T-1):m&&(r.dir="/"),r},sep:"/",delimiter:":",win32:null,posix:null};o.posix=o,h.exports=o},3515:function(h,e,t){h.exports=n;var o=t(9826).EventEmitter;function n(){o.call(this)}t(7523)(n,o),n.Readable=t(2762),n.Writable=t(3726),n.Duplex=t(884),n.Transform=t(6756),n.PassThrough=t(1390),n.finished=t(2896),n.pipeline=t(8460),n.Stream=n,n.prototype.pipe=function(r,u){var p=this;function m(x){r.writable&&r.write(x)===!1&&p.pause&&p.pause()}function g(){p.readable&&p.resume&&p.resume()}p.on("data",m),r.on("drain",g),r._isStdio||u&&u.end===!1||(p.on("end",f),p.on("close",c));var T=!1;function f(){T||(T=!0,r.end())}function c(){T||(T=!0,typeof r.destroy=="function"&&r.destroy())}function v(x){if(_(),o.listenerCount(this,"error")===0)throw x}function _(){p.removeListener("data",m),r.removeListener("drain",g),p.removeListener("end",f),p.removeListener("close",c),p.removeListener("error",v),r.removeListener("error",v),p.removeListener("end",_),p.removeListener("close",_),r.removeListener("close",_)}return p.on("error",v),r.on("error",v),p.on("end",_),p.on("close",_),r.on("close",_),r.emit("pipe",p),r}},1602:function(h){var e={};function t(n,r,u){u||(u=Error);var p=(function(m){var g,T;function f(c,v,_){return m.call(this,(function(x,te,oe){return typeof r=="string"?r:r(x,te,oe)})(c,v,_))||this}return T=m,(g=f).prototype=Object.create(T.prototype),g.prototype.constructor=g,g.__proto__=T,f})(u);p.prototype.name=u.name,p.prototype.code=n,e[n]=p}function o(n,r){if(Array.isArray(n)){var u=n.length;return n=n.map((function(p){return String(p)})),u>2?"one of ".concat(r," ").concat(n.slice(0,u-1).join(", "),", or ")+n[u-1]:u===2?"one of ".concat(r," ").concat(n[0]," or ").concat(n[1]):"of ".concat(r," ").concat(n[0])}return"of ".concat(r," ").concat(String(n))}t("ERR_INVALID_OPT_VALUE",(function(n,r){return'The value "'+r+'" is invalid for option "'+n+'"'}),TypeError),t("ERR_INVALID_ARG_TYPE",(function(n,r,u){var p,m,g,T,f;if(typeof r=="string"&&(m="not ",r.substr(0,4)===m)?(p="must not be",r=r.replace(/^not /,"")):p="must be",(function(v,_,x){return(x===void 0||x>v.length)&&(x=v.length),v.substring(x-9,x)===_})(n," argument"))g="The ".concat(n," ").concat(p," ").concat(o(r,"type"));else{var c=(typeof f!="number"&&(f=0),f+1>(T=n).length||T.indexOf(".",f)===-1?"argument":"property");g='The "'.concat(n,'" ').concat(c," ").concat(p," ").concat(o(r,"type"))}return g+". Received type ".concat(typeof u)}),TypeError),t("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),t("ERR_METHOD_NOT_IMPLEMENTED",(function(n){return"The "+n+" method is not implemented"})),t("ERR_STREAM_PREMATURE_CLOSE","Premature close"),t("ERR_STREAM_DESTROYED",(function(n){return"Cannot call "+n+" after a stream was destroyed"})),t("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),t("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),t("ERR_STREAM_WRITE_AFTER_END","write after end"),t("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),t("ERR_UNKNOWN_ENCODING",(function(n){return"Unknown encoding: "+n}),TypeError),t("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),h.exports.codes=e},884:function(h,e,t){var o=Object.keys||function(c){var v=[];for(var _ in c)v.push(_);return v};h.exports=g;var n=t(2762),r=t(3726);t(7523)(g,n);for(var u=o(r.prototype),p=0;p<u.length;p++){var m=u[p];g.prototype[m]||(g.prototype[m]=r.prototype[m])}function g(c){if(!(this instanceof g))return new g(c);n.call(this,c),r.call(this,c),this.allowHalfOpen=!0,c&&(c.readable===!1&&(this.readable=!1),c.writable===!1&&(this.writable=!1),c.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",T)))}function T(){this._writableState.ended||process.nextTick(f,this)}function f(c){c.end()}Object.defineProperty(g.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(g.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(g.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(g.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._writableState!==void 0&&this._readableState.destroyed&&this._writableState.destroyed},set:function(c){this._readableState!==void 0&&this._writableState!==void 0&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}})},1390:function(h,e,t){h.exports=n;var o=t(6756);function n(r){if(!(this instanceof n))return new n(r);o.call(this,r)}t(7523)(n,o),n.prototype._transform=function(r,u,p){p(null,r)}},2762:function(h,e,t){var o;h.exports=se,se.ReadableState=re,t(9826).EventEmitter;var n,r=function(Ne,Ce){return Ne.listeners(Ce).length},u=t(2611),p=t(44).Buffer,m=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},g=t(7199);n=g&&g.debuglog?g.debuglog("stream"):function(){};var T,f,c,v=t(3791),_=t(2410),x=t(1749).getHighWaterMark,te=t(1602).codes,oe=te.ERR_INVALID_ARG_TYPE,Te=te.ERR_STREAM_PUSH_AFTER_EOF,Se=te.ERR_METHOD_NOT_IMPLEMENTED,Re=te.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;t(7523)(se,u);var Be=_.errorOrDestroy,De=["error","close","destroy","pause","resume"];function re(Ne,Ce,lt){o=o||t(884),Ne=Ne||{},typeof lt!="boolean"&&(lt=Ce instanceof o),this.objectMode=!!Ne.objectMode,lt&&(this.objectMode=this.objectMode||!!Ne.readableObjectMode),this.highWaterMark=x(this,Ne,"readableHighWaterMark",lt),this.buffer=new v,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=Ne.emitClose!==!1,this.autoDestroy=!!Ne.autoDestroy,this.destroyed=!1,this.defaultEncoding=Ne.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,Ne.encoding&&(T||(T=t(748).StringDecoder),this.decoder=new T(Ne.encoding),this.encoding=Ne.encoding)}function se(Ne){if(o=o||t(884),!(this instanceof se))return new se(Ne);var Ce=this instanceof o;this._readableState=new re(Ne,this,Ce),this.readable=!0,Ne&&(typeof Ne.read=="function"&&(this._read=Ne.read),typeof Ne.destroy=="function"&&(this._destroy=Ne.destroy)),u.call(this)}function he(Ne,Ce,lt,$,Y){n("readableAddChunk",Ce);var A,I=Ne._readableState;if(Ce===null)I.reading=!1,(function(J,G){if(n("onEofChunk"),!G.ended){if(G.decoder){var Ae=G.decoder.end();Ae&&Ae.length&&(G.buffer.push(Ae),G.length+=G.objectMode?1:Ae.length)}G.ended=!0,G.sync?ye(J):(G.needReadable=!1,G.emittedReadable||(G.emittedReadable=!0,Qe(J)))}})(Ne,I);else if(Y||(A=(function(J,G){var Ae,Ye;return Ye=G,p.isBuffer(Ye)||Ye instanceof m||typeof G=="string"||G===void 0||J.objectMode||(Ae=new oe("chunk",["string","Buffer","Uint8Array"],G)),Ae})(I,Ce)),A)Be(Ne,A);else if(I.objectMode||Ce&&Ce.length>0)if(typeof Ce=="string"||I.objectMode||Object.getPrototypeOf(Ce)===p.prototype||(Ce=(function(J){return p.from(J)})(Ce)),$)I.endEmitted?Be(Ne,new Re):ve(Ne,I,Ce,!0);else if(I.ended)Be(Ne,new Te);else{if(I.destroyed)return!1;I.reading=!1,I.decoder&&!lt?(Ce=I.decoder.write(Ce),I.objectMode||Ce.length!==0?ve(Ne,I,Ce,!1):xe(Ne,I)):ve(Ne,I,Ce,!1)}else $||(I.reading=!1,xe(Ne,I));return!I.ended&&(I.length<I.highWaterMark||I.length===0)}function ve(Ne,Ce,lt,$){Ce.flowing&&Ce.length===0&&!Ce.sync?(Ce.awaitDrain=0,Ne.emit("data",lt)):(Ce.length+=Ce.objectMode?1:lt.length,$?Ce.buffer.unshift(lt):Ce.buffer.push(lt),Ce.needReadable&&ye(Ne)),xe(Ne,Ce)}Object.defineProperty(se.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState!==void 0&&this._readableState.destroyed},set:function(Ne){this._readableState&&(this._readableState.destroyed=Ne)}}),se.prototype.destroy=_.destroy,se.prototype._undestroy=_.undestroy,se.prototype._destroy=function(Ne,Ce){Ce(Ne)},se.prototype.push=function(Ne,Ce){var lt,$=this._readableState;return $.objectMode?lt=!0:typeof Ne=="string"&&((Ce=Ce||$.defaultEncoding)!==$.encoding&&(Ne=p.from(Ne,Ce),Ce=""),lt=!0),he(this,Ne,Ce,!1,lt)},se.prototype.unshift=function(Ne){return he(this,Ne,null,!0,!1)},se.prototype.isPaused=function(){return this._readableState.flowing===!1},se.prototype.setEncoding=function(Ne){T||(T=t(748).StringDecoder);var Ce=new T(Ne);this._readableState.decoder=Ce,this._readableState.encoding=this._readableState.decoder.encoding;for(var lt=this._readableState.buffer.head,$="";lt!==null;)$+=Ce.write(lt.data),lt=lt.next;return this._readableState.buffer.clear(),$!==""&&this._readableState.buffer.push($),this._readableState.length=$.length,this};var ke=1073741824;function Fe(Ne,Ce){return Ne<=0||Ce.length===0&&Ce.ended?0:Ce.objectMode?1:Ne!=Ne?Ce.flowing&&Ce.length?Ce.buffer.head.data.length:Ce.length:(Ne>Ce.highWaterMark&&(Ce.highWaterMark=(function(lt){return lt>=ke?lt=ke:(lt--,lt|=lt>>>1,lt|=lt>>>2,lt|=lt>>>4,lt|=lt>>>8,lt|=lt>>>16,lt++),lt})(Ne)),Ne<=Ce.length?Ne:Ce.ended?Ce.length:(Ce.needReadable=!0,0))}function ye(Ne){var Ce=Ne._readableState;n("emitReadable",Ce.needReadable,Ce.emittedReadable),Ce.needReadable=!1,Ce.emittedReadable||(n("emitReadable",Ce.flowing),Ce.emittedReadable=!0,process.nextTick(Qe,Ne))}function Qe(Ne){var Ce=Ne._readableState;n("emitReadable_",Ce.destroyed,Ce.length,Ce.ended),Ce.destroyed||!Ce.length&&!Ce.ended||(Ne.emit("readable"),Ce.emittedReadable=!1),Ce.needReadable=!Ce.flowing&&!Ce.ended&&Ce.length<=Ce.highWaterMark,zt(Ne)}function xe(Ne,Ce){Ce.readingMore||(Ce.readingMore=!0,process.nextTick(Le,Ne,Ce))}function Le(Ne,Ce){for(;!Ce.reading&&!Ce.ended&&(Ce.length<Ce.highWaterMark||Ce.flowing&&Ce.length===0);){var lt=Ce.length;if(n("maybeReadMore read 0"),Ne.read(0),lt===Ce.length)break}Ce.readingMore=!1}function ot(Ne){var Ce=Ne._readableState;Ce.readableListening=Ne.listenerCount("readable")>0,Ce.resumeScheduled&&!Ce.paused?Ce.flowing=!0:Ne.listenerCount("data")>0&&Ne.resume()}function Ht(Ne){n("readable nexttick read 0"),Ne.read(0)}function Et(Ne,Ce){n("resume",Ce.reading),Ce.reading||Ne.read(0),Ce.resumeScheduled=!1,Ne.emit("resume"),zt(Ne),Ce.flowing&&!Ce.reading&&Ne.read(0)}function zt(Ne){var Ce=Ne._readableState;for(n("flow",Ce.flowing);Ce.flowing&&Ne.read()!==null;);}function Rt(Ne,Ce){return Ce.length===0?null:(Ce.objectMode?lt=Ce.buffer.shift():!Ne||Ne>=Ce.length?(lt=Ce.decoder?Ce.buffer.join(""):Ce.buffer.length===1?Ce.buffer.first():Ce.buffer.concat(Ce.length),Ce.buffer.clear()):lt=Ce.buffer.consume(Ne,Ce.decoder),lt);var lt}function Xt(Ne){var Ce=Ne._readableState;n("endReadable",Ce.endEmitted),Ce.endEmitted||(Ce.ended=!0,process.nextTick(tn,Ce,Ne))}function tn(Ne,Ce){if(n("endReadableNT",Ne.endEmitted,Ne.length),!Ne.endEmitted&&Ne.length===0&&(Ne.endEmitted=!0,Ce.readable=!1,Ce.emit("end"),Ne.autoDestroy)){var lt=Ce._writableState;(!lt||lt.autoDestroy&&lt.finished)&&Ce.destroy()}}function cn(Ne,Ce){for(var lt=0,$=Ne.length;lt<$;lt++)if(Ne[lt]===Ce)return lt;return-1}se.prototype.read=function(Ne){n("read",Ne),Ne=parseInt(Ne,10);var Ce=this._readableState,lt=Ne;if(Ne!==0&&(Ce.emittedReadable=!1),Ne===0&&Ce.needReadable&&((Ce.highWaterMark!==0?Ce.length>=Ce.highWaterMark:Ce.length>0)||Ce.ended))return n("read: emitReadable",Ce.length,Ce.ended),Ce.length===0&&Ce.ended?Xt(this):ye(this),null;if((Ne=Fe(Ne,Ce))===0&&Ce.ended)return Ce.length===0&&Xt(this),null;var $,Y=Ce.needReadable;return n("need readable",Y),(Ce.length===0||Ce.length-Ne<Ce.highWaterMark)&&n("length less than watermark",Y=!0),Ce.ended||Ce.reading?n("reading or ended",Y=!1):Y&&(n("do read"),Ce.reading=!0,Ce.sync=!0,Ce.length===0&&(Ce.needReadable=!0),this._read(Ce.highWaterMark),Ce.sync=!1,Ce.reading||(Ne=Fe(lt,Ce))),($=Ne>0?Rt(Ne,Ce):null)===null?(Ce.needReadable=Ce.length<=Ce.highWaterMark,Ne=0):(Ce.length-=Ne,Ce.awaitDrain=0),Ce.length===0&&(Ce.ended||(Ce.needReadable=!0),lt!==Ne&&Ce.ended&&Xt(this)),$!==null&&this.emit("data",$),$},se.prototype._read=function(Ne){Be(this,new Se("_read()"))},se.prototype.pipe=function(Ne,Ce){var lt=this,$=this._readableState;switch($.pipesCount){case 0:$.pipes=Ne;break;case 1:$.pipes=[$.pipes,Ne];break;default:$.pipes.push(Ne)}$.pipesCount+=1,n("pipe count=%d opts=%j",$.pipesCount,Ce);var Y=Ce&&Ce.end===!1||Ne===process.stdout||Ne===process.stderr?je:A;function A(){n("onend"),Ne.end()}$.endEmitted?process.nextTick(Y):lt.once("end",Y),Ne.on("unpipe",(function Oe(Ve,tt){n("onunpipe"),Ve===lt&&tt&&tt.hasUnpiped===!1&&(tt.hasUnpiped=!0,n("cleanup"),Ne.removeListener("close",Ye),Ne.removeListener("finish",ze),Ne.removeListener("drain",I),Ne.removeListener("error",Ae),Ne.removeListener("unpipe",Oe),lt.removeListener("end",A),lt.removeListener("end",je),lt.removeListener("data",G),J=!0,!$.awaitDrain||Ne._writableState&&!Ne._writableState.needDrain||I())}));var I=(function(Oe){return function(){var Ve=Oe._readableState;n("pipeOnDrain",Ve.awaitDrain),Ve.awaitDrain&&Ve.awaitDrain--,Ve.awaitDrain===0&&r(Oe,"data")&&(Ve.flowing=!0,zt(Oe))}})(lt);Ne.on("drain",I);var J=!1;function G(Oe){n("ondata");var Ve=Ne.write(Oe);n("dest.write",Ve),Ve===!1&&(($.pipesCount===1&&$.pipes===Ne||$.pipesCount>1&&cn($.pipes,Ne)!==-1)&&!J&&(n("false write response, pause",$.awaitDrain),$.awaitDrain++),lt.pause())}function Ae(Oe){n("onerror",Oe),je(),Ne.removeListener("error",Ae),r(Ne,"error")===0&&Be(Ne,Oe)}function Ye(){Ne.removeListener("finish",ze),je()}function ze(){n("onfinish"),Ne.removeListener("close",Ye),je()}function je(){n("unpipe"),lt.unpipe(Ne)}return lt.on("data",G),(function(Oe,Ve,tt){if(typeof Oe.prependListener=="function")return Oe.prependListener(Ve,tt);Oe._events&&Oe._events[Ve]?Array.isArray(Oe._events[Ve])?Oe._events[Ve].unshift(tt):Oe._events[Ve]=[tt,Oe._events[Ve]]:Oe.on(Ve,tt)})(Ne,"error",Ae),Ne.once("close",Ye),Ne.once("finish",ze),Ne.emit("pipe",lt),$.flowing||(n("pipe resume"),lt.resume()),Ne},se.prototype.unpipe=function(Ne){var Ce=this._readableState,lt={hasUnpiped:!1};if(Ce.pipesCount===0)return this;if(Ce.pipesCount===1)return Ne&&Ne!==Ce.pipes||(Ne||(Ne=Ce.pipes),Ce.pipes=null,Ce.pipesCount=0,Ce.flowing=!1,Ne&&Ne.emit("unpipe",this,lt)),this;if(!Ne){var $=Ce.pipes,Y=Ce.pipesCount;Ce.pipes=null,Ce.pipesCount=0,Ce.flowing=!1;for(var A=0;A<Y;A++)$[A].emit("unpipe",this,{hasUnpiped:!1});return this}var I=cn(Ce.pipes,Ne);return I===-1||(Ce.pipes.splice(I,1),Ce.pipesCount-=1,Ce.pipesCount===1&&(Ce.pipes=Ce.pipes[0]),Ne.emit("unpipe",this,lt)),this},se.prototype.on=function(Ne,Ce){var lt=u.prototype.on.call(this,Ne,Ce),$=this._readableState;return Ne==="data"?($.readableListening=this.listenerCount("readable")>0,$.flowing!==!1&&this.resume()):Ne==="readable"&&($.endEmitted||$.readableListening||($.readableListening=$.needReadable=!0,$.flowing=!1,$.emittedReadable=!1,n("on readable",$.length,$.reading),$.length?ye(this):$.reading||process.nextTick(Ht,this))),lt},se.prototype.addListener=se.prototype.on,se.prototype.removeListener=function(Ne,Ce){var lt=u.prototype.removeListener.call(this,Ne,Ce);return Ne==="readable"&&process.nextTick(ot,this),lt},se.prototype.removeAllListeners=function(Ne){var Ce=u.prototype.removeAllListeners.apply(this,arguments);return Ne!=="readable"&&Ne!==void 0||process.nextTick(ot,this),Ce},se.prototype.resume=function(){var Ne=this._readableState;return Ne.flowing||(n("resume"),Ne.flowing=!Ne.readableListening,(function(Ce,lt){lt.resumeScheduled||(lt.resumeScheduled=!0,process.nextTick(Et,Ce,lt))})(this,Ne)),Ne.paused=!1,this},se.prototype.pause=function(){return n("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(n("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},se.prototype.wrap=function(Ne){var Ce=this,lt=this._readableState,$=!1;for(var Y in Ne.on("end",(function(){if(n("wrapped end"),lt.decoder&&!lt.ended){var I=lt.decoder.end();I&&I.length&&Ce.push(I)}Ce.push(null)})),Ne.on("data",(function(I){n("wrapped data"),lt.decoder&&(I=lt.decoder.write(I)),lt.objectMode&&I==null||(lt.objectMode||I&&I.length)&&(Ce.push(I)||($=!0,Ne.pause()))})),Ne)this[Y]===void 0&&typeof Ne[Y]=="function"&&(this[Y]=(function(I){return function(){return Ne[I].apply(Ne,arguments)}})(Y));for(var A=0;A<De.length;A++)Ne.on(De[A],this.emit.bind(this,De[A]));return this._read=function(I){n("wrapped _read",I),$&&($=!1,Ne.resume())},this},typeof Symbol=="function"&&(se.prototype[Symbol.asyncIterator]=function(){return f===void 0&&(f=t(5857)),f(this)}),Object.defineProperty(se.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(se.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(se.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(Ne){this._readableState&&(this._readableState.flowing=Ne)}}),se._fromList=Rt,Object.defineProperty(se.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),typeof Symbol=="function"&&(se.from=function(Ne,Ce){return c===void 0&&(c=t(3411)),c(se,Ne,Ce)})},6756:function(h,e,t){h.exports=T;var o=t(1602).codes,n=o.ERR_METHOD_NOT_IMPLEMENTED,r=o.ERR_MULTIPLE_CALLBACK,u=o.ERR_TRANSFORM_ALREADY_TRANSFORMING,p=o.ERR_TRANSFORM_WITH_LENGTH_0,m=t(884);function g(v,_){var x=this._transformState;x.transforming=!1;var te=x.writecb;if(te===null)return this.emit("error",new r);x.writechunk=null,x.writecb=null,_!=null&&this.push(_),te(v);var oe=this._readableState;oe.reading=!1,(oe.needReadable||oe.length<oe.highWaterMark)&&this._read(oe.highWaterMark)}function T(v){if(!(this instanceof T))return new T(v);m.call(this,v),this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,v&&(typeof v.transform=="function"&&(this._transform=v.transform),typeof v.flush=="function"&&(this._flush=v.flush)),this.on("prefinish",f)}function f(){var v=this;typeof this._flush!="function"||this._readableState.destroyed?c(this,null,null):this._flush((function(_,x){c(v,_,x)}))}function c(v,_,x){if(_)return v.emit("error",_);if(x!=null&&v.push(x),v._writableState.length)throw new p;if(v._transformState.transforming)throw new u;return v.push(null)}t(7523)(T,m),T.prototype.push=function(v,_){return this._transformState.needTransform=!1,m.prototype.push.call(this,v,_)},T.prototype._transform=function(v,_,x){x(new n("_transform()"))},T.prototype._write=function(v,_,x){var te=this._transformState;if(te.writecb=x,te.writechunk=v,te.writeencoding=_,!te.transforming){var oe=this._readableState;(te.needTransform||oe.needReadable||oe.length<oe.highWaterMark)&&this._read(oe.highWaterMark)}},T.prototype._read=function(v){var _=this._transformState;_.writechunk===null||_.transforming?_.needTransform=!0:(_.transforming=!0,this._transform(_.writechunk,_.writeencoding,_.afterTransform))},T.prototype._destroy=function(v,_){m.prototype._destroy.call(this,v,(function(x){_(x)}))}},3726:function(h,e,t){function o(xe){var Le=this;this.next=null,this.entry=null,this.finish=function(){(function(ot,Ht){var Et=ot.entry;for(ot.entry=null;Et;){var zt=Et.callback;Ht.pendingcb--,zt(void 0),Et=Et.next}Ht.corkedRequestsFree.next=ot})(Le,xe)}}var n;h.exports=se,se.WritableState=re;var r,u={deprecate:t(9e3)},p=t(2611),m=t(44).Buffer,g=(t.g!==void 0?t.g:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){},T=t(2410),f=t(1749).getHighWaterMark,c=t(1602).codes,v=c.ERR_INVALID_ARG_TYPE,_=c.ERR_METHOD_NOT_IMPLEMENTED,x=c.ERR_MULTIPLE_CALLBACK,te=c.ERR_STREAM_CANNOT_PIPE,oe=c.ERR_STREAM_DESTROYED,Te=c.ERR_STREAM_NULL_VALUES,Se=c.ERR_STREAM_WRITE_AFTER_END,Re=c.ERR_UNKNOWN_ENCODING,Be=T.errorOrDestroy;function De(){}function re(xe,Le,ot){n=n||t(884),xe=xe||{},typeof ot!="boolean"&&(ot=Le instanceof n),this.objectMode=!!xe.objectMode,ot&&(this.objectMode=this.objectMode||!!xe.writableObjectMode),this.highWaterMark=f(this,xe,"writableHighWaterMark",ot),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var Ht=xe.decodeStrings===!1;this.decodeStrings=!Ht,this.defaultEncoding=xe.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(Et){(function(zt,Rt){var Xt=zt._writableState,tn=Xt.sync,cn=Xt.writecb;if(typeof cn!="function")throw new x;if((function(Ce){Ce.writing=!1,Ce.writecb=null,Ce.length-=Ce.writelen,Ce.writelen=0})(Xt),Rt)(function(Ce,lt,$,Y,A){--lt.pendingcb,$?(process.nextTick(A,Y),process.nextTick(Qe,Ce,lt),Ce._writableState.errorEmitted=!0,Be(Ce,Y)):(A(Y),Ce._writableState.errorEmitted=!0,Be(Ce,Y),Qe(Ce,lt))})(zt,Xt,tn,Rt,cn);else{var Ne=Fe(Xt)||zt.destroyed;Ne||Xt.corked||Xt.bufferProcessing||!Xt.bufferedRequest||ke(zt,Xt),tn?process.nextTick(ve,zt,Xt,Ne,cn):ve(zt,Xt,Ne,cn)}})(Le,Et)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=xe.emitClose!==!1,this.autoDestroy=!!xe.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function se(xe){var Le=this instanceof(n=n||t(884));if(!Le&&!r.call(se,this))return new se(xe);this._writableState=new re(xe,this,Le),this.writable=!0,xe&&(typeof xe.write=="function"&&(this._write=xe.write),typeof xe.writev=="function"&&(this._writev=xe.writev),typeof xe.destroy=="function"&&(this._destroy=xe.destroy),typeof xe.final=="function"&&(this._final=xe.final)),p.call(this)}function he(xe,Le,ot,Ht,Et,zt,Rt){Le.writelen=Ht,Le.writecb=Rt,Le.writing=!0,Le.sync=!0,Le.destroyed?Le.onwrite(new oe("write")):ot?xe._writev(Et,Le.onwrite):xe._write(Et,zt,Le.onwrite),Le.sync=!1}function ve(xe,Le,ot,Ht){ot||(function(Et,zt){zt.length===0&&zt.needDrain&&(zt.needDrain=!1,Et.emit("drain"))})(xe,Le),Le.pendingcb--,Ht(),Qe(xe,Le)}function ke(xe,Le){Le.bufferProcessing=!0;var ot=Le.bufferedRequest;if(xe._writev&&ot&&ot.next){var Ht=Le.bufferedRequestCount,Et=new Array(Ht),zt=Le.corkedRequestsFree;zt.entry=ot;for(var Rt=0,Xt=!0;ot;)Et[Rt]=ot,ot.isBuf||(Xt=!1),ot=ot.next,Rt+=1;Et.allBuffers=Xt,he(xe,Le,!0,Le.length,Et,"",zt.finish),Le.pendingcb++,Le.lastBufferedRequest=null,zt.next?(Le.corkedRequestsFree=zt.next,zt.next=null):Le.corkedRequestsFree=new o(Le),Le.bufferedRequestCount=0}else{for(;ot;){var tn=ot.chunk,cn=ot.encoding,Ne=ot.callback;if(he(xe,Le,!1,Le.objectMode?1:tn.length,tn,cn,Ne),ot=ot.next,Le.bufferedRequestCount--,Le.writing)break}ot===null&&(Le.lastBufferedRequest=null)}Le.bufferedRequest=ot,Le.bufferProcessing=!1}function Fe(xe){return xe.ending&&xe.length===0&&xe.bufferedRequest===null&&!xe.finished&&!xe.writing}function ye(xe,Le){xe._final((function(ot){Le.pendingcb--,ot&&Be(xe,ot),Le.prefinished=!0,xe.emit("prefinish"),Qe(xe,Le)}))}function Qe(xe,Le){var ot=Fe(Le);if(ot&&((function(Et,zt){zt.prefinished||zt.finalCalled||(typeof Et._final!="function"||zt.destroyed?(zt.prefinished=!0,Et.emit("prefinish")):(zt.pendingcb++,zt.finalCalled=!0,process.nextTick(ye,Et,zt)))})(xe,Le),Le.pendingcb===0&&(Le.finished=!0,xe.emit("finish"),Le.autoDestroy))){var Ht=xe._readableState;(!Ht||Ht.autoDestroy&&Ht.endEmitted)&&xe.destroy()}return ot}t(7523)(se,p),re.prototype.getBuffer=function(){for(var xe=this.bufferedRequest,Le=[];xe;)Le.push(xe),xe=xe.next;return Le},(function(){try{Object.defineProperty(re.prototype,"buffer",{get:u.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})(),typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(r=Function.prototype[Symbol.hasInstance],Object.defineProperty(se,Symbol.hasInstance,{value:function(xe){return!!r.call(this,xe)||this===se&&xe&&xe._writableState instanceof re}})):r=function(xe){return xe instanceof this},se.prototype.pipe=function(){Be(this,new te)},se.prototype.write=function(xe,Le,ot){var Ht,Et=this._writableState,zt=!1,Rt=!Et.objectMode&&(Ht=xe,m.isBuffer(Ht)||Ht instanceof g);return Rt&&!m.isBuffer(xe)&&(xe=(function(Xt){return m.from(Xt)})(xe)),typeof Le=="function"&&(ot=Le,Le=null),Rt?Le="buffer":Le||(Le=Et.defaultEncoding),typeof ot!="function"&&(ot=De),Et.ending?(function(Xt,tn){var cn=new Se;Be(Xt,cn),process.nextTick(tn,cn)})(this,ot):(Rt||(function(Xt,tn,cn,Ne){var Ce;return cn===null?Ce=new Te:typeof cn=="string"||tn.objectMode||(Ce=new v("chunk",["string","Buffer"],cn)),!Ce||(Be(Xt,Ce),process.nextTick(Ne,Ce),!1)})(this,Et,xe,ot))&&(Et.pendingcb++,zt=(function(Xt,tn,cn,Ne,Ce,lt){if(!cn){var $=(function(J,G,Ae){return J.objectMode||J.decodeStrings===!1||typeof G!="string"||(G=m.from(G,Ae)),G})(tn,Ne,Ce);Ne!==$&&(cn=!0,Ce="buffer",Ne=$)}var Y=tn.objectMode?1:Ne.length;tn.length+=Y;var A=tn.length<tn.highWaterMark;if(A||(tn.needDrain=!0),tn.writing||tn.corked){var I=tn.lastBufferedRequest;tn.lastBufferedRequest={chunk:Ne,encoding:Ce,isBuf:cn,callback:lt,next:null},I?I.next=tn.lastBufferedRequest:tn.bufferedRequest=tn.lastBufferedRequest,tn.bufferedRequestCount+=1}else he(Xt,tn,!1,Y,Ne,Ce,lt);return A})(this,Et,Rt,xe,Le,ot)),zt},se.prototype.cork=function(){this._writableState.corked++},se.prototype.uncork=function(){var xe=this._writableState;xe.corked&&(xe.corked--,xe.writing||xe.corked||xe.bufferProcessing||!xe.bufferedRequest||ke(this,xe))},se.prototype.setDefaultEncoding=function(xe){if(typeof xe=="string"&&(xe=xe.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((xe+"").toLowerCase())>-1))throw new Re(xe);return this._writableState.defaultEncoding=xe,this},Object.defineProperty(se.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(se.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),se.prototype._write=function(xe,Le,ot){ot(new _("_write()"))},se.prototype._writev=null,se.prototype.end=function(xe,Le,ot){var Ht=this._writableState;return typeof xe=="function"?(ot=xe,xe=null,Le=null):typeof Le=="function"&&(ot=Le,Le=null),xe!=null&&this.write(xe,Le),Ht.corked&&(Ht.corked=1,this.uncork()),Ht.ending||(function(Et,zt,Rt){zt.ending=!0,Qe(Et,zt),Rt&&(zt.finished?process.nextTick(Rt):Et.once("finish",Rt)),zt.ended=!0,Et.writable=!1})(this,Ht,ot),this},Object.defineProperty(se.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(se.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState!==void 0&&this._writableState.destroyed},set:function(xe){this._writableState&&(this._writableState.destroyed=xe)}}),se.prototype.destroy=T.destroy,se.prototype._undestroy=T.undestroy,se.prototype._destroy=function(xe,Le){Le(xe)}},5857:function(h,e,t){var o;function n(Te,Se,Re){return(Se=(function(Be){var De=(function(re){if(typeof re!="object"||re===null)return re;var se=re[Symbol.toPrimitive];if(se!==void 0){var he=se.call(re,"string");if(typeof he!="object")return he;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(re)})(Be);return typeof De=="symbol"?De:String(De)})(Se))in Te?Object.defineProperty(Te,Se,{value:Re,enumerable:!0,configurable:!0,writable:!0}):Te[Se]=Re,Te}var r=t(2896),u=Symbol("lastResolve"),p=Symbol("lastReject"),m=Symbol("error"),g=Symbol("ended"),T=Symbol("lastPromise"),f=Symbol("handlePromise"),c=Symbol("stream");function v(Te,Se){return{value:Te,done:Se}}function _(Te){var Se=Te[u];if(Se!==null){var Re=Te[c].read();Re!==null&&(Te[T]=null,Te[u]=null,Te[p]=null,Se(v(Re,!1)))}}function x(Te){process.nextTick(_,Te)}var te=Object.getPrototypeOf((function(){})),oe=Object.setPrototypeOf((n(o={get stream(){return this[c]},next:function(){var Te=this,Se=this[m];if(Se!==null)return Promise.reject(Se);if(this[g])return Promise.resolve(v(void 0,!0));if(this[c].destroyed)return new Promise((function(re,se){process.nextTick((function(){Te[m]?se(Te[m]):re(v(void 0,!0))}))}));var Re,Be=this[T];if(Be)Re=new Promise((function(re,se){return function(he,ve){re.then((function(){se[g]?he(v(void 0,!0)):se[f](he,ve)}),ve)}})(Be,this));else{var De=this[c].read();if(De!==null)return Promise.resolve(v(De,!1));Re=new Promise(this[f])}return this[T]=Re,Re}},Symbol.asyncIterator,(function(){return this})),n(o,"return",(function(){var Te=this;return new Promise((function(Se,Re){Te[c].destroy(null,(function(Be){Be?Re(Be):Se(v(void 0,!0))}))}))})),o),te);h.exports=function(Te){var Se,Re=Object.create(oe,(n(Se={},c,{value:Te,writable:!0}),n(Se,u,{value:null,writable:!0}),n(Se,p,{value:null,writable:!0}),n(Se,m,{value:null,writable:!0}),n(Se,g,{value:Te._readableState.endEmitted,writable:!0}),n(Se,f,{value:function(Be,De){var re=Re[c].read();re?(Re[T]=null,Re[u]=null,Re[p]=null,Be(v(re,!1))):(Re[u]=Be,Re[p]=De)},writable:!0}),Se));return Re[T]=null,r(Te,(function(Be){if(Be&&Be.code!=="ERR_STREAM_PREMATURE_CLOSE"){var De=Re[p];return De!==null&&(Re[T]=null,Re[u]=null,Re[p]=null,De(Be)),void(Re[m]=Be)}var re=Re[u];re!==null&&(Re[T]=null,Re[u]=null,Re[p]=null,re(v(void 0,!0))),Re[g]=!0})),Te.on("readable",x.bind(null,Re)),Re}},3791:function(h,e,t){function o(f,c){var v=Object.keys(f);if(Object.getOwnPropertySymbols){var _=Object.getOwnPropertySymbols(f);c&&(_=_.filter((function(x){return Object.getOwnPropertyDescriptor(f,x).enumerable}))),v.push.apply(v,_)}return v}function n(f){for(var c=1;c<arguments.length;c++){var v=arguments[c]!=null?arguments[c]:{};c%2?o(Object(v),!0).forEach((function(_){r(f,_,v[_])})):Object.getOwnPropertyDescriptors?Object.defineProperties(f,Object.getOwnPropertyDescriptors(v)):o(Object(v)).forEach((function(_){Object.defineProperty(f,_,Object.getOwnPropertyDescriptor(v,_))}))}return f}function r(f,c,v){return(c=p(c))in f?Object.defineProperty(f,c,{value:v,enumerable:!0,configurable:!0,writable:!0}):f[c]=v,f}function u(f,c){for(var v=0;v<c.length;v++){var _=c[v];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(f,p(_.key),_)}}function p(f){var c=(function(v){if(typeof v!="object"||v===null)return v;var _=v[Symbol.toPrimitive];if(_!==void 0){var x=_.call(v,"string");if(typeof x!="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(v)})(f);return typeof c=="symbol"?c:String(c)}var m=t(44).Buffer,g=t(3779).inspect,T=g&&g.custom||"inspect";h.exports=(function(){function f(){(function(_,x){if(!(_ instanceof x))throw new TypeError("Cannot call a class as a function")})(this,f),this.head=null,this.tail=null,this.length=0}var c,v;return c=f,(v=[{key:"push",value:function(_){var x={data:_,next:null};this.length>0?this.tail.next=x:this.head=x,this.tail=x,++this.length}},{key:"unshift",value:function(_){var x={data:_,next:this.head};this.length===0&&(this.tail=x),this.head=x,++this.length}},{key:"shift",value:function(){if(this.length!==0){var _=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,_}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(_){if(this.length===0)return"";for(var x=this.head,te=""+x.data;x=x.next;)te+=_+x.data;return te}},{key:"concat",value:function(_){if(this.length===0)return m.alloc(0);for(var x,te,oe,Te=m.allocUnsafe(_>>>0),Se=this.head,Re=0;Se;)x=Se.data,te=Te,oe=Re,m.prototype.copy.call(x,te,oe),Re+=Se.data.length,Se=Se.next;return Te}},{key:"consume",value:function(_,x){var te;return _<this.head.data.length?(te=this.head.data.slice(0,_),this.head.data=this.head.data.slice(_)):te=_===this.head.data.length?this.shift():x?this._getString(_):this._getBuffer(_),te}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(_){var x=this.head,te=1,oe=x.data;for(_-=oe.length;x=x.next;){var Te=x.data,Se=_>Te.length?Te.length:_;if(Se===Te.length?oe+=Te:oe+=Te.slice(0,_),(_-=Se)==0){Se===Te.length?(++te,x.next?this.head=x.next:this.head=this.tail=null):(this.head=x,x.data=Te.slice(Se));break}++te}return this.length-=te,oe}},{key:"_getBuffer",value:function(_){var x=m.allocUnsafe(_),te=this.head,oe=1;for(te.data.copy(x),_-=te.data.length;te=te.next;){var Te=te.data,Se=_>Te.length?Te.length:_;if(Te.copy(x,x.length-_,0,Se),(_-=Se)==0){Se===Te.length?(++oe,te.next?this.head=te.next:this.head=this.tail=null):(this.head=te,te.data=Te.slice(Se));break}++oe}return this.length-=oe,x}},{key:T,value:function(_,x){return g(this,n(n({},x),{},{depth:0,customInspect:!1}))}}])&&u(c.prototype,v),Object.defineProperty(c,"prototype",{writable:!1}),f})()},2410:function(h){function e(n,r){o(n,r),t(n)}function t(n){n._writableState&&!n._writableState.emitClose||n._readableState&&!n._readableState.emitClose||n.emit("close")}function o(n,r){n.emit("error",r)}h.exports={destroy:function(n,r){var u=this,p=this._readableState&&this._readableState.destroyed,m=this._writableState&&this._writableState.destroyed;return p||m?(r?r(n):n&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(o,this,n)):process.nextTick(o,this,n)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(n||null,(function(g){!r&&g?u._writableState?u._writableState.errorEmitted?process.nextTick(t,u):(u._writableState.errorEmitted=!0,process.nextTick(e,u,g)):process.nextTick(e,u,g):r?(process.nextTick(t,u),r(g)):process.nextTick(t,u)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(n,r){var u=n._readableState,p=n._writableState;u&&u.autoDestroy||p&&p.autoDestroy?n.destroy(r):n.emit("error",r)}}},2896:function(h,e,t){var o=t(1602).codes.ERR_STREAM_PREMATURE_CLOSE;function n(){}h.exports=function r(u,p,m){if(typeof p=="function")return r(u,null,p);p||(p={}),m=(function(Se){var Re=!1;return function(){if(!Re){Re=!0;for(var Be=arguments.length,De=new Array(Be),re=0;re<Be;re++)De[re]=arguments[re];Se.apply(this,De)}}})(m||n);var g=p.readable||p.readable!==!1&&u.readable,T=p.writable||p.writable!==!1&&u.writable,f=function(){u.writable||v()},c=u._writableState&&u._writableState.finished,v=function(){T=!1,c=!0,g||m.call(u)},_=u._readableState&&u._readableState.endEmitted,x=function(){g=!1,_=!0,T||m.call(u)},te=function(Se){m.call(u,Se)},oe=function(){var Se;return g&&!_?(u._readableState&&u._readableState.ended||(Se=new o),m.call(u,Se)):T&&!c?(u._writableState&&u._writableState.ended||(Se=new o),m.call(u,Se)):void 0},Te=function(){u.req.on("finish",v)};return(function(Se){return Se.setHeader&&typeof Se.abort=="function"})(u)?(u.on("complete",v),u.on("abort",oe),u.req?Te():u.on("request",Te)):T&&!u._writableState&&(u.on("end",f),u.on("close",f)),u.on("end",x),u.on("finish",v),p.error!==!1&&u.on("error",te),u.on("close",oe),function(){u.removeListener("complete",v),u.removeListener("abort",oe),u.removeListener("request",Te),u.req&&u.req.removeListener("finish",v),u.removeListener("end",f),u.removeListener("close",f),u.removeListener("finish",v),u.removeListener("end",x),u.removeListener("error",te),u.removeListener("close",oe)}}},3411:function(h){h.exports=function(){throw new Error("Readable.from is not available in the browser")}},8460:function(h,e,t){var o,n=t(1602).codes,r=n.ERR_MISSING_ARGS,u=n.ERR_STREAM_DESTROYED;function p(T){if(T)throw T}function m(T){T()}function g(T,f){return T.pipe(f)}h.exports=function(){for(var T=arguments.length,f=new Array(T),c=0;c<T;c++)f[c]=arguments[c];var v,_=(function(te){return te.length?typeof te[te.length-1]!="function"?p:te.pop():p})(f);if(Array.isArray(f[0])&&(f=f[0]),f.length<2)throw new r("streams");var x=f.map((function(te,oe){var Te=oe<f.length-1;return(function(Se,Re,Be,De){De=(function(he){var ve=!1;return function(){ve||(ve=!0,he.apply(void 0,arguments))}})(De);var re=!1;Se.on("close",(function(){re=!0})),o===void 0&&(o=t(2896)),o(Se,{readable:Re,writable:Be},(function(he){if(he)return De(he);re=!0,De()}));var se=!1;return function(he){if(!re&&!se)return se=!0,(function(ve){return ve.setHeader&&typeof ve.abort=="function"})(Se)?Se.abort():typeof Se.destroy=="function"?Se.destroy():void De(he||new u("pipe"))}})(te,Te,oe>0,(function(Se){v||(v=Se),Se&&x.forEach(m),Te||(x.forEach(m),_(v))}))}));return f.reduce(g)}},1749:function(h,e,t){var o=t(1602).codes.ERR_INVALID_OPT_VALUE;h.exports={getHighWaterMark:function(n,r,u,p){var m=(function(g,T,f){return g.highWaterMark!=null?g.highWaterMark:T?g[f]:null})(r,p,u);if(m!=null){if(!isFinite(m)||Math.floor(m)!==m||m<0)throw new o(p?u:"highWaterMark",m);return Math.floor(m)}return n.objectMode?16:16384}}},2611:function(h,e,t){h.exports=t(9826).EventEmitter},748:function(h,e,t){var o=t(4598).Buffer,n=o.isEncoding||function(_){switch((_=""+_)&&_.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function r(_){var x;switch(this.encoding=(function(te){var oe=(function(Te){if(!Te)return"utf8";for(var Se;;)switch(Te){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return Te;default:if(Se)return;Te=(""+Te).toLowerCase(),Se=!0}})(te);if(typeof oe!="string"&&(o.isEncoding===n||!n(te)))throw new Error("Unknown encoding: "+te);return oe||te})(_),this.encoding){case"utf16le":this.text=m,this.end=g,x=4;break;case"utf8":this.fillLast=p,x=4;break;case"base64":this.text=T,this.end=f,x=3;break;default:return this.write=c,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(x)}function u(_){return _<=127?0:_>>5==6?2:_>>4==14?3:_>>3==30?4:_>>6==2?-1:-2}function p(_){var x=this.lastTotal-this.lastNeed,te=(function(oe,Te){if((192&Te[0])!=128)return oe.lastNeed=0,"�";if(oe.lastNeed>1&&Te.length>1){if((192&Te[1])!=128)return oe.lastNeed=1,"�";if(oe.lastNeed>2&&Te.length>2&&(192&Te[2])!=128)return oe.lastNeed=2,"�"}})(this,_);return te!==void 0?te:this.lastNeed<=_.length?(_.copy(this.lastChar,x,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(_.copy(this.lastChar,x,0,_.length),void(this.lastNeed-=_.length))}function m(_,x){if((_.length-x)%2==0){var te=_.toString("utf16le",x);if(te){var oe=te.charCodeAt(te.length-1);if(oe>=55296&&oe<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1],te.slice(0,-1)}return te}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=_[_.length-1],_.toString("utf16le",x,_.length-1)}function g(_){var x=_&&_.length?this.write(_):"";if(this.lastNeed){var te=this.lastTotal-this.lastNeed;return x+this.lastChar.toString("utf16le",0,te)}return x}function T(_,x){var te=(_.length-x)%3;return te===0?_.toString("base64",x):(this.lastNeed=3-te,this.lastTotal=3,te===1?this.lastChar[0]=_[_.length-1]:(this.lastChar[0]=_[_.length-2],this.lastChar[1]=_[_.length-1]),_.toString("base64",x,_.length-te))}function f(_){var x=_&&_.length?this.write(_):"";return this.lastNeed?x+this.lastChar.toString("base64",0,3-this.lastNeed):x}function c(_){return _.toString(this.encoding)}function v(_){return _&&_.length?this.write(_):""}e.StringDecoder=r,r.prototype.write=function(_){if(_.length===0)return"";var x,te;if(this.lastNeed){if((x=this.fillLast(_))===void 0)return"";te=this.lastNeed,this.lastNeed=0}else te=0;return te<_.length?x?x+this.text(_,te):this.text(_,te):x||""},r.prototype.end=function(_){var x=_&&_.length?this.write(_):"";return this.lastNeed?x+"�":x},r.prototype.text=function(_,x){var te=(function(Te,Se,Re){var Be=Se.length-1;if(Be<Re)return 0;var De=u(Se[Be]);return De>=0?(De>0&&(Te.lastNeed=De-1),De):--Be<Re||De===-2?0:(De=u(Se[Be]))>=0?(De>0&&(Te.lastNeed=De-2),De):--Be<Re||De===-2?0:(De=u(Se[Be]))>=0?(De>0&&(De===2?De=0:Te.lastNeed=De-3),De):0})(this,_,x);if(!this.lastNeed)return _.toString("utf8",x);this.lastTotal=te;var oe=_.length-(te-this.lastNeed);return _.copy(this.lastChar,0,oe),_.toString("utf8",x,oe)},r.prototype.fillLast=function(_){if(this.lastNeed<=_.length)return _.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);_.copy(this.lastChar,this.lastTotal-this.lastNeed,0,_.length),this.lastNeed-=_.length}},4598:function(h,e,t){var o=t(44),n=o.Buffer;function r(p,m){for(var g in p)m[g]=p[g]}function u(p,m,g){return n(p,m,g)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?h.exports=o:(r(o,e),e.Buffer=u),r(n,u),u.from=function(p,m,g){if(typeof p=="number")throw new TypeError("Argument must not be a number");return n(p,m,g)},u.alloc=function(p,m,g){if(typeof p!="number")throw new TypeError("Argument must be a number");var T=n(p);return m!==void 0?typeof g=="string"?T.fill(m,g):T.fill(m):T.fill(0),T},u.allocUnsafe=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return n(p)},u.allocUnsafeSlow=function(p){if(typeof p!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(p)}},8571:function(h,e,t){var o;(function(n,r){var u="function",p="undefined",m="object",g="string",T="major",f="model",c="name",v="type",_="vendor",x="version",te="architecture",oe="console",Te="mobile",Se="tablet",Re="smarttv",Be="wearable",De="embedded",re="Amazon",se="Apple",he="ASUS",ve="BlackBerry",ke="Browser",Fe="Chrome",ye="Firefox",Qe="Google",xe="Huawei",Le="LG",ot="Microsoft",Ht="Motorola",Et="Opera",zt="Samsung",Rt="Sharp",Xt="Sony",tn="Xiaomi",cn="Zebra",Ne="Facebook",Ce="Chromium OS",lt="Mac OS",$=function(Ve){for(var tt={},Je=0;Je<Ve.length;Je++)tt[Ve[Je].toUpperCase()]=Ve[Je];return tt},Y=function(Ve,tt){return typeof Ve===g&&A(tt).indexOf(A(Ve))!==-1},A=function(Ve){return Ve.toLowerCase()},I=function(Ve,tt){if(typeof Ve===g)return Ve=Ve.replace(/^\s\s*/,""),typeof tt===p?Ve:Ve.substring(0,500)},J=function(Ve,tt){for(var Je,mt,Vt,Dt,Ut,It,gn=0;gn<tt.length&&!Ut;){var Rn=tt[gn],jn=tt[gn+1];for(Je=mt=0;Je<Rn.length&&!Ut&&Rn[Je];)if(Ut=Rn[Je++].exec(Ve))for(Vt=0;Vt<jn.length;Vt++)It=Ut[++mt],typeof(Dt=jn[Vt])===m&&Dt.length>0?Dt.length===2?typeof Dt[1]==u?this[Dt[0]]=Dt[1].call(this,It):this[Dt[0]]=Dt[1]:Dt.length===3?typeof Dt[1]!==u||Dt[1].exec&&Dt[1].test?this[Dt[0]]=It?It.replace(Dt[1],Dt[2]):r:this[Dt[0]]=It?Dt[1].call(this,It,Dt[2]):r:Dt.length===4&&(this[Dt[0]]=It?Dt[3].call(this,It.replace(Dt[1],Dt[2])):r):this[Dt]=It||r;gn+=2}},G=function(Ve,tt){for(var Je in tt)if(typeof tt[Je]===m&&tt[Je].length>0){for(var mt=0;mt<tt[Je].length;mt++)if(Y(tt[Je][mt],Ve))return Je==="?"?r:Je}else if(Y(tt[Je],Ve))return Je==="?"?r:Je;return Ve},Ae={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},Ye={browser:[[/\b(?:crmo|crios)\/([\w\.]+)/i],[x,[c,"Chrome"]],[/edg(?:e|ios|a)?\/([\w\.]+)/i],[x,[c,"Edge"]],[/(opera mini)\/([-\w\.]+)/i,/(opera [mobiletab]{3,6})\b.+version\/([-\w\.]+)/i,/(opera)(?:.+version\/|[\/ ]+)([\w\.]+)/i],[c,x],[/opios[\/ ]+([\w\.]+)/i],[x,[c,Et+" Mini"]],[/\bop(?:rg)?x\/([\w\.]+)/i],[x,[c,Et+" GX"]],[/\bopr\/([\w\.]+)/i],[x,[c,Et]],[/\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\/ ]?([\w\.]+)/i],[x,[c,"Baidu"]],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/ ]?([\w\.]*)/i,/(avant|iemobile|slim)\s?(?:browser)?[\/ ]?([\w\.]*)/i,/(?:ms|\()(ie) ([\w\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\/([-\w\.]+)/i,/(heytap|ovi)browser\/([\d\.]+)/i,/(weibo)__([\d\.]+)/i],[c,x],[/\bddg\/([\w\.]+)/i],[x,[c,"DuckDuckGo"]],[/(?:\buc? ?browser|(?:juc.+)ucweb)[\/ ]?([\w\.]+)/i],[x,[c,"UC"+ke]],[/microm.+\bqbcore\/([\w\.]+)/i,/\bqbcore\/([\w\.]+).+microm/i,/micromessenger\/([\w\.]+)/i],[x,[c,"WeChat"]],[/konqueror\/([\w\.]+)/i],[x,[c,"Konqueror"]],[/trident.+rv[: ]([\w\.]{1,9})\b.+like gecko/i],[x,[c,"IE"]],[/ya(?:search)?browser\/([\w\.]+)/i],[x,[c,"Yandex"]],[/slbrowser\/([\w\.]+)/i],[x,[c,"Smart Lenovo "+ke]],[/(avast|avg)\/([\w\.]+)/i],[[c,/(.+)/,"$1 Secure "+ke],x],[/\bfocus\/([\w\.]+)/i],[x,[c,ye+" Focus"]],[/\bopt\/([\w\.]+)/i],[x,[c,Et+" Touch"]],[/coc_coc\w+\/([\w\.]+)/i],[x,[c,"Coc Coc"]],[/dolfin\/([\w\.]+)/i],[x,[c,"Dolphin"]],[/coast\/([\w\.]+)/i],[x,[c,Et+" Coast"]],[/miuibrowser\/([\w\.]+)/i],[x,[c,"MIUI "+ke]],[/fxios\/([-\w\.]+)/i],[x,[c,ye]],[/\bqihu|(qi?ho?o?|360)browser/i],[[c,"360 "+ke]],[/(oculus|sailfish|huawei|vivo)browser\/([\w\.]+)/i],[[c,/(.+)/,"$1 "+ke],x],[/samsungbrowser\/([\w\.]+)/i],[x,[c,zt+" Internet"]],[/(comodo_dragon)\/([\w\.]+)/i],[[c,/_/g," "],x],[/metasr[\/ ]?([\d\.]+)/i],[x,[c,"Sogou Explorer"]],[/(sogou)mo\w+\/([\d\.]+)/i],[[c,"Sogou Mobile"],x],[/(electron)\/([\w\.]+) safari/i,/(tesla)(?: qtcarbrowser|\/(20\d\d\.[-\w\.]+))/i,/m?(qqbrowser|2345Explorer)[\/ ]?([\w\.]+)/i],[c,x],[/(lbbrowser)/i,/\[(linkedin)app\]/i],[c],[/((?:fban\/fbios|fb_iab\/fb4a)(?!.+fbav)|;fbav\/([\w\.]+);)/i],[[c,Ne],x],[/(Klarna)\/([\w\.]+)/i,/(kakao(?:talk|story))[\/ ]([\w\.]+)/i,/(naver)\(.*?(\d+\.[\w\.]+).*\)/i,/safari (line)\/([\w\.]+)/i,/\b(line)\/([\w\.]+)\/iab/i,/(alipay)client\/([\w\.]+)/i,/(twitter)(?:and| f.+e\/([\w\.]+))/i,/(chromium|instagram|snapchat)[\/ ]([-\w\.]+)/i],[c,x],[/\bgsa\/([\w\.]+) .*safari\//i],[x,[c,"GSA"]],[/musical_ly(?:.+app_?version\/|_)([\w\.]+)/i],[x,[c,"TikTok"]],[/headlesschrome(?:\/([\w\.]+)| )/i],[x,[c,Fe+" Headless"]],[/ wv\).+(chrome)\/([\w\.]+)/i],[[c,Fe+" WebView"],x],[/droid.+ version\/([\w\.]+)\b.+(?:mobile safari|safari)/i],[x,[c,"Android "+ke]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\/v?([\w\.]+)/i],[c,x],[/version\/([\w\.\,]+) .*mobile\/\w+ (safari)/i],[x,[c,"Mobile Safari"]],[/version\/([\w(\.|\,)]+) .*(mobile ?safari|safari)/i],[x,c],[/webkit.+?(mobile ?safari|safari)(\/[\w\.]+)/i],[c,[x,G,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\/([\w\.]+)/i],[c,x],[/(navigator|netscape\d?)\/([-\w\.]+)/i],[[c,"Netscape"],x],[/mobile vr; rv:([\w\.]+)\).+firefox/i],[x,[c,ye+" Reality"]],[/ekiohf.+(flow)\/([\w\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\/ ]?([\w\.\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([-\w\.]+)$/i,/(firefox)\/([\w\.]+)/i,/(mozilla)\/([\w\.]+) .+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\. ]?browser)[-\/ ]?v?([\w\.]+)/i,/(links) \(([\w\.]+)/i,/panasonic;(viera)/i],[c,x],[/(cobalt)\/([\w\.]+)/i],[c,[x,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\)]/i],[[te,"amd64"]],[/(ia32(?=;))/i],[[te,A]],[/((?:i[346]|x)86)[;\)]/i],[[te,"ia32"]],[/\b(aarch64|arm(v?8e?l?|_?64))\b/i],[[te,"arm64"]],[/\b(arm(?:v[67])?ht?n?[fl]p?)\b/i],[[te,"armhf"]],[/windows (ce|mobile); ppc;/i],[[te,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\))/i],[[te,/ower/,"",A]],[/(sun4\w)[;\)]/i],[[te,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\b|pa-risc)/i],[[te,A]]],device:[[/\b(sch-i[89]0\d|shw-m380s|sm-[ptx]\w{2,4}|gt-[pn]\d{2,4}|sgh-t8[56]9|nexus 10)/i],[f,[_,zt],[v,Se]],[/\b((?:s[cgp]h|gt|sm)-\w+|sc[g-]?[\d]+a?|galaxy nexus)/i,/samsung[- ]([-\w]+)/i,/sec-(sgh\w+)/i],[f,[_,zt],[v,Te]],[/(?:\/|\()(ip(?:hone|od)[\w, ]*)(?:\/|;)/i],[f,[_,se],[v,Te]],[/\((ipad);[-\w\),; ]+apple/i,/applecoremedia\/[\w\.]+ \((ipad)/i,/\b(ipad)\d\d?,\d\d?[;\]].+ios/i],[f,[_,se],[v,Se]],[/(macintosh);/i],[f,[_,se]],[/\b(sh-?[altvz]?\d\d[a-ekm]?)/i],[f,[_,Rt],[v,Te]],[/\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\d{2})\b(?!.+d\/s)/i],[f,[_,xe],[v,Se]],[/(?:huawei|honor)([-\w ]+)[;\)]/i,/\b(nexus 6p|\w{2,4}e?-[atu]?[ln][\dx][012359c][adn]?)\b(?!.+d\/s)/i],[f,[_,xe],[v,Te]],[/\b(poco[\w ]+|m2\d{3}j\d\d[a-z]{2})(?: bui|\))/i,/\b; (\w+) build\/hm\1/i,/\b(hm[-_ ]?note?[_ ]?(?:\d\w)?) bui/i,/\b(redmi[\-_ ]?(?:note|k)?[\w_ ]+)(?: bui|\))/i,/oid[^\)]+; (m?[12][0-389][01]\w{3,6}[c-y])( bui|; wv|\))/i,/\b(mi[-_ ]?(?:a\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\d?\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\))/i],[[f,/_/g," "],[_,tn],[v,Te]],[/oid[^\)]+; (2\d{4}(283|rpbf)[cgl])( bui|\))/i,/\b(mi[-_ ]?(?:pad)(?:[\w_ ]+))(?: bui|\))/i],[[f,/_/g," "],[_,tn],[v,Se]],[/; (\w+) bui.+ oppo/i,/\b(cph[12]\d{3}|p(?:af|c[al]|d\w|e[ar])[mt]\d0|x9007|a101op)\b/i],[f,[_,"OPPO"],[v,Te]],[/\b(opd2\d{3}a?) bui/i],[f,[_,"OPPO"],[v,Se]],[/vivo (\w+)(?: bui|\))/i,/\b(v[12]\d{3}\w?[at])(?: bui|;)/i],[f,[_,"Vivo"],[v,Te]],[/\b(rmx[1-3]\d{3})(?: bui|;|\))/i],[f,[_,"Realme"],[v,Te]],[/\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\b[\w ]+build\//i,/\bmot(?:orola)?[- ](\w*)/i,/((?:moto[\w\(\) ]+|xt\d{3,4}|nexus 6)(?= bui|\)))/i],[f,[_,Ht],[v,Te]],[/\b(mz60\d|xoom[2 ]{0,2}) build\//i],[f,[_,Ht],[v,Se]],[/((?=lg)?[vl]k\-?\d{3}) bui| 3\.[-\w; ]{10}lg?-([06cv9]{3,4})/i],[f,[_,Le],[v,Se]],[/(lm(?:-?f100[nv]?|-[\w\.]+)(?= bui|\))|nexus [45])/i,/\blg[-e;\/ ]+((?!browser|netcast|android tv)\w+)/i,/\blg-?([\d\w]+) bui/i],[f,[_,Le],[v,Te]],[/(ideatab[-\w ]+)/i,/lenovo ?(s[56]000[-\w]+|tab(?:[\w ]+)|yt[-\d\w]{6}|tb[-\d\w]{6})/i],[f,[_,"Lenovo"],[v,Se]],[/(?:maemo|nokia).*(n900|lumia \d+)/i,/nokia[-_ ]?([-\w\.]*)/i],[[f,/_/g," "],[_,"Nokia"],[v,Te]],[/(pixel c)\b/i],[f,[_,Qe],[v,Se]],[/droid.+; (pixel[\daxl ]{0,6})(?: bui|\))/i],[f,[_,Qe],[v,Te]],[/droid.+ (a?\d[0-2]{2}so|[c-g]\d{4}|so[-gl]\w+|xq-a\w[4-7][12])(?= bui|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[f,[_,Xt],[v,Te]],[/sony tablet [ps]/i,/\b(?:sony)?sgp\w+(?: bui|\))/i],[[f,"Xperia Tablet"],[_,Xt],[v,Se]],[/ (kb2005|in20[12]5|be20[12][59])\b/i,/(?:one)?(?:plus)? (a\d0\d\d)(?: b|\))/i],[f,[_,"OnePlus"],[v,Te]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\))/i,/(kf[a-z]+)( bui|\)).+silk\//i],[f,[_,re],[v,Se]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\)).+silk\//i],[[f,/(.+)/g,"Fire Phone $1"],[_,re],[v,Te]],[/(playbook);[-\w\),; ]+(rim)/i],[f,_,[v,Se]],[/\b((?:bb[a-f]|st[hv])100-\d)/i,/\(bb10; (\w+)/i],[f,[_,ve],[v,Te]],[/(?:\b|asus_)(transfo[prime ]{4,10} \w+|eeepc|slider \w+|nexus 7|padfone|p00[cj])/i],[f,[_,he],[v,Se]],[/ (z[bes]6[027][012][km][ls]|zenfone \d\w?)\b/i],[f,[_,he],[v,Te]],[/(nexus 9)/i],[f,[_,"HTC"],[v,Se]],[/(htc)[-;_ ]{1,2}([\w ]+(?=\)| bui)|\w+)/i,/(zte)[- ]([\w ]+?)(?: bui|\/|\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\.))|sony(?!-bra))[-_ ]?([-\w]*)/i],[_,[f,/_/g," "],[v,Te]],[/droid.+; ([ab][1-7]-?[0178a]\d\d?)/i],[f,[_,"Acer"],[v,Se]],[/droid.+; (m[1-5] note) bui/i,/\bmz-([-\w]{2,})/i],[f,[_,"Meizu"],[v,Te]],[/; ((?:power )?armor(?:[\w ]{0,8}))(?: bui|\))/i],[f,[_,"Ulefone"],[v,Te]],[/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron|infinix|tecno)[-_ ]?([-\w]*)/i,/(hp) ([\w ]+\w)/i,/(asus)-?(\w+)/i,/(microsoft); (lumia[\w ]+)/i,/(lenovo)[-_ ]?([-\w]+)/i,/(jolla)/i,/(oppo) ?([\w ]+) bui/i],[_,f,[v,Te]],[/(kobo)\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\/([\w\.]+)/i,/(nook)[\w ]+build\/(\w+)/i,/(dell) (strea[kpr\d ]*[\dko])/i,/(le[- ]+pan)[- ]+(\w{1,9}) bui/i,/(trinity)[- ]*(t\d{3}) bui/i,/(gigaset)[- ]+(q\w{1,9}) bui/i,/(vodafone) ([\w ]+)(?:\)| bui)/i],[_,f,[v,Se]],[/(surface duo)/i],[f,[_,ot],[v,Se]],[/droid [\d\.]+; (fp\du?)(?: b|\))/i],[f,[_,"Fairphone"],[v,Te]],[/(u304aa)/i],[f,[_,"AT&T"],[v,Te]],[/\bsie-(\w*)/i],[f,[_,"Siemens"],[v,Te]],[/\b(rct\w+) b/i],[f,[_,"RCA"],[v,Se]],[/\b(venue[\d ]{2,7}) b/i],[f,[_,"Dell"],[v,Se]],[/\b(q(?:mv|ta)\w+) b/i],[f,[_,"Verizon"],[v,Se]],[/\b(?:barnes[& ]+noble |bn[rt])([\w\+ ]*) b/i],[f,[_,"Barnes & Noble"],[v,Se]],[/\b(tm\d{3}\w+) b/i],[f,[_,"NuVision"],[v,Se]],[/\b(k88) b/i],[f,[_,"ZTE"],[v,Se]],[/\b(nx\d{3}j) b/i],[f,[_,"ZTE"],[v,Te]],[/\b(gen\d{3}) b.+49h/i],[f,[_,"Swiss"],[v,Te]],[/\b(zur\d{3}) b/i],[f,[_,"Swiss"],[v,Se]],[/\b((zeki)?tb.*\b) b/i],[f,[_,"Zeki"],[v,Se]],[/\b([yr]\d{2}) b/i,/\b(dragon[- ]+touch |dt)(\w{5}) b/i],[[_,"Dragon Touch"],f,[v,Se]],[/\b(ns-?\w{0,9}) b/i],[f,[_,"Insignia"],[v,Se]],[/\b((nxa|next)-?\w{0,9}) b/i],[f,[_,"NextBook"],[v,Se]],[/\b(xtreme\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[_,"Voice"],f,[v,Te]],[/\b(lvtel\-)?(v1[12]) b/i],[[_,"LvTel"],f,[v,Te]],[/\b(ph-1) /i],[f,[_,"Essential"],[v,Te]],[/\b(v(100md|700na|7011|917g).*\b) b/i],[f,[_,"Envizen"],[v,Se]],[/\b(trio[-\w\. ]+) b/i],[f,[_,"MachSpeed"],[v,Se]],[/\btu_(1491) b/i],[f,[_,"Rotor"],[v,Se]],[/(shield[\w ]+) b/i],[f,[_,"Nvidia"],[v,Se]],[/(sprint) (\w+)/i],[_,f,[v,Te]],[/(kin\.[onetw]{3})/i],[[f,/\./g," "],[_,ot],[v,Te]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\)/i],[f,[_,cn],[v,Se]],[/droid.+; (ec30|ps20|tc[2-8]\d[kx])\)/i],[f,[_,cn],[v,Te]],[/smart-tv.+(samsung)/i],[_,[v,Re]],[/hbbtv.+maple;(\d+)/i],[[f,/^/,"SmartTV"],[_,zt],[v,Re]],[/(nux; netcast.+smarttv|lg (netcast\.tv-201\d|android tv))/i],[[_,Le],[v,Re]],[/(apple) ?tv/i],[_,[f,se+" TV"],[v,Re]],[/crkey/i],[[f,Fe+"cast"],[_,Qe],[v,Re]],[/droid.+aft(\w+)( bui|\))/i],[f,[_,re],[v,Re]],[/\(dtv[\);].+(aquos)/i,/(aquos-tv[\w ]+)\)/i],[f,[_,Rt],[v,Re]],[/(bravia[\w ]+)( bui|\))/i],[f,[_,Xt],[v,Re]],[/(mitv-\w{5}) bui/i],[f,[_,tn],[v,Re]],[/Hbbtv.*(technisat) (.*);/i],[_,f,[v,Re]],[/\b(roku)[\dx]*[\)\/]((?:dvp-)?[\d\.]*)/i,/hbbtv\/\d+\.\d+\.\d+ +\([\w\+ ]*; *([\w\d][^;]*);([^;]*)/i],[[_,I],[f,I],[v,Re]],[/\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\b/i],[[v,Re]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[_,f,[v,oe]],[/droid.+; (shield) bui/i],[f,[_,"Nvidia"],[v,oe]],[/(playstation [345portablevi]+)/i],[f,[_,Xt],[v,oe]],[/\b(xbox(?: one)?(?!; xbox))[\); ]/i],[f,[_,ot],[v,oe]],[/((pebble))app/i],[_,f,[v,Be]],[/(watch)(?: ?os[,\/]|\d,\d\/)[\d\.]+/i],[f,[_,se],[v,Be]],[/droid.+; (glass) \d/i],[f,[_,Qe],[v,Be]],[/droid.+; (wt63?0{2,3})\)/i],[f,[_,cn],[v,Be]],[/(quest( \d| pro)?)/i],[f,[_,Ne],[v,Be]],[/(tesla)(?: qtcarbrowser|\/[-\w\.]+)/i],[_,[v,De]],[/(aeobc)\b/i],[f,[_,re],[v,De]],[/droid .+?; ([^;]+?)(?: bui|; wv\)|\) applew).+? mobile safari/i],[f,[v,Te]],[/droid .+?; ([^;]+?)(?: bui|\) applew).+?(?! mobile) safari/i],[f,[v,Se]],[/\b((tablet|tab)[;\/]|focus\/\d(?!.+mobile))/i],[[v,Se]],[/(phone|mobile(?:[;\/]| [ \w\/\.]*safari)|pda(?=.+windows ce))/i],[[v,Te]],[/(android[-\w\. ]{0,9});.+buil/i],[f,[_,"Generic"]]],engine:[[/windows.+ edge\/([\w\.]+)/i],[x,[c,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)([\w\.]+)/i],[x,[c,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/ekioh(flow)\/([\w\.]+)/i,/(khtml|tasman|links)[\/ ]\(?([\w\.]+)/i,/(icab)[\/ ]([23]\.[\d\.]+)/i,/\b(libweb)/i],[c,x],[/rv\:([\w\.]{1,9})\b.+(gecko)/i],[x,c]],os:[[/microsoft (windows) (vista|xp)/i],[c,x],[/(windows (?:phone(?: os)?|mobile))[\/ ]?([\d\.\w ]*)/i],[c,[x,G,Ae]],[/windows nt 6\.2; (arm)/i,/windows[\/ ]?([ntce\d\. ]+\w)(?!.+xbox)/i,/(?:win(?=3|9|n)|win 9x )([nt\d\.]+)/i],[[x,G,Ae],[c,"Windows"]],[/ip[honead]{2,4}\b(?:.*os ([\w]+) like mac|; opera)/i,/(?:ios;fbsv\/|iphone.+ios[\/ ])([\d\.]+)/i,/cfnetwork\/.+darwin/i],[[x,/_/g,"."],[c,"iOS"]],[/(mac os x) ?([\w\. ]*)/i,/(macintosh|mac_powerpc\b)(?!.+haiku)/i],[[c,lt],[x,/_/g,"."]],[/droid ([\w\.]+)\b.+(android[- ]x86|harmonyos)/i],[x,c],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\/ ]?([\w\.]*)/i,/(blackberry)\w*\/([\w\.]*)/i,/(tizen|kaios)[\/ ]([\w\.]+)/i,/\((series40);/i],[c,x],[/\(bb(10);/i],[x,[c,ve]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\/ ]?([\w\.]*)/i],[x,[c,"Symbian"]],[/mozilla\/[\d\.]+ \((?:mobile|tablet|tv|mobile; [\w ]+); rv:.+ gecko\/([\w\.]+)/i],[x,[c,ye+" OS"]],[/web0s;.+rt(tv)/i,/\b(?:hp)?wos(?:browser)?\/([\w\.]+)/i],[x,[c,"webOS"]],[/watch(?: ?os[,\/]|\d,\d\/)([\d\.]+)/i],[x,[c,"watchOS"]],[/crkey\/([\d\.]+)/i],[x,[c,Fe+"cast"]],[/(cros) [\w]+(?:\)| ([\w\.]+)\b)/i],[[c,Ce],x],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\/(\d+\.[\w\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\);]+)/i,/\b(joli|palm)\b ?(?:os)?\/?([\w\.]*)/i,/(mint)[\/\(\) ]?(\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\/ ]?(?!chrom|package)([-\w\.]*)/i,/(hurd|linux) ?([\w\.]*)/i,/(gnu) ?([\w\.]*)/i,/\b([-frentopcghs]{0,5}bsd|dragonfly)[\/ ]?(?!amd|[ix346]{1,2}86)([\w\.]*)/i,/(haiku) (\w+)/i],[c,x],[/(sunos) ?([\w\.\d]*)/i],[[c,"Solaris"],x],[/((?:open)?solaris)[-\/ ]?([\w\.]*)/i,/(aix) ((\d)(?=\.|\)| )[\w\.])*/i,/\b(beos|os\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\w\.]*)/i],[c,x]]},ze=function(Ve,tt){if(typeof Ve===m&&(tt=Ve,Ve=r),!(this instanceof ze))return new ze(Ve,tt).getResult();var Je=typeof n!==p&&n.navigator?n.navigator:r,mt=Ve||(Je&&Je.userAgent?Je.userAgent:""),Vt=Je&&Je.userAgentData?Je.userAgentData:r,Dt=tt?(function(It,gn){var Rn={};for(var jn in It)gn[jn]&&gn[jn].length%2==0?Rn[jn]=gn[jn].concat(It[jn]):Rn[jn]=It[jn];return Rn})(Ye,tt):Ye,Ut=Je&&Je.userAgent==mt;return this.getBrowser=function(){var It,gn={};return gn[c]=r,gn[x]=r,J.call(gn,mt,Dt.browser),gn[T]=typeof(It=gn[x])===g?It.replace(/[^\d\.]/g,"").split(".")[0]:r,Ut&&Je&&Je.brave&&typeof Je.brave.isBrave==u&&(gn[c]="Brave"),gn},this.getCPU=function(){var It={};return It[te]=r,J.call(It,mt,Dt.cpu),It},this.getDevice=function(){var It={};return It[_]=r,It[f]=r,It[v]=r,J.call(It,mt,Dt.device),Ut&&!It[v]&&Vt&&Vt.mobile&&(It[v]=Te),Ut&&It[f]=="Macintosh"&&Je&&typeof Je.standalone!==p&&Je.maxTouchPoints&&Je.maxTouchPoints>2&&(It[f]="iPad",It[v]=Se),It},this.getEngine=function(){var It={};return It[c]=r,It[x]=r,J.call(It,mt,Dt.engine),It},this.getOS=function(){var It={};return It[c]=r,It[x]=r,J.call(It,mt,Dt.os),Ut&&!It[c]&&Vt&&Vt.platform&&Vt.platform!="Unknown"&&(It[c]=Vt.platform.replace(/chrome os/i,Ce).replace(/macos/i,lt)),It},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return mt},this.setUA=function(It){return mt=typeof It===g&&It.length>500?I(It,500):It,this},this.setUA(mt),this};ze.VERSION="1.0.38",ze.BROWSER=$([c,x,T]),ze.CPU=$([te]),ze.DEVICE=$([f,_,v,oe,Te,Re,Se,Be,De]),ze.ENGINE=ze.OS=$([c,x]),typeof e!==p?(h.exports&&(e=h.exports=ze),e.UAParser=ze):t.amdO?(o=(function(){return ze}).call(e,t,e,h))===r||(h.exports=o):typeof n!==p&&(n.UAParser=ze);var je=typeof n!==p&&(n.jQuery||n.Zepto);if(je&&!je.ua){var Oe=new ze;je.ua=Oe.getResult(),je.ua.get=function(){return Oe.getUA()},je.ua.set=function(Ve){Oe.setUA(Ve);var tt=Oe.getResult();for(var Je in tt)je.ua[Je]=tt[Je]}}})(typeof window=="object"?window:this)},9e3:function(h,e,t){function o(n){try{if(!t.g.localStorage)return!1}catch{return!1}var r=t.g.localStorage[n];return r!=null&&String(r).toLowerCase()==="true"}h.exports=function(n,r){if(o("noDeprecation"))return n;var u=!1;return function(){if(!u){if(o("throwDeprecation"))throw new Error(r);o("traceDeprecation")?console.trace(r):console.warn(r),u=!0}return n.apply(this,arguments)}}},3779:function(){},7199:function(){},5393:function(h,e,t){t.r(e),t.d(e,{Debug:function(){return r.default},FactoryMaker:function(){return n.default},MediaPlayer:function(){return o.default}});var o=t(8200),n=t(138),r=t(649),u=t(8986),p=typeof window<"u"&&window||global,m=p.dashjs;m||(m=p.dashjs={}),m.MediaPlayer=o.default,m.FactoryMaker=n.default,m.Debug=r.default,m.Version=(0,u.getVersionString)(),e.default=m},649:function(h,e,t){t.r(e);var o=t(8850),n=t(3621),r=t(138);function u(m){m=m||{};const g=this.context,T=(0,o.default)(g).getInstance(),f=m.settings,c=[];let v,_,x,te;function oe(se){return se&&se.bind?se.bind(window.console):window.console.log.bind(window.console)}function Te(...se){re(1,this,...se)}function Se(...se){re(2,this,...se)}function Re(...se){re(3,this,...se)}function Be(...se){re(4,this,...se)}function De(...se){re(5,this,...se)}function re(se,he,...ve){let ke="",Fe=null;_&&(Fe=new Date().getTime(),ke+="["+(Fe-te)+"]"),x&&he&&he.getClassName&&(ke+="["+he.getClassName()+"]",he.getType&&(ke+="["+he.getType()+"]")),ke.length>0&&(ke+=" "),Array.apply(null,ve).forEach((function(ye){ke+=ye+" "})),c[se]&&f&&f.get().debug.logLevel>=se&&c[se](ke),f&&f.get().debug.dispatchEvent&&T.trigger(n.default.LOG,{message:ke,level:se})}return v={getLogger:function(se){return{fatal:Te.bind(se),error:Se.bind(se),warn:Re.bind(se),info:Be.bind(se),debug:De.bind(se)}},setLogTimestampVisible:function(se){_=se},setCalleeNameVisible:function(se){x=se}},_=!0,x=!0,te=new Date().getTime(),typeof window<"u"&&window.console&&(c[1]=oe(window.console.error),c[2]=oe(window.console.error),c[3]=oe(window.console.warn),c[4]=oe(window.console.info),c[5]=oe(window.console.debug)),v}u.__dashjs_factory_name="Debug";const p=r.default.getSingletonFactory(u);p.LOG_LEVEL_NONE=0,p.LOG_LEVEL_FATAL=1,p.LOG_LEVEL_ERROR=2,p.LOG_LEVEL_WARNING=3,p.LOG_LEVEL_INFO=4,p.LOG_LEVEL_DEBUG=5,r.default.updateSingletonFactory(u.__dashjs_factory_name,p),e.default=p},8850:function(h,e,t){t.r(e);var o=t(138),n=t(1191);function r(){let p={};function m(f,c,v,_={},x=!1){if(!f)throw new Error("event type cannot be null or undefined");if(!c||typeof c!="function")throw new Error("listener must be a function: "+c);let te=_.priority||0;if(T(f,c,v)>=0)return;p[f]=p[f]||[];const oe={callback:c,scope:v,priority:te,executeOnlyOnce:x};v&&v.getStreamId&&(oe.streamId=v.getStreamId()),v&&v.getType&&(oe.mediaType=v.getType()),_&&_.mode&&(oe.mode=_.mode),p[f].some(((Te,Se)=>{if(Te&&te>Te.priority)return p[f].splice(Se,0,oe),!0}))||p[f].push(oe)}function g(f,c,v){if(!f||!c||!p[f])return;const _=T(f,c,v);_<0||(p[f][_]=null)}function T(f,c,v){let _=-1;return p[f]&&p[f].some(((x,te)=>{if(x&&x.callback===c&&(!v||v===x.scope))return _=te,!0})),_}return{on:function(f,c,v,_={}){m(f,c,v,_)},once:function(f,c,v,_={}){m(f,c,v,_,!0)},off:g,trigger:function(f,c={},v={}){if(!f||!p[f])return;if((c=c||{}).hasOwnProperty("type"))throw new Error("'type' is a reserved word for event dispatching");c.type=f,v.streamId&&(c.streamId=v.streamId),v.mediaType&&(c.mediaType=v.mediaType);const _=[];p[f].filter((x=>!(!x||v.streamId&&x.streamId&&x.streamId!==v.streamId||v.mediaType&&x.mediaType&&x.mediaType!==v.mediaType||v.mode&&x.mode&&x.mode!==v.mode||!x.mode&&v.mode&&v.mode===n.default.EVENT_MODE_ON_RECEIVE))).forEach((x=>{x&&x.callback.call(x.scope,c),x.executeOnlyOnce&&_.push(x)})),_.forEach((x=>{g(f,x.callback,x.scope)}))},reset:function(){p={}}}}r.__dashjs_factory_name="EventBus";const u=o.default.getSingletonFactory(r);u.EVENT_PRIORITY_LOW=0,u.EVENT_PRIORITY_HIGH=5e3,o.default.updateSingletonFactory(r.__dashjs_factory_name,u),e.default=u},138:function(h,e,t){t.r(e);const o=(function(){let n,r=[];const u={},p={};function m(c,v){for(const _ in r){const x=r[_];if(x.context===c&&x.name===v)return x.instance}return null}function g(c,v){return v[c]}function T(c,v,_){c in _&&(_[c]=v)}function f(c,v,_){let x;const te=c.__dashjs_factory_name,oe=v[te];if(oe){let Te=oe.instance;if(!oe.override)return Te.apply({context:v,factory:n},_);x=c.apply({context:v},_),Te=Te.apply({context:v,factory:n,parent:x},_);for(const Se in Te)x.hasOwnProperty(Se)&&(x[Se]=Te[Se])}else x=c.apply({context:v},_);return x.getClassName=function(){return te},x}return n={deleteSingletonInstances:function(c){r=r.filter((v=>v.context!==c))},extend:function(c,v,_,x){!x[c]&&v&&(x[c]={instance:v,override:_})},getClassFactory:function(c){let v=g(c.__dashjs_factory_name,p);return v||(v=function(_){return _===void 0&&(_={}),{create:function(){return f(c,_,arguments)}}},p[c.__dashjs_factory_name]=v),v},getClassFactoryByName:function(c){return g(c,p)},getSingletonFactory:function(c){let v=g(c.__dashjs_factory_name,u);return v||(v=function(_){let x;return _===void 0&&(_={}),{getInstance:function(){return x||(x=m(_,c.__dashjs_factory_name)),x||(x=f(c,_,arguments),r.push({name:c.__dashjs_factory_name,context:_,instance:x})),x}}},u[c.__dashjs_factory_name]=v),v},getSingletonFactoryByName:function(c){return g(c,u)},getSingletonInstance:m,setSingletonInstance:function(c,v,_){for(const x in r){const te=r[x];if(te.context===c&&te.name===v)return void(r[x].instance=_)}r.push({name:v,context:c,instance:_})},updateClassFactory:function(c,v){T(c,v,p)},updateSingletonFactory:function(c,v){T(c,v,u)}},n})();e.default=o},8261:function(h,e,t){t.r(e);var o=t(138),n=t(7263),r=t(649),u=t(5212),p=t(7568),m=t(8850),g=t(3621),T=t(4246);function f(){let v;const _=this.context,x=(0,m.default)(_).getInstance(),te={"streaming.delay.liveDelay":g.default.SETTING_UPDATED_LIVE_DELAY,"streaming.delay.liveDelayFragmentCount":g.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,"streaming.liveCatchup.enabled":g.default.SETTING_UPDATED_CATCHUP_ENABLED,"streaming.liveCatchup.playbackRate.min":g.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,"streaming.liveCatchup.playbackRate.max":g.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,"streaming.abr.rules.throughputRule.active":g.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.bolaRule.active":g.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.insufficientBufferRule.active":g.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.switchHistoryRule.active":g.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.droppedFramesRule.active":g.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.abandonRequestsRule.active":g.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.l2ARule.active":g.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.rules.loLPRule.active":g.default.SETTING_UPDATED_ABR_ACTIVE_RULES,"streaming.abr.maxBitrate.video":g.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.maxBitrate.audio":g.default.SETTING_UPDATED_MAX_BITRATE,"streaming.abr.minBitrate.video":g.default.SETTING_UPDATED_MIN_BITRATE,"streaming.abr.minBitrate.audio":g.default.SETTING_UPDATED_MIN_BITRATE},oe={debug:{logLevel:r.default.LOG_LEVEL_WARNING,dispatchEvent:!1},streaming:{abandonLoadTimeout:1e4,wallclockTimeUpdateInterval:100,manifestUpdateRetryInterval:100,liveUpdateTimeThresholdInMilliseconds:0,cacheInitSegments:!1,applyServiceDescription:!0,applyProducerReferenceTime:!0,applyContentSteering:!0,enableManifestDurationMismatchFix:!0,parseInbandPrft:!1,enableManifestTimescaleMismatchFix:!1,capabilities:{filterUnsupportedEssentialProperties:!0,supportedEssentialProperties:[{schemeIdUri:u.default.FONT_DOWNLOAD_DVB_SCHEME},{schemeIdUri:u.default.COLOUR_PRIMARIES_SCHEME_ID_URI,value:/1|5|6|7/},{schemeIdUri:u.default.URL_QUERY_INFO_SCHEME},{schemeIdUri:u.default.EXT_URL_QUERY_INFO_SCHEME},{schemeIdUri:u.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI,value:/0|1|5|6/},{schemeIdUri:u.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI,value:/1|6|13|14|15/},{schemeIdUri:u.default.SEGMENT_SEQUENCE_REPRESENTATION_SCHEME_ID_URI},...u.default.THUMBNAILS_SCHEME_ID_URIS.map((Re=>({schemeIdUri:Re})))],useMediaCapabilitiesApi:!0,filterVideoColorimetryEssentialProperties:!1,filterHDRMetadataFormatEssentialProperties:!1,filterAudioChannelConfiguration:!1},events:{eventControllerRefreshDelay:100,deleteEventMessageDataTimeout:1e4},timeShiftBuffer:{calcFromSegmentTimeline:!1,fallbackToSegmentTimeline:!0},metrics:{maxListDepth:100},delay:{liveDelayFragmentCount:NaN,liveDelay:NaN,useSuggestedPresentationDelay:!0},protection:{keepProtectionMediaKeys:!1,keepProtectionMediaKeysMaximumOpenSessions:-1,ignoreEmeEncryptedEvent:!1,detectPlayreadyMessageFormat:!0,ignoreKeyStatuses:!1},buffer:{enableSeekDecorrelationFix:!1,fastSwitchEnabled:null,flushBufferAtTrackSwitch:!1,reuseExistingSourceBuffers:!0,bufferPruningInterval:10,bufferToKeep:20,bufferTimeAtTopQuality:30,bufferTimeAtTopQualityLongForm:60,initialBufferLevel:NaN,bufferTimeDefault:18,longFormContentDurationThreshold:600,stallThreshold:.3,lowLatencyStallThreshold:.3,useAppendWindow:!0,setStallState:!0,avoidCurrentTimeRangePruning:!1,useChangeType:!0,mediaSourceDurationInfinity:!0,resetSourceBuffersForTrackSwitch:!1,syntheticStallEvents:{enabled:!1,ignoreReadyState:!1}},gaps:{jumpGaps:!0,jumpLargeGaps:!0,smallGapLimit:1.5,threshold:.3,enableSeekFix:!0,enableStallFix:!1,stallSeek:.1,seekOffset:0},utcSynchronization:{enabled:!0,useManifestDateHeaderTimeSource:!0,backgroundAttempts:2,timeBetweenSyncAttempts:30,maximumTimeBetweenSyncAttempts:600,minimumTimeBetweenSyncAttempts:2,timeBetweenSyncAttemptsAdjustmentFactor:2,maximumAllowedDrift:100,enableBackgroundSyncAfterSegmentDownloadError:!0,defaultTimingSource:{scheme:"urn:mpeg:dash:utc:http-xsdate:2014",value:"https://time.akamai.com/?iso&ms"},artificialTimeOffsetToApply:0},scheduling:{defaultTimeout:500,lowLatencyTimeout:0,scheduleWhilePaused:!0},text:{defaultEnabled:!0,dispatchForManualRendering:!1,extendSegmentedCues:!0,imsc:{displayForcedOnlyMode:!1,enableRollUp:!0},webvtt:{customRenderingEnabled:!1}},liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN},playbackBufferMin:.5,enabled:null,mode:u.default.LIVE_CATCHUP_MODE_DEFAULT},lastBitrateCachingInfo:{enabled:!0,ttl:36e4},lastMediaSettingsCachingInfo:{enabled:!0,ttl:36e4},saveLastMediaSettingsForCurrentStreamingSession:!0,cacheLoadThresholds:{video:10,audio:5},trackSwitchMode:{audio:u.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE,video:u.default.TRACK_SWITCH_MODE_NEVER_REPLACE},includePreselectionsInMediainfoArray:!0,includePreselectionsForInitialTrackSelection:!1,ignoreSelectionPriority:!1,prioritizeRoleMain:!0,assumeDefaultRoleAsMain:!0,selectionModeForInitialTrack:u.default.TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY,fragmentRequestTimeout:2e4,fragmentRequestProgressTimeout:-1,manifestRequestTimeout:1e4,retryIntervals:{[p.HTTPRequest.MPD_TYPE]:500,[p.HTTPRequest.XLINK_EXPANSION_TYPE]:500,[p.HTTPRequest.MEDIA_SEGMENT_TYPE]:1e3,[p.HTTPRequest.INIT_SEGMENT_TYPE]:1e3,[p.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:1e3,[p.HTTPRequest.INDEX_SEGMENT_TYPE]:1e3,[p.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:1e3,[p.HTTPRequest.LICENSE]:1e3,[p.HTTPRequest.OTHER_TYPE]:1e3,lowLatencyReductionFactor:10},retryAttempts:{[p.HTTPRequest.MPD_TYPE]:3,[p.HTTPRequest.XLINK_EXPANSION_TYPE]:1,[p.HTTPRequest.MEDIA_SEGMENT_TYPE]:3,[p.HTTPRequest.INIT_SEGMENT_TYPE]:3,[p.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:3,[p.HTTPRequest.INDEX_SEGMENT_TYPE]:3,[p.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE]:3,[p.HTTPRequest.LICENSE]:3,[p.HTTPRequest.OTHER_TYPE]:3,lowLatencyMultiplyFactor:5},abr:{limitBitrateByPortal:!1,usePixelRatioInLimitBitrateByPortal:!1,enableSupplementalPropertyAdaptationSetSwitching:!0,rules:{throughputRule:{active:!0,priority:T.default.PRIORITY.DEFAULT},bolaRule:{active:!0,priority:T.default.PRIORITY.DEFAULT},insufficientBufferRule:{active:!0,priority:T.default.PRIORITY.DEFAULT,parameters:{throughputSafetyFactor:.7,segmentIgnoreCount:2}},switchHistoryRule:{active:!0,priority:T.default.PRIORITY.DEFAULT,parameters:{sampleSize:8,switchPercentageThreshold:.075}},droppedFramesRule:{active:!1,priority:T.default.PRIORITY.DEFAULT,parameters:{minimumSampleSize:375,droppedFramesPercentageThreshold:.15}},abandonRequestsRule:{active:!0,priority:T.default.PRIORITY.DEFAULT,parameters:{abandonDurationMultiplier:1.8,minSegmentDownloadTimeThresholdInMs:500,minThroughputSamplesThreshold:6}},l2ARule:{active:!1,priority:T.default.PRIORITY.DEFAULT},loLPRule:{active:!1,priority:T.default.PRIORITY.DEFAULT}},throughput:{averageCalculationMode:u.default.THROUGHPUT_CALCULATION_MODES.EWMA,lowLatencyDownloadTimeCalculationMode:u.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING,useResourceTimingApi:!0,useNetworkInformationApi:{xhr:!1,fetch:!1},useDeadTimeLatency:!0,bandwidthSafetyFactor:.9,sampleSettings:{live:3,vod:4,enableSampleSizeAdjustment:!0,decreaseScale:.7,increaseScale:1.3,maxMeasurementsToKeep:20,averageLatencySampleAmount:4},ewma:{throughputSlowHalfLifeSeconds:8,throughputFastHalfLifeSeconds:3,latencySlowHalfLifeCount:2,latencyFastHalfLifeCount:1,weightDownloadTimeMultiplicationFactor:.0015}},maxBitrate:{audio:-1,video:-1},minBitrate:{audio:-1,video:-1},initialBitrate:{audio:-1,video:-1},autoSwitchBitrate:{audio:!0,video:!0}},cmcd:{applyParametersFromMpd:!0,enabled:!1,sid:null,cid:null,rtp:null,rtpSafetyFactor:5,mode:u.default.CMCD_MODE_QUERY,enabledKeys:u.default.CMCD_AVAILABLE_KEYS,includeInRequests:["segment","mpd"],version:1},cmsd:{enabled:!1,abr:{applyMb:!1,etpWeightRatio:0}},enhancement:{enabled:!1,codecs:["lvc1"]},defaultSchemeIdUri:{viewpoint:"",audioChannelConfiguration:"urn:mpeg:mpegB:cicp:ChannelConfiguration",role:"urn:mpeg:dash:role:2011",accessibility:"urn:mpeg:dash:role:2011"}},errors:{recoverAttempts:{mediaErrorDecode:5}}};let Te=n.default.clone(oe);function Se(Re,Be,De){for(let re in Re)Re.hasOwnProperty(re)&&(Be.hasOwnProperty(re)?typeof Re[re]!="object"||Re[re]instanceof RegExp||Re[re]instanceof Array||Re[re]===null?(Be[re]=n.default.clone(Re[re]),te[De+re]&&x.trigger(te[De+re])):Se(Re[re],Be[re],De.slice()+re+"."):console.error("Settings parameter "+De+re+" is not supported"))}return v={get:function(){return Te},update:function(Re){typeof Re=="object"&&Se(Re,Te,"")},reset:function(){Te=n.default.clone(oe)}},v}f.__dashjs_factory_name="Settings";let c=o.default.getSingletonFactory(f);e.default=c},7263:function(h,e,t){t.r(e);var o=t(3282),n=t(8571),r=t(5212);class u{static mixin(m,g,T){let f,c={};if(m)for(let v in g)g.hasOwnProperty(v)&&(f=g[v],v in m&&(m[v]===f||v in c&&c[v]===f)||(typeof m[v]=="object"&&m[v]!==null?m[v]=u.mixin(m[v],f,T):m[v]=T(f)));return m}static clone(m){if(!m||typeof m!="object")return m;if(m instanceof RegExp)return new RegExp(m);let g;if(m instanceof Array){g=[];for(let T=0,f=m.length;T<f;++T)T in m&&g.push(u.clone(m[T]))}else g={};return u.mixin(g,m,u.clone)}static addAdditionalQueryParameterToUrl(m,g){try{if(!g||g.length===0)return m;let T=m;return g.forEach((({key:f,value:c})=>{const v=T.includes("?")?"&":"?";T+=`${v}${encodeURIComponent(f)}=${encodeURIComponent(c)}`})),T}catch{return m}}static removeQueryParameterFromUrl(m,g){if(!m||!g)return m;const T=new URL(m),f=new URLSearchParams(T.search);if(!f||f.size===0||!f.has(g))return m;f.delete(g);const c=Array.from(f.entries()).map((([_,x])=>`${_}=${x}`)).join("&"),v=`${T.origin}${T.pathname}`;return c?`${v}?${c}`:v}static parseHttpHeaders(m){let g={};if(!m)return g;let T=m.trim().split(`\r
`);for(let f=0,c=T.length;f<c;f++){let v=T[f],_=v.indexOf(": ");_>0&&(g[v.substring(0,_)]=v.substring(_+2))}return g}static parseQueryParams(m){const g=[],T=new URLSearchParams(m);for(const[f,c]of T.entries())g.push({key:decodeURIComponent(f),value:decodeURIComponent(c)});return g}static generateUuid(){let m=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(g){const T=(m+16*Math.random())%16|0;return m=Math.floor(m/16),(g=="x"?T:3&T|8).toString(16)}))}static generateHashCode(m){let g=0;if(m.length===0)return g;for(let T=0;T<m.length;T++)g=(g<<5)-g+m.charCodeAt(T),g|=0;return g}static getRelativeUrl(m,g){try{const T=new URL(m),f=new URL(g);if(T.protocol=f.protocol,T.origin!==f.origin)return g;let c=o.relative(T.pathname.substr(0,T.pathname.lastIndexOf("/")),f.pathname.substr(0,f.pathname.lastIndexOf("/")));const v=c.length===0?1:0;return c+=f.pathname.substr(f.pathname.lastIndexOf("/")+v,f.pathname.length-1),f.pathname.length<c.length?f.pathname:c}catch{return g}}static getHostFromUrl(m){try{return new URL(m).host}catch{return null}}static parseUserAgent(m=null){try{const g=m===null&&typeof navigator<"u"?navigator.userAgent.toLowerCase():"";return(0,n.UAParser)(g)}catch{return{}}}static stringHasProtocol(m){return/(http(s?)):\/\//i.test(m)}static bufferSourceToDataView(m){return u.toDataView(m,DataView)}static bufferSourceToInt8(m){return u.toDataView(m,Uint8Array)}static uint8ArrayToString(m){return new TextDecoder("utf-8").decode(m)}static bufferSourceToHex(m){const g=u.bufferSourceToInt8(m);let T="";for(let f of g)f=f.toString(16),f.length===1&&(f="0"+f),T+=f;return T}static toDataView(m,g){const T=u.getArrayBuffer(m);let f=1;"BYTES_PER_ELEMENT"in DataView&&(f=DataView.BYTES_PER_ELEMENT);const c=((m.byteOffset||0)+m.byteLength)/f,v=(m.byteOffset||0)/f,_=Math.floor(Math.max(0,Math.min(v,c)));return new g(T,_,Math.floor(Math.min(_+Math.max(1/0,0),c))-_)}static getArrayBuffer(m){return m instanceof ArrayBuffer?m:m.buffer}static getCodecFamily(m){const{base:g,profile:T}=u._getCodecParts(m);switch(g){case"mp4a":switch(T){case"69":case"6b":case"40.34":return r.default.CODEC_FAMILIES.MP3;case"66":case"67":case"68":case"40.2":case"40.02":case"40.5":case"40.05":case"40.29":case"40.42":return r.default.CODEC_FAMILIES.AAC;case"a5":return r.default.CODEC_FAMILIES.AC3;case"e6":return r.default.CODEC_FAMILIES.EC3;case"b2":return r.default.CODEC_FAMILIES.DTSX;case"a9":return r.default.CODEC_FAMILIES.DTSC}break;case"avc1":case"avc3":return r.default.CODEC_FAMILIES.AVC;case"hvc1":case"hvc3":return r.default.CODEC_FAMILIES.HEVC;default:return g}return g}static _getCodecParts(m){const[g,...T]=m.split(".");return{base:g,profile:T.join(".")}}}e.default=u},8986:function(h,e,t){t.r(e),t.d(e,{getVersionString:function(){return n}});const o="5.1.1";function n(){return o}},8748:function(h,e,t){t.r(e),e.default=class{extend(o,n){if(!o)return;let r=!!n&&n.override,u=!!n&&n.publicOnly;for(const p in o)!o.hasOwnProperty(p)||this[p]&&!r||u&&o[p].indexOf("public_")===-1||(this[p]=o[p])}}},5734:function(h,e,t){t.r(e);var o=t(7252);class n extends o.default{constructor(){super(),this.ATTEMPT_BACKGROUND_SYNC="attemptBackgroundSync",this.BUFFERING_COMPLETED="bufferingCompleted",this.BUFFER_CLEARED="bufferCleared",this.BUFFER_REPLACEMENT_STARTED="bufferReplacementStarted",this.BYTES_APPENDED_END_FRAGMENT="bytesAppendedEndFragment",this.CHECK_FOR_EXISTENCE_COMPLETED="checkForExistenceCompleted",this.CMSD_STATIC_HEADER="cmsdStaticHeader",this.CURRENT_TRACK_CHANGED="currentTrackChanged",this.DATA_UPDATE_COMPLETED="dataUpdateCompleted",this.INBAND_EVENTS="inbandEvents",this.INITIAL_STREAM_SWITCH="initialStreamSwitch",this.INIT_FRAGMENT_LOADED="initFragmentLoaded",this.INIT_FRAGMENT_NEEDED="initFragmentNeeded",this.INTERNAL_MANIFEST_LOADED="internalManifestLoaded",this.LOADING_ABANDONED="loadingAborted",this.LOADING_COMPLETED="loadingCompleted",this.LOADING_DATA_PROGRESS="loadingDataProgress",this.LOADING_PROGRESS="loadingProgress",this.MANIFEST_UPDATED="manifestUpdated",this.MEDIAINFO_UPDATED="mediaInfoUpdated",this.MEDIA_FRAGMENT_LOADED="mediaFragmentLoaded",this.MEDIA_FRAGMENT_NEEDED="mediaFragmentNeeded",this.ORIGINAL_MANIFEST_LOADED="originalManifestLoaded",this.QUOTA_EXCEEDED="quotaExceeded",this.SEEK_TARGET="seekTarget",this.SEGMENT_LOCATION_BLACKLIST_ADD="segmentLocationBlacklistAdd",this.SEGMENT_LOCATION_BLACKLIST_CHANGED="segmentLocationBlacklistChanged",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD="serviceLocationBlacklistAdd",this.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED="serviceLocationBlacklistChanged",this.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD="serviceLocationLocationBlacklistAdd",this.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED="serviceLocationLocationBlacklistChanged",this.SETTING_UPDATED_ABR_ACTIVE_RULES="settingUpdatedAbrActiveRules",this.SETTING_UPDATED_CATCHUP_ENABLED="settingUpdatedCatchupEnabled",this.SETTING_UPDATED_LIVE_DELAY="settingUpdatedLiveDelay",this.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT="settingUpdatedLiveDelayFragmentCount",this.SETTING_UPDATED_MAX_BITRATE="settingUpdatedMaxBitrate",this.SETTING_UPDATED_MIN_BITRATE="settingUpdatedMinBitrate",this.SETTING_UPDATED_PLAYBACK_RATE_MAX="settingUpdatedPlaybackRateMax",this.SETTING_UPDATED_PLAYBACK_RATE_MIN="settingUpdatedPlaybackRateMin",this.SET_FRAGMENTED_TEXT_AFTER_DISABLED="setFragmentedTextAfterDisabled",this.SET_NON_FRAGMENTED_TEXT="setNonFragmentedText",this.SOURCE_BUFFER_ERROR="sourceBufferError",this.STREAMS_COMPOSED="streamsComposed",this.STREAM_BUFFERING_COMPLETED="streamBufferingCompleted",this.STREAM_REQUESTING_COMPLETED="streamRequestingCompleted",this.TEXT_TRACKS_QUEUE_INITIALIZED="textTracksQueueInitialized",this.TIME_SYNCHRONIZATION_COMPLETED="timeSynchronizationComplete",this.UPDATE_TIME_SYNC_OFFSET="updateTimeSyncOffset",this.URL_RESOLUTION_FAILED="urlResolutionFailed",this.VIDEO_CHUNK_RECEIVED="videoChunkReceived",this.VIDEO_ELEMENT_RESIZED="videoElementResized",this.WALLCLOCK_TIME_UPDATED="wallclockTimeUpdated",this.XLINK_ELEMENT_LOADED="xlinkElementLoaded",this.XLINK_READY="xlinkReady"}}e.default=n},3621:function(h,e,t){t.r(e);var o=t(5734);class n extends o.default{}let r=new n;e.default=r},7252:function(h,e,t){t.r(e),e.default=class{extend(o,n){if(!o)return;let r=!!n&&n.override,u=!!n&&n.publicOnly;for(const p in o)!o.hasOwnProperty(p)||this[p]&&!r||u&&o[p].indexOf("public_")===-1||(this[p]=o[p])}}},8854:function(h,e,t){t.r(e),e.default={ACCESSIBILITY:"Accessibility",ADAPTATION_SET:"AdaptationSet",ADAPTATION_SETS:"adaptationSets",ADAPTATION_SET_SWITCHING_SCHEME_ID_URI:"urn:mpeg:dash:adaptation-set-switching:2016",ADD:"add",ASSET_IDENTIFIER:"AssetIdentifier",AUDIO_CHANNEL_CONFIGURATION:"AudioChannelConfiguration",AUDIO_SAMPLING_RATE:"audioSamplingRate",AVAILABILITY_END_TIME:"availabilityEndTime",AVAILABILITY_START_TIME:"availabilityStartTime",AVAILABILITY_TIME_COMPLETE:"availabilityTimeComplete",AVAILABILITY_TIME_OFFSET:"availabilityTimeOffset",BANDWITH:"bandwidth",BASE_URL:"BaseURL",BITSTREAM_SWITCHING:"BitstreamSwitching",BITSTREAM_SWITCHING_MINUS:"bitstreamSwitching",BYTE_RANGE:"byteRange",CAPTION:"caption",CENC_DEFAULT_KID:"cenc:default_KID",CLIENT_DATA_REPORTING:"ClientDataReporting",CLIENT_REQUIREMENT:"clientRequirement",CMCD_PARAMETERS:"CMCDParameters",CODECS:"codecs",CODEC_PRIVATE_DATA:"codecPrivateData",CODING_DEPENDENCY:"codingDependency",CONTENT_COMPONENT:"ContentComponent",CONTENT_PROTECTION:"ContentProtection",CONTENT_STEERING:"ContentSteering",CONTENT_STEERING_RESPONSE:{VERSION:"VERSION",TTL:"TTL",RELOAD_URI:"RELOAD-URI",PATHWAY_PRIORITY:"PATHWAY-PRIORITY",PATHWAY_CLONES:"PATHWAY-CLONES",BASE_ID:"BASE-ID",ID:"ID",URI_REPLACEMENT:"URI-REPLACEMENT",HOST:"HOST",PARAMS:"PARAMS"},CONTENT_TYPE:"contentType",DEFAULT_SERVICE_LOCATION:"defaultServiceLocation",DEPENDENCY_ID:"dependencyId",DURATION:"duration",DVB_PRIORITY:"dvb:priority",DVB_WEIGHT:"dvb:weight",DVB_URL:"dvb:url",DVB_MIMETYPE:"dvb:mimeType",DVB_FONTFAMILY:"dvb:fontFamily",DYNAMIC:"dynamic",END_NUMBER:"endNumber",ESSENTIAL_PROPERTY:"EssentialProperty",EVENT:"Event",EVENT_STREAM:"EventStream",FORCED_SUBTITLE:"forced-subtitle",FRAMERATE:"frameRate",FRAME_PACKING:"FramePacking",GROUP_LABEL:"GroupLabel",HEIGHT:"height",ID:"id",INBAND:"inband",INBAND_EVENT_STREAM:"InbandEventStream",INDEX:"index",INDEX_RANGE:"indexRange",INITIALIZATION:"Initialization",INITIALIZATION_MINUS:"initialization",LA_URL:"Laurl",LA_URL_LOWER_CASE:"laurl",LABEL:"Label",LANG:"lang",LOCATION:"Location",MAIN:"main",MAXIMUM_SAP_PERIOD:"maximumSAPPeriod",MAX_PLAYOUT_RATE:"maxPlayoutRate",MAX_SEGMENT_DURATION:"maxSegmentDuration",MAX_SUBSEGMENT_DURATION:"maxSubsegmentDuration",MEDIA:"media",MEDIA_PRESENTATION_DURATION:"mediaPresentationDuration",MEDIA_RANGE:"mediaRange",MEDIA_STREAM_STRUCTURE_ID:"mediaStreamStructureId",METRICS:"Metrics",METRICS_MINUS:"metrics",MIME_TYPE:"mimeType",MINIMUM_UPDATE_PERIOD:"minimumUpdatePeriod",MIN_BUFFER_TIME:"minBufferTime",MP4_PROTECTION_SCHEME:"urn:mpeg:dash:mp4protection:2011",MPD:"MPD",MPD_TYPE:"mpd",MPD_PATCH_TYPE:"mpdpatch",ORDER:"order",ORIGINAL_MPD_ID:"mpdId",ORIGINAL_PUBLISH_TIME:"originalPublishTime",PATCH_LOCATION:"PatchLocation",PERIOD:"Period",PRESELECTION:"Preselection",PRESELECTION_COMPONENTS:"preselectionComponents",PRESENTATION_TIME:"presentationTime",PRESENTATION_TIME_OFFSET:"presentationTimeOffset",PRO:"pro",PRODUCER_REFERENCE_TIME:"ProducerReferenceTime",PRODUCER_REFERENCE_TIME_TYPE:{ENCODER:"encoder",CAPTURED:"captured",APPLICATION:"application"},PROFILES:"profiles",PSSH:"pssh",PUBLISH_TIME:"publishTime",QUALITY_RANKING:"qualityRanking",QUERY_BEFORE_START:"queryBeforeStart",QUERY_PART:"$querypart$",RANGE:"range",RATING:"Rating",REF:"ref",REF_ID:"refId",REMOVE:"remove",REPLACE:"replace",REPORTING:"Reporting",REPRESENTATION:"Representation",REPRESENTATION_INDEX:"RepresentationIndex",ROBUSTNESS:"robustness",ROLE:"Role",S:"S",SAR:"sar",SCAN_TYPE:"scanType",SEGMENT_ALIGNMENT:"segmentAlignment",SEGMENT_BASE:"SegmentBase",SEGMENT_LIST:"SegmentList",SEGMENT_PROFILES:"segmentProfiles",SEGMENT_SEQUENCE_PROPERTIES:"SegmentSequenceProperties",SEGMENT_TEMPLATE:"SegmentTemplate",SEGMENT_TIMELINE:"SegmentTimeline",SEGMENT_TYPE:"segment",SEGMENT_URL:"SegmentURL",SERVICE_DESCRIPTION:"ServiceDescription",SERVICE_DESCRIPTION_LATENCY:"Latency",SERVICE_DESCRIPTION_OPERATING_BANDWIDTH:"OperatingBandwidth",SERVICE_DESCRIPTION_OPERATING_QUALITY:"OperatingQuality",SERVICE_DESCRIPTION_PLAYBACK_RATE:"PlaybackRate",SERVICE_DESCRIPTION_SCOPE:"Scope",SERVICE_LOCATION:"serviceLocation",SERVICE_LOCATIONS:"serviceLocations",SOURCE_URL:"sourceURL",START:"start",START_NUMBER:"startNumber",START_WITH_SAP:"startWithSAP",STATIC:"static",STEERING_TYPE:"steering",SUBSET:"Subset",SUBTITLE:"subtitle",SUB_REPRESENTATION:"SubRepresentation",SUB_SEGMENT_ALIGNMENT:"subsegmentAlignment",SUGGESTED_PRESENTATION_DELAY:"suggestedPresentationDelay",SUPPLEMENTAL_PROPERTY:"SupplementalProperty",SUPPLEMENTAL_CODECS:"scte214:supplementalCodecs",TAG:"tag",TIMESCALE:"timescale",TIMESHIFT_BUFFER_DEPTH:"timeShiftBufferDepth",TTL:"ttl",TYPE:"type",UTC_TIMING:"UTCTiming",VALUE:"value",VIEWPOINT:"Viewpoint",WALL_CLOCK_TIME:"wallClockTime",WIDTH:"width"}},5717:function(h,e,t){t.r(e),e.default=class{constructor(){this.schemeIdUri="",this.value=""}}},8200:function(h,e,t){t.r(e),t.d(e,{default:function(){return mm}});var o=t(138),n=t(4246),r={TCP_CONNECTION:"TcpList",HTTP_REQUEST:"HttpList",TRACK_SWITCH:"RepSwitchList",BUFFER_LEVEL:"BufferLevel",BUFFER_LOADED:"bufferLoaded",ABANDON_LOAD:"abandonload",ALLOW_LOAD:"allowload",BUFFER_EMPTY:"bufferStalled",BUFFER_STATE:"BufferState",DVR_INFO:"DVRInfo",DROPPED_FRAMES:"DroppedFrames",SCHEDULING_INFO:"SchedulingInfo",REQUESTS_QUEUE:"RequestsQueue",MANIFEST_UPDATE:"ManifestUpdate",MANIFEST_UPDATE_STREAM_INFO:"ManifestUpdatePeriodInfo",MANIFEST_UPDATE_TRACK_INFO:"ManifestUpdateRepresentationInfo",PLAY_LIST:"PlayList",DVB_ERRORS:"DVBErrors",HTTP_REQUEST_DVB_REPORTING_TYPE:"DVBReporting"},u=t(649),p=t(8261);function m(l){l=l||{};const i=this.context,d=l.dashMetrics;let y,b,E;return y={getSwitchRequest:function(C){try{const k=(0,n.default)(i).create();k.rule=this.getClassName();const S=C.getMediaInfo(),L=C.getMediaType(),P=d.getCurrentBufferState(L),w=C.getScheduleController(),R=C.getAbrController(),N=C.getStreamInfo(),F=N?N.id:null,q=N&&N.manifestInfo?N.manifestInfo.isDynamic:null,H=C.getThroughputController(),U=H.getSafeAverageThroughput(L),Q=H.getAverageLatency(L);return isNaN(U)||!P||R.getAbandonmentStateFor(F,L)===r.ALLOW_LOAD&&(P.state===r.BUFFER_LOADED||q)&&(k.representation=R.getOptimalRepresentationForBitrate(S,U,!0),k.priority=b.get().streaming.abr.rules.throughputRule.priority,k.reason={throughput:U,latency:Q,message:`[ThroughputRule]: Switching to Representation with bitrate ${k.representation?k.representation.bitrateInKbit:"n/a"} kbit/s. Throughput: ${U}`},w.setTimeToLoadDelay(0)),k}catch(k){return E.error(k),(0,n.default)(i).create()}},reset:function(){}},E=(0,u.default)(i).getInstance().getLogger(y),b=(0,p.default)(i).getInstance(),y}m.__dashjs_factory_name="ThroughputRule";var g=o.default.getClassFactory(m),T=t(8850),f=t(3621),c=t(5212),v=t(1191);function _(l){l=l||{};const i=this.context,d=(0,T.default)(i).getInstance(),y=l.dashMetrics,b=(0,p.default)(i).getInstance();let E,C,k;function S(){const w=b.get().streaming.abr.rules.insufficientBufferRule.parameters.segmentIgnoreCount;k={},k[c.default.VIDEO]={ignoreCount:w},k[c.default.AUDIO]={ignoreCount:w},k[c.default.ENHANCEMENT]={ignoreCount:w}}function L(){S()}function P(w){isNaN(w.startTime)||w.mediaType!==c.default.AUDIO&&w.mediaType!==c.default.VIDEO||k[w.mediaType].ignoreCount>0&&k[w.mediaType].ignoreCount--}return E={getSwitchRequest:function(w){const R=(0,n.default)(i).create();if(R.rule=this.getClassName(),!w||!w.hasOwnProperty("getMediaType"))return R;const N=w.getMediaType(),F=y.getCurrentBufferState(N),q=w.getRepresentation().fragmentDuration;if(!(function(Q,ee,ne){return!Q.getLowLatencyModeEnabled()&&k[ee].ignoreCount<=0&&ne})(w.getScheduleController().getPlaybackController(),N,q))return R;const H=w.getMediaInfo(),U=w.getAbrController();if(F&&F.state===r.BUFFER_EMPTY)C.debug("["+N+"] Switch to index 0; buffer is empty."),R.representation=U.getOptimalRepresentationForBitrate(H,0,!0),R.reason={message:"[InsufficientBufferRule]: Switching to lowest Representation because buffer is empty"};else{const Q=w.getThroughputController(),ee=y.getCurrentBufferLevel(N),ne=Q.getAverageThroughput(N,null,NaN)*b.get().streaming.abr.rules.insufficientBufferRule.parameters.throughputSafetyFactor*ee/q;if(isNaN(ne)||ne<=0)return R;R.representation=U.getOptimalRepresentationForBitrate(H,ne,!0),R.priority=b.get().streaming.abr.rules.insufficientBufferRule.priority,R.reason={message:"[InsufficientBufferRule]: Limiting maximum bitrate to avoid a buffer underrun.",bitrate:ne}}return R},reset:function(){S(),d.off(v.default.PLAYBACK_SEEKING,L,E),d.off(f.default.BYTES_APPENDED_END_FRAGMENT,P,E)}},C=(0,u.default)(i).getInstance().getLogger(E),S(),d.on(v.default.PLAYBACK_SEEKING,L,E),d.on(f.default.BYTES_APPENDED_END_FRAGMENT,P,E),E}_.__dashjs_factory_name="InsufficientBufferRule";var x=o.default.getClassFactory(_);function te(l){const i=(l=l||{}).mediaPlayerModel,d=l.dashMetrics,y=this.context,b=(0,p.default)(y).getInstance();let E,C,k;function S(){k={}}return E={shouldAbandon:function(L){const P=(0,n.default)(y).create();P.rule=this.getClassName();try{if(!L)return P;const w=L.getCurrentRequest();if(!isNaN(w.index)){if(w.firstByteDate===null||k.hasOwnProperty(w.index))return P;const R=i.getBufferTimeDefault(),N=L.getMediaType();if(d.getCurrentBufferLevel(N)>R)return P;const F=Date.now()-w.firstByteDate.getTime();if(w.traces.length>=b.get().streaming.abr.rules.abandonRequestsRule.parameters.minThroughputSamplesThreshold&&F>b.get().streaming.abr.rules.abandonRequestsRule.parameters.minSegmentDownloadTimeThresholdInMs&&w.bytesLoaded<w.bytesTotal)return(function(q,H,U){const Q=q.getMediaInfo(),ee=q.getMediaType(),ne=H.traces.reduce(((ce,V)=>ce+V.b[0]),0)-H.traces[0].b[0],le=Math.max(H.traces.reduce(((ce,V)=>ce+V.d),0)-H.traces[0].d,1),j=Math.round(8*ne/le),O=Number(8*H.bytesTotal/j/1e3).toFixed(2),D=q.getRepresentation(),M=q.getAbrController();if(O<H.duration*b.get().streaming.abr.rules.abandonRequestsRule.parameters.abandonDurationMultiplier||M.isPlayingAtLowestQuality(D))return U;if(!k.hasOwnProperty(H.index)){const ce=q.getAbrController(),V=H.bytesTotal-H.bytesLoaded,me=ce.getOptimalRepresentationForBitrate(Q,j,!0),ue=H.representation;V>H.bytesTotal*me.bitrateInKbit/ue.bitrateInKbit&&(U.representation=me,U.priority=b.get().streaming.abr.rules.abandonRequestsRule.priority,U.reason={throughputInKbit:j,message:`[AbandonRequestRule][${ee} is asking to abandon and switch to quality to ${me.absoluteIndex}. The measured bandwidth was ${j} kbit/s`},k[H.index]=!0)}return U})(L,w,P)}return P}catch(w){return C.error(w),P}},reset:S},C=(0,u.default)(y).getInstance().getLogger(E),S(),E}te.__dashjs_factory_name="AbandonRequestsRule";var oe=o.default.getClassFactory(te);function Te(){const l=this.context,i=(0,p.default)(l).getInstance();let d;return d={getSwitchRequest:function(y){const b=(0,n.default)(l).create();if(b.rule=this.getClassName(),!y||!y.hasOwnProperty("getDroppedFramesHistory"))return b;const E=y.getDroppedFramesHistory();if(!E)return b;const C=y.getStreamInfo().id,k=y.getMediaInfo(),S=y.getAbrController(),L=E.getFrameHistory(C);if(!L||Object.keys(L).length===0)return b;let P=0,w=0;const R=S.getPossibleVoRepresentationsFilteredBySettings(k,!0);let N=null;for(let F=1;F<R.length;F++){const q=R[F];if(q&&L[q.id]&&(P=L[q.id].droppedVideoFrames,w=L[q.id].totalVideoFrames,w>i.get().streaming.abr.rules.droppedFramesRule.parameters.minimumSampleSize&&P/w>i.get().streaming.abr.rules.droppedFramesRule.parameters.droppedFramesPercentageThreshold)){N=R[F-1];break}}return N&&(b.representation=N,b.priority=i.get().streaming.abr.rules.droppedFramesRule.priority,b.reason={droppedFrames:P,message:`[DroppedFramesRule]: Switching to index ${N.absoluteIndex}. Dropped Frames: ${P}, Total Frames: ${w}`}),b}},d}Te.__dashjs_factory_name="DroppedFramesRule";var Se=o.default.getClassFactory(Te);function Re(){const l=this.context,i=(0,p.default)(l).getInstance();let d;return d={getSwitchRequest:function(y){const b=(0,n.default)(l).create();if(b.rule=this.getClassName(),!y)return b;const E=y.getStreamInfo().id,C=y.getMediaType(),k=y?y.getSwitchRequestHistory():null,S=k?k.getSwitchRequests(E,C):{},L=y.getAbrController(),P=y.getMediaInfo(),w=L.getPossibleVoRepresentationsFilteredBySettings(P,!0);let R=0,N=0;for(let F=0;F<w.length;F++){const q=w[F];if(q&&S[q.id]&&(R+=S[q.id].drops,N+=S[q.id].noDrops,R+N>=i.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize&&R/N>i.get().streaming.abr.rules.switchHistoryRule.parameters.switchPercentageThreshold)){b.representation=F>0&&S[q.id].drops>0?w[F-1]:q,b.priority=i.get().streaming.abr.rules.switchHistoryRule.priority,b.reason={drops:R,noDrops:N,message:`[SwitchHistoryRule]: Switch to index: ${b.representation.absoluteIndex} samples: ${R+N} drops:  ${R}`};break}}return b}},d}Re.__dashjs_factory_name="SwitchHistoryRule";var Be=o.default.getClassFactory(Re),De=t(7568);const re="BOLA_STATE_ONE_BITRATE",se="BOLA_STATE_STARTUP",he="BOLA_STATE_STEADY",ve=10;function ke(l){l=l||{};const i=this.context,d=l.dashMetrics,y=l.mediaPlayerModel,b=(0,T.default)(i).getInstance(),E=Wn(i).getInstance();let C,k,S,L;function P(M){const ce=M.mediaType,V=M.streamId,me=ce===c.default.AUDIO?[c.default.AUDIO]:L[V];for(const ue in me)L[V]&&L[V].hasOwnProperty(ue)&&L[V][ue].state===he&&(L[V][ue].placeholderBuffer=0)}function w(M){const ce=M.streamId;for(const V in L[ce])if(L[ce].hasOwnProperty(V)){const me=L[ce][V];me.state!==re&&(me.state=se,R(me))}}function R(M){M.placeholderBuffer=0,M.mostAdvancedSegmentStart=NaN,M.lastSegmentWasReplacement=!1,M.lastSegmentStart=NaN,M.lastSegmentDurationS=NaN,M.lastSegmentRequestTimeMs=NaN,M.lastSegmentFinishTimeMs=NaN}function N(M){try{if(M&&M.metric===r.HTTP_REQUEST&&M.value&&M.value.type===De.HTTPRequest.MEDIA_SEGMENT_TYPE&&M.value.trace&&M.value.trace.length){const ce=L[M.value._streamId]&&L[M.value._streamId][M.mediaType]?L[M.value._streamId][M.mediaType]:null;ce&&ce.state!==re&&(ce.lastSegmentRequestTimeMs=M.value.trequest.getTime(),ce.lastSegmentFinishTimeMs=M.value._tfinish.getTime(),F(ce,M.mediaType))}}catch(ce){k.error(ce)}}function F(M,ce){if(!isNaN(M.lastSegmentStart)&&!isNaN(M.lastSegmentRequestTimeMs)&&!isNaN(M.placeholderBuffer)){if(M.placeholderBuffer*=.99,!isNaN(M.lastSegmentFinishTimeMs)){const V=d.getCurrentBufferLevel(ce)+.001*(M.lastSegmentFinishTimeMs-M.lastSegmentRequestTimeMs),me=Q(M,M.currentRepresentation),ue=Math.max(0,me-V);M.placeholderBuffer=Math.min(ue,M.placeholderBuffer)}M.lastSegmentWasReplacement&&!isNaN(M.lastSegmentDurationS)&&(M.placeholderBuffer+=M.lastSegmentDurationS),M.lastSegmentStart=NaN,M.lastSegmentRequestTimeMs=NaN}}function q(M){if(M&&L[M.streamId]&&L[M.streamId][M.mediaType]){const ce=L[M.streamId][M.mediaType];ce&&ce.state!==re&&(ce.currentRepresentation=M.newRepresentation)}}function H(M,ce,V){const me=V.reduce(((Ie,Ee,B)=>Ee>V[Ie]?B:Ie),0);if(me===0)return null;const ue=Math.max(M,ve+2*ce.length),ge=(V[me]-1)/(ue/ve-1);return{gp:ge,Vp:ve/ge}}function U(M,ce){const V=y.getBufferTimeDefault();if(M.bufferTimeDefault!==V){const me=H(V,M.representations,M.utilities);if(me.Vp!==M.Vp||me.gp!==M.gp){const ue=d.getCurrentBufferLevel(ce);let ge=ue+M.placeholderBuffer;ge-=ve,ge*=me.Vp/M.Vp,ge+=ve,M.bufferTimeDefault=V,M.Vp=me.Vp,M.gp=me.gp,M.placeholderBuffer=Math.max(0,ge-ue)}}}function Q(M,ce){return M.Vp*(M.utilities[ce.absoluteIndex]+M.gp)}function ee(M){if(M&&M.chunk&&M.chunk.representation.mediaInfo&&L[M.streamId]){const ce=L[M.streamId][M.chunk.representation.mediaInfo.type];if(ce&&ce.state!==re){const V=M.chunk.start;isNaN(ce.mostAdvancedSegmentStart)||V>ce.mostAdvancedSegmentStart?(ce.mostAdvancedSegmentStart=V,ce.lastSegmentWasReplacement=!1):ce.lastSegmentWasReplacement=!0,ce.lastSegmentStart=V,ce.lastSegmentDurationS=M.chunk.duration,ce.currentRepresentation=M.chunk.representation,F(ce,M.chunk.representation.mediaInfo.type)}}}function ne(){D()}function le(){S.get().streaming.abr.limitBitrateByPortal&&D()}function j(M,ce){const V=ce.absoluteIndex,me=ce.bandwidth,ue=M.utilities[V];let ge=0;for(let Ie=V-1;Ie>=0;--Ie)if(M.utilities[Ie]<M.utilities[V]){const Ee=M.representations[Ie].bandwidth,B=M.utilities[Ie],K=M.Vp*(M.gp+(me*B-Ee*ue)/(me-Ee));ge=Math.max(ge,K)}return ge}function O(M){if(M&&L[M.streamId]){const ce=L[M.streamId][M.mediaType];if(ce&&ce.state!==re){const V=d.getCurrentBufferLevel(M.mediaType);let me;me=ce.currentRepresentation.absoluteIndex>0?j(ce,ce.currentRepresentation):ve;const ue=Math.max(0,me-V);ce.placeholderBuffer=Math.min(ce.placeholderBuffer,ue)}}}function D(){L={}}return C={getSwitchRequest:function(M){try{const ce=(0,n.default)(i).create();M.getScheduleController().setTimeToLoadDelay(0),ce.rule=this.getClassName(),ce.reason=ce.reason||{};const V=(function(me){const ue=me.getMediaType(),ge=me.getStreamInfo().id;L[ge]||(L={},L[ge]={});let Ie=L[ge][ue];return Ie?Ie.state!==re&&U(Ie,ue):(Ie=(function(Ee){const B={},K=Ee.getMediaInfo(),Z=E.getPossibleVoRepresentationsFilteredBySettings(K,!0);let W=Z.map((z=>z.bandwidth)).map((z=>Math.log(z)));W=W.map((z=>z-W[0]+1));const X=y.getBufferTimeDefault(),ae=H(X,Z,W);return ae?(B.state=se,B.representations=Z,B.utilities=W,B.bufferTimeDefault=X,B.Vp=ae.Vp,B.gp=ae.gp,B.currentRepresentation=null,R(B)):B.state=re,B})(me),L[ge][ue]=Ie),Ie})(M);switch(ce.reason.state=V.state,V.state){case re:break;case se:(function(me,ue,ge){const Ie=ue.getMediaType(),Ee=ue.getThroughputController().getSafeAverageThroughput(Ie);if(isNaN(Ee))return;const B=ue.getMediaInfo(),K=E.getOptimalRepresentationForBitrate(B,Ee,!0),Z=d.getCurrentBufferLevel(Ie);me.representation=K,me.reason.throughput=Ee,ge.placeholderBuffer=Math.max(0,j(ge,K)-Z),ge.currentRepresentation=K,!isNaN(ge.lastSegmentDurationS)&&Z>=ge.lastSegmentDurationS&&(ge.state=he)})(ce,M,V);break;case he:(function(me,ue,ge){const Ie=ue.getMediaType(),Ee=ue.getThroughputController(),B=ue.getMediaInfo(),K=Ee.getSafeAverageThroughput(Ie),Z=ue.getScheduleController();(function(ie,de){const pe=Date.now();if(isNaN(ie.lastSegmentFinishTimeMs)){if(!isNaN(ie.lastCallTimeMs)){const _e=.001*(pe-ie.lastCallTimeMs);ie.placeholderBuffer+=Math.max(0,_e)}}else{const _e=.001*(pe-ie.lastSegmentFinishTimeMs);ie.placeholderBuffer+=Math.max(0,_e)}ie.lastCallTimeMs=pe,ie.lastSegmentStart=NaN,ie.lastSegmentRequestTimeMs=NaN,ie.lastSegmentFinishTimeMs=NaN,U(ie,de)})(ge,Ie);const W=d.getCurrentBufferLevel(Ie);let X=(function(ie,de){const pe=ie.representations.length;let _e=NaN,we=NaN;for(let Pe=0;Pe<pe;++Pe){let Ke=(ie.Vp*(ie.utilities[Pe]-1+ie.gp)-de)/ie.representations[Pe].bandwidth;(isNaN(we)||Ke>=we)&&(we=Ke,_e=Pe)}return ie.representations[_e]})(ge,W+ge.placeholderBuffer);const ae=E.getOptimalRepresentationForBitrate(B,K,!0);X.absoluteIndex>ge.currentRepresentation.absoluteIndex&&X.absoluteIndex>ae.absoluteIndex&&(X=ae.absoluteIndex>ge.currentRepresentation.absoluteIndex?ae:ge.currentRepresentation);let z=Math.max(0,W+ge.placeholderBuffer-Q(ge,X));z<=ge.placeholderBuffer?(ge.placeholderBuffer-=z,z=0):(z-=ge.placeholderBuffer,ge.placeholderBuffer=0,E.isPlayingAtTopQuality(X)?z=0:Z.setTimeToLoadDelay(1e3*z)),me.representation=X,me.reason.throughput=K,me.reason.bufferLevel=W,me.reason.placeholderBuffer=ge.placeholderBuffer,me.reason.delay=z,ge.currentRepresentation=X})(ce,M,V);break;default:(function(me,ue,ge){k.debug("BOLA ABR rule invoked in bad state.");const Ie=ue.getMediaInfo(),Ee=ue.getMediaType(),B=ue.getThroughputController().getSafeAverageThroughput(Ee);me.representation=E.getOptimalRepresentationForBitrate(Ie,B,!0),me.reason.state=ge.state,me.reason.throughput=B,ge.state=se,R(ge)})(ce,M,V)}return ce.priority=S.get().streaming.abr.rules.bolaRule.priority,ce}catch(ce){return k.error(ce),(0,n.default)(i).create()}},handleNewMediaInfo:function(M){M&&M.streamInfo&&M.type&&L[M.streamInfo.id]&&L[M.streamInfo.id][M.type]&&delete L[M.streamInfo.id][M.type]},reset:function(){D(),b.off(v.default.BUFFER_EMPTY,P,C),b.off(v.default.PLAYBACK_SEEKING,w,C),b.off(v.default.METRIC_ADDED,N,C),b.off(v.default.QUALITY_CHANGE_REQUESTED,q,C),b.off(v.default.FRAGMENT_LOADING_ABANDONED,O,C),b.off(f.default.MEDIA_FRAGMENT_LOADED,ee,C),b.off(f.default.SETTING_UPDATED_MAX_BITRATE,ne,C),b.off(f.default.SETTING_UPDATED_MIN_BITRATE,ne,C),b.off(f.default.VIDEO_ELEMENT_RESIZED,le,C)}},k=(0,u.default)(i).getInstance().getLogger(C),S=(0,p.default)(i).getInstance(),D(),b.on(v.default.BUFFER_EMPTY,P,C),b.on(v.default.PLAYBACK_SEEKING,w,C),b.on(v.default.METRIC_ADDED,N,C),b.on(v.default.QUALITY_CHANGE_REQUESTED,q,C),b.on(v.default.FRAGMENT_LOADING_ABANDONED,O,C),b.on(f.default.MEDIA_FRAGMENT_LOADED,ee,C),b.on(f.default.SETTING_UPDATED_MAX_BITRATE,ne,C),b.on(f.default.SETTING_UPDATED_MIN_BITRATE,ne,C),b.on(f.default.VIDEO_ELEMENT_RESIZED,le,C),C}ke.__dashjs_factory_name="BolaRule";var Fe=o.default.getClassFactory(ke);const ye="L2A_STATE_ONE_BITRATE",Qe="L2A_STATE_STARTUP",xe="L2A_STATE_STEADY",Le=Math.pow(4,.99);function ot(l){l=l||{};const i=this.context,d=l.dashMetrics,y=(0,T.default)(i).getInstance(),b=(0,p.default)(i).getInstance();let E,C,k,S;function L(H){H.placeholderBuffer=0,H.mostAdvancedSegmentStart=NaN,H.lastSegmentWasReplacement=!1,H.lastSegmentStart=NaN,H.lastSegmentDurationS=NaN,H.lastSegmentRequestTimeMs=NaN,H.lastSegmentFinishTimeMs=NaN,H.lastSegmentUrl=""}function P(){for(const H in C)if(C.hasOwnProperty(H)){const U=C[H];U.state!==ye&&(U.state=Qe,L(U))}}function w(H){if(H&&H.chunk&&H.chunk.representation&&H.chunk.representation.mediaInfo){const U=C[H.chunk.representation.mediaInfo.type],Q=k[H.chunk.representation.mediaInfo.type];if(U&&U.state!==ye){const ee=H.chunk.start;isNaN(U.mostAdvancedSegmentStart)||ee>U.mostAdvancedSegmentStart?(U.mostAdvancedSegmentStart=ee,U.lastSegmentWasReplacement=!1):U.lastSegmentWasReplacement=!0,U.lastSegmentStart=ee,U.lastSegmentDurationS=H.chunk.duration,U.currentRepresentation=H.chunk.representation,N(U,Q)}}}function R(H){if(H&&H.metric===r.HTTP_REQUEST&&H.value&&H.value.type===De.HTTPRequest.MEDIA_SEGMENT_TYPE&&H.value.trace&&H.value.trace.length){const U=C[H.mediaType],Q=k[H.mediaType];U&&U.state!==ye&&(U.lastSegmentRequestTimeMs=H.value.trequest.getTime(),U.lastSegmentFinishTimeMs=H.value._tfinish.getTime(),N(U,Q))}}function N(H,U){isNaN(H.lastSegmentStart)||isNaN(H.lastSegmentRequestTimeMs)||(U.segment_request_start_s=.001*H.lastSegmentRequestTimeMs,U.segment_download_finish_s=.001*H.lastSegmentFinishTimeMs,H.lastSegmentStart=NaN,H.lastSegmentRequestTimeMs=NaN)}function F(H,U){if(H.length!==U.length)return-1;let Q=0;for(let ee=0;ee<H.length;ee++)Q+=H[ee]*U[ee];return Q}function q(){C={},k={}}return E={getSwitchRequest:function(H){try{const U=(0,n.default)(i).create();U.rule=this.getClassName();const Q=H.getMediaType(),ee=H.getScheduleController();if(U.reason=U.reason||{},Q===c.default.AUDIO)return U;ee.setTimeToLoadDelay(0);const ne=(function(le){const j=le.getMediaType();let O=C[j];return O||(O=(function(D){const M={},ce=D.getMediaInfo();return M.state=Qe,M.currentRepresentation=null,(function(V){V&&V.type&&(k[V.type]={},k[V.type].w=[],k[V.type].prev_w=[],k[V.type].Q=0,k[V.type].segment_request_start_s=0,k[V.type].segment_download_finish_s=0,k[V.type].B_target=1.5)})(ce),L(M),M})(le),C[j]=O),O})(H);if(!k[Q])return U;switch(U.reason.state=ne.state,ne.state){case ye:break;case Qe:(function(le,j,O){const D=le.getMediaInfo(),M=le.getMediaType(),ce=le.getThroughputController().getSafeAverageThroughput(M);if(isNaN(ce))return j;const V=le.getAbrController(),me=V.getOptimalRepresentationForBitrate(D,ce,!0),ue=d.getCurrentBufferLevel(M,!0),ge=k[M],Ie=V.getPossibleVoRepresentationsFilteredBySettings(D,!0);if(j.representation=me,j.reason.throughput=ce,O.currentRepresentation=me,!isNaN(O.lastSegmentDurationS)&&ue>=ge.B_target){O.state=xe,ge.Q=Le;for(let Ee=0;Ee<Ie.length;++Ee)Ie[Ee].id===O.currentRepresentation.id?ge.prev_w[Ee]=1:ge.prev_w[Ee]=0}})(H,U,ne);break;case xe:(function(le,j,O){let D=[];const M=le.getThroughputController(),ce=le.getMediaType();let V=M.getAverageThroughput(ce,c.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN,1),me=d.getCurrentHttpRequest(ce),ue=null;const ge=k[ce];if(V<1&&(V=1),me.url===O.lastSegmentUrl||me.type===De.HTTPRequest.INIT_SEGMENT_TYPE)ue=O.currentRepresentation;else{let Ie=O.lastSegmentDurationS,Ee=1;const B=le.getAbrController(),K=le.getMediaInfo(),Z=B.getPossibleVoRepresentationsFilteredBySettings(K,!0);let W=le.getVideoModel().getPlaybackRate();const X=Math.max(Math.pow(4,1),Le*Math.sqrt(4));for(let de=0;de<Z.length;++de){const pe=Z[de];W*pe.bitrateInKbit>V&&(Ee=-1),ge.w[de]=ge.prev_w[de]+Ee*(Ie/(2*X))*((ge.Q+Le)*(W*pe.bitrateInKbit/V))}ge.w=(function(de){const pe=de.length;let _e=!1,we=[];for(let qt=0;qt<pe;++qt)we[qt]=de[qt];let Pe=de.sort((function(qt,dt){return dt-qt})),Ke=0,et=0,ut=[];for(let qt=0;qt<pe-1;++qt)if(Ke+=Pe[qt],et=(Ke-1)/(qt+1),et>=Pe[qt+1]){_e=!0;break}_e||(et=(Ke+Pe[pe-1]-1)/pe);for(let qt=0;qt<pe;++qt)ut[qt]=Math.max(we[qt]-et,0);return ut})(ge.w);for(let de=0;de<Z.length;++de)D[de]=ge.w[de]-ge.prev_w[de],ge.prev_w[de]=ge.w[de];const ae=Z.map((de=>de.bandwidth));ge.Q=Math.max(0,ge.Q-Ie+Ie*W*((F(ae,ge.prev_w)+F(ae,D))/V));let z=[];for(let de=0;de<ae.length;++de)z[de]=Math.abs(ae[de]-F(ge.w,ae));const ie=z.indexOf(Math.min(...z));ue=B.getRepresentationByAbsoluteIndex(ie,K,!0),ue.absoluteIndex>O.currentRepresentation.absoluteIndex&&ae[O.currentRepresentation.absoluteIndex+1]<=V&&(ue=B.getRepresentationByAbsoluteIndex(O.currentRepresentation.absoluteIndex+1,K,!0)),ue.bitrateInKbit>=V&&(ge.Q=2*Math.max(Le,ge.Q)),O.lastSegmentUrl=me.url}j.representation=ue,O.currentRepresentation=j.representation})(H,U,ne);break;default:(function(le,j,O){const D=le.getAbrController(),M=le.getMediaInfo(),ce=le.getMediaType(),V=le.getThroughputController().getSafeAverageThroughput(ce);j.representation=D.getOptimalRepresentationForBitrate(M,V,!0),j.reason.throughput=V,O.state=Qe,L(O)})(H,U,ne)}return U.priority=b.get().streaming.abr.rules.l2ARule.priority,U}catch(U){return S.error(U),(0,n.default)(i).create()}},reset:function(){q(),y.off(f.default.PLAYBACK_SEEKING,P,E),y.off(f.default.MEDIA_FRAGMENT_LOADED,w,E),y.off(f.default.METRIC_ADDED,R,E)}},S=(0,u.default)(i).getInstance().getLogger(E),q(),y.on(f.default.PLAYBACK_SEEKING,P,E),y.on(f.default.MEDIA_FRAGMENT_LOADED,w,E),y.on(f.default.METRIC_ADDED,R,E),E}ot.__dashjs_factory_name="L2ARule";var Ht=o.default.getClassFactory(ot);function Et(){const l=this.context;let i,d,y,b,E,C,k,S,L;function P(){y=null,b=1,E=100,C=0,k=null,S=null,L="dynamic_weight_selection"}function w(){let H=0;if(y)for(let U=0;U<y.length;U++){let Q=y[U];Q.state.throughput>H&&(H=Q.state.throughput)}return H}function R(H,U,Q){let ee=H.map(((ne,le)=>Q[le]*Math.pow(ne-U[le],2))).reduce(((ne,le)=>ne+le));return(ee<0?-1:1)*Math.sqrt(Math.abs(ee))}function N(H,U){return R([H.state.throughput,H.state.latency,H.state.rebuffer,H.state.switch],[U.state.throughput,U.state.latency,U.state.rebuffer,U.state.switch],[1,1,1,1])}function F(H,U){for(let Q=0;Q<y.length;Q++){let ee=y[Q],ne=.1;const le=N(ee,H);q(ee,U,Math.exp(-1*Math.pow(le,2)/(2*Math.pow(ne,2))))}}function q(H,U,Q){let ee=H.state,ne=[.01,.01,.01,.01];ee.throughput=ee.throughput+(U[0]-ee.throughput)*ne[0]*Q,ee.latency=ee.latency+(U[1]-ee.latency)*ne[1]*Q,ee.rebuffer=ee.rebuffer+(U[2]-ee.rebuffer)*ne[2]*Q,ee.switch=ee.switch+(U[3]-ee.switch)*ne[3]*Q}return i={getNextQuality:function(H,U,Q,ee,ne,le,j,O){let D=ee,M=Q;(function(K,Z){if(!y){y=[];const W=Z.getPossibleVoRepresentationsFilteredBySettings(K,!0),X=W.map((ae=>ae.bandwidth));C=Math.min(...X),b=(function(ae){const z=ae.map((ie=>Math.pow(ie,2))).reduce(((ie,de)=>ie+de));return Math.sqrt(z)})(X),W.forEach((ae=>{let z={representation:ae,state:{throughput:ae.bandwidth/b,latency:0,rebuffer:0,switch:0}};y.push(z)})),S=(function(ae){let z=[],ie=(function(Pe){let Ke=[];for(let et=0;et<Pe;et++){let ut=[Math.random()*w(),Math.random(),Math.random(),Math.random()];Ke.push(ut)}return Ke})(Math.pow(ae.length,2));z.push(ie[0]);let de=[1,1,1,1];for(let Pe=1;Pe<ae.length;Pe++){let Ke=null,et=null;for(let ut=0;ut<ie.length;ut++){let qt=ie[ut],dt=null;for(let jt=0;jt<z.length;jt++){let Zt=R(qt,z[jt],de);(dt===null||Zt<dt)&&(dt=Zt)}(et===null||dt>et)&&(Ke=qt,et=dt)}z.push(Ke)}let pe=null,_e=null;for(let Pe=0;Pe<z.length;Pe++){let Ke=0;for(let et=0;et<z.length;et++)Pe!==et&&(Ke+=R(z[Pe],z[et],de));(pe===null||Ke>pe)&&(pe=Ke,_e=Pe)}let we=[];for(we.push(z[_e]),z.splice(_e,1);z.length>0;){let Pe=null,Ke=null;for(let et=0;et<z.length;et++){let ut=R(we[0],z[et],de);(Pe===null||ut<Pe)&&(Pe=ut,Ke=et)}we.push(z[Ke]),z.splice(Ke,1)}return we})(y)}})(U,H);let ce=Q/b;ce>1&&(ce=w()),ee/=E;let V=y.find((K=>K.representation.id===j.id)),me=V.representation.bandwidth*O.getSegmentDuration()/M,ue=Math.max(0,me-ne);if(ne-me<O.getMinBuffer())return d.debug(`Buffer is low for bitrate= ${V.representation.bandwidth} downloadTime=${me} currentBuffer=${ne} rebuffer=${ue}`),(function(K,Z){let W=0,X=K;if(y)for(let ae=0;ae<y.length;ae++){let z=y[ae];z.representation.bandwidth<K.representation.bandwidth&&z.representation.bandwidth>W&&Z>z.representation.bandwidth&&(W=z.representation.bandwidth,X=z)}return X})(V,M).representation;switch(L){case"manual_weight_selection":k=[.4,.4,.4,.4];break;case"random_weight_selection":k=(function(K){let Z=[],W=Math.sqrt(2/K);for(let X=0;X<4;X++)Z.push(Math.random()*W);return k=Z,k})(y.length);break;default:(function(K,Z,W,X,ae,z){k||(k=S[S.length-1]);let ie=K.findWeightVector(y,Z,W,X,ae,z);ie!==null&&ie!==-1&&(k=ie)})(O,D,ne,ue,M,le)}let ge=null,Ie=null,Ee=null;for(let K=0;K<y.length;K++){let Z=y[K],W=Z.state,X=[W.throughput,W.latency,W.rebuffer,W.switch],ae=k.slice(),z=O.getNextBufferWithBitrate(Z.representation.bandwidth,ne,M),ie=z<O.getMinBuffer();ie&&d.debug(`Buffer is low for bitrate=${Z.representation.bandwidth} downloadTime=${me} currentBuffer=${ne} nextBuffer=${z}`),(Z.representation.bandwidth>Q-1e4||ie)&&Z.representation.bandwidth!==C&&(ae[0]=100);let de=R(X,[ce,0,0,0],ae);(ge===null||de<ge)&&(ge=de,Ie=Z.representation,Ee=Z)}let B=Math.abs(V.representation.bandwidth-Ee.representation.bandwidth)/b;return F(V,[ce,ee,ue,B]),F(Ee,[ce,0,0,B]),Ie},reset:function(){P()}},d=(0,u.default)(l).getInstance().getLogger(i),P(),i}Et.__dashjs_factory_name="LearningAbrController";var zt=o.default.getClassFactory(Et),Rt=class{constructor(){this.type=null,this.lastBitrate=null,this.weights={},this.weights.bitrateReward=null,this.weights.bitrateSwitchPenalty=null,this.weights.rebufferPenalty=null,this.weights.latencyPenalty=null,this.weights.playbackSpeedPenalty=null,this.bitrateWSum=0,this.bitrateSwitchWSum=0,this.rebufferWSum=0,this.latencyWSum=0,this.playbackSpeedWSum=0,this.totalQoe=0}};function Xt(){let l,i,d,y,b;function E(){i=null,d=null,y=null,b=null}function C(S,L,P,w){let R=new Rt;return R.type=S,R.weights.bitrateReward=L||1,R.weights.bitrateSwitchPenalty=1,R.weights.rebufferPenalty=P||1e3,R.weights.latencyPenalty=[],R.weights.latencyPenalty.push({threshold:1.1,penalty:.05*w}),R.weights.latencyPenalty.push({threshold:1e8,penalty:.1*P}),R.weights.playbackSpeedPenalty=w||200,R}function k(S,L,P,w,R){R.bitrateWSum+=R.weights.bitrateReward*S,R.lastBitrate&&(R.bitrateSwitchWSum+=R.weights.bitrateSwitchPenalty*Math.abs(S-R.lastBitrate)),R.lastBitrate=S,R.rebufferWSum+=R.weights.rebufferPenalty*L;for(let N=0;N<R.weights.latencyPenalty.length;N++){let F=R.weights.latencyPenalty[N];if(P<=F.threshold){R.latencyWSum+=F.penalty*P;break}}R.playbackSpeedWSum+=R.weights.playbackSpeedPenalty*Math.abs(1-w),R.totalQoe=R.bitrateWSum-R.bitrateSwitchWSum-R.rebufferWSum-R.latencyWSum-R.playbackSpeedWSum}return l={setupPerSegmentQoe:function(S,L,P){i=C("segment",S,L,P),d=S,y=L,b=P},logSegmentMetrics:function(S,L,P,w){i&&k(S,L,P,w,i)},getPerSegmentQoe:function(){return i},calculateSingleUseQoe:function(S,L,P,w){let R=null;return d&&y&&b&&(R=C("segment",d,y,b)),R?(k(S,L,P,w,R),R.totalQoe):0},reset:function(){E()}},E(),l}Xt.__dashjs_factory_name="LoLpQoeEvaluator";var tn=o.default.getClassFactory(Xt);function cn(l){let i,d,y,b,E=l.targetLatency,C=l.bufferMin,k=l.segmentDuration,S=l.qoeEvaluator;function L(){return k}function P(w,R){const N=L();let F;return F=R>N?w-N:w+N-R,F}return i={getMinBuffer:function(){return C},getSegmentDuration:L,getNextBufferWithBitrate:function(w,R,N){return P(R,w*k/N)},getNextBuffer:P,findWeightVector:function(w,R,N,F,q,H){let U=null,Q=null,ee=null,ne=Math.abs(R-b);return w.forEach((le=>{y.forEach((j=>{j[0];let O,D=j[1],M=j[2],ce=(j[3],le.representation.bandwidth*k/q),V=P(N,ce);O=M===0?10:1/M;let me=O*Math.max(1e-5,ce-V);O=D===0?10:1/D;let ue=O*le.state.latency,ge=S.calculateSingleUseQoe(le.representation.bandwidth,me,ue,H);(U===null||ge>U)&&(function(Ie,Ee,B){return!(Ie>E+B)&&Ee>=C})(R,V,ne)&&(U=ge,Q=j,ee=le.representation.bandwidth)}))})),Q===null&&ee===null&&(Q=-1),b=R,Q}},d=[.2,.4,.6,.8,1],y=(function(w){let R=w.map((function(F){return[F]})),N=function(F,q,H){if(H===q)return F;let U=F.length;for(let Q=0;Q<U;Q++){let ee=F.shift();for(let ne=0;ne<w.length;ne++)F.push(ee.concat(w[ne]))}return N(F,q,H+1)};return N(R,4,1)})(d),b=0,i}cn.__dashjs_factory_name="LoLpWeightSelector";var Ne=o.default.getClassFactory(cn);function Ce(l){let i,d,y,b,E,C=(l=l||{}).dashMetrics,k=this.context;return y={getSwitchRequest:function(S){try{let L=(0,n.default)(k).create();L.rule=this.getClassName();let P=S.getMediaInfo().type,w=S.getAbrController();const R=S.getStreamInfo();let N=S.getRepresentation();const F=S.getMediaInfo(),q=C.getCurrentBufferState(P),H=S.getScheduleController(),U=C.getCurrentBufferLevel(P,!0),Q=H.getPlaybackController();let ee=Q.getCurrentLiveLatency();if(P===c.default.AUDIO)return L;ee||(ee=0);const ne=Q.getPlaybackRate(),le=S.getThroughputController().getSafeAverageThroughput(P);if(i.debug(`Throughput ${Math.round(le)} kbps`),isNaN(le)||!q||w.getAbandonmentStateFor(R.id,P)===r.ABANDON_LOAD)return L;let j=w.getPossibleVoRepresentationsFilteredBySettings(F,!0).map((Ie=>Ie.bandwidth)),O=S.getRepresentation().fragmentDuration,D=Math.min(...j)/1e3,M=Math.max(...j)/1e3,ce=N.bandwidth/1e3,V=C.getCurrentHttpRequest(P,!0),me=(V.tresponse.getTime()-V.trequest.getTime())/1e3,ue=me>O?me-O:0;E.setupPerSegmentQoe(O,M,D),E.logSegmentMetrics(ce,ue,ee,ne);let ge=Ne(k).create({targetLatency:1.5,bufferMin:.3,segmentDuration:O,qoeEvaluator:E});return L.representation=b.getNextQuality(w,F,1e3*le,ee,U,ne,N,ge),L.reason={throughput:le,latency:ee},L.priority=d.get().streaming.abr.rules.loLPRule.priority,H.setTimeToLoadDelay(0),L}catch(L){throw L}},reset:function(){b.reset(),E.reset()}},i=(0,u.default)(k).getInstance().getLogger(y),b=zt(k).create(),E=tn(k).create(),d=(0,p.default)(k).getInstance(),y}Ce.__dashjs_factory_name="LoLPRule";var lt=o.default.getClassFactory(Ce);function $(l){l=l||{};const i=this.context,d=l.mediaPlayerModel,y=l.customParametersModel,b=l.dashMetrics,E=l.settings,C=(0,T.default)(i).getInstance();let k,S,L,P;function w(){Object.values(c.default.QUALITY_SWITCH_RULES).forEach((H=>{S=R(H,S)})),Object.values(c.default.ABANDON_FRAGMENT_RULES).forEach((H=>{L=R(H,L)})),y.getAbrCustomRules().forEach((function(H){H.type===c.default.RULES_TYPES.QUALITY_SWITCH_RULES&&S.push(H.rule(i).create()),H.type===c.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&L.push(H.rule(i).create())})),S.length===0&&(S.push(Fe(i).create({dashMetrics:b,mediaPlayerModel:d,settings:E})),S.push(g(i).create({dashMetrics:b})))}function R(H,U){const Q=H.charAt(0).toLowerCase()+H.slice(1);return E.get().streaming.abr.rules[Q].active&&!(function(ee,ne){return ee.filter((le=>le.getClassName()===ne)).length>0})(U,H)?(U.push((function(ee){switch(ee){case c.default.QUALITY_SWITCH_RULES.BOLA_RULE:return Fe(i).create({dashMetrics:b,mediaPlayerModel:d,settings:E});case c.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE:return g(i).create({dashMetrics:b});case c.default.QUALITY_SWITCH_RULES.INSUFFICIENT_BUFFER_RULE:return x(i).create({dashMetrics:b,settings:E});case c.default.QUALITY_SWITCH_RULES.SWITCH_HISTORY_RULE:return Be(i).create();case c.default.QUALITY_SWITCH_RULES.DROPPED_FRAMES_RULE:return Se(i).create();case c.default.QUALITY_SWITCH_RULES.LEARN_TO_ADAPT_RULE:return Ht(i).create({dashMetrics:b,settings:E});case c.default.QUALITY_SWITCH_RULES.LOL_PLUS_RULE:return lt(i).create({dashMetrics:b});case c.default.ABANDON_FRAGMENT_RULES.ABANDON_REQUEST_RULE:return oe(i).create({dashMetrics:b,mediaPlayerModel:d,settings:E})}})(H)),U):E.get().streaming.abr.rules[Q].active?U:(function(ee,ne){return ee.filter((le=>le.getClassName()!==ne))})(U,H)}function N(H){return H.filter((U=>U.representation!==n.default.NO_CHANGE))}function F(H){const U={};let Q,ee,ne,le=null;if(H.length!==0){for(U[n.default.PRIORITY.STRONG]=null,U[n.default.PRIORITY.WEAK]=null,U[n.default.PRIORITY.DEFAULT]=null,Q=0,ee=H.length;Q<ee;Q+=1)ne=H[Q],ne.representation!==n.default.NO_CHANGE&&(U[ne.priority]===null||U[ne.priority].representation!==n.default.NO_CHANGE&&ne.representation.bitrateInKbit<U[ne.priority].representation.bitrateInKbit)&&(U[ne.priority]=ne);return U[n.default.PRIORITY.WEAK]&&U[n.default.PRIORITY.WEAK].representation!==n.default.NO_CHANGE&&(le=U[n.default.PRIORITY.WEAK]),U[n.default.PRIORITY.DEFAULT]&&U[n.default.PRIORITY.DEFAULT].representation!==n.default.NO_CHANGE&&(le=U[n.default.PRIORITY.DEFAULT]),U[n.default.PRIORITY.STRONG]&&U[n.default.PRIORITY.STRONG].representation!==n.default.NO_CHANGE&&(le=U[n.default.PRIORITY.STRONG]),le}}function q(){w()}return k={clearDataForStream:function(H){[S,L].forEach((U=>{U&&U.length&&U.forEach((Q=>Q.clearDataForStream&&typeof Q.clearDataForStream=="function"&&Q.clearDataForStream(H)))}))},getAbandonFragmentRules:function(){return L},getBestPossibleSwitchRequest:function(H){return H&&F(N(S.filter((U=>{const Q=U.getClassName();if(Q!==c.default.QUALITY_SWITCH_RULES.BOLA_RULE&&Q!==c.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE)return!0;const ee=H.getMediaType();return P[ee]&&Q===c.default.QUALITY_SWITCH_RULES.BOLA_RULE||!P[ee]&&Q===c.default.QUALITY_SWITCH_RULES.THROUGHPUT_RULE})).map((U=>U.getSwitchRequest(H)))))||(0,n.default)(i).create()},getBolaState:function(H){return P[H]},getMinSwitchRequest:F,getQualitySwitchRules:function(){return S},handleNewMediaInfo:function(H){S.forEach((U=>U.handleNewMediaInfo&&U.handleNewMediaInfo(H))),L.forEach((U=>U.handleNewMediaInfo&&U.handleNewMediaInfo(H)))},initialize:function(){S=[],L=[],P={},w(),C.on(f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,q,k)},reset:function(){[S,L].forEach((H=>{H&&H.length&&H.forEach((U=>U.reset&&U.reset()))})),S=[],L=[],P={},C.off(f.default.SETTING_UPDATED_ABR_ACTIVE_RULES,q,k)},setBolaState:function(H,U){P[H]=U},shouldAbandonFragment:function(H){if(!H)return(0,n.default)(i).create();const U=F(N(L.map((Q=>Q.shouldAbandon(H)))));return U&&U.reason&&(U.reason.forceAbandon=!0),U||(0,n.default)(i).create()}},k}$.__dashjs_factory_name="ABRRulesCollection";const Y=o.default.getClassFactory($);o.default.updateSingletonFactory($.__dashjs_factory_name,Y);var A=Y;class I{constructor(i){this.action=I.ACTION_DOWNLOAD,this.availabilityEndTime=null,this.availabilityStartTime=null,this.bandwidth=NaN,this.bytesLoaded=NaN,this.bytesTotal=NaN,this.delayLoadingTime=NaN,this.duration=NaN,this.endDate=null,this.firstByteDate=null,this.index=NaN,this.isPartialSegmentRequest=!1,this.mediaStartTime=NaN,this.mediaType=null,this.presentationStartTime=NaN,this.range=null,this.representation=null,this.responseType="arraybuffer",this.retryAttempts=0,this.serviceLocation=null,this.startDate=null,this.startTime=NaN,this.timescale=NaN,this.type=null,this.url=i||null,this.wallStartTime=null}isInitializationRequest(){return this.type&&this.type===De.HTTPRequest.INIT_SEGMENT_TYPE}setInfo(i){this.type=i&&i.init?De.HTTPRequest.INIT_SEGMENT_TYPE:De.HTTPRequest.MEDIA_SEGMENT_TYPE,this.url=i&&i.url?i.url:null,this.range=i&&i.range?i.range.start+"-"+i.range.end:null,this.mediaType=i&&i.mediaType?i.mediaType:null,this.representation=i&&i.representation?i.representation:null}}I.ACTION_DOWNLOAD="download",I.ACTION_COMPLETE="complete";var J=I;const G="loading",Ae="executed",Ye="failed";function ze(l){const i=(l=l||{}).eventBus,d=l.events,y=l.dashMetrics,b=l.fragmentLoader,E=l.debug,C=l.streamInfo,k=l.type;let S,L,P,w;function R(j){return!!j&&(function(O){let D=!1;return O.some((M=>{if(ce=j,V=M,!isNaN(ce.index)&&ce.startTime===V.startTime&&ce.adaptationIndex===V.adaptationIndex&&ce.type===V.type||(function(me,ue){return me.representation.id===ue.representation.id})(j,M)||(function(me,ue){return me.action===J.ACTION_COMPLETE&&me.action===ue.action})(j,M))return D=!0,D;var ce,V})),D})(P)}function N(j){return isNaN(j.duration)?.25:Math.min(j.duration/8,.5)}function F(j){P=P.filter((O=>{const D=N(O);return isNaN(O.startTime)||j!==void 0&&O.startTime>=j-D}))}function q(j,O){O<=j+.5||(P=P.filter((D=>{const M=N(D);return isNaN(D.startTime)||D.startTime>=O-M||isNaN(D.duration)||D.startTime+D.duration<=j+M})))}function H(j,O,D){for(let M=j.length-1;M>=0;M--){const ce=j[M],V=ce.startTime,me=V+ce.duration;if(D=isNaN(D)?N(ce):D,!isNaN(V)&&!isNaN(me)&&O+D>=V&&O-D<me||isNaN(V)&&isNaN(O))return ce}return null}function U(j,O){y.addSchedulingInfo(j,O),y.addRequestsQueue(j.mediaType,w,P)}function Q(j){j.sender===b&&(w.splice(w.indexOf(j.request),1),j.response&&!j.error&&P.push(j.request),U(j.request,j.error?Ye:Ae),i.trigger(d.FRAGMENT_LOADING_COMPLETED,{request:j.request,response:j.response,error:j.error,sender:this},{streamId:C.id,mediaType:k}))}function ee(j){j.sender===b&&i.trigger(d.FRAGMENT_LOADING_PROGRESS,{request:j.request,response:j.response,error:j.error,sender:this},{streamId:C.id,mediaType:k})}function ne(j){j.sender===b&&i.trigger(d.FRAGMENT_LOADING_ABANDONED,{request:j.request},{streamId:C.id,mediaType:k})}function le(){P=[],w=[],b&&b.resetInitialSettings()}return S={abortRequests:function(){L.debug("abort requests"),b.abort(),w=[]},executeRequest:function(j){j.action===J.ACTION_DOWNLOAD?(U(j,G),w.push(j),(function(O){i.trigger(d.FRAGMENT_LOADING_STARTED,{request:O},{streamId:C.id,mediaType:k}),b.load(O)})(j)):L.warn("Unknown request action.")},getRequests:function(j){const O=j?j.state instanceof Array?j.state:[j.state]:[];let D=[];return O.forEach((M=>{const ce=(function(V){let me;switch(V){case G:me=w;break;case Ae:me=P;break;default:me=[]}return me})(M);D=D.concat((function(V,me){return me.hasOwnProperty("time")?[H(V,me.time,me.threshold)]:V.filter((ue=>{for(const ge in me)if(ge!=="state"&&me.hasOwnProperty(ge)&&ue[ge]!=me[ge])return!1;return!0}))})(ce,j))})),D},getStreamId:function(){return C.id},getType:function(){return k},isFragmentLoaded:R,isFragmentLoadedOrPending:function(j){let O,D=!1,M=0;if(D=R(j),!D)for(M=0;M<w.length;M++)O=w[M],j.url===O.url&&j.startTime===O.startTime&&(D=!0);return D},removeExecutedRequestsAfterTime:function(j){P=P.filter((O=>isNaN(O.startTime)||j!==void 0&&O.startTime<j))},removeExecutedRequestsBeforeTime:F,reset:function(){i.off(d.LOADING_COMPLETED,Q,this),i.off(d.LOADING_DATA_PROGRESS,ee,this),i.off(d.LOADING_ABANDONED,ne,this),b&&b.reset(),le()},resetInitialSettings:le,syncExecutedRequestsWithBufferedRange:function(j,O){if(!j||j.length===0)return void F();let D=0;for(let M=0,ce=j.length;M<ce;M++)q(D,j.start(M)),D=j.end(M);O>0&&q(D,O)}},L=E.getLogger(S),le(),i.on(d.LOADING_COMPLETED,Q,S),i.on(d.LOADING_DATA_PROGRESS,ee,S),i.on(d.LOADING_ABANDONED,ne,S),S}ze.__dashjs_factory_name="FragmentModel";const je=o.default.getClassFactory(ze);je.FRAGMENT_MODEL_LOADING=G,je.FRAGMENT_MODEL_EXECUTED=Ae,je.FRAGMENT_MODEL_CANCELED="canceled",je.FRAGMENT_MODEL_FAILED=Ye,o.default.updateClassFactory(ze.__dashjs_factory_name,je);var Oe=je;function Ve(l){let i;const d=(l=l||{}).abrController,y=l.throughputController,b=l.switchRequestHistory,E=l.droppedFramesHistory,C=l.currentRequest,k=l.streamProcessor?l.streamProcessor.getScheduleController():null,S=l.streamProcessor?l.streamProcessor.getRepresentation():null,L=l.videoModel?l.videoModel:null;function P(){return S?S.mediaInfo:null}return i={getAbrController:function(){return d},getCurrentRequest:function(){return C},getDroppedFramesHistory:function(){return E},getMediaInfo:P,getMediaType:function(){const w=P();return w?w.type:null},getRepresentation:function(){return S},getScheduleController:function(){return k},getStreamInfo:function(){const w=P();return w?w.streamInfo:null},getSwitchRequestHistory:function(){return b},getThroughputController:function(){return y},getVideoModel:function(){return L}},i}Ve.__dashjs_factory_name="RulesContext";var tt=o.default.getClassFactory(Ve);function Je(){let l={},i={};const d=this.context,y=(0,p.default)(d).getInstance();return{clearForStream:function(b){delete l[b],delete i[b]},getSwitchRequests:function(b,E){return b!=null&&E!=null&&l[b]&&l[b][E]?l[b][E]:{}},push:function(b){const E=b.currentRepresentation,C=b.newRepresentation;if(E.mediaInfo.streamInfo.id!==C.mediaInfo.streamInfo.id||C.mediaInfo.id!==E.mediaInfo.id)return;const k=E.mediaInfo.streamInfo.id;l[k]||(function(q){l[q]={},i[q]={}})(k);const S=E.mediaInfo.type;l[k][S]||(function(q,H){l[q][H]={},i[q][H]=[]})(k,S);const L=b.currentRepresentation.id;l[k][S][L]||(function(q,H,U){l[q][H][U]={noDrops:0,drops:0,dropSize:0}})(k,S,L);let P=b.newRepresentation.absoluteIndex-b.currentRepresentation.absoluteIndex,w=P<0?1:0,R=w?-P:0,N=w?0:1;l[k][S][b.currentRepresentation.id].drops+=w,l[k][S][b.currentRepresentation.id].dropSize+=R,l[k][S][b.currentRepresentation.id].noDrops+=N,i[k][S].push({id:b.currentRepresentation.id,noDrop:N,drop:w,dropSize:R});const F=(function(q,H){return i[q][H].length>y.get().streaming.abr.rules.switchHistoryRule.parameters.sampleSize?i[q][H].shift():null})(k,S);F&&(function(q,H,U){l[q][H][U.id].drops-=U.drop,l[q][H][U.id].dropSize-=U.dropSize,l[q][H][U.id].noDrops-=U.noDrop})(k,S,F)},reset:function(){l={},i={}}}}Je.__dashjs_factory_name="SwitchRequestHistory";var mt=o.default.getClassFactory(Je);function Vt(){let l={},i={},d={};return{clearForStream:function(y){delete l[y],delete i[y],delete d[y]},getFrameHistory:function(y){return l[y]},push:function(y,b,E){if(!b)return;l[y]||(function(w){l[w]=[],i[w]=0,d[w]=0})(y);let C=E&&E.droppedVideoFrames?E.droppedVideoFrames:0,k=E&&E.totalVideoFrames?E.totalVideoFrames:0,S=C-i[y];i[y]=C;let L=k-d[y];d[y]=k;const P=l[y];P[b]?(P[b].droppedVideoFrames+=S,P[b].totalVideoFrames+=L):P[b]={droppedVideoFrames:S,totalVideoFrames:L}},reset:function(){l={},i={},d={}}}}Vt.__dashjs_factory_name="DroppedFramesHistory";var Dt=o.default.getClassFactory(Vt);function Ut(){const l=this.context,i=(0,u.default)(l).getInstance(),d=(0,T.default)(l).getInstance();let y,b,E,C,k,S,L,P,w,R,N,F,q,H,U,Q,ee,ne,le,j,O;function D(){y={},ne={},U=new Map,N&&N.reset(),le&&le.reset(),L=void 0,N=void 0,le=void 0,clearTimeout(b),b=null}function M(z,ie=!0){let de=ce(z,ie);return de=(function(pe){try{return(function(_e){try{if(!Q.get().streaming.cmsd.enabled||!Q.get().streaming.cmsd.abr.applyMb)return _e;const we=_e.filter((Pe=>{const Ke=Pe.mediaInfo.type;let et=S.getMaxBitrate(Ke);if(Ke!==c.default.VIDEO||et<0)return!0;const ut=Pe.mediaInfo.streamInfo.id;return et-=ne[ut][c.default.AUDIO].getRepresentation().bitrateInKbit||0,Pe.bitrateInKbit<=et}));return we.length>0?we:_e}catch(we){return q.error(we),_e}})(pe=(function(_e){try{if(!Q.get().streaming.abr.limitBitrateByPortal)return _e;const{elementWidth:we}=O.getVideoElementSize(),Pe=_e.filter((Ke=>Ke.mediaInfo.type!==c.default.VIDEO||Ke.width<=we));return Pe.length>0?Pe:_e}catch(we){return q.error(we),_e}})(pe=(function(_e){try{const we=_e.filter((Pe=>{const Ke=Pe.mediaInfo.type,et=Pe.bitrateInKbit,ut=H.getAbrBitrateParameter("maxBitrate",Ke),qt=H.getAbrBitrateParameter("minBitrate",Ke);return!(ut>-1&&et>ut||qt>-1&&et<qt)}));return we.length>0?we:_e}catch(we){return q.error(we),_e}})(pe)))}catch(_e){return q.error(_e),pe}})(de),de}function ce(z,ie){let de=[];return z&&((function(_e){try{const we=[];if(_e&&we.push(_e),!Q.get().streaming.abr.enableSupplementalPropertyAdaptationSetSwitching||!_e.adaptationSetSwitchingCompatibleIds||_e.adaptationSetSwitchingCompatibleIds.length===0)return we;const Pe=ne[_e.streamInfo.id][_e.type].getAllMediaInfos().filter((Ke=>_e.adaptationSetSwitchingCompatibleIds.includes(Ke.id)));return we.concat(Pe)}catch{return[_e]}})(z).forEach((_e=>{let we=C.getVoRepresentations(_e);we&&we.length>0&&(de=de.concat(we))})),de=(function(_e){return _e.forEach((we=>{if(we.dependentRepresentation&&we.dependentRepresentation.mediaInfo===null){let Pe=we.dependentRepresentation.id,Ke=_e.find((et=>et.id===Pe));Ke&&(we.dependentRepresentation=Ke)}})),_e})(de),de=(function(_e){return _e=(function(we){let Pe=null;return we.filter((Ke=>(Pe||(Pe=Ke.mediaInfo),!isNaN(Ke.qualityRanking)&&C.areMediaInfosEqual(Pe,Ke.mediaInfo)))).length===we.length})(_e)?(function(we){return we.sort(((Pe,Ke)=>Ke.qualityRanking-Pe.qualityRanking)),we})(_e):(function(we){return we.sort(((Pe,Ke)=>C.areMediaInfosEqual(Pe.mediaInfo,Ke.mediaInfo)?isNaN(Pe.pixelsPerSecond)||isNaN(Ke.pixelsPerSecond)||Pe.pixelsPerSecond===Ke.pixelsPerSecond?Pe.bandwidth-Ke.bandwidth:Pe.pixelsPerSecond-Ke.pixelsPerSecond:isNaN(Pe.pixelsPerSecond)||isNaN(Ke.pixelsPerSecond)||Pe.pixelsPerSecond===Ke.pixelsPerSecond?isNaN(Pe.bitsPerPixel)||isNaN(Ke.bitsPerPixel)?Pe.bandwidth-Ke.bandwidth:Ke.bitsPerPixel-Pe.bitsPerPixel:Pe.pixelsPerSecond-Ke.pixelsPerSecond)),we})(_e)})(de),de.forEach(((_e,we)=>{_e.absoluteIndex=we})),de=de.filter((_e=>{const we=!!ie||C.areMediaInfosEqual(_e.mediaInfo,z),Pe=!_e||!_e.mediaInfo||k.areKeyIdsUsable(_e.mediaInfo);return we&&Pe}))),de}function V(z){const ie=z.request.mediaType,de=z.streamId;if(!(ie&&de&&ne[de]&&Q.get().streaming.abr.autoSwitchBitrate[ie]))return;const pe=ne[de][ie];if(!pe)return;var _e;if(!(!((_e=pe.getLastSegment())&&_e.isPartialSegment&&!isNaN(_e.totalNumberOfPartialSegments)&&!isNaN(_e.replacementSubNumber))||_e.replacementSubNumber===0))return;const we=ue(pe,z.request),Pe=E.shouldAbandonFragment(we);Pe&&Pe.representation!==n.default.NO_CHANGE&&(function(Ke,et,ut,qt,dt){if(qt.getFragmentModel().getRequests({state:Oe.FRAGMENT_MODEL_LOADING,index:Ke.request.index})[0]){const jt=(function(Zt,En){return y[Zt]&&y[Zt][En]?y[Zt][En]:null})(et,ut);jt&&(jt.state=r.ABANDON_LOAD),le.reset(),Z(ut,ee.getActiveStreamInfo(),dt.representation,dt.reason),clearTimeout(b),b=setTimeout((()=>{jt&&(y[et][ut].state=r.ALLOW_LOAD),b=null}),Q.get().streaming.abandonLoadTimeout)}})(z,de,ie,pe,Pe)}function me(){Q.get().streaming.abr.limitBitrateByPortal&&Object.keys(ne).forEach((z=>{Object.keys(ne[z]).forEach((ie=>{Ee(ie,z)}))}))}function ue(z,ie){return tt(l).create({abrController:F,adapter:C,currentRequest:ie,droppedFramesHistory:N,streamProcessor:z,switchRequestHistory:le,throughputController:j,videoModel:O})}function ge(z){z.mediaType===c.default.VIDEO&&(K(z.streamId),L=z.newRepresentation.id)}function Ie(z){!ae()||z.metric!==r.BUFFER_LEVEL||z.mediaType!==c.default.AUDIO&&z.mediaType!==c.default.VIDEO||(function(ie,de){try{const pe=H.getBufferTimeDefault(),_e=pe,we=.5*pe,Pe=E.getBolaState(ie),Ke=de>=(Pe?we:_e);E.setBolaState(ie,Ke),Ke!==Pe&&(Ke?q.info("["+ie+"] switching from throughput to buffer occupancy ABR rule (buffer: "+de.toFixed(3)+")."):q.info("["+ie+"] switching from buffer occupancy to throughput ABR rule (buffer: "+de.toFixed(3)+")."))}catch(pe){q.error(pe)}})(z.mediaType,.001*z.value.level)}function Ee(z,ie){try{if(!(z&&ne&&ne[ie]&&ne[ie][z]))return!1;K(ie);const de=ne[ie][z],pe=de.getLastSegment(),_e=de.getRepresentationController()?.getCurrentCompositeRepresentation(),we=B(pe,_e);if(!Q.get().streaming.abr.autoSwitchBitrate[z]||!we)return!1;const Pe=ue(de),Ke=E.getBestPossibleSwitchRequest(Pe);if(!Ke||!Ke.representation)return!1;let et=Ke.representation;return(function(ut,qt){le.push({currentRepresentation:ut,newRepresentation:qt})})(_e,et),et.id!==_e.id&&(y[ie][z].state===r.ALLOW_LOAD||et.absoluteIndex<_e.absoluteIndex)&&(X(z,_e,et,Ke.reason),!0)}catch(de){return q.error(de),!1}}function B(z,ie){return!(z&&z.isPartialSegment&&!isNaN(z.totalNumberOfPartialSegments)&&!isNaN(z.replacementSubNumber))||z.replacementSubNumber===z.totalNumberOfPartialSegments-1||(function(de,pe){if(!pe||!pe.segmentSequenceProperties||pe.segmentSequenceProperties.length<=0||pe&&pe.mediaInfo&&pe.mediaInfo.adaptationSetSwitchingCompatibleIds&&pe.mediaInfo.adaptationSetSwitchingCompatibleIds.length>0)return!1;const _e=pe.segmentSequenceProperties.filter((Pe=>!isNaN(Pe.sapType)&&Pe.sapType<=1));if(_e.length===0)return!1;let we=(de.replacementSubNumber+1)%de.totalNumberOfPartialSegments;return _e.some((Pe=>we%Pe.cadence==0))})(z,ie)}function K(z){if(N){const ie=O.getPlaybackQuality();ie&&N.push(z,L,ie)}}function Z(z,ie,de,pe={}){if(!(ie&&ie.id&&z&&ne&&ne[ie.id]&&ne[ie.id][z]&&de))return!1;const _e=ne[ie.id][z],we=_e.getRepresentationController()?.getCurrentCompositeRepresentation();return(!we||de.id!==we.id)&&X(z,we,de,pe)}function W(z,ie){return`${z}-${ie}`}function X(z,ie,de,pe){const _e=de.mediaInfo.streamInfo.id;if(!z||!ne[_e]||!ne[_e][z])return!1;const we=ne[_e][z].getStreamInfo(),Pe=w.getCurrentBufferLevel(z),Ke=ie!==null&&!C.areMediaInfosEqual(ie.mediaInfo,de.mediaInfo),et=ie?ie.bitrateInKbit:0;return q.info(`[AbrController]: Switching quality in period ${_e} for media type ${z}. Switch from bitrate ${et} to bitrate ${de.bitrateInKbit}. Current buffer level: ${Pe}. Reason:`+(pe?JSON.stringify(pe):"/")),d.trigger(v.default.QUALITY_CHANGE_REQUESTED,{isAdaptationSetSwitch:Ke,mediaType:z,newRepresentation:de,oldRepresentation:ie,reason:pe,streamInfo:we},{streamId:we.id,mediaType:z}),(function(ut){const qt=j.getAverageThroughput(ut);isNaN(qt)||R.setSavedBitrateSettings(ut,qt)})(z),!0}function ae(){return Q.get().streaming.abr.rules.bolaRule.active&&Q.get().streaming.abr.rules.throughputRule.active}return F={canPerformQualitySwitch:B,checkPlaybackQuality:Ee,clearDataForStream:function(z){N&&N.clearForStream(z),ne[z]&&delete ne[z],le&&le.clearForStream(z),y[z]&&delete y[z],E.clearDataForStream(z)},getAbandonmentStateFor:function(z,ie){return y[z]&&y[z][ie]?y[z][ie].state:null},getInitialBitrateFor:function(z){if(z===c.default.TEXT)return NaN;let ie=H.getAbrBitrateParameter("initialBitrate",z);if(ie>0)return ie;let de=NaN;if(R&&R.hasOwnProperty("getSavedBitrateSettings")&&(de=R.getSavedBitrateSettings(z)),!isNaN(de))return de;const pe=j.getAverageThroughput(z);return!isNaN(pe)&&pe>0?pe:z===c.default.VIDEO?1e3:100},getOptimalRepresentationForBitrate:function(z,ie,de=!0){const pe=M(z,de);if(!pe||pe.length===0)return null;const _e=pe.reduce(((Pe,Ke)=>Pe.bandwidth<Ke.bandwidth?Pe:Ke));if(ie<=0)return _e;const we=pe.filter((Pe=>Pe.bitrateInKbit<=ie));return we&&we.length!==0?we.reduce(((Pe,Ke)=>Ke.absoluteIndex>Pe.absoluteIndex?Ke:Pe)):_e},getPossibleVoRepresentations:function(z,ie=!0){return ce(z,ie)},getPossibleVoRepresentationsFilteredBySettings:M,getRepresentationByAbsoluteIndex:function(z,ie,de=!0){return isNaN(z)||z<0?null:M(ie,de).find((pe=>pe.absoluteIndex===z))},handleNewMediaInfo:function(z){E.handleNewMediaInfo(z)},handlePendingManualQualitySwitch:function(z,ie){try{const de=W(z,ie);let pe=null;if(U.has(de)&&(pe=U.get(de)),!pe)return!1;const _e=ne[z][ie],we=_e.getLastSegment();if(!B(we,_e.getRepresentation()))return!1;const{type:Pe,streamInfo:Ke,representation:et,reason:ut}=pe;return U.delete(de),Z(Pe,Ke,et,ut),!0}catch(de){q.error(`Can not handle pending manual quality switch: ${de}`)}},initialize:function(){N=Dt(l).create(),le=mt(l).create(),E=A(l).create({dashMetrics:w,customParametersModel:P,mediaPlayerModel:H,settings:Q}),E.initialize(),d.on(v.default.QUALITY_CHANGE_RENDERED,ge,F),d.on(v.default.METRIC_ADDED,Ie,F),d.on(f.default.LOADING_PROGRESS,V,F),d.on(f.default.VIDEO_ELEMENT_RESIZED,me,F)},isPlayingAtLowestQuality:function(z){return M(z.mediaInfo,!0)[0].id===z.id},isPlayingAtTopQuality:function(z){if(!z)return!0;const ie=M(z.mediaInfo,!0);return ie[ie.length-1].id===z.id},manuallySetPlaybackQuality:function(z,ie,de,pe={}){const _e=ne[ie.id][z];if(B(_e.getLastSegment(),_e.getRepresentation()))return Z(z,ie,de,pe);(function(we,Pe,Ke,et){try{q.debug(`[AbrController] Queuing manual quality switch for stream ${Pe.id} and type ${we} to representation ${Ke.id}`);const ut=W(Pe.id,we);U.set(ut,{type:we,streamInfo:Pe,representation:Ke,reason:et})}catch(ut){q.error(`Can not queue manual quality switch: ${ut}`)}})(z,ie,de,pe)},registerStreamType:function(z,ie){const de=ie.getStreamInfo().id;ne[de]||(ne[de]={}),ne[de][z]=ie,y[de]||(y[de]={}),y[de][z]={},y[de][z].state=r.ALLOW_LOAD,E.getBolaState(z)===void 0&&E.setBolaState(z,Q.get().streaming.abr.rules.bolaRule.active&&!ae())},reset:function(){D(),d.off(v.default.QUALITY_CHANGE_RENDERED,ge,F),d.off(v.default.METRIC_ADDED,Ie,F),d.off(f.default.LOADING_PROGRESS,V,F),d.off(f.default.VIDEO_ELEMENT_RESIZED,me,F),E&&E.reset()},setConfig:function(z){z&&(z.streamController&&(ee=z.streamController),z.throughputController&&(j=z.throughputController),z.domStorage&&(R=z.domStorage),z.mediaPlayerModel&&(H=z.mediaPlayerModel),z.customParametersModel&&(P=z.customParametersModel),z.cmsdModel&&(S=z.cmsdModel),z.dashMetrics&&(w=z.dashMetrics),z.adapter&&(C=z.adapter),z.videoModel&&(O=z.videoModel),z.settings&&(Q=z.settings),z.capabilities&&(k=z.capabilities))},setPlaybackQuality:Z,unRegisterStreamType:function(z,ie){try{ne[z]&&ne[z][ie]&&delete ne[z][ie],y[z]&&y[z][ie]&&delete y[z][ie]}catch{}}},q=i.getLogger(F),D(),F}Ut.__dashjs_factory_name="AbrController";const It=o.default.getSingletonFactory(Ut);o.default.updateSingletonFactory(Ut.__dashjs_factory_name,It);var gn,Rn,jn,Zn,ra,Wn=It,Nt=function(l){for(var i=[],d=0;d<l.length;++d){var y=l.charCodeAt(d);y<128?i.push(y):y<2048?(i.push(192|y>>6),i.push(128|63&y)):y<65536?(i.push(224|y>>12),i.push(128|63&y>>6),i.push(128|63&y)):(i.push(240|y>>18),i.push(128|63&y>>12),i.push(128|63&y>>6),i.push(128|63&y))}return i},At=function(l){for(var i=[],d=0;d<l.length;){var y=l[d++];y<128||(y<224?(y=(31&y)<<6,y|=63&l[d++]):y<240?(y=(15&y)<<12,y|=(63&l[d++])<<6,y|=63&l[d++]):(y=(7&y)<<18,y|=(63&l[d++])<<12,y|=(63&l[d++])<<6,y|=63&l[d++])),i.push(String.fromCharCode(y))}return i.join("")},ft={};gn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rn=function(l){for(var i=0,d=[],y=0|l.length/3;0<y--;){var b=(l[i]<<16)+(l[i+1]<<8)+l[i+2];i+=3,d.push(gn.charAt(63&b>>18)),d.push(gn.charAt(63&b>>12)),d.push(gn.charAt(63&b>>6)),d.push(gn.charAt(63&b))}return l.length-i==2?(b=(l[i]<<16)+(l[i+1]<<8),d.push(gn.charAt(63&b>>18)),d.push(gn.charAt(63&b>>12)),d.push(gn.charAt(63&b>>6)),d.push("=")):l.length-i==1&&(b=l[i]<<16,d.push(gn.charAt(63&b>>18)),d.push(gn.charAt(63&b>>12)),d.push("==")),d.join("")},jn=(function(){for(var l=[],i=0;i<64;++i)l[gn.charCodeAt(i)]=i;return l[61]=0,l})(),Zn=function(l){for(var i=0,d=[],y=0|l.length/4;0<y--;){var b=(jn[l.charCodeAt(i)]<<18)+(jn[l.charCodeAt(i+1)]<<12)+(jn[l.charCodeAt(i+2)]<<6)+jn[l.charCodeAt(i+3)];d.push(255&b>>16),d.push(255&b>>8),d.push(255&b),i+=4}return d&&(l.charAt(i-2)=="="?(d.pop(),d.pop()):l.charAt(i-1)=="="&&d.pop()),d},ra={encode:function(l){for(var i=[],d=0;d<l.length;++d)i.push(l.charCodeAt(d));return i},decode:function(l){for(var i=0;i<s.length;++i)a[i]=String.fromCharCode(a[i]);return a.join("")}},ft.decodeArray=function(l){var i=Zn(l);return new Uint8Array(i)},ft.encodeASCII=function(l){var i=ra.encode(l);return Rn(i)},ft.decodeASCII=function(l){var i=Zn(l);return ra.decode(i)},ft.encode=function(l){var i=Nt(l);return Rn(i)},ft.decode=function(l){var i=Zn(l);return At(i)},typeof exports<"u"&&(exports.decode=ft.decode,exports.decodeArray=ft.decodeArray,exports.encode=ft.encode,exports.encodeASCII=ft.encodeASCII);var at=ft,xt=t(7393);const Ct=NaN;class Pt{constructor(i,d){this.data={baseUrls:i||null,selectedIdx:d||Ct},this.children=[]}}function Yt(){let l,i,d,y;const b=this.context,E=(0,xt.default)(b).getInstance();function C(P,w,R){const N=k(R);P[w]?E.areEqual(N,P[w].data.baseUrls)||(P[w].data.baseUrls=N,P[w].data.selectedIdx=Ct):P[w]=new Pt(N)}function k(P){let w=d.getBaseURLsFromElement(P);const R=y.getSynthesizedBaseUrlElements(w);return R&&R.length>0&&R.forEach((N=>{const F=w.findIndex((q=>q.serviceLocation===N.serviceLocation));F!==-1?w[F]=N:w.push(N)})),w}function S(P,w){const R=w||i;P(R.data),R.children&&R.children.forEach((N=>S(P,N)))}function L(){i=new Pt}return l={reset:L,update:function(P){(function(w){(function(){if(!d||!d.hasOwnProperty("getBaseURLsFromElement")||!d.hasOwnProperty("getRepresentationSortFunction"))throw new Error("setConfig function has to be called previously")})();const R=k(w);E.areEqual(R,i.data.baseUrls)||(i.data.baseUrls=R,i.data.selectedIdx=Ct),w&&w.Period&&w.Period.forEach(((N,F)=>{C(i.children,F,N),N.AdaptationSet&&N.AdaptationSet.forEach(((q,H)=>{C(i.children[F].children,H,q),q.Representation&&q.Representation.sort(d.getRepresentationSortFunction()).forEach(((U,Q)=>{C(i.children[F].children[H].children,Q,U)}))}))}))})(P)},getForPath:function(P){let w=i;const R=[w.data];return P&&P.forEach((N=>{w=w.children[N],w&&R.push(w.data)})),R.filter((N=>N.baseUrls.length))},invalidateSelectedIndexes:function(P){S((w=>{isNaN(w.selectedIdx)||P===w.baseUrls[w.selectedIdx].serviceLocation&&(w.selectedIdx=Ct)}))},setConfig:function(P){P.adapter&&(d=P.adapter),P.contentSteeringController&&(y=P.contentSteeringController)},getBaseUrls:function(P){return k(P)}},L(),l}Yt.__dashjs_factory_name="BaseURLTreeModel";var yt=o.default.getClassFactory(Yt),bt=t(8748);class Ot extends bt.default{constructor(){super(),this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE=10,this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE=11,this.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE=12,this.SEGMENT_BASE_LOADER_ERROR_CODE=15,this.TIME_SYNC_FAILED_ERROR_CODE=16,this.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE=17,this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE=18,this.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE=19,this.APPEND_ERROR_CODE=20,this.REMOVE_ERROR_CODE=21,this.DATA_UPDATE_FAILED_ERROR_CODE=22,this.CAPABILITY_MEDIASOURCE_ERROR_CODE=23,this.CAPABILITY_MEDIAKEYS_ERROR_CODE=24,this.DOWNLOAD_ERROR_ID_MANIFEST_CODE=25,this.DOWNLOAD_ERROR_ID_SIDX_CODE=26,this.DOWNLOAD_ERROR_ID_CONTENT_CODE=27,this.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE=28,this.DOWNLOAD_ERROR_ID_XLINK_CODE=29,this.MANIFEST_ERROR_ID_PARSE_CODE=31,this.MANIFEST_ERROR_ID_NOSTREAMS_CODE=32,this.TIMED_TEXT_ERROR_ID_PARSE_CODE=33,this.MANIFEST_ERROR_ID_MULTIPLEXED_CODE=34,this.MEDIASOURCE_TYPE_UNSUPPORTED_CODE=35,this.NO_SUPPORTED_KEY_IDS=36,this.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE="parsing failed for ",this.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading manifest: ",this.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE="Failed loading Xlink element: ",this.SEGMENTS_UPDATE_FAILED_ERROR_MESSAGE="Segments update failed",this.SEGMENTS_UNAVAILABLE_ERROR_MESSAGE="no segments are available yet",this.SEGMENT_BASE_LOADER_ERROR_MESSAGE="error loading segment ranges from sidx",this.TIME_SYNC_FAILED_ERROR_MESSAGE="Failed to synchronize client and server time",this.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE="request is null",this.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE="Failed to resolve a valid URL",this.APPEND_ERROR_MESSAGE="chunk is not defined",this.REMOVE_ERROR_MESSAGE="Removing data from the SourceBuffer",this.DATA_UPDATE_FAILED_ERROR_MESSAGE="Data update failed",this.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE="mediasource is not supported",this.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE="mediakeys is not supported",this.TIMED_TEXT_ERROR_MESSAGE_PARSE="parsing error :",this.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE="Error creating source buffer of type : ",this.NO_SUPPORTED_KEY_IDS_MESSAGE="All possible Adaptation Sets have an invalid key status"}}var Gt=new Ot;function _t(l){let i;l=l||{};let d=[];const y=(0,T.default)(this.context).getInstance(),b=l.updateEventName,E=l.addBlacklistEventName;function C(S){d.indexOf(S)===-1&&(d.push(S),y.trigger(b,{entry:S}))}function k(S){C(S.entry)}return i={add:C,remove:function(S){const L=d.indexOf(S);L!==-1&&d.splice(L,1)},contains:function(S){return!!(d.length&&S&&S.length)&&d.indexOf(S)!==-1},reset:function(){E&&y.off(E,k,i),d=[]}},E&&y.on(E,k,i),i}_t.__dashjs_factory_name="BlackListController";var Qt=o.default.getClassFactory(_t);function hn(l){let i;const d=(l=l||{}).blacklistController;return i={select:function(y){return y&&(function(b){let E,C,k=0,S=[],L=0;if(C=b.sort((function(P,w){let R=P.dvbPriority-w.dvbPriority;return isNaN(R)?0:R})).filter((function(P,w,R){return!w||R[0].dvbPriority&&P.dvbPriority&&R[0].dvbPriority===P.dvbPriority})),C.length)return C.length>1&&(C.forEach((P=>{k+=P.dvbWeight,S.push(k)})),E=Math.floor(Math.random()*(k-1)),S.every(((P,w)=>(L=w,!(E<P))))),C[L]})((function(b){let E=[];return b.filter((function(C){return!d.contains(C.serviceLocation)||(C.dvbPriority&&E.push(C.dvbPriority),!1)})).filter((function(C){return!E.length||!C.dvbPriority||E.indexOf(C.dvbPriority)===-1}))})(y))}},i}hn.__dashjs_factory_name="DVBSelector";var rn=o.default.getClassFactory(hn);function on(l){let i;const d=(l=l||{}).blacklistController;return i={select:function(y){let b,E=0;return y&&y.some(((C,k)=>(E=k,!d.contains(C.serviceLocation))))&&(b=y[E]),b}},i}on.__dashjs_factory_name="BasicSelector";var Sn=o.default.getClassFactory(on),Bt=t(1944),rt=t(656),We=t(7263);function Mt(){let l,i;function d(){i&&(i.onloadend=i.onerror=i.onprogress=i.onload=null,i.abort(),i=null)}return l={load:function(y,b){if(i=null,i=new XMLHttpRequest,i.open(y.method,y.url,!0),y.responseType&&(i.responseType=y.responseType),y.headers)for(let E in y.headers){let C=y.headers[E];C&&i.setRequestHeader(E,C)}return i.withCredentials=y.credentials==="include",i.timeout=y.timeout,i.onload=function(){b.url=this.responseURL,b.status=this.status,b.statusText=this.statusText,b.headers=We.default.parseHttpHeaders(this.getAllResponseHeaders()),b.data=this.response},y.customData&&(i.onloadend=y.customData.onloadend,i.onprogress=y.customData.onprogress,i.onabort=y.customData.onabort,i.ontimeout=y.customData.ontimeout),i.send(),y.customData.abort=d.bind(this),!0},abort:d,getXhr:function(){return i},reset:function(){d(),l=null},resetInitialSettings:function(){d()}},l}Mt.__dashjs_factory_name="XHRLoader";var Kt=o.default.getClassFactory(Mt);function dn(){const l=this.context,i=(0,p.default)(l).getInstance();let d,y,b;function E(w,R,N){w.customData.reader.read().then(N).catch((function(){C(w)}))}function C(w){w.customData.onloadend&&w.customData.onloadend()}function k(){return typeof performance<"u"&&typeof performance.now=="function"?performance.now():Date.now()}function S(){if(this.customData.abortController)this.customData.abortController.abort();else if(this.customData.reader)try{this.customData.reader.cancel(),this.onabort()}catch{}}function L(w,R){try{if((w=w.filter((N=>N.bytes>R/4/w.length))).length>1){let N=0;const F=(w[w.length-1].timestamp-w[0].timestamp)/w.length;return w.forEach(((q,H)=>{const U=w[H+1];if(U){const Q=U.timestamp-q.timestamp;N+=Q<F?Q:0}})),N}return null}catch{return null}}function P(w,R){return 8*w/R}return b=(0,u.default)(l).getInstance().getLogger(d),d={abort:S,calculateDownloadedTime:L,load:function(w,R){const N=(function(H){const U=new Headers;if(H.headers)for(let Q in H.headers){let ee=H.headers[Q];ee&&U.append(Q,ee)}return U})(w),F=(function(H){let U;return typeof window.AbortController=="function"&&(U=new AbortController,H.customData.abortController=U,U.signal.onabort=H.customData.onabort),H.customData.abort=S.bind(H),U})(w),q=(function(H,U,Q){return new Request(H.url,{method:H.method,headers:U,credentials:H.credentials,signal:Q?Q.signal:void 0})})(w,N,F);fetch(q).then((H=>{(function(U,Q,ee){(function(ge,Ie){ge.status=Ie.status,ge.statusText=Ie.statusText,ge.url=Ie.url;const Ee={};for(const B of Ie.headers.keys())Ee[B]=Ie.headers.get(B);ge.headers=Ee})(ee,U),U.ok||Q.customData.onloadend();let ne=0,le=!1,j=new Uint8Array,O=0;Q.customData.reader=U.body.getReader();let D=[],M=[],ce=[],V=!0;const me=i.get().streaming.abr.throughput.lowLatencyDownloadTimeCalculationMode,ue=({value:ge,done:Ie})=>{Ie?(function(){if(j){const Ee=(function(){let B=null;return me===c.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING?B=(function(){const K=(function(Z,W){try{let X,ae;if(X=Z.slice(0,-1),ae=W.slice(0,-1),X.length!==ae.length&&b.warn(`[FetchLoader] Moof and Mdat data arrays have different lengths. Moof: ${X.length}, Mdat: ${ae.length}`),X.length<=1)return null;let z=[],ie=0,de=0;for(let pe=0;pe<X.length;pe++)if(X[pe]&&ae[pe]){let _e=ae[pe].timestamp-X[pe].timestamp;if(_e>1){const we=P(ae[pe].bytes,_e);z.push(we),de=0}else{de===0&&(de=X[pe].timestamp,ie=0);let we=ae[pe].timestamp-de;if(we>1){ie+=ae[pe].bytes;const Pe=P(ie,we);z.push(Pe),de=0}else ie+=ae[pe].bytes}}return z.length>0?z.reduce(((pe,_e)=>pe+_e),0)/z.length:null}catch{return null}})(M,ce);return K?8*ne/K:null})():me===c.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.DOWNLOADED_DATA&&(B=L(D,ne)),B})();Q.customData.onprogress({loaded:ne,total:ne,lengthComputable:!0,time:Ee}),ee.data=j.buffer}Q.customData.onloadend()})():(ge&&ge.length>0&&(function(Ee){j=(function(K,Z){if(K.length===0)return Z;const W=new Uint8Array(K.length+Z.length);return W.set(K),W.set(Z,K.length),W})(j,Ee),ne+=Ee.length,D.push({timestamp:k(),bytes:Ee.length}),me===c.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING&&V&&y.findLastTopIsoBoxCompleted(["moof"],j,O).found&&(V=!1,M.push({timestamp:k()}));const B=y.findLastTopIsoBoxCompleted(["moov","mdat"],j,O);B.found?(function(K){const Z=(function(W){let X;return W===j.length?(X=j,j=new Uint8Array):(X=new Uint8Array(j.subarray(0,W)),j=j.subarray(W)),X})(K.startOffsetOfLastFoundTargetBox+K.sizeOfLastFoundTargetBox);me!==c.default.LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE.MOOF_PARSING||V||(V=!0,ce.push({timestamp:k(),bytes:Z.length})),Q.customData.onprogress({data:Z.buffer,lengthComputable:!1,noTrace:!0}),O=0})(B):(function(K){O=K.startOffsetOfLastCompletedBox+K.sizeOfLastCompletedBox,le||(Q.customData.onprogress({lengthComputable:!1,noTrace:!0}),le=!0)})(B)})(ge),E(Q,0,ue))};E(Q,0,ue)})(H,w,R)})).catch((()=>{C(w)}))},reset:function(){},setConfig:function(w){y=w.boxParser}},d}dn.__dashjs_factory_name="FetchLoader";var kn=o.default.getClassFactory(dn),xn=t(913),Kn=class{constructor(){this.period=null,this.index=-1,this.id=null,this.type=null}};class Ln{constructor(i,d,y,b){this.url=i||"",this.serviceLocation=d||i||"",this.dvbPriority=y||1,this.dvbWeight=b||1,this.availabilityTimeOffset=0,this.availabilityTimeComplete=!0,this.queryParams={}}}Ln.DEFAULT_DVB_PRIORITY=1,Ln.DEFAULT_DVB_WEIGHT=1;var qn=Ln,fe=t(8854),Vn=class{constructor(){this.schemeIdUri=null,this.value=null,this.id=null}init(l){l&&(this.schemeIdUri=l.schemeIdUri?l.schemeIdUri:null,this.value=l.value!==null&&l.value!==void 0?l.value.toString():null,this.id=l.id?l.id:null,l[fe.default.DVB_URL]&&(this.dvbUrl=l[fe.default.DVB_URL]),l[fe.default.DVB_MIMETYPE]&&(this.dvbMimeType=l[fe.default.DVB_MIMETYPE]),l[fe.default.DVB_FONTFAMILY]&&(this.dvbFontFamily=l[fe.default.DVB_FONTFAMILY]))}inArray(l){return!!l&&l.some((i=>this.schemeIdUri===i.schemeIdUri&&(this.value?this.value.toString().match(i.value):"".match(i.value))))}},ma=class extends Vn{constructor(){super(),this.version=null,this.sessionID=null,this.contentID=null,this.mode=null,this.keys=null,this.includeInRequests=null}init(l){super.init(l),l&&(this.version=l.version,this.sessionID=l.sessionID,this.contentID=l.contentID,this.mode=l.mode??"query",this.keys=l.keys?l.keys.split(" "):null,this.includeInRequests=l.includeInRequests?l.includeInRequests.split(" "):["segment"],this.schemeIdUri=l.schemeIdUri)}},Fa=class{constructor(){this.adaptationSets=null,this.adaptationSetsArray=[],this.cmcdParameters=null,this.serviceLocations=null,this.serviceLocationsArray=[]}},ea=class extends Vn{constructor(){super(),this.ref=null,this.refId=null,this.robustness=null,this.keyId=null,this.cencDefaultKid=null,this.pssh=null,this.pro=null,this.laUrl=null}init(l){super.init(l),l&&(this.ref=l.hasOwnProperty(fe.default.REF)?l[fe.default.REF]:null,this.refId=l.hasOwnProperty(fe.default.REF_ID)?l[fe.default.REF_ID]:null,this.robustness=l.hasOwnProperty(fe.default.ROBUSTNESS)?l[fe.default.ROBUSTNESS]:null,this.cencDefaultKid=l.hasOwnProperty(fe.default.CENC_DEFAULT_KID)?l[fe.default.CENC_DEFAULT_KID]:null,this.pssh=l.hasOwnProperty(fe.default.PSSH)?l[fe.default.PSSH]:null,this.pro=l.hasOwnProperty(fe.default.PRO)?l[fe.default.PRO]:null,this.laUrl=l.hasOwnProperty(fe.default.LA_URL)?l[fe.default.LA_URL]:l.hasOwnProperty(fe.default.LA_URL_LOWER_CASE)?l[fe.default.LA_URL_LOWER_CASE]:null)}mergeAttributesFromReference(l){["schemeIdUri","value","id","robustness","cencDefaultKid","pro","pssh","laUrl"].forEach((i=>{this[i]===null&&(this[i]=l[i])}))}},sr=class{constructor(){this.defaultServiceLocation=null,this.defaultServiceLocationArray=[],this.queryBeforeStart=!1,this.serverUrl=null,this.clientRequirement=!0}},ta=class{constructor(){this.type="",this.duration=NaN,this.presentationTime=NaN,this.id=NaN,this.messageData="",this.eventStream=null,this.presentationTimeDelta=NaN,this.parsedMessageData=null}},zr=class{constructor(){this.adaptionSet=null,this.representation=null,this.period=null,this.timescale=1,this.value="",this.schemeIdUri="",this.presentationTimeOffset=0}},ri=class{constructor(){this.availabilityEndTime=Number.POSITIVE_INFINITY,this.availabilityStartTime=null,this.manifest=null,this.maxSegmentDuration=Number.POSITIVE_INFINITY,this.mediaPresentationDuration=NaN,this.minimumUpdatePeriod=NaN,this.publishTime=null,this.suggestedPresentationDelay=0,this.timeShiftBufferDepth=Number.POSITIVE_INFINITY}},Fr=class{constructor(l,i){this.url=l||"",this.serviceLocation=i||null,this.queryParams={}}},ii=class{constructor(l,i,d){this.url=l||"",this.serviceLocation=i||null,this.ttl=d||NaN,this.queryParams={}}};class Ur{constructor(){this.id=null,this.index=-1,this.duration=NaN,this.start=NaN,this.mpd=null,this.nextPeriodId=null,this.isEncrypted=!1}}Ur.DEFAULT_ID="defaultId";var Ya=Ur,si=class{constructor(){this.period=null,this.index=-1,this.id=1,this.type=null,this.tag=null,this.order="undefined",this.preselectionComponents=[]}},St=class{constructor(){this.id=null,this.inband=!1,this.type="encoder",this.applicationScheme=null,this.wallClockTime=null,this.presentationTime=NaN,this.UTCTiming=null}},$t=class{constructor(){this.absoluteIndex=NaN,this.adaptation=null,this.availabilityTimeComplete=!0,this.availabilityTimeOffset=0,this.bandwidth=NaN,this.bitrateInKbit=NaN,this.bitsPerPixel=NaN,this.codecFamily=null,this.codecPrivateData=null,this.codecs=null,this.dependencyId=null,this.dependentRepresentation=null,this.endNumber=null,this.essentialProperties=[],this.fragmentDuration=null,this.frameRate=null,this.height=NaN,this.id=null,this.indexRange=null,this.initialization=null,this.maxPlayoutRate=NaN,this.mediaFinishedInformation={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN},this.mediaInfo=null,this.mimeType=null,this.mseTimeOffset=NaN,this.pixelsPerSecond=NaN,this.presentationTimeOffset=0,this.qualityRanking=NaN,this.range=null,this.scanType=null,this.segments=null,this.segmentDuration=NaN,this.segmentInfoType=null,this.segmentSequenceProperties=[],this.supplementalProperties=[],this.startNumber=1,this.timescale=1,this.width=NaN}hasInitialization(){return this.initialization!==null||this.range!==null}hasSegments(){return this.segmentInfoType!==fe.default.BASE_URL&&this.segmentInfoType!==fe.default.SEGMENT_BASE&&!this.indexRange}};function ln(){let l;const i=/^[a-z][a-z0-9+\-_.]*:/i,d=/^https?:\/\//i,y=/^https:\/\//i,b=/^([a-z][a-z0-9+\-_.]*:\/\/[^\/]+)\/?/i,E=(N,F)=>{try{return new window.URL(N,F).toString()}catch{return N}},C=(N,F)=>{let q=k;if(!F||!P(N))return N;w(N)&&(q=S),R(N)&&(q=L);const H=q(F),U=H.charAt(H.length-1)!=="/"&&N.charAt(0)!=="/"?"/":"";return[H,N].join(U)};function k(N){const F=N.indexOf("/"),q=N.lastIndexOf("/");return F!==-1?q===F+1?N:(N.indexOf("?")!==-1&&(N=N.substring(0,N.indexOf("?"))),N.substring(0,q+1)):""}function S(N){const F=N.match(b);return F?F[1]:""}function L(N){const F=N.match(i);return F?F[0]:""}function P(N){return!i.test(N)}function w(N){return P(N)&&N.charAt(0)==="/"}function R(N){return N.indexOf("//")===0}return(function(){try{new window.URL("x","http://y"),l=E}catch{}finally{l=l||C}})(),{parseBaseUrl:k,parseOrigin:S,parseScheme:L,isRelative:P,isPathAbsolute:w,isSchemeRelative:R,isHTTPURL:function(N){return d.test(N)},isHTTPS:function(N){return y.test(N)},removeHostname:function(N){return/^(?:\w+\:\/\/)?([^\/]+)(.*)$/.exec(N)[2].substring(1)},resolve:function(N,F){return l(N,F)}}}ln.__dashjs_factory_name="DefaultURLUtils";var _n=o.default.getSingletonFactory(ln);function wn(){let l,i,d=[];const y=this.context;function b(E,C,k){let S=(function(L){let P;for(P=0;P<d.length;P++)if(d[P].regex.test(L))return d[P].utils;return i})(k||C);return S&&typeof S[E]=="function"?S[E](C,k):i[E](C,k)}return i=_n(y).getInstance(),l={registerUrlRegex:function(E,C){d.push({regex:E,utils:C})},parseBaseUrl:function(E){return b("parseBaseUrl",E)},parseOrigin:function(E){return b("parseOrigin",E)},parseScheme:function(E){return b("parseScheme",E)},isRelative:function(E){return b("isRelative",E)},isPathAbsolute:function(E){return b("isPathAbsolute",E)},isSchemeRelative:function(E){return b("isSchemeRelative",E)},isHTTPURL:function(E){return b("isHTTPURL",E)},isHTTPS:function(E){return b("isHTTPS",E)},removeHostname:function(E){return b("removeHostname",E)},resolve:function(E,C){return b("resolve",E,C)}},l}wn.__dashjs_factory_name="URLUtils";var Dn=o.default.getSingletonFactory(wn),Fn=t(5717),Cn=class{constructor(){this.cadence=1,this.sapType=0,this.event=!0,this.alignment=null}init(l){l&&(this.cadence=l.cadence===void 0||isNaN(l.cadence)?1:l.cadence,this.sapType=l.sapType===void 0||isNaN(l.sapType)?0:l.sapType,this.event=l.event===void 0||l.event,this.alignment=l.alignment!==void 0?l.alignment:null)}};function An(){let l,i,d,y;const b=this.context,E=Dn(b).getInstance(),C=Number.isInteger||function(B){return typeof B=="number"&&isFinite(B)&&Math.floor(B)===B};function k(B,K){if(!B)throw new Error("adaptation is not defined");if(!K)throw new Error("type is not defined");if(B.Representation&&B.Representation.length){const W=le(B.Representation[0]);if(W&&W.some((X=>c.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(X.schemeIdUri)>=0)))return K===c.default.IMAGE}if(B.ContentComponent&&B.ContentComponent.length>0){if(B.ContentComponent.length>1)return K===c.default.MUXED;if(B.ContentComponent[0].contentType===K)return!0}const Z=K===c.default.TEXT?new RegExp("(ttml|vtt|wvtt|stpp)"):new RegExp(K);if(B.Representation&&B.Representation.length){const W=B.Representation[0].codecs;if(Z.test(W))return!0}if(B.hasOwnProperty(fe.default.MIME_TYPE))return Z.test(B.mimeType);if(B.Representation){let W;for(let X=0;X<B.Representation.length;X++)if(W=B.Representation[X],W.hasOwnProperty(fe.default.MIME_TYPE))return Z.test(W.mimeType)}return!1}function S(B){if(!B)throw new Error("adaptation is not defined");if(B.hasOwnProperty(fe.default.SEGMENT_TEMPLATE)||B.hasOwnProperty(fe.default.SEGMENT_TIMELINE)||B.hasOwnProperty(fe.default.SEGMENT_LIST)||B.hasOwnProperty(fe.default.SEGMENT_BASE))return!0;if(B.Representation&&B.Representation.length>0){const K=B.Representation[0];if(K.hasOwnProperty(fe.default.SEGMENT_TEMPLATE)||K.hasOwnProperty(fe.default.SEGMENT_TIMELINE)||K.hasOwnProperty(fe.default.SEGMENT_LIST)||K.hasOwnProperty(fe.default.SEGMENT_BASE))return!0}return!1}function L(B){return k(B,c.default.TEXT)}function P(B){return B&&B.Representation&&B.Representation.sort(((K,Z)=>K.bandwidth-Z.bandwidth)),B}function w(B,K){return B&&B.Period&&C(K)&&B.Period[K]?B.Period[K].AdaptationSet:[]}function R(B){return B&&B.Period?B.Period:[]}function N(B,K,Z){let W=null;if(B&&B.Representation&&B.Representation.length>0){const X=C(K)&&K>=0&&K<B.Representation.length?B.Representation[K]:B.Representation[0];X&&(W=X.mimeType+';codecs="'+X.codecs+'"',Z&&X.width!==void 0&&(W+=';width="'+X.width+'";height="'+X.height+'"'))}return W&&(W=W.replace(/\sprofiles=[^;]*/g,"")),W}function F(B){const K=q(B);return K&&K.length>0}function q(B){let K=[];if(!B)return K;const Z=H(B);return K=K.concat(Z),B.hasOwnProperty(fe.default.ADAPTATION_SET)&&B[fe.default.ADAPTATION_SET].length>0&&B[fe.default.ADAPTATION_SET].forEach((W=>{const X=H(W);K=K.concat(X)})),K}function H(B){return B&&B.hasOwnProperty(fe.default.CONTENT_PROTECTION)&&B.ContentProtection.length!==0?B[fe.default.CONTENT_PROTECTION].map((K=>{const Z=new ea;return Z.init(K),Z})):[]}function U(B){let K=!1;return B&&B.hasOwnProperty("type")&&(K=B.type===fe.default.DYNAMIC),K}function Q(B){if(!B)return null;const K=B[fe.default.FRAMERATE];if(!K)return null;if(typeof K=="string"&&K.includes("/")){const[Z,W]=K.split("/").map((X=>parseInt(X,10)));if(!isNaN(Z)&&!isNaN(W)&&W!==0)return Z/W}return parseInt(K)}function ee(B,K){return K&&K.hasOwnProperty(B)&&K[B].length?K[B].map((Z=>{const W=new Vn;return W.init(Z),W})):[]}function ne(B,K){if(!K)return[];let Z=(function(W,X){if(!X||!X.length)return[];let ae=X[0][W]||[];return ae.length===0?[]:X.length===1?ae:ae.filter((z=>X.slice(1).every((ie=>ie.hasOwnProperty(W)&&ie[W].some((de=>de.schemeIdUri===z.schemeIdUri&&de.value===z.value))))))})(B,K[fe.default.REPRESENTATION]);return K.hasOwnProperty(B)&&K[B].length&&Z.push(...K[B]),Z.map((W=>{const X=new Vn;return X.init(W),X}))}function le(B){return ee(fe.default.ESSENTIAL_PROPERTY,B)}function j(B){return ee(fe.default.SUPPLEMENTAL_PROPERTY,B)}function O(B){return B&&B.hasOwnProperty(fe.default.SEGMENT_SEQUENCE_PROPERTIES)&&B[fe.default.SEGMENT_SEQUENCE_PROPERTIES].length?B[fe.default.SEGMENT_SEQUENCE_PROPERTIES].map((K=>{const Z=new Cn(K);return Z.init(K),Z})):[]}function D(B,K,Z,W,X,ae){const z=new $t;(function(pe,_e,we,Pe,Ke){if(pe.index=Ke,pe.adaptation=we,pe.mediaInfo=Pe,_e.hasOwnProperty(fe.default.ID)&&(pe.id=_e.id),_e.hasOwnProperty(fe.default.CODECS)&&(pe.codecs=_e.codecs,pe.codecFamily=We.default.getCodecFamily(pe.codecs)),_e.hasOwnProperty(fe.default.DEPENDENCY_ID)){const et=_e[fe.default.DEPENDENCY_ID].toString().split(" ")[0];pe.dependencyId=et,pe.dependentRepresentation=new $t,pe.dependentRepresentation.id=et}_e.hasOwnProperty(fe.default.MIME_TYPE)&&(pe.mimeType=_e[fe.default.MIME_TYPE]),_e.hasOwnProperty(fe.default.CODEC_PRIVATE_DATA)&&(pe.codecPrivateData=_e.codecPrivateData),_e.hasOwnProperty(fe.default.BANDWITH)&&(pe.bandwidth=_e.bandwidth,pe.bitrateInKbit=_e.bandwidth/1e3),_e.hasOwnProperty(fe.default.WIDTH)&&(pe.width=_e.width),_e.hasOwnProperty(fe.default.HEIGHT)&&(pe.height=_e.height),_e.hasOwnProperty(fe.default.SCAN_TYPE)&&(pe.scanType=_e.scanType),_e.hasOwnProperty(fe.default.FRAMERATE)&&(pe.frameRate=Q(_e)),_e.hasOwnProperty(fe.default.QUALITY_RANKING)&&(pe.qualityRanking=_e[fe.default.QUALITY_RANKING]),_e.hasOwnProperty(fe.default.MAX_PLAYOUT_RATE)&&(pe.maxPlayoutRate=_e.maxPlayoutRate),pe.essentialProperties=le(_e),pe.supplementalProperties=j(_e),pe.segmentSequenceProperties=O(_e),pe.path=[we.period.index,we.index,Ke]})(z,K,Z,B,ae);const{segmentInfo:ie,segmentInfoType:de}=(function(pe){let _e,we;return pe.hasOwnProperty(fe.default.SEGMENT_BASE)?(_e=pe.SegmentBase,we=fe.default.SEGMENT_BASE):pe.hasOwnProperty(fe.default.SEGMENT_LIST)?(_e=pe.SegmentList,we=_e.hasOwnProperty(fe.default.SEGMENT_TIMELINE)?fe.default.SEGMENT_TIMELINE:fe.default.SEGMENT_LIST):pe.hasOwnProperty(fe.default.SEGMENT_TEMPLATE)?(_e=pe.SegmentTemplate,we=_e.hasOwnProperty(fe.default.SEGMENT_TIMELINE)?fe.default.SEGMENT_TIMELINE:fe.default.SEGMENT_TEMPLATE):we=fe.default.BASE_URL,{segmentInfo:_e,segmentInfoType:we}})(K);return z.segmentInfoType=de,(function(pe,_e,we,Pe,Ke,et){if(pe){if(pe.hasOwnProperty(fe.default.INITIALIZATION_MINUS)&&(we.initialization=pe.initialization.split("$Bandwidth$").join(Ke.bandwidth).split("$RepresentationID$").join(Ke.id)),pe.hasOwnProperty(fe.default.INITIALIZATION)){const ut=pe.Initialization;ut.hasOwnProperty(fe.default.SOURCE_URL)&&(we.initialization=ut.sourceURL),ut.hasOwnProperty(fe.default.RANGE)&&(we.range=ut.range)}else L(Pe)&&S(Pe)&&Pe.mimeType&&Pe.mimeType.indexOf("application/mp4")===-1&&(we.range=0);pe.hasOwnProperty(fe.default.TIMESCALE)&&(we.timescale=pe.timescale),pe.hasOwnProperty(fe.default.DURATION)?we.segmentDuration=pe.duration/we.timescale:_e===fe.default.SEGMENT_TIMELINE&&(we.segmentDuration=(function(ut){if(!ut||!ut.S)return NaN;let qt=ut.S[0],dt=ut.S[1];return qt.hasOwnProperty("d")?qt.d:dt.t-qt.t})(pe.SegmentTimeline)/we.timescale),pe.hasOwnProperty(fe.default.MEDIA)&&(we.media=pe.media),pe.hasOwnProperty(fe.default.START_NUMBER)&&(we.startNumber=parseInt(pe.startNumber)),pe.hasOwnProperty(fe.default.INDEX_RANGE)&&(we.indexRange=pe.indexRange),pe.hasOwnProperty(fe.default.PRESENTATION_TIME_OFFSET)&&(we.presentationTimeOffset=pe.presentationTimeOffset/we.timescale),pe.hasOwnProperty(fe.default.AVAILABILITY_TIME_OFFSET)?we.availabilityTimeOffset=pe.availabilityTimeOffset:et&&et.availabilityTimeOffset!==void 0&&(we.availabilityTimeOffset=et.availabilityTimeOffset),pe.hasOwnProperty(fe.default.AVAILABILITY_TIME_COMPLETE)?we.availabilityTimeComplete=pe.availabilityTimeComplete!=="false":et&&et.availabilityTimeComplete!==void 0&&(we.availabilityTimeComplete=et.availabilityTimeComplete),pe.hasOwnProperty(fe.default.END_NUMBER)&&(we.endNumber=pe[fe.default.END_NUMBER]),we.mseTimeOffset=(function(ut){const qt=ut.presentationTimeOffset;return ut.adaptation.period.start-qt})(we)}})(ie,de,z,W,K,X),(function(pe){isNaN(pe.width)||isNaN(pe.height)||isNaN(pe.frameRate)||(pe.pixelsPerSecond=Math.max(1,pe.width*pe.height*pe.frameRate),isNaN(pe.bandwidth)||(pe.bitsPerPixel=pe.bandwidth/pe.pixelsPerSecond))})(z),z}function M(B){return k(B,c.default.MUXED)?c.default.MUXED:k(B,c.default.AUDIO)?c.default.AUDIO:(function(K){return k(K,c.default.VIDEO)})(B)?c.default.VIDEO:L(B)?c.default.TEXT:(function(K){return k(K,c.default.IMAGE)})(B)?c.default.IMAGE:(i.warn("Unknown Preselection stream type"),null)}function ce(B,K){if(B&&B.hasOwnProperty(fe.default.PRESELECTION_COMPONENTS)&&Array.isArray(K))return String(B.preselectionComponents).split(" ").map((Z=>K.find((W=>W.id===Z))))}function V(B,K){if(!B||!B.hasOwnProperty(fe.default.PRESELECTION_COMPONENTS)||!Array.isArray(K))return;const Z=String(B.preselectionComponents).split(" ");return K.find((W=>W.id===Z[0]))}function me(B,K){if(!B)throw new Error("Period cannot be null or undefined");let Z=Ya.DEFAULT_ID+"_"+K;return B.hasOwnProperty(fe.default.ID)&&B.id.toString().length>0&&B.id!=="__proto__"&&(Z=B.id.toString()),Z}function ue(B,K,Z){const W=[];let X;if(!B)return W;for(X=0;X<B.length;X++){const ae=new zr;if(ae.timescale=1,ae.representation=K,!B[X].hasOwnProperty(c.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");ae.schemeIdUri=B[X].schemeIdUri,B[X].hasOwnProperty(fe.default.TIMESCALE)&&(ae.timescale=B[X].timescale),B[X].hasOwnProperty(fe.default.VALUE)&&(ae.value=B[X].value),W.push(ae),ae.period=Z}return W}function ge(B){const K=[],Z=B.BaseURL||[B.baseUri];let W=!1;return Z.some((X=>{if(X){const ae=new qn;let z=X.__text||X;return E.isRelative(z)&&(W=!0,B.baseUri&&(z=E.resolve(z,B.baseUri))),ae.url=z,X.hasOwnProperty(fe.default.SERVICE_LOCATION)&&X.serviceLocation.length?ae.serviceLocation=X.serviceLocation:ae.serviceLocation=z,X.hasOwnProperty(fe.default.DVB_PRIORITY)&&(ae.dvbPriority=X[fe.default.DVB_PRIORITY]),X.hasOwnProperty(fe.default.DVB_WEIGHT)&&(ae.dvbWeight=X[fe.default.DVB_WEIGHT]),X.hasOwnProperty(fe.default.AVAILABILITY_TIME_OFFSET)&&(ae.availabilityTimeOffset=X[fe.default.AVAILABILITY_TIME_OFFSET]),X.hasOwnProperty(fe.default.AVAILABILITY_TIME_COMPLETE)&&(ae.availabilityTimeComplete=X[fe.default.AVAILABILITY_TIME_COMPLETE]!=="false"),K.push(ae),W}})),K}function Ie(B){const K=new sr;return K.serverUrl=B.__text,B.hasOwnProperty(fe.default.DEFAULT_SERVICE_LOCATION)&&(K.defaultServiceLocation=B[fe.default.DEFAULT_SERVICE_LOCATION],K.defaultServiceLocationArray=K.defaultServiceLocation.split(" ")),B.hasOwnProperty(fe.default.QUERY_BEFORE_START)&&(K.queryBeforeStart=B[fe.default.QUERY_BEFORE_START].toLowerCase()==="true"),B.hasOwnProperty(fe.default.CLIENT_REQUIREMENT)&&(K.clientRequirement=B[fe.default.CLIENT_REQUIREMENT].toLowerCase()!=="false"),K}function Ee(B){const K=new Fa;return B.hasOwnProperty(fe.default.CMCD_PARAMETERS)&&B[fe.default.CMCD_PARAMETERS].schemeIdUri===c.default.CTA_5004_2023_SCHEME&&(K.cmcdParameters=new ma,K.cmcdParameters.init(B[fe.default.CMCD_PARAMETERS])),B.hasOwnProperty(fe.default.SERVICE_LOCATIONS)&&B[fe.default.SERVICE_LOCATIONS]!==""&&(K.serviceLocations=B[fe.default.SERVICE_LOCATIONS],K.serviceLocationsArray=K.serviceLocations.toString().split(" ")),B.hasOwnProperty(fe.default.ADAPTATION_SETS)&&B[fe.default.ADAPTATION_SETS]!==""&&(K.adaptationSets=B[fe.default.ADAPTATION_SETS],K.adaptationSetsArray=K.adaptationSets.toString().split(" ")),K}return l={getAccessibilityForAdaptation:function(B){return B&&B.hasOwnProperty(fe.default.ACCESSIBILITY)&&B[fe.default.ACCESSIBILITY].length?B[fe.default.ACCESSIBILITY].map((K=>{const Z=new Vn;return Z.init(K),Z})):[]},getAdaptationForId:function(B,K,Z){const W=w(K,Z);let X,ae;for(X=0,ae=W.length;X<ae;X++)if(W[X].hasOwnProperty(fe.default.ID)&&W[X].id===B)return W[X];return null},getAdaptationForIndex:function(B,K,Z){const W=w(K,Z);return W.length>0&&C(B)?W[B]:null},getAdaptationsForPeriod:function(B){const K=B&&C(B.index)?B.mpd.manifest.Period[B.index]:null,Z=[];let W,X,ae;if(K&&K.AdaptationSet)for(ae=0;ae<K.AdaptationSet.length;ae++)X=K.AdaptationSet[ae],W=new Kn,X.hasOwnProperty(fe.default.ID)&&(W.id=X.id),W.index=ae,W.period=B,W.type=M(X),Z.push(W);return Z},getAdaptationsForType:function(B,K,Z){const W=w(B,K);let X,ae;const z=[];for(X=0,ae=W.length;X<ae;X++)k(W[X],Z)&&z.push(P(W[X]));return z},getAudioChannelConfigurationForAdaptation:function(B){return B&&B.hasOwnProperty(fe.default.AUDIO_CHANNEL_CONFIGURATION)&&B[fe.default.AUDIO_CHANNEL_CONFIGURATION].length?B[fe.default.AUDIO_CHANNEL_CONFIGURATION].map((K=>{const Z=new Vn;return Z.init(K),Z})):[]},getAudioChannelConfigurationForRepresentation:function(B){return B&&B.hasOwnProperty(fe.default.AUDIO_CHANNEL_CONFIGURATION)&&B[fe.default.AUDIO_CHANNEL_CONFIGURATION].length?B[fe.default.AUDIO_CHANNEL_CONFIGURATION].map((K=>{const Z=new Vn;return Z.init(K),Z})):[]},getAvailabilityStartTime:function(B){return B&&B.hasOwnProperty(fe.default.AVAILABILITY_START_TIME)&&B.availabilityStartTime!==null?B.availabilityStartTime.getTime():null},getBandwidth:function(B){return B&&B.bandwidth?B.bandwidth:NaN},getBaseURLsFromElement:ge,getBitrateListForAdaptation:function(B){const K=P(B);return(K&&K.Representation?K.Representation:[]).map((Z=>({bandwidth:Z.bandwidth,width:Z.width||0,height:Z.height||0,scanType:Z.scanType||null,id:Z.id||null})))},getCodec:N,getCodecForPreselection:function(B,K,Z){let W=null;if(B&&K){let X=N(V(B,K),0,Z);if(B.hasOwnProperty(fe.default.CODECS)){let ae=B.codecs;W=X.replace(/(codecs=")[^"]*(")/,`$1${ae}$2`),i.info("Preselection has own codecs-attribute: replacing in MainAdaptationSet (was: "+X+"), new Preselection codec is: "+W)}else W=X}return W},getCombinedEssentialPropertiesForAdaptationSet:function(B){return ne(fe.default.ESSENTIAL_PROPERTY,B)},getCombinedSupplementalPropertiesForAdaptationSet:function(B){return ne(fe.default.SUPPLEMENTAL_PROPERTY,B)},getContentProtectionByAdaptation:function(B){return H(B)},getContentProtectionByManifest:function(B){let K=[];if(!B)return K;const Z=H(B);return K=K.concat(Z),B.hasOwnProperty(fe.default.PERIOD)&&B[fe.default.PERIOD].length>0&&B[fe.default.PERIOD].forEach((W=>{const X=q(W);K=K.concat(X)})),K},getContentProtectionByPeriod:q,getContentSteering:function(B){if(B&&B.hasOwnProperty(fe.default.CONTENT_STEERING))return Ie(B[fe.default.CONTENT_STEERING][0])},getDuration:function(B){let K;return K=B&&B.hasOwnProperty(fe.default.MEDIA_PRESENTATION_DURATION)?B.mediaPresentationDuration:B&&B.type==="dynamic"?Number.POSITIVE_INFINITY:Number.MAX_SAFE_INTEGER||Number.MAX_VALUE,K},getEssentialProperties:le,getEventStreamForAdaptationSet:function(B,K,Z){let W,X,ae;return B&&B.Period&&K&&K.period&&C(K.period.index)&&(X=B.Period[K.period.index],X&&X.AdaptationSet&&C(K.index)&&(ae=X.AdaptationSet[K.index],ae&&(W=ae.InbandEventStream))),ue(W,null,Z)},getEventStreamForRepresentation:function(B,K,Z){let W,X,ae,z;return B&&B.Period&&K&&K.adaptation&&K.adaptation.period&&C(K.adaptation.period.index)&&(X=B.Period[K.adaptation.period.index],X&&X.AdaptationSet&&C(K.adaptation.index)&&(ae=X.AdaptationSet[K.adaptation.index],ae&&ae.Representation&&C(K.index)&&(z=ae.Representation[K.index],z&&(W=z.InbandEventStream)))),ue(W,K,Z)},getEventsForPeriod:function(B){const K=B&&B.mpd&&B.mpd.manifest?B.mpd.manifest:null,Z=K?K.Period:null,W=Z&&B&&C(B.index)?Z[B.index].EventStream:null,X=[];let ae,z;if(W)for(ae=0;ae<W.length;ae++){const ie=new zr;if(ie.period=B,ie.timescale=1,!W[ae].hasOwnProperty(c.default.SCHEME_ID_URI))throw new Error("Invalid EventStream. SchemeIdUri has to be set");for(ie.schemeIdUri=W[ae][c.default.SCHEME_ID_URI],W[ae].hasOwnProperty(fe.default.TIMESCALE)&&(ie.timescale=W[ae][fe.default.TIMESCALE]),W[ae].hasOwnProperty(fe.default.VALUE)&&(ie.value=W[ae][fe.default.VALUE]),W[ae].hasOwnProperty(fe.default.PRESENTATION_TIME_OFFSET)&&(ie.presentationTimeOffset=W[ae][fe.default.PRESENTATION_TIME_OFFSET]),z=0;W[ae].Event&&z<W[ae].Event.length;z++){const de=W[ae].Event[z],pe=new ta;pe.presentationTime=0,pe.eventStream=ie,de.hasOwnProperty(fe.default.PRESENTATION_TIME)&&(pe.presentationTime=de.presentationTime);const _e=ie.presentationTimeOffset?ie.presentationTimeOffset/ie.timescale:0;pe.calculatedPresentationTime=pe.presentationTime/ie.timescale+B.start-_e,de.hasOwnProperty(fe.default.DURATION)&&(pe.duration=de.duration/ie.timescale),de.hasOwnProperty(fe.default.ID)?pe.id=parseInt(de.id):pe.id=null,de.Signal&&de.Signal.Binary&&de.Signal.Binary.__text?pe.messageData=y.decodeArray(de.Signal.Binary.__text.toString()):pe.messageData=de.messageData||de.__cdata||de.__text,X.push(pe)}}return X},getFramerate:Q,getId:function(B){return B&&B[fe.default.ID]||null},getIndexForAdaptation:function(B,K,Z){if(!B)return-1;const W=w(K,Z);for(let X=0;X<W.length;X++)if((0,xt.default)(b).getInstance().areEqual(W[X],B))return X;return-1},getIsDynamic:U,getIsFragmented:S,getIsText:L,getIsTypeOf:k,getLabelsForAdaptation:function(B){if(!B||!B.Label)return[];const K=[];for(let Z=0;Z<B.Label.length;Z++)K.push({lang:B.Label[Z].lang,text:B.Label[Z].__text||B.Label[Z]});return K},getLanguageForAdaptation:function(B){let K="";return B&&B.hasOwnProperty(fe.default.LANG)&&(K=B.lang),K},getLocation:function(B){return B&&B.hasOwnProperty(fe.default.LOCATION)?B[fe.default.LOCATION].map((K=>{const Z=K.__text||K,W=K.hasOwnProperty(fe.default.SERVICE_LOCATION)?K[fe.default.SERVICE_LOCATION]:null;return new Fr(Z,W)})):[]},getMainAdaptationSetForPreselection:V,getCommonRepresentationForPreselection:function(B,K){if(!B||!Array.isArray(K))return;const Z=V(B,K);return Z?Z.Representation[0]:void 0},getManifestUpdatePeriod:function(B,K=0){let Z=NaN;return B&&B.hasOwnProperty(fe.default.MINIMUM_UPDATE_PERIOD)&&(Z=B.minimumUpdatePeriod),isNaN(Z)?Z:Math.max(Z-K,1)},getMimeType:function(B){return B&&B.Representation&&B.Representation.length>0?B.Representation[0].mimeType:null},getMpd:function(B){const K=new ri;return B&&(K.manifest=B,B.hasOwnProperty(fe.default.AVAILABILITY_START_TIME)?K.availabilityStartTime=new Date(B.availabilityStartTime.getTime()):B.loadedTime&&(K.availabilityStartTime=new Date(B.loadedTime.getTime())),B.hasOwnProperty(fe.default.AVAILABILITY_END_TIME)&&(K.availabilityEndTime=new Date(B.availabilityEndTime.getTime())),B.hasOwnProperty(fe.default.MINIMUM_UPDATE_PERIOD)&&(K.minimumUpdatePeriod=B.minimumUpdatePeriod),B.hasOwnProperty(fe.default.MEDIA_PRESENTATION_DURATION)&&(K.mediaPresentationDuration=B.mediaPresentationDuration),B.hasOwnProperty(fe.default.SUGGESTED_PRESENTATION_DELAY)&&(K.suggestedPresentationDelay=B.suggestedPresentationDelay),B.hasOwnProperty(fe.default.TIMESHIFT_BUFFER_DEPTH)&&(K.timeShiftBufferDepth=B.timeShiftBufferDepth),B.hasOwnProperty(fe.default.MAX_SEGMENT_DURATION)&&(K.maxSegmentDuration=B.maxSegmentDuration),B.hasOwnProperty(fe.default.PUBLISH_TIME)&&(K.publishTime=new Date(B.publishTime))),K},getPatchLocation:function(B){return B&&B.hasOwnProperty(fe.default.PATCH_LOCATION)?B[fe.default.PATCH_LOCATION].map((K=>{const Z=K.__text||K,W=K.hasOwnProperty(fe.default.SERVICE_LOCATION)?K[fe.default.SERVICE_LOCATION]:null;let X=K.hasOwnProperty(fe.default.TTL)?1e3*parseFloat(K[fe.default.TTL]):NaN;return new ii(Z,W,X)})):[]},getPreselectionIsTypeOf:function(B,K,Z){if(!B)throw new Error("preselection is not defined");if(!K)throw new Error("adaptations is not defined");if(!Z)throw new Error("type is not defined");const W=V(B,K);return!!W&&k(W,Z)},getPreselectionsForPeriod:function(B){const K=B&&C(B.index)?B.mpd.manifest.Period[B.index]:null,Z=[];let W,X,ae;if(K&&K.Preselection)for(ae=0;ae<K.Preselection.length;ae++){X=K.Preselection[ae],W=new si;const z=ce(X,K.AdaptationSet);z.every((ie=>!!ie))&&z.length===1?(X.hasOwnProperty(fe.default.ID)&&(W.id=X.id),W.index=ae,W.period=B,X.hasOwnProperty(fe.default.TAG)&&(W.tag=X.tag),X.hasOwnProperty(fe.default.PRESELECTION_COMPONENTS)?W.preselectionComponents=z:i.warn("Preselection (index: "+W.index+") missing component(s)"),X.hasOwnProperty(fe.default.ORDER)&&(W.order=X.order),W.type=M(z[0]),Z.push(W)):i.warn("Preselection removed because we don't support multi-representation preselections or not all components available.")}return Z},getProducerReferenceTimesForAdaptation:function(B){const K=B&&B.hasOwnProperty(fe.default.PRODUCER_REFERENCE_TIME)?B[fe.default.PRODUCER_REFERENCE_TIME]:[];(B&&B.hasOwnProperty(fe.default.REPRESENTATION)?B[fe.default.REPRESENTATION]:[]).forEach((W=>{W.hasOwnProperty(fe.default.PRODUCER_REFERENCE_TIME)&&K.push(...W[fe.default.PRODUCER_REFERENCE_TIME])}));const Z=[];return K.forEach((W=>{const X=new St;W.hasOwnProperty(fe.default.ID)&&(X[fe.default.ID]=parseInt(W[fe.default.ID]),W.hasOwnProperty(fe.default.WALL_CLOCK_TIME)&&(X[fe.default.WALL_CLOCK_TIME]=W[fe.default.WALL_CLOCK_TIME],W.hasOwnProperty(fe.default.PRESENTATION_TIME)&&(X[fe.default.PRESENTATION_TIME]=W[fe.default.PRESENTATION_TIME],W.hasOwnProperty(fe.default.INBAND)&&(X[fe.default.INBAND]=W[fe.default.INBAND]!=="false"),W.hasOwnProperty(fe.default.TYPE)&&(X[fe.default.TYPE]=W[fe.default.TYPE]),Z.push(X))))})),Z},getPublishTime:function(B){return B&&B.hasOwnProperty(fe.default.PUBLISH_TIME)?new Date(B[fe.default.PUBLISH_TIME]):null},getRealPeriodForIndex:function(B,K){const Z=R(K);return Z.length>0&&C(B)?Z[B]:null},getRealPeriods:R,getRegularPeriods:function(B){const K=!!B&&U(B.manifest),Z=[];let W,X,ae=null,z=null,ie=null,de=null;for(X=0,W=B&&B.manifest&&B.manifest.Period?B.manifest.Period.length:0;X<W;X++)z=B.manifest.Period[X],z.hasOwnProperty(fe.default.START)?(de=new Ya,de.start=z.start):ae!==null&&ae.hasOwnProperty(fe.default.DURATION)&&ie!==null?(de=new Ya,de.start=parseFloat((ie.start+ie.duration).toFixed(5))):X!==0||K||(de=new Ya,de.start=0),ie!==null&&isNaN(ie.duration)&&(de!==null?ie.duration=parseFloat((de.start-ie.start).toFixed(5)):i.warn("First period duration could not be calculated because lack of start and duration period properties. This will cause timing issues during playback")),de!==null&&(de.id=me(z,X),de.index=X,de.mpd=B,de.isEncrypted=F(z),z.hasOwnProperty(fe.default.DURATION)&&(de.duration=z.duration),ie&&(ie.nextPeriodId=de.id),Z.push(de),ae=z,ie=de),z=null,de=null;return Z.length===0||ie!==null&&isNaN(ie.duration)&&(ie.duration=parseFloat(((function(pe){(function(){if(!d||!d.hasOwnProperty("error"))throw new Error(c.default.MISSING_CONFIG_ERROR)})();const _e=U(pe.mpd.manifest);let we;return pe.mpd.manifest.mediaPresentationDuration?we=pe.mpd.manifest.mediaPresentationDuration:pe.duration?we=pe.duration:_e?we=Number.POSITIVE_INFINITY:d.error(new Bt.default(Gt.MANIFEST_ERROR_ID_PARSE_CODE,"Must have @mediaPresentationDuration on MPD or an explicit @duration on the last period.",pe)),we})(ie)-ie.start).toFixed(5))),Z},getRepresentationCount:function(B){return B&&B.Representation?B.Representation.length:0},getRepresentationFor:function(B,K){return K&&K.Representation&&K.Representation.length>0&&C(B)?K.Representation[B]:null},getRepresentationSortFunction:function(){return(B,K)=>B.bandwidth-K.bandwidth},getRepresentationsForAdaptation:function(B,K){const Z=[],W=(function(ae){if(ae&&ae.period&&C(ae.period.index)){const z=ae.period.mpd.manifest.Period[ae.period.index];if(z&&z.AdaptationSet&&C(ae.index))return P(z.AdaptationSet[ae.index])}})(B);let X;if(W&&W.Representation){if(B&&B.period&&C(B.period.index)){const ae=ge(B.period.mpd.manifest);ae&&(X=ae[0])}for(let ae=0,z=W.Representation.length;ae<z;++ae){const ie=D(K,W.Representation[ae],B,W,X,ae);Z.push(ie)}}return Z},getRolesForAdaptation:function(B){return B&&B.hasOwnProperty(fe.default.ROLE)&&B[fe.default.ROLE].length?B[fe.default.ROLE].map((K=>{K.schemeIdUri===c.default.DASH_ROLE_SCHEME_ID&&K.value==="Main"&&(K.value=fe.default.MAIN);const Z=new Vn;return Z.init(K),Z})):[]},getSegmentAlignment:function(B){return!(!B||!B.hasOwnProperty(fe.default.SEGMENT_ALIGNMENT))&&B[fe.default.SEGMENT_ALIGNMENT]==="true"},getSegmentSequencePropertiesForAdaptationSet:function(B){const K=[];return B&&(K.push(...O(B)),B.Representation&&B.Representation.length&&B.Representation.forEach((Z=>{K.push(...O(Z))}))),K},getSelectionPriority:function(B){try{const K=B&&B.selectionPriority!==void 0?parseInt(B.selectionPriority):1;return isNaN(K)?1:K}catch{return 1}},getServiceDescriptions:function(B){const K=[];if(B&&B.hasOwnProperty(fe.default.SERVICE_DESCRIPTION))for(const Z of B.ServiceDescription){let W=null,X=null,ae=null,z=null,ie=null,de=null,pe=null,_e=null;for(const we in Z)if(Z.hasOwnProperty(we))if(we===fe.default.ID)W=Z[we];else if(we===fe.default.SERVICE_DESCRIPTION_SCOPE)X=Z[we].schemeIdUri;else if(we===fe.default.SERVICE_DESCRIPTION_LATENCY)ae={target:parseInt(Z[we].target),max:parseInt(Z[we].max),min:parseInt(Z[we].min),referenceId:parseInt(Z[we].referenceId)};else if(we===fe.default.SERVICE_DESCRIPTION_PLAYBACK_RATE)z={max:parseFloat(Z[we].max),min:parseFloat(Z[we].min)};else if(we===fe.default.SERVICE_DESCRIPTION_OPERATING_QUALITY)ie={mediaType:Z[we].mediaType,max:parseInt(Z[we].max),min:parseInt(Z[we].min),target:parseInt(Z[we].target),type:Z[we].type,maxQualityDifference:parseInt(Z[we].maxQualityDifference)};else if(we===fe.default.SERVICE_DESCRIPTION_OPERATING_BANDWIDTH)de={mediaType:Z[we].mediaType,max:parseInt(Z[we].max),min:parseInt(Z[we].min),target:parseInt(Z[we].target)};else if(we===fe.default.CONTENT_STEERING){let Pe=Z[we];Pe=Array.isArray(Pe)?Pe.at(Pe.length-1):Pe,pe=Ie(Pe)}else we===fe.default.CLIENT_DATA_REPORTING&&(_e=Ee(Z[we]));K.push({id:W,schemeIdUri:X,latency:ae,playbackRate:z,operatingQuality:ie,operatingBandwidth:de,contentSteering:pe,clientDataReporting:_e})}return K},getSubSegmentAlignment:function(B){return!(!B||!B.hasOwnProperty(fe.default.SUB_SEGMENT_ALIGNMENT))&&B[fe.default.SUB_SEGMENT_ALIGNMENT]==="true"},getSuggestedPresentationDelay:function(B){return B&&B.hasOwnProperty(fe.default.SUGGESTED_PRESENTATION_DELAY)?B.suggestedPresentationDelay:null},getSupplementalProperties:j,getUTCTimingSources:function(B){const K=U(B),Z=!!B&&B.hasOwnProperty(fe.default.AVAILABILITY_START_TIME),W=B?B.UTCTiming:null,X=[];return(K||Z)&&W&&W.forEach((function(ae){const z=new Fn.default;ae.hasOwnProperty(c.default.SCHEME_ID_URI)&&(z.schemeIdUri=ae.schemeIdUri,ae.hasOwnProperty(fe.default.VALUE)&&(z.value=ae.value.toString(),X.push(z)))})),X},getViewpointForAdaptation:function(B){return B&&B.hasOwnProperty(fe.default.VIEWPOINT)&&B[fe.default.VIEWPOINT].length?B[fe.default.VIEWPOINT].map((K=>{const Z=new Vn;return Z.init(K),Z})):[]},hasProfile:function(B,K){let Z=!1;return B&&B.profiles&&B.profiles.length>0&&(Z=B.profiles.indexOf(K)!==-1),Z},isPeriodEncrypted:F,setConfig:function(B){B&&(B.errHandler&&(d=B.errHandler),B.BASE64&&(y=B.BASE64))}},i=(0,u.default)(b).getInstance().getLogger(l),l}An.__dashjs_factory_name="DashManifestModel";var In=o.default.getSingletonFactory(An);const Mn="utf-16",va="utf-16be",wa="utf-16le",_a="utf-8";function Ua(l,i){if(l<0)return-Ua(-l,i);const d=Math.pow(10,i);if(Math.abs(l*d%1-.5)<Number.EPSILON){const y=Math.floor(l*d);return(y%2==0?y:y+1)/d}return Math.round(l*d)/d}const oi=/&(?:amp|lt|gt|quot|apos|nbsp|lrm|rlm|#[xX]?[0-9a-fA-F]+);/g;function or(l){return l.indexOf("&")===-1?l:l.replace(oi,(i=>{switch(i){case"&amp;":return"&";case"&lt;":return"<";case"&gt;":return">";case"&quot;":return'"';case"&apos;":return"'";case"&nbsp;":return" ";case"&lrm;":return"‎";case"&rlm;":return"‏";default:if(i[1]==="#"){const d=i[2]==="x"||i[2]==="X"?parseInt(i.slice(3),16):parseInt(i.slice(2),10);return String.fromCodePoint(d)}return i}}))}var ia=class Us{constructor(i,d){Array.isArray(i)&&(i=i.map((y=>y instanceof Us?y:new Us(y)))),this.value=i,this.params=d}};const Ka="Dict";function Qn(l,i){return{value:l,src:i}}function li(l,i,d,y){return new Error(`failed to ${l} "${b=i,Array.isArray(b)?JSON.stringify(b):b instanceof Map?"Map{}":b instanceof Set?"Set{}":typeof b=="object"?JSON.stringify(b):String(b)}" as ${d}`,{cause:y});var b}function Pn(l,i,d){return li("parse",l,i,d)}const Br="Inner List",jr="Bare Item",qr="Boolean",Hr="Byte Sequence",ui="Date",Gr="Decimal",ci="Integer",On=`${ci} or ${Gr}`;function Va(l){return l<-999999999999999||999999999999999<l}function lr(l){let i,d=1,y="";const b=Pn(l,On);if(l[0]==="-"&&(d=-1,l=l.substring(1)),l.length<=0)throw b;const E=/^(\d+)?/g,C=E.exec(l);if(C[0].length===0)throw b;if(y+=C[1],(l=l.substring(E.lastIndex))[0]==="."){if(y.length>12)throw b;const k=/^(\.\d+)?/g,S=k.exec(l);if(l=l.substring(k.lastIndex),S[0].length===0||S[1].length>4||(y+=S[1],y.length>16))throw b;i=parseFloat(y)*d}else{if(y.length>15)throw b;if(i=parseInt(y)*d,Va(i))throw Pn(y,On)}return Qn(i,l)}const ga="String",di=/[\x00-\x1f\x7f]+/;var sa=class{constructor(l){this.description=l}};const fi="Token";function Sa(l,i){const d=l[0];if(d==='"')return(function(y){let b="",E=0;if(y[E]!=='"')throw Pn(y,ga);for(E++;y.length>E;){if(y[E]==="\\"){if(y.length<=E+1||(E++,y[E]!=='"'&&y[E]!=="\\"))throw Pn(y,ga);b+=y[E]}else{if(y[E]==='"')return Qn(b,y.substring(++E));if(di.test(y[E]))throw Pn(y,ga);b+=y[E]}E++}throw Pn(y,ga)})(l);if(/^[-0-9]/.test(d))return lr(l);if(d==="?")return(function(y){let b=0;if(y[b]!=="?")throw Pn(y,qr);if(b++,y[b]==="1")return Qn(!0,y.substring(++b));if(y[b]==="0")return Qn(!1,y.substring(++b));throw Pn(y,qr)})(l);if(d===":")return(function(y){if(y[0]!==":"||(y=y.substring(1)).includes(":")===!1)throw Pn(y,Hr);const b=/(^.*?)(:)/g,E=b.exec(y)[1];return y=y.substring(b.lastIndex),Qn(new Uint8Array([...atob(E)].map((C=>C.charCodeAt(0)))),y)})(l);if(/^[a-zA-Z*]/.test(d))return(function(y,b){if(/^[a-zA-Z*]$/.test(y[0])===!1)throw Pn(y,fi);const E=/^([!#$%&'*+\-.^_`|~\w:/]+)/g,C=E.exec(y)[1];return y=y.substring(E.lastIndex),Qn(Symbol.for(C),y)})(l);if(d==="@")return(function(y){let b=0;if(y[b]!=="@")throw Pn(y,ui);b++;const E=lr(y.substring(b));if(Number.isInteger(E.value)===!1)throw Pn(y,ui);return Qn(new Date(1e3*E.value),E.src)})(l);throw Pn(l,jr)}const Ks="Key";function Vs(l){let i=0;if(/^[a-z*]$/.test(l[i])===!1)throw Pn(l,Ks);let d="";for(;l.length>i;){if(/^[a-z0-9_\-.*]$/.test(l[i])===!1)return Qn(d,l.substring(i));d+=l[i],i++}return Qn(d,l.substring(i))}function Gi(l,i){let d;for(;l.length>0&&l[0]===";";){const y=Vs(l=l.substring(1).trim()),b=y.value;let E=!0;if((l=y.src)[0]==="="){const C=Sa(l=l.substring(1));E=C.value,l=C.src}d==null&&(d={}),d[b]=E}return Qn(d,l)}function $s(l,i){const d=Sa(l),y=Gi(l=d.src);return l=y.src,Qn(new ia(d.value,y.value),l)}function Ws(l,i){return l[0]==="("?(function(d,y){if(d[0]!=="(")throw Pn(d,Br);d=d.substring(1);const b=[];for(;d.length>0;){if((d=d.trim())[0]===")"){const C=Gi(d=d.substring(1));return Qn(new ia(b,C.value),C.src)}const E=$s(d);if(b.push(E.value),(d=E.src)[0]!==" "&&d[0]!==")")throw Pn(d,Br)}throw Pn(d,Br)})(l):$s(l)}const mi="List";function La(l,i,d){return li("serialize",l,i,d)}function Qs(l){if(Va(l))throw La(l,ci);return l.toString()}function xc(l){const i=Ua(l,3);if(Math.floor(Math.abs(i)).toString().length>12)throw La(l,Gr);const d=i.toString();return d.includes(".")?d:`${d}.0`}function Xs(l){return l.description||l.toString().slice(7,-1)}function Js(l){const i=Xs(l);if(/^([a-zA-Z*])([!#$%&'*+\-.^_`|~\w:/]*)$/.test(i)===!1)throw La(i,fi);return i}function Yi(l){switch(typeof l){case"number":if(!Number.isFinite(l))throw La(l,jr);return Number.isInteger(l)?Qs(l):xc(l);case"string":return(function(i){if(di.test(i))throw La(i,ga);return`"${i.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`})(l);case"symbol":return Js(l);case"boolean":return(function(i){if(typeof i!="boolean")throw La(i,qr);return i?"?1":"?0"})(l);case"object":if(l instanceof Date)return(function(i){return`@${Qs(i.getTime()/1e3)}`})(l);if(l instanceof Uint8Array)return(function(i){if(ArrayBuffer.isView(i)===!1)throw La(i,Hr);return`:${d=i,btoa(String.fromCharCode(...d))}:`;var d})(l);if(l instanceof sa)return Js(l);default:throw La(l,jr)}}function Ki(l){if(/^[a-z*][a-z0-9\-_.*]*$/.test(l)===!1)throw La(l,Ks);return l}function Vi(l){return l==null?"":Object.entries(l).map((([i,d])=>d===!0?`;${Ki(i)}`:`;${Ki(i)}=${Yi(d)}`)).join("")}function Zs(l){return l instanceof ia?`${Yi(l.value)}${Vi(l.params)}`:Yi(l)}function eo(l,i){return(function(d,y={whitespace:!0}){if(typeof d!="object"||d==null)throw La(d,Ka);const b=d instanceof Map?d.entries():Object.entries(d),E=y?.whitespace?" ":"";return Array.from(b).map((([C,k])=>{k instanceof ia==0&&(k=new ia(k));let S=Ki(C);return k.value===!0?S+=Vi(k.params):(S+="=",Array.isArray(k.value)?S+=(function(L){return`(${L.value.map(Zs).join(" ")})${Vi(L.params)}`})(k):S+=Zs(k)),S})).join(`,${E}`)})(l,i)}const to={MANIFEST:"m",AUDIO:"a",VIDEO:"v",MUXED:"av",INIT:"i",CAPTION:"c",TIMED_TEXT:"tt",KEY:"k",OTHER:"o"},ka="CMCD-Object",Hn="CMCD-Request",$a="CMCD-Session",Ba="CMCD-Status",Dc={br:ka,ab:ka,d:ka,ot:ka,tb:ka,tpb:ka,lb:ka,tab:ka,lab:ka,url:ka,pb:Hn,bl:Hn,tbl:Hn,dl:Hn,ltc:Hn,mtp:Hn,nor:Hn,nrr:Hn,rc:Hn,sn:Hn,sta:Hn,su:Hn,ttfb:Hn,ttfbb:Hn,ttlb:Hn,cmsdd:Hn,cmsds:Hn,smrt:Hn,df:Hn,cs:Hn,ts:Hn,cid:$a,pr:$a,sf:$a,sid:$a,st:$a,v:$a,msd:$a,bs:Ba,bsd:Ba,cdn:Ba,rtp:Ba,bg:Ba,pt:Ba,ec:Ba,e:Ba},$i={OBJECT:ka,REQUEST:Hn,SESSION:$a,STATUS:Ba},no="event",gi=l=>Math.round(l),Wi=(l,i)=>Array.isArray(l)?l.map((d=>Wi(d,i))):l instanceof ia&&typeof l.value=="string"?new ia(Wi(l.value,i),l.params):(i.baseUrl&&(l=(function(d,y){const b=new URL(d),E=new URL(y);if(b.origin!==E.origin)return d;const C=b.pathname.split("/").slice(1),k=E.pathname.split("/").slice(1,-1),S=Math.min(C.length,k.length);for(let L=0;L<S&&C[L]===k[L];L++)C.shift(),k.shift();for(;k.length;)k.shift(),C.unshift("..");return C.join("/")+b.search+b.hash})(l,i.baseUrl)),i.version===1?encodeURIComponent(l):l),hi=l=>100*gi(l/100),Lc={br:gi,d:gi,bl:hi,dl:hi,mtp:hi,nor:(l,i)=>{let d=l;return i.version>=2&&(l instanceof ia&&typeof l.value=="string"?d=new ia([l]):typeof l=="string"&&(d=[l])),Wi(d,i)},rtp:hi,tb:gi},ao="request",Qi=["ab","bg","bl","br","bs","bsd","cdn","cid","cs","df","ec","lab","lb","ltc","msd","mtp","pb","pr","pt","sf","sid","sn","st","sta","tab","tb","tbl","tpb","ts","v"],ro=["e"],Xi=["cmsdd","cmsds","rc","smrt","ttfb","ttfbb","ttlb","url"],Mc=/^[a-zA-Z0-9-.]+-[a-zA-Z0-9-.]+$/;function Ji(l){return Mc.test(l)}const io=["d","dl","nor","ot","rtp","su"],so=["bl","br","bs","cid","d","dl","mtp","nor","nrr","ot","pr","rtp","sf","sid","st","su","tb","v"];function Pc(l){return so.includes(l)||Ji(l)}const Oc={[no]:function(l){return Qi.includes(l)||ro.includes(l)||Xi.includes(l)||Ji(l)},[ao]:function(l){return Qi.includes(l)||io.includes(l)||Ji(l)}};function oo(l,i={}){const d={};if(l==null||typeof l!="object")return d;const y=i.version||l.v||1,b=i.reportingMode||ao,E=y===1?Pc:Oc[b];let C=Object.keys(l).filter(E);l.e&&l.e!=="rr"&&(C=C.filter((w=>!(function(R){return Xi.includes(R)})(w))));const k=i.filter;typeof k=="function"&&(C=C.filter(k));const S=b===no;S&&!C.includes("ts")&&C.push("ts"),y>1&&!C.includes("v")&&C.push("v");const L=Object.assign({},Lc,i.formatters),P={version:y,reportingMode:b,baseUrl:i.baseUrl};return C.sort().forEach((w=>{let R=l[w];const N=L[w];if(typeof N=="function"&&(R=N(R,P)),w==="v"){if(y===1)return;R=y}w=="pr"&&R===1||(S&&w==="ts"&&!Number.isFinite(R)&&(R=Date.now()),(function(F){return typeof F=="number"?Number.isFinite(F):F!=null&&F!==""&&F!==!1})(R)&&((function(F){return["ot","sf","st","e","sta"].includes(F)})(w)&&typeof R=="string"&&(R=new sa(R)),d[w]=R))})),d}function zc(l,i={}){const d={};if(!l)return d;const y=(function(b,E){const C={};if(!b)return C;const k=Object.keys(b),S=E?(L=E,Object.keys(L).reduce(((P,w)=>(L[w]?.forEach((R=>P[R]=w)),P)),{})):{};var L;return k.reduce(((P,w)=>{const R=Dc[w]||S[w]||$i.REQUEST;return(P[R]??={})[w]=b[w],P}),C)})(oo(l,i),i?.customHeaderMap);return Object.entries(y).reduce(((b,[E,C])=>{const k=eo(C,{whitespace:!1});return k&&(b[E]=k),b}),d)}const Fc=new Set([...so,...Qi,...io,...Xi,...ro]),Ma=(Array.from(Fc),to),lo={DASH:"d",HLS:"h",SMOOTH:"s",OTHER:"o"},uo={VOD:"v",LIVE:"l"},co="segment";function fo(){let l,i,d,y,b,E,C,k,S,L,P,w,R,N,F,q,H=this.context,U=(0,T.default)(H).getInstance(),Q=(0,p.default)(H).getInstance(),ee=(0,u.default)(H).getInstance();function ne(){y={pr:1,nor:null,st:null,sf:null,sid:`${We.default.generateUuid()}`,cid:null},R={},w={},N={},P=void 0,F=void 0,q=!1,D()}function le(){D()}function j(){F||(F=Date.now())}function O(){F&&!y.msd&&(y.msd=Date.now()-F)}function D(){if(!C)return;const X=C.getStreamController();if(!X||typeof X.getActiveStream!="function")return;const ae=X.getActiveStream();ae&&(L=ae.getStreamProcessors())}function M(X){try{const ae=V(),z=ae.version?ae.keys:Q.get().streaming.cmcd.enabledKeys;return Object.keys(X).filter((ie=>z.includes(ie))).reduce(((ie,de)=>(ie[de]=X[de],ie)),{})}catch{return X}}function ce(){const X=V();return(function(ae){if(Object.keys(ae).length){if(parseInt(ae.version)!==1)return d.error("version parameter must be defined in 1."),!1;if(!ae.keys)return d.error("keys parameter must be defined."),!1}const z=ae.version,ie=Q.get().streaming.cmcd&&Q.get().streaming.cmcd.enabled;return z||ie})(X)&&(function(ae){let z=Q.get().streaming.cmcd.includeInRequests;ae.version&&(z=ae.includeInRequests??[co]);const ie=c.default.CMCD_AVAILABLE_REQUESTS,de=z.filter((pe=>!ie.includes(pe)));return de.length===z.length?(d.error("None of the request types are supported."),!1):(de.map((pe=>{d.warn(`request type ${pe} is not supported.`)})),!0)})(X)&&(function(ae){const z=c.default.CMCD_AVAILABLE_KEYS,ie=c.default.CMCD_V2_AVAILABLE_KEYS,de=ae.version?ae.keys:Q.get().streaming.cmcd.enabledKeys,pe=Q.get().streaming.cmcd.version,_e=de.filter((we=>!(z.includes(we)||pe===2&&ie.includes(we))));return _e.length===de.length&&de.length>0?(d.error(`None of the keys are implemented for CMCD version ${pe}.`),!1):(_e.map((we=>{d.warn(`key parameter ${we} is not implemented for CMCD version ${pe}.`)})),!0)})(X)}function V(){let X={};if(k){const ae=k.getServiceDescriptionSettings();Q.get().streaming.cmcd.applyParametersFromMpd&&ae.clientDataReporting&&ae.clientDataReporting.cmcdParameters&&(X=ae.clientDataReporting.cmcdParameters)}return X}function me(X){try{let z=null;if(X.type,(ae=X.mediaType)!==c.default.VIDEO&&ae!==c.default.AUDIO||P&&P!=c.default.AUDIO||(P=ae),(function(ie){const de=V();let pe=Q.get().streaming.cmcd.includeInRequests;de.version&&(pe=de.includeInRequests?de.includeInRequests:[co]);const _e={[De.HTTPRequest.INIT_SEGMENT_TYPE]:"segment",[De.HTTPRequest.MEDIA_SEGMENT_TYPE]:"segment",[De.HTTPRequest.XLINK_EXPANSION_TYPE]:"xlink",[De.HTTPRequest.MPD_TYPE]:"mpd",[De.HTTPRequest.CONTENT_STEERING_TYPE]:"steering",[De.HTTPRequest.OTHER_TYPE]:"other"};return pe.some((we=>_e[ie]===we))})(X.type)){if(X.type===De.HTTPRequest.MPD_TYPE)return(function(){const ie=Ie();return ie.ot=Ma.MANIFEST,ie})();if(X.type===De.HTTPRequest.MEDIA_SEGMENT_TYPE)return ge(X.mediaType),ue(X,X.mediaType);if(X.type===De.HTTPRequest.INIT_SEGMENT_TYPE)return(function(){const ie=Ie();return ie.ot=Ma.INIT,ie.su=!0,ie})();if(X.type===De.HTTPRequest.OTHER_TYPE||X.type===De.HTTPRequest.XLINK_EXPANSION_TYPE)return(function(){const ie=Ie();return ie.ot=Ma.OTHER,ie})();if(X.type===De.HTTPRequest.LICENSE)return(function(){const ie=Ie();return ie.ot=Ma.KEY,ie})();if(X.type===De.HTTPRequest.CONTENT_STEERING_TYPE)return(function(ie){const de=P?ue(ie,P):Ie();return de.ot=Ma.OTHER,de})(X)}return z}catch{return null}var ae}function ue(X,ae){ge(ae);const z=Ie(),ie=(function(dt){try{return parseInt(dt.bandwidth/1e3)}catch{return null}})(X),de=(function(dt){try{return isNaN(dt.duration)?NaN:Math.round(1e3*dt.duration)}catch{return null}})(X),pe=(function(dt){try{return 100*parseInt(S.getSafeAverageThroughput(dt)/100)}catch{return null}})(ae),_e=(function(dt){try{const jt=y.pr,Zt=E.getCurrentBufferLevel(dt);return isNaN(jt)||isNaN(Zt)?null:100*parseInt(Zt/jt*10)}catch{return null}})(ae),we=Ee(ae),Pe=(function(dt){try{const jt=b.getPossibleVoRepresentationsFilteredBySettings(dt).map((Zt=>Zt.bitrateInKbit));return Math.max(...jt)}catch{return null}})(X.representation?.mediaInfo),Ke=y.pr,et=(function(dt){if(L&&L.length!==0){for(let jt of L)if(jt.getType()===dt)return jt.probeNextRequest()}})(ae);let ut;ae===c.default.VIDEO&&(ut=Ma.VIDEO),ae===c.default.AUDIO&&(ut=Ma.AUDIO),X.mediaType===c.default.ENHANCEMENT&&(ut=Ma.OTHER),ae===c.default.TEXT&&(ut=X.representation.mediaInfo.mimeType==="application/mp4"?Ma.TIMED_TEXT:Ma.CAPTION);let qt=Q.get().streaming.cmcd.rtp;return qt||(qt=(function(dt){try{let jt=C.getPlaybackRate();jt||(jt=1);let{bandwidth:Zt,mediaType:En,representation:yn,duration:nn}=dt;if(!yn.mediaInfo)return NaN;let fn=Ee(En);fn===0&&(fn=500);let Ue=Zt*nn/1e3/(fn/jt/1e3),it=Q.get().streaming.cmcd.rtpSafetyFactor&&!isNaN(Q.get().streaming.cmcd.rtpSafetyFactor)?Q.get().streaming.cmcd.rtpSafetyFactor:5;return 100*(parseInt(Ue*it/100)+1)}catch{return NaN}})(X)),isNaN(qt)||(z.rtp=qt),et&&(X.url!==et.url?z.nor=encodeURIComponent(We.default.getRelativeUrl(X.url,et.url)):et.range&&(z.nrr=et.range)),ie&&(z.br=ie),ut&&(z.ot=ut),isNaN(de)||(z.d=de),isNaN(pe)||(z.mtp=pe),isNaN(_e)||(z.dl=_e),isNaN(we)||(z.bl=we),isNaN(Pe)||(z.tb=Pe),isNaN(Ke)||Ke===1||(z.pr=Ke),R[ae]&&(z.bs=!0,R[ae]=!1),!w[ae]&&N[ae]||(z.su=!0,w[ae]=!1,N[ae]=!0),z}function ge(X){N.hasOwnProperty(X)||(N[X]=!1),w.hasOwnProperty(X)||(w[X]=!1),R.hasOwnProperty(X)||(R[X]=!1)}function Ie(){const X=V(),ae={};let z=Q.get().streaming.cmcd.cid?Q.get().streaming.cmcd.cid:y.cid;if(z=X.contentID?X.contentID:z,ae.v=Q.get().streaming.cmcd.version??1,ae.sid=Q.get().streaming.cmcd.sid?Q.get().streaming.cmcd.sid:y.sid,ae.sid=X.sessionID?X.sessionID:ae.sid,ae.sid=`${ae.sid}`,z&&(ae.cid=`${z}`),isNaN(y.pr)||y.pr===1||y.pr===null||(ae.pr=y.pr),y.st&&(ae.st=y.st),y.sf&&(ae.sf=y.sf),ae.v===2){let ie=1e3*C.getCurrentLiveLatency();isNaN(ie)||(ae.ltc=ie);const de=y.msd;q||isNaN(de)||(ae.msd=de,q=!0)}return ae}function Ee(X){try{const ae=E.getCurrentBufferLevel(X);return isNaN(ae)?null:100*parseInt(10*ae)}catch{return null}}function B(X){try{y.pr=X.playbackRate}catch{}}function K(X){try{const ae=l.getIsDynamic(X.data)?uo.LIVE:uo.VOD,z=X.protocol&&X.protocol==="MSS"?lo.SMOOTH:lo.DASH;y.st=`${ae}`,y.sf=`${z}`}catch{}}function Z(X){try{X.state&&X.mediaType&&X.state===v.default.BUFFER_EMPTY&&(R[X.mediaType]||(R[X.mediaType]=!0),w[X.mediaType]||(w[X.mediaType]=!0))}catch{}}function W(){for(let X in R)R.hasOwnProperty(X)&&(R[X]=!0);for(let X in w)w.hasOwnProperty(X)&&(w[X]=!0)}return i={getCmcdData:me,getQueryParameter:function(X){try{if(ce()){const ae=me(X),z=(function(ie,de={}){return ie?eo(oo(ie,de),{whitespace:!1}):""})(M(ae));return U.trigger(xn.default.CMCD_DATA_GENERATED,{url:X.url,mediaType:X.mediaType,cmcdData:ae,cmcdString:z}),{key:"CMCD",value:z}}return null}catch{return null}},getHeaderParameters:function(X){try{if(ce()){const ae=me(X),z=zc(M(ae),Q.get().streaming.cmcd.version===1?{}:{customHeaderMap:{[$i.REQUEST]:["ltc"],[$i.SESSION]:["msd"]}});return U.trigger(xn.default.CMCD_DATA_GENERATED,{url:X.url,mediaType:X.mediaType,cmcdData:ae,headers:z}),z}return null}catch{return null}},getCmcdParametersFromManifest:V,setConfig:function(X){X&&(X.abrController&&(b=X.abrController),X.dashMetrics&&(E=X.dashMetrics),X.throughputController&&(S=X.throughputController),X.playbackController&&(C=X.playbackController),X.serviceDescriptionController&&(k=X.serviceDescriptionController))},reset:function(){U.off(v.default.PLAYBACK_RATE_CHANGED,B,this),U.off(v.default.MANIFEST_LOADED,K,this),U.off(v.default.BUFFER_LEVEL_STATE_CHANGED,Z,i),U.off(v.default.PLAYBACK_SEEKED,W,i),U.off(v.default.PLAYBACK_STARTED,j,i),U.off(v.default.PLAYBACK_PLAYING,O,i),ne()},initialize:function(X){U.on(v.default.PLAYBACK_RATE_CHANGED,B,i),U.on(v.default.MANIFEST_LOADED,K,i),U.on(v.default.BUFFER_LEVEL_STATE_CHANGED,Z,i),U.on(v.default.PLAYBACK_SEEKED,W,i),U.on(v.default.PERIOD_SWITCH_COMPLETED,le,i),X?U.on(v.default.MANIFEST_LOADING_STARTED,j,i):U.on(v.default.PLAYBACK_STARTED,j,i),U.on(v.default.PLAYBACK_PLAYING,O,i)},isCmcdEnabled:ce},l=In(H).getInstance(),d=ee.getLogger(i),ne(),i}fo.__dashjs_factory_name="CmcdModel";var mo=o.default.getSingletonFactory(fo);const Yr="CMSD-Dynamic",go="CMSD-Static",pi=to,Uc=go.toLowerCase(),Bc=Yr.toLowerCase(),jc=["mb","st","sf","v"],Zi="stream",qc={video:pi.VIDEO,audio:pi.AUDIO,text:pi.TIMED_TEXT,stream:Zi};function ho(){const l=this.context,i=(0,T.default)(l).getInstance();let d,y,b,E;function C(){b={},E={}}function k(R){R&&Object.keys(R).forEach((N=>{jc.includes(N)||delete R[N]}))}function S(R){try{return(N=R)?Object.entries((function(F,q){try{const{src:H,value:U}=(function(Q,ee){const ne={};for(;Q.length>0;){let le;const j=Vs(Q),O=j.value;if((Q=j.src)[0]==="="){const D=Ws(Q.substring(1),ee);le=D.value,Q=D.src}else{const D=Gi(Q,ee);le=new ia(!0,D.value),Q=D.src}if(ne[O]=le,(Q=Q.trim()).length===0)return Qn(ne,Q);if(Q[0]!==","||(Q=Q.substring(1).trim()).length===0||Q[0]===",")throw Pn(Q,Ka)}return Qn(ne,Q)})(F.trim(),q);if(H!=="")throw Pn(H,Ka);return U}catch(H){throw Pn(F,Ka,H)}})(N)).reduce(((F,[q,H])=>{const{value:U}=H;return F[q]=typeof U=="symbol"?Xs(U):U,F}),{}):{}}catch(F){y.error("Failed to parse CMSD-Static response header value:",F)}var N}function L(R){try{const F=(N=R)?(function(H,U){try{const{src:Q,value:ee}=(function(ne,le){const j=[];for(;ne.length>0;){const O=Ws(ne,le);if(j.push(O.value),(ne=O.src.trim()).length===0)return Qn(j,ne);if(ne[0]!==","||(ne=ne.substring(1).trim()).length===0||ne[0]===",")throw Pn(ne,mi)}return Qn(j,ne)})(H.trim(),U);if(Q!=="")throw Pn(Q,mi);return ee}catch(Q){throw Pn(H,mi,Q)}})(N):[];return F[F.length-1]?.params||{}}catch(F){return y.error("Failed to parse CMSD-Dynamic response header value:",F),{}}var N}function P(R){return qc[R]||pi.OTHER}function w(R,N,F){const q=R===go?b:E,H=q[N]||{},U=q[Zi]||{};return H[F]||U[F]}return d={setConfig:function(){},initialize:function(){},reset:function(){C()},parseResponseHeaders:function(R,N){let F=null,q=null;for(const U in R){const Q=R[U];switch(U){case Uc:F=S(Q),i.trigger(f.default.CMSD_STATIC_HEADER,F);break;case Bc:q||(q=L(Q))}}let H=Zi;return F&&F.ot?H=F.ot:N&&(H=P(N)),k(b[H]),k(E[H]),F&&(b[H]=Object.assign(b[H]||{},F)),q&&(E[H]=Object.assign(E[H]||{},q)),{static:F,dynamic:q}},getMaxBitrate:function(R){let N=P(R);return w(Yr,N,"mb")||-1},getEstimatedThroughput:function(R){let N=P(R);return w(Yr,N,"etp")||null},getResponseDelay:function(R){let N=P(R);return w(Yr,N,"rd")||null},getRoundTripTime:function(R){let N=P(R);return w(Yr,N,"rtt")||null}},y=(0,u.default)(l).getInstance().getLogger(d),C(),d}ho.__dashjs_factory_name="CmsdModel";var po=o.default.getSingletonFactory(ho),es=t(1926);function yo(){let l,i;function d(){i={}}return l={reset:function(){d()},processResponseHeaders:function(y){if(!(y&&y.headers&&y.request&&y.request.url))return;const b=y.headers[c.default.COMMON_ACCESS_TOKEN_HEADER];if(b){const E=We.default.getHostFromUrl(y.request.url);E&&(i[E]=b)}},getCommonAccessTokenForUrl:function(y){if(!y)return null;const b=We.default.getHostFromUrl(y);return b?i[b]?i[b]:null:void 0}},d(),l}yo.__dashjs_factory_name="CommonAccessTokenController";var Hc=o.default.getSingletonFactory(yo);function bo(){let l,i;return l={setConfig:function(d){d&&d.serviceDescriptionController&&(i=d.serviceDescriptionController)},isAdaptationsIncluded:function(d){const{adaptationSetsArray:y}=i?.getServiceDescriptionSettings()?.clientDataReporting??{};return!y||y?.length===0||y.includes(d)},isServiceLocationIncluded:function(d,y){if(d===De.HTTPRequest.CONTENT_STEERING_TYPE)return!0;const{serviceLocationsArray:b}=i?.getServiceDescriptionSettings()?.clientDataReporting??{};return!b||b?.length===0||b.includes(y)}},l}bo.__dashjs_factory_name="ClientDataReportingController";var Eo=o.default.getSingletonFactory(bo);function To(){let l,i,d;const y=this.context;function b(E,C,k,S,L){const P=(function(w,R){let N=[];return N=R===fe.default.PERIOD?w[fe.default.SUPPLEMENTAL_PROPERTY]||[]:[...w[fe.default.ESSENTIAL_PROPERTY]||[],...w[fe.default.SUPPLEMENTAL_PROPERTY]||[]],N.find((F=>F.schemeIdUri===c.default.URL_QUERY_INFO_SCHEME&&F.UrlQueryInfo||F.schemeIdUri===c.default.EXT_URL_QUERY_INFO_SCHEME&&F.ExtUrlQueryInfo))})(C,L);(function(w,R,N,F){N.initialQueryString="";let q="";const H=w?.ExtUrlQueryInfo||w?.UrlQueryInfo;q=H&&H.queryString?R&&R.length>0?R+"&"+H.queryString:H.queryString:R,H?.useMPDUrlQuery==="true"&&F&&(q=q?q+"&"+F:F),N.initialQueryString=q})(P,S.initialQueryString,E,k),(function(w,R,N){if(!w)return void(R.finalQueryString=N);const F=w?.ExtUrlQueryInfo?.queryTemplate||w?.UrlQueryInfo?.queryTemplate||"";R.finalQueryString=F===fe.default.QUERY_PART?R?.initialQueryString:""})(P,E,S.finalQueryString),E.sameOriginOnly=P?.ExtUrlQueryInfo?.sameOriginOnly,E.queryParams=We.default.parseQueryParams(E?.finalQueryString),E.includeInRequests=(function(w,R){return w?w.ExtUrlQueryInfo?.includeInRequests?w.ExtUrlQueryInfo.includeInRequests.split(" "):[fe.default.SEGMENT_TYPE]:R})(P,S.includeInRequests)}return i=(0,u.default)(y).getInstance().getLogger(l),l={getFinalQueryString:function(E){try{if(!d)return null;if(E.type===De.HTTPRequest.MEDIA_SEGMENT_TYPE||E.type===De.HTTPRequest.INIT_SEGMENT_TYPE){const C=E.representation;if(!C)return null;const k=C.adaptation,S=k.period,L=d.period[S.index].adaptation[k.index].representation[C.index],P=new URL(E.url),w=!L.sameOriginOnly||d.origin===P.origin;if(L.includeInRequests.includes(fe.default.SEGMENT_TYPE)&&w)return L.queryParams}else if(E.type===De.HTTPRequest.MPD_TYPE){if([fe.default.MPD_TYPE,fe.default.MPD_PATCH_TYPE].some((C=>d.includeInRequests.includes(C))))return d.queryParams}else if(E.type===De.HTTPRequest.CONTENT_STEERING_TYPE&&d.includeInRequests.includes(fe.default.STEERING_TYPE))return d.queryParams}catch(C){return i.error(C),null}},createFinalQueryStrings:function(E){d={origin:new URL(E.url).origin,period:[]};const C=E.url.split("?")[1];b(d,E,C,{initialQueryString:"",includeInRequests:[]},fe.default.MPD),E.Period.forEach((k=>{const S={adaptation:[]};b(S,k,C,d,fe.default.PERIOD),k.AdaptationSet.forEach((L=>{const P={representation:[]};b(P,L,C,S,fe.default.ADAPTATION_SET),L.Representation.forEach((w=>{const R={};b(R,w,C,P,fe.default.REPRESENTATION),P.representation.push(R)})),S.adaptation.push(P)})),d.period.push(S)}))}},l}To.__dashjs_factory_name="ExtUrlQueryInfoController";var vo=o.default.getSingletonFactory(To),ts=class{constructor(l){this.url=l.url,this.method=l.method,this.responseType=l.responseType!==void 0?l.responseType:null,this.headers=l.headers!==void 0?l.headers:{},this.credentials=l.credentials!==void 0?l.credentials:null,this.mode=l.mode!==void 0?l.mode:null,this.timeout=l.timeout!==void 0?l.timeout:0,this.cmcd=l.cmcd!==void 0?l.cmcd:null,this.customData=l.customData!==void 0?l.customData:null}},ns=class{constructor(l){this.request=l.request,this.url=l.url!==void 0?l.url:null,this.redirected=l.redirected!==void 0&&l.redirected,this.status=l.status!==void 0?l.status:null,this.statusText=l.statusText!==void 0?l.statusText:"",this.type=l.type!==void 0?l.type:"",this.headers=l.headers!==void 0?l.headers:{},this.data=l.data!==void 0?l.data:null,this.resourceTiming=l.resourceTiming!==void 0?l.resourceTiming:null}};function wo(l){l=l||{};const i=this.context,d=l.errHandler,y=l.dashMetrics,b=l.mediaPlayerModel,E=l.boxParser,C=l.errors,k=l.requestTimeout||0,S=(0,T.default)(i).getInstance(),L=(0,p.default)(i).getInstance();let P,w,R,N,F,q,H,U,Q,ee,ne,le,j,O;function D(M,ce){const V=function(){Ie()},me=function(dt){const jt=new Date;ae&&(ae=!1,(!dt.lengthComputable||dt.lengthComputable&&dt.total!==dt.loaded)&&(W.firstByteDate=jt,we.resourceTiming.responseStart=jt.getTime())),dt.lengthComputable&&(W.bytesLoaded=we.length=dt.loaded,W.bytesTotal=we.resourceTiming.encodedBodySize=dt.total,we.length=dt.total,we.resourceTiming.encodedBodySize=dt.loaded),dt.noTrace||(X.push({s:ie,d:dt.time?dt.time:jt.getTime()-ie.getTime(),b:[dt.loaded?dt.loaded-de:0],t:dt.throughput}),W.traces=X,ie=jt,de=dt.loaded),pe&&(clearTimeout(pe),pe=null),L.get().streaming.fragmentRequestProgressTimeout>0&&(pe=setTimeout((function(){O.warn("Abort request "+_e.url+" due to progress timeout"),Ke.abort(_e),V()}),L.get().streaming.fragmentRequestProgressTimeout)),M.progress&&dt&&M.progress(dt)},ue=function(){Ie(!0)},ge=function(dt){let jt;if(dt.lengthComputable){let Zt=dt.loaded/dt.total*100;jt="Request timeout: loaded: "+dt.loaded+", out of: "+dt.total+" : "+Zt.toFixed(3)+"% Completed"}else jt="Request timeout: non-computable download size";O.warn(jt)},Ie=function(dt=!1){w.indexOf(_e)!==-1&&w.splice(w.indexOf(_e),1),pe&&(clearTimeout(pe),pe=null),ne.processResponseHeaders(we),Ee(),B(),(function(jt){const Zt=ee.getResponseInterceptors();return Zt?Zt.reduce(((En,yn)=>En.then((nn=>yn(nn)))),Promise.resolve(jt)):Promise.resolve(jt)})(we).then((jt=>{if(we=jt,(function(Zt,En,yn){const nn=Zt.customData.request,fn=L.get().streaming.cmsd&&L.get().streaming.cmsd.enabled?H.parseResponseHeaders(En.headers,nn.mediaType):null;y.addHttpRequest(nn,En.url,En.status,En.headers,yn,fn)})(_e,we,X),dt)M.abort&&M.abort(W);else if(W.type===De.HTTPRequest.MPD_TYPE&&(y.addManifestUpdate(W),S.trigger(f.default.MANIFEST_LOADING_FINISHED,{requestObject:W})),we.status>=200&&we.status<=299&&we.data)M.success&&M.success(we.data,we.statusText,we.url),M.complete&&M.complete(W,we.statusText);else{try{we.status===404&&L.get().streaming.utcSynchronization.enableBackgroundSyncAfterSegmentDownloadError&&W.type===De.HTTPRequest.MEDIA_SEGMENT_TYPE&&b.getRetryAttemptsForType(De.HTTPRequest.MEDIA_SEGMENT_TYPE)===ce&&S.trigger(f.default.ATTEMPT_BACKGROUND_SYNC)}catch{}Z()}}))},Ee=function(){W.startDate=z,W.endDate=new Date,W.firstByteDate=W.firstByteDate||z},B=function(){we.resourceTiming.responseEnd=Date.now(),(function(dt,jt){if(!L.get().streaming.abr.throughput.useResourceTimingApi||typeof performance>"u"||dt.range)return;const Zt=performance.getEntriesByType?.("resource");if(Zt===void 0||Zt.length<=0)return;let En=0,yn=null;for(;En<Zt.length;){if(Zt[En].name===dt.url){yn=Zt[En];break}En+=1}(function(nn){return nn&&!isNaN(nn.responseStart)&&nn.responseStart>0&&!isNaN(nn.responseEnd)&&nn.responseEnd>0&&!isNaN(nn.transferSize)&&nn.transferSize>0})(yn)&&(dt.customData.request.resourceTimingValues=yn,jt.resourceTiming.startTime=yn.startTime,jt.resourceTiming.encodedBodySize=yn.encodedBodySize,jt.resourceTiming.responseStart=yn.startTime,jt.resourceTiming.responseEnd=yn.responseEnd,jt.resourceTiming.duration=yn.duration)})(_e,we)},K=function(dt,jt,Zt){return new Promise((En=>{(function(yn){const nn=ee.getRequestInterceptors();return nn?nn.reduce(((fn,Ue)=>fn.then((it=>Ue(it)))),Promise.resolve(yn)):Promise.resolve(yn)})(jt).then((yn=>{(jt=yn).customData.onloadend=V,jt.customData.onprogress=me,jt.customData.onabort=ue,jt.customData.ontimeout=ge,Zt.resourceTiming.startTime=Date.now(),dt.load(jt,Zt),En()}))}))},Z=function(){if(ce>0){ce--,M&&M.request&&(M.request.retryAttempts+=1);let dt={config:M};N.push(dt),dt.timeout=setTimeout((function(){N.indexOf(dt)!==-1&&(N.splice(N.indexOf(dt),1),D(M,ce))}),b.getRetryIntervalsForType(W.type))}else{if(W.type===De.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE)return;d.error(new Bt.default(F[W.type],W.url+" is not available",{request:W,response:we})),M.error&&M.error(W,"error",we.statusText,we),M.complete&&M.complete(W,we.statusText)}},W=M.request,X=[];let ae,z,ie,de,pe,_e,we;if(W.bytesLoaded=NaN,W.bytesTotal=NaN,W.firstByteDate=null,W.traces=[],ae=!0,z=new Date,ie=z,de=0,pe=null,!y||!d)throw new Error("config object is not correct or missing");const Pe=(function(dt){let jt,Zt;return!dt.isPartialSegmentRequest&&dt.hasOwnProperty("availabilityTimeComplete")&&dt.availabilityTimeComplete===!1&&window.fetch&&dt.responseType==="arraybuffer"&&dt.type===De.HTTPRequest.MEDIA_SEGMENT_TYPE?(Q||(Q=kn(i).create(),Q.setConfig({dashMetrics:y,boxParser:E})),jt=Q,Zt=c.default.FILE_LOADER_TYPES.FETCH):(U||(U=Kt(i).create()),jt=U,Zt=c.default.FILE_LOADER_TYPES.XHR),{loader:jt,fileLoaderType:Zt}})(W),Ke=Pe.loader;var et;W.fileLoaderType=Pe.fileLoaderType,W.headers={},(function(dt){const jt=dt?.serviceLocation,Zt=dt?.mediaInfo?.id?.toString();if(le.isServiceLocationIncluded(dt.type,jt)&&le.isAdaptationsIncluded(Zt)&&q.isCmcdEnabled()){const En=q.getCmcdParametersFromManifest(),yn=En.mode?En.mode:L.get().streaming.cmcd.mode;if(yn===c.default.CMCD_MODE_QUERY){dt.url=We.default.removeQueryParameterFromUrl(dt.url,c.default.CMCD_QUERY_KEY);const nn=(function(fn){try{const Ue=[],it=q.getQueryParameter(fn);return it&&Ue.push(it),Ue}catch{return[]}})(dt);dt.url=We.default.addAdditionalQueryParameterToUrl(dt.url,nn)}else yn===c.default.CMCD_MODE_HEADER&&(dt.headers=Object.assign(dt.headers,q.getHeaderParameters(dt)))}})(et=W),et.retryAttempts===0&&(function(dt){let jt=j.getFinalQueryString(dt);jt&&(dt.url=We.default.addAdditionalQueryParameterToUrl(dt.url,jt))})(et),(function(dt){if(dt.queryParams){const jt=Object.keys(dt.queryParams).map((Zt=>({key:Zt,value:dt.queryParams[Zt]})));dt.url=We.default.addAdditionalQueryParameterToUrl(dt.url,jt)}})(et),(function(dt){const jt=ne.getCommonAccessTokenForUrl(dt.url);jt&&(dt.headers[c.default.COMMON_ACCESS_TOKEN_HEADER]=jt)})(et),W.range&&(W.headers.Range="bytes="+W.range);const ut=ee.getXHRWithCredentialsForType(W.type);_e=new ts({url:W.url,method:De.HTTPRequest.GET,responseType:W.responseType,headers:W.headers,credentials:ut?"include":"omit",timeout:k,cmcd:q.getCmcdData(W),customData:{request:W}}),we=new ns({request:_e,resourceTiming:{startTime:Date.now(),encodedBodySize:0},status:0});let qt=new Date().getTime();if(isNaN(W.delayLoadingTime)||qt>=W.delayLoadingTime)return w.push(_e),K(Ke,_e,we);{let dt={httpRequest:_e,httpResponse:we};return R.push(dt),dt.delayTimeout=setTimeout((function(){if(R.indexOf(dt)!==-1){R.splice(R.indexOf(dt),1);try{z=new Date,ie=z,w.push(dt.httpRequest),K(Ke,dt.httpRequest,dt.httpResponse)}catch{dt.httpRequest.onloadend()}}}),W.delayLoadingTime-qt),Promise.resolve()}}return P={abort:function(){N.forEach((M=>{clearTimeout(M.timeout),M.config.request&&M.config.abort&&M.config.abort(M.config.request)})),N=[],R.forEach((M=>clearTimeout(M.delayTimeout))),R=[],w.forEach((M=>{const ce=M.customData;ce&&(ce.request&&ce.request.type===De.HTTPRequest.MSS_FRAGMENT_INFO_SEGMENT_TYPE||(ce.onloadend=ce.onprogress=void 0,ce.abort&&ce.abort()))})),w=[]},load:function(M){return M.request?D(M,b.getRetryAttemptsForType(M.request.type)):(M.error&&M.error(M.request,"error"),Promise.resolve())},reset:function(){w=[],R=[],N=[],U&&U.reset(),Q&&Q.reset(),U=null,Q=null},resetInitialSettings:function(){U&&U.resetInitialSettings()},setConfig:function(M){M&&(M.commonAccessTokenController&&(ne=M.commonAccessTokenController),M.extUrlQueryInfoController&&(j=M.extUrlQueryInfoController))}},O=(0,u.default)(i).getInstance().getLogger(P),w=[],R=[],N=[],q=mo(i).getInstance(),le=Eo(i).getInstance(),H=po(i).getInstance(),ee=(0,es.default)(i).getInstance(),ne=Hc(i).getInstance(),j=vo(i).getInstance(),F={[De.HTTPRequest.MPD_TYPE]:C.DOWNLOAD_ERROR_ID_MANIFEST_CODE,[De.HTTPRequest.XLINK_EXPANSION_TYPE]:C.DOWNLOAD_ERROR_ID_XLINK_CODE,[De.HTTPRequest.INIT_SEGMENT_TYPE]:C.DOWNLOAD_ERROR_ID_INITIALIZATION_CODE,[De.HTTPRequest.MEDIA_SEGMENT_TYPE]:C.DOWNLOAD_ERROR_ID_CONTENT_CODE,[De.HTTPRequest.INDEX_SEGMENT_TYPE]:C.DOWNLOAD_ERROR_ID_CONTENT_CODE,[De.HTTPRequest.BITSTREAM_SWITCHING_SEGMENT_TYPE]:C.DOWNLOAD_ERROR_ID_CONTENT_CODE,[De.HTTPRequest.OTHER_TYPE]:C.DOWNLOAD_ERROR_ID_CONTENT_CODE},P}wo.__dashjs_factory_name="HTTPLoader";var Gc=o.default.getClassFactory(wo);function _o(){let l,i;function d(){i={}}function y(){d()}return y(),l={getLoader:function(b){for(var E in i)if(i.hasOwnProperty(E)&&b.startsWith(E))return i[E];return Gc},registerLoader:function(b,E){i[b]=E},unregisterLoader:function(b){i[b]&&delete i[b]},unregisterAllLoader:d,reset:y},l}_o.__dashjs_factory_name="SchemeLoaderFactory";var So=o.default.getSingletonFactory(_o);function ko(l){l=l||{};const i=this.context;let d,y,b;return y=So(i).getInstance(),d={abort:function(){b&&b.abort()},load:function(E){b||(b=y.getLoader(E&&E.request?E.request.url:null)(i).create({errHandler:l.errHandler,mediaPlayerModel:l.mediaPlayerModel,dashMetrics:l.dashMetrics,boxParser:l.boxParser?l.boxParser:null,constants:l.constants?l.constants:null,dashConstants:l.dashConstants?l.dashConstants:null,urlUtils:l.urlUtils?l.urlUtils:null,requestTimeout:isNaN(l.requestTimeout)?0:l.requestTimeout,errors:l.errors})),b.load(E)},reset:function(){y&&(y.reset(),y=null),b&&typeof b.reset=="function"&&b.reset(),b=null},resetInitialSettings:function(){b&&typeof b.resetInitialSettings=="function"&&b.resetInitialSettings()}},d}ko.__dashjs_factory_name="URLLoader";var yr=o.default.getClassFactory(ko),Yc=class{constructor(l){this.url=l||null,this.type=De.HTTPRequest.CONTENT_STEERING_TYPE,this.responseType="json"}},Kc=class{constructor(){this.version=null,this.ttl=300,this.reloadUri=null,this.pathwayPriority=[],this.pathwayClones=[]}};function Io(){const l=this.context,i=Dn(l).getInstance();let d,y,b,E,C,k,S,L,P,w,R,N,F,q,H,U;function Q(ue){le(ue,"baseUrl")}function ee(ue){le(ue,"location")}function ne(ue){var ge,Ie;ue&&ue.throughputValues&&ue.throughputValues.serviceLocation&&(ge=ue.throughputValues.serviceLocation,Ie=ue.throughputValues,q[ge]||(q[ge]=[]),q[ge].push(Ie),q[ge].length>4&&q[ge].shift())}function le(ue,ge){if(ue&&ue.request&&ue.request.serviceLocation){const Ie=ue.request.serviceLocation;N[ge].all.indexOf(Ie)===-1&&N[ge].all.push(Ie),N[ge].current=Ie}}function j(){const ue=L.getValue();let ge=d.getContentSteering(ue);return ge||(ge=R.getServiceDescriptionSettings().contentSteering),!ge&&y&&(ge=y),y=ge,ge}function O(){return new Promise((ue=>{try{const ge=j();if(!ge||!ge.serverUrl)return void ue();const Ie=(function(B){let K=B.serverUrl;b&&b.reloadUri&&(K=i.isRelative(b.reloadUri)?i.resolve(b.reloadUri,B.serverUrl):b.reloadUri);const Z=[],W=N.baseUrl.all.concat(N.location.all);if(W.length>0){const X=W.map((ie=>{const de=(function(pe){if(!pe||!q[pe]||q[pe].length===0)return-1;const _e=F.getArithmeticMean(q[pe],q[pe].length,!0);return parseInt(1e3*_e)})(ie);return{serviceLocation:ie,throughput:de}}));let ae="",z="";X.forEach(((ie,de)=>{de!==0&&(ae+=",",z+=","),ae+=ie.serviceLocation,z+=ie.throughput>-1?ie.throughput:""})),Z.push({key:"_DASH_pathway",value:`"${ae}"`}),Z.push({key:"_DASH_throughput",value:z})}return K=We.default.addAdditionalQueryParameterToUrl(K,Z),K})(ge),Ee=new Yc(Ie);H.load({request:Ee,success:B=>{(function(K){K&&K[fe.default.CONTENT_STEERING_RESPONSE.VERSION]&&parseInt(K[fe.default.CONTENT_STEERING_RESPONSE.VERSION])===1&&(b=new Kc,b.version=K[fe.default.CONTENT_STEERING_RESPONSE.VERSION],K[fe.default.CONTENT_STEERING_RESPONSE.TTL]&&!isNaN(K[fe.default.CONTENT_STEERING_RESPONSE.TTL])&&(b.ttl=K[fe.default.CONTENT_STEERING_RESPONSE.TTL]),K[fe.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]&&(b.reloadUri=K[fe.default.CONTENT_STEERING_RESPONSE.RELOAD_URI]),K[fe.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]&&(b.pathwayPriority=K[fe.default.CONTENT_STEERING_RESPONSE.PATHWAY_PRIORITY]),K[fe.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES]&&(b.pathwayClones=K[fe.default.CONTENT_STEERING_RESPONSE.PATHWAY_CLONES],b.pathwayClones=b.pathwayClones.filter((Z=>(function(W){return W[fe.default.CONTENT_STEERING_RESPONSE.BASE_ID]&&W[fe.default.CONTENT_STEERING_RESPONSE.ID]&&W[fe.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT]&&W[fe.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][fe.default.CONTENT_STEERING_RESPONSE.HOST]})(Z)))),ce())})(B),k.trigger(v.default.CONTENT_STEERING_REQUEST_COMPLETED,{currentSteeringResponseData:b,url:Ie}),ue()},error:(B,K,Z,W)=>{(function(X,ae){try{switch(S.warn("Error fetching data from content steering server",X),ae.status){case 404:case 410:y=null;break;case 429:const z=ae&&ae.getResponseHeader?ae.getResponseHeader("retry-after"):null;z!==null&&(b||(b={}),b.ttl=parseInt(z)),ce();break;default:ce()}}catch(z){S.error(z)}})(B,W),ue(B)},complete:()=>{N.baseUrl.all=D(N.baseUrl),N.location.all=D(N.location)}})}catch(ge){ue(ge)}}))}function D(ue){return ue.all&&ue.all.length!==0&&ue.current?ue.all.filter((ge=>ge===ue.current)):[]}function M(ue){try{const ge=[];return ue&&ue.length!==0&&b&&b.pathwayClones&&b.pathwayClones.length!==0&&b.pathwayClones.forEach((Ie=>{let Ee=ue.filter((K=>Ie[fe.default.CONTENT_STEERING_RESPONSE.BASE_ID]===K.serviceLocation)),B=null;if(Ee&&Ee.length>0&&(B=Ee[0]),B){const K=new URL(B.url);let Z=Ie[fe.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][fe.default.CONTENT_STEERING_RESPONSE.HOST];Z=We.default.stringHasProtocol(Z)?Z:`${K.protocol}//${Z}`;const W={synthesizedUrl:`${Z}${K.pathname}`,serviceLocation:Ie[fe.default.CONTENT_STEERING_RESPONSE.ID],queryParams:Ie[fe.default.CONTENT_STEERING_RESPONSE.URI_REPLACEMENT][fe.default.CONTENT_STEERING_RESPONSE.PARAMS],reference:B};ge.push(W)}})),ge}catch(ge){return S.error(ge),[]}}function ce(){b&&b.ttl&&!isNaN(b.ttl)&&(w&&clearTimeout(w),w=setTimeout((()=>{O()}),1e3*b.ttl))}function V(){w&&clearTimeout(w),w=null}function me(){b=null,y=null,q={},N={baseUrl:{current:null,all:[]},location:{current:null,all:[]}},V()}return U={reset:function(){me(),k.off(v.default.FRAGMENT_LOADING_STARTED,Q,U),k.off(v.default.MANIFEST_LOADING_STARTED,ee,U),k.off(v.default.THROUGHPUT_MEASUREMENT_STORED,ne,U)},setConfig:function(ue){ue&&(ue.adapter&&(d=ue.adapter),ue.errHandler&&(C=ue.errHandler),ue.dashMetrics&&(E=ue.dashMetrics),ue.mediaPlayerModel&&(P=ue.mediaPlayerModel),ue.manifestModel&&(L=ue.manifestModel),ue.serviceDescriptionController&&(R=ue.serviceDescriptionController),ue.throughputController&&(F=ue.throughputController),ue.eventBus&&(k=ue.eventBus))},loadSteeringData:O,getCurrentSteeringResponseData:function(){return b},shouldQueryBeforeStart:function(){const ue=j();return!!ue&&ue.queryBeforeStart},getSteeringDataFromManifest:j,stopSteeringRequestTimer:V,getSynthesizedBaseUrlElements:function(ue){try{return M(ue).map((ge=>{const Ie=new qn(ge.synthesizedUrl,ge.serviceLocation);return Ie.queryParams=ge.queryParams,Ie.dvbPriority=ge.reference.dvbPriority,Ie.dvbWeight=ge.reference.dvbWeight,Ie.availabilityTimeOffset=ge.reference.availabilityTimeOffset,Ie.availabilityTimeComplete=ge.reference.availabilityTimeComplete,Ie}))}catch(ge){return S.error(ge),[]}},getSynthesizedLocationElements:function(ue){try{return M(ue).map((ge=>{const Ie=new Fr(ge.synthesizedUrl,ge.serviceLocation);return Ie.queryParams=ge.queryParams,Ie}))}catch(ge){return S.error(ge),[]}},initialize:function(){H=yr(l).create({errHandler:C,dashMetrics:E,mediaPlayerModel:P,errors:Gt}),k.on(v.default.FRAGMENT_LOADING_STARTED,Q,U),k.on(v.default.MANIFEST_LOADING_STARTED,ee,U),k.on(v.default.THROUGHPUT_MEASUREMENT_STORED,ne,U)}},S=(0,u.default)(l).getInstance().getLogger(U),me(),U}Io.__dashjs_factory_name="ContentSteeringController";var as=o.default.getSingletonFactory(Io);function Ao(){const l=this.context,i=(0,T.default)(l).getInstance();let d,y,b,E=[];function C(S=[],L=[]){let P=0,w=NaN;for(;P<S.length;){const R=S[P],N=L.findIndex((F=>F.serviceLocation&&F.serviceLocation===R));if(N!==-1&&!b.contains(L[N].serviceLocation)){w=N;break}P+=1}return w}function k(S){const L=y.getCurrentSteeringResponseData();if(!L)return;const P=S.entry,w=setTimeout((()=>{b.remove(P),E.splice(E.indexOf(w,1))}),1e3*L.ttl);E.push(w)}return d={selectBaseUrlIndex:function(S){let L=NaN;if(isNaN(S.selectedIdx)){const w=y.getSteeringDataFromManifest();w&&w.defaultServiceLocationArray.length>0&&(L=C(w.defaultServiceLocationArray,S.baseUrls))}const P=y.getCurrentSteeringResponseData();return S.baseUrls&&S.baseUrls.length&&P&&P.pathwayPriority&&P.pathwayPriority.length&&(L=C(P.pathwayPriority,S.baseUrls)),L},setConfig:function(S){S.blacklistController&&(b=S.blacklistController),S.contentSteeringController&&(y=S.contentSteeringController),i.on(S.addBlacklistEventName,k,d)},reset:function(){E.forEach((S=>clearTimeout(S))),E=[]}},y=as(l).getInstance(),d}Ao.__dashjs_factory_name="ContentSteeringSelector";var Vc=o.default.getClassFactory(Ao);function Ro(){const l=this.context,i=(0,T.default)(l).getInstance(),d=(0,p.default)(l).getInstance();let y,b,E,C,k,S;function L(){k.reset(),b.reset()}return y={chooseSelector:function(P){(0,rt.checkParameterType)(P,"boolean"),S=P?C:E},select:function(P){if(!P)return;if(d.get().streaming.applyContentSteering){const R=k.selectBaseUrlIndex(P);isNaN(R)||R===-1||(P.selectedIdx=R)}if(!isNaN(P.selectedIdx))return P.baseUrls[P.selectedIdx];let w=S.select(P.baseUrls);return w?(P.selectedIdx=P.baseUrls.indexOf(w),w):(i.trigger(f.default.URL_RESOLUTION_FAILED,{error:new Bt.default(Gt.URL_RESOLUTION_FAILED_GENERIC_ERROR_CODE,Gt.URL_RESOLUTION_FAILED_GENERIC_ERROR_MESSAGE)}),void(S===E&&L()))},reset:L,setConfig:function(P){P.selector&&(S=P.selector),P.contentSteeringSelector&&(k=P.contentSteeringSelector)}},b=Qt(l).create({updateEventName:f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,addBlacklistEventName:f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),E=Sn(l).create({blacklistController:b}),C=rn(l).create({blacklistController:b}),k=Vc(l).create(),k.setConfig({blacklistController:b,addBlacklistEventName:f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD}),S=E,y}Ro.__dashjs_factory_name="BaseURLSelector";var $c=o.default.getClassFactory(Ro);function Co(){let l,i;const d=this.context,y=(0,T.default)(d).getInstance(),b=Dn(d).getInstance();let E,C,k;function S(P){E.update(P),C.chooseSelector(i.getIsDVB(P)),y.trigger(v.default.BASE_URLS_UPDATED,{baseUrls:L(P)})}function L(P){return E.getBaseUrls(P)}return l={reset:function(){E.reset(),C.reset()},initialize:function(P){E.setConfig({adapter:i,contentSteeringController:k}),S(P)},resolve:function(P){const w=E.getForPath(P).reduce(((R,N)=>{const F=C.select(N);return F?(b.isRelative(F.url)?R.url=b.resolve(F.url,R.url):(R.url=F.url,R.serviceLocation=F.serviceLocation),R.availabilityTimeOffset=F.availabilityTimeOffset,R.availabilityTimeComplete=F.availabilityTimeComplete,R.queryParams=F.queryParams,R):new qn}),new qn);if(!b.isRelative(w.url))return w},setConfig:function(P){P.baseURLTreeModel&&(E=P.baseURLTreeModel),P.baseURLSelector&&(C=P.baseURLSelector),P.adapter&&(i=P.adapter),P.contentSteeringController&&(k=P.contentSteeringController)},getBaseUrls:L,update:S},E=yt(d).create(),C=$c(d).create(),y.on(f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,(function(P){E.invalidateSelectedIndexes(P.entry)}),l),l}Co.__dashjs_factory_name="BaseURLController";var Wc=o.default.getClassFactory(Co);class rs{constructor(i){if(this.offset=i._offset,this.type=i.type,this.size=i.size,this.boxes=[],i.boxes)for(let d=0;d<i.boxes.length;d++)this.boxes.push(new rs(i.boxes[d]));switch(this.isComplete=!0,i.type){case"sidx":if(this.timescale=i.timescale,this.earliest_presentation_time=i.earliest_presentation_time,this.first_offset=i.first_offset,this.references=i.references,i.references){this.references=[];for(let d=0;d<i.references.length;d++){let y={reference_type:i.references[d].reference_type,referenced_size:i.references[d].referenced_size,subsegment_duration:i.references[d].subsegment_duration};this.references.push(y)}}break;case"emsg":this.id=i.id,this.version=i.version===1?1:0,this.value=i.value,this.timescale=i.timescale,this.scheme_id_uri=i.scheme_id_uri,this.presentation_time_delta=i.version===1?i.presentation_time:i.presentation_time_delta,this.event_duration=i.event_duration,this.message_data=i.message_data;break;case"mdhd":this.timescale=i.timescale;break;case"mfhd":this.sequence_number=i.sequence_number;break;case"subs":this.entry_count=i.entry_count,this.entries=i.entries;break;case"tfhd":this.base_data_offset=i.base_data_offset,this.sample_description_index=i.sample_description_index,this.default_sample_duration=i.default_sample_duration,this.default_sample_size=i.default_sample_size,this.default_sample_flags=i.default_sample_flags,this.flags=i.flags;break;case"tfdt":this.version=i.version,this.baseMediaDecodeTime=i.baseMediaDecodeTime,this.flags=i.flags;break;case"trun":if(this.sample_count=i.sample_count,this.first_sample_flags=i.first_sample_flags,this.data_offset=i.data_offset,this.flags=i.flags,this.samples=i.samples,i.samples){this.samples=[];for(let d=0,y=i.samples.length;d<y;d++){let b={sample_size:i.samples[d].sample_size,sample_duration:i.samples[d].sample_duration,sample_composition_time_offset:i.samples[d].sample_composition_time_offset};this.samples.push(b)}}break;case"prft":this.version=i.version,this.reference_track_ID=i.reference_track_ID,this.ntp_timestamp_sec=i.ntp_timestamp_sec,this.ntp_timestamp_frac=i.ntp_timestamp_frac,this.media_time=i.media_time,this.flags=i.flags}}getChildBox(i){for(let d=0;d<this.boxes.length;d++)if(this.boxes[d].type===i)return this.boxes[d]}getChildBoxes(i){let d=[];for(let y=0;y<this.boxes.length;y++)this.boxes[y].type===i&&d.push(this.boxes[y]);return d}}var Qc=rs;function No(){let l,i;function d(b){let E=[];if(!b||!i||typeof i.fetchAll!="function")return E;let C,k=i.fetchAll(b);for(let S=0,L=k.length;S<L;S++)C=y(k[S]),C&&E.push(C);return E}function y(b){if(!b)return null;let E=new Qc(b);return b.hasOwnProperty("_incomplete")&&(E.isComplete=!b._incomplete),E}return l={getBox:function(b){return b&&i&&i.boxes&&i.boxes.length!==0&&typeof i.fetch=="function"?y(i.fetch(b)):null},getBoxes:d,setData:function(b){i=b},getLastBox:function(){if(!i||!i.boxes||!i.boxes.length)return null;let b=d(i.boxes[i.boxes.length-1].type);return b.length>0?b[b.length-1]:null}},l}No.__dashjs_factory_name="IsoFile";var Xc=o.default.getClassFactory(No),Kr=t(6877),is=class{constructor({found:l,sizeOfLastCompletedBox:i,sizeOfLastFoundTargetBox:d,startOffsetOfLastCompletedBox:y,startOffsetOfLastFoundTargetBox:b,typeOfLastCompletedBox:E,typeOfLastTargetBox:C}){this.found=l!==void 0&&l,this.sizeOfLastCompletedBox=i!==void 0?i:0,this.sizeOfLastFoundTargetBox=d!==void 0?d:0,this.startOffsetOfLastCompletedBox=y!==void 0?y:0,this.startOffsetOfLastFoundTargetBox=b!==void 0?b:0,this.typeOfLastCompletedBox=E!==void 0?E:null,this.typeOfLastTargetBox=C!==void 0?C:null}};function xo(){let l,i,d=this.context;function y(C){if(!C)return null;C.fileStart===void 0&&(C.fileStart=0);let k=Kr.parseBuffer(C),S=Xc(d).create();return S.setData(k),S}function b(C,k){return C[k+3]>>>0|C[k+2]<<8>>>0|C[k+1]<<16>>>0|C[k]<<24>>>0}function E(C,k){return String.fromCharCode(C[k++])+String.fromCharCode(C[k++])+String.fromCharCode(C[k++])+String.fromCharCode(C[k])}return i={findInitRange:function(C){let k,S,L=null;const P=y(C);if(!P)return L;const w=P.getBox("ftyp"),R=P.getBox("moov");return l.debug("Searching for initialization."),R&&R.isComplete&&(k=w?w.offset:R.offset,S=R.offset+R.size-1,L=k+"-"+S,l.debug("Found the initialization.  Range: "+L)),L},findLastTopIsoBoxCompleted:function(C,k,S){if(S===void 0&&(S=0),!k||S+8>=k.byteLength)return new is({found:!1});const L=k instanceof ArrayBuffer?new Uint8Array(k):k;let P,w=0,R=0,N=null;for(;S<L.byteLength;){const F=b(L,S),q=E(L,S+4);if(F===0)break;S+F<=L.byteLength&&(C.indexOf(q)>=0?P=new is({found:!0,startOffsetOfLastFoundTargetBox:S,sizeOfLastFoundTargetBox:F,typeOfLastTargetBox:q}):(w=S,R=F,N=q)),S+=F}return P||new is({found:!1,startOffsetOfLastCompletedBox:w,sizeOfLastCompletedBox:R,typeOfLastCompletedBox:N})},getMediaTimescaleFromMoov:function(C){let k=y(C),S=k?k.getBox("mdhd"):void 0;return S?S.timescale:NaN},getSamplesInfo:function(C){if(!C||C.byteLength===0)return{sampleList:[],lastSequenceNumber:NaN,totalDuration:NaN,numSequences:NaN};let k,S,L,P,w,R,N,F,q,H,U,Q,ee,ne,le,j,O,D=y(C),M=D.getBoxes("moof"),ce=D.getBoxes("mfhd");j=D.getBoxes("moof").length,le=ce[ce.length-1].sequence_number,L=0,R=[];let V=-1,me=-1;for(U=0;U<M.length;U++){let ue=M[U],ge=ue.getChildBoxes("traf");for(q=0;q<ge.length;q++){let Ie=ge[q],Ee=Ie.getChildBox("tfhd"),B=Ie.getChildBox("tfdt");w=B.baseMediaDecodeTime;let K=Ie.getChildBoxes("trun"),Z=Ie.getChildBoxes("subs");for(H=0;H<K.length;H++){let W=K[H];for(L=W.sample_count,ne=(Ee.base_data_offset||0)+(W.data_offset||0),F=0;F<L;F++){N=W.samples[F],k=N.sample_duration!==void 0?N.sample_duration:Ee.default_sample_duration,P=N.sample_size!==void 0?N.sample_size:Ee.default_sample_size,S=N.sample_composition_time_offset!==void 0?N.sample_composition_time_offset:0;let X={dts:w,cts:w+S,duration:k,offset:ue.offset+ne,size:P,subSizes:[P]};if(Z)for(Q=0;Q<Z.length;Q++){let ae=Z[Q];if(V<ae.entry_count-1&&F>me&&(V++,me+=ae.entries[V].sample_delta),F==me){X.subSizes=[];let z=ae.entries[V];for(ee=0;ee<z.subsample_count;ee++)X.subSizes.push(z.subsamples[ee].subsample_size)}}R.push(X),ne+=P,w+=k}}O=w-B.baseMediaDecodeTime}}return{sampleList:R,lastSequenceNumber:le,totalDuration:O,numSequences:j}},parse:y},l=(0,u.default)(d).getInstance().getLogger(i),i}xo.__dashjs_factory_name="BoxParser";var yi=o.default.getSingletonFactory(xo),Do=t(559);const ss={0:void 0,1:{channels:1,lfe:0},2:{channels:2,lfe:0},3:{channels:3,lfe:0},4:{channels:4,lfe:0},5:{channels:5,lfe:0},6:{channels:5,lfe:1},7:{channels:7,lfe:1},8:{channels:2,lfe:0},9:{channels:3,lfe:0},10:{channels:4,lfe:0},11:{channels:6,lfe:1},12:{channels:7,lfe:1},13:{channels:22,lfe:2},14:{channels:7,lfe:1},15:{channels:10,lfe:2},16:{channels:9,lfe:1},17:{channels:11,lfe:1},18:{channels:13,lfe:1},19:{channels:11,lfe:1},20:{channels:13,lfe:1}};function Lo(l){return l==0?0:l.toString(2).match(/1/g).length}function os(l,i){let d,y=parseInt("0x"+l,16),b=y&i[0],E=y&i[1];return d=Lo(b)+2*Lo(E),d}var Mo=function(l,i=!1){let d;if(!l||!l.schemeIdUri||!l.value)return;const y=l.schemeIdUri,b=l.value;return y==="urn:mpeg:dash:23003:3:audio_channel_configuration:2011"||y==="urn:mpeg:mpegB:cicp:ChannelConfiguration"?d=ss[b]&&ss[b].channels+(i?ss[b].lfe:0):y==="tag:dolby.com,2014:dash:audio_channel_configuration:2011"?d=(function(E,C){if(E.length===4)return os(E,[63880+(C?6:0),1648])})(b,i):y==="tag:dolby.com,2015:dash:audio_channel_configuration:2015"?d=(function(E,C){if(E.length===6)return E==="800000"?24:os(E,[56834+(C?4160:0),205245])})(b,i):y==="tag:dts.com,2014:dash:audio_channel_configuration:2012"?d=parseInt(b):y==="tag:dts.com,2018:uhd:audio_channel_configuration"&&(d=(function(E,C){if(!(E.length>8))return os(E,[4294901727+(C?65568:0),0])})(b,i)),d};function Po(){const l=this.context,i=(0,T.default)(l).getInstance();let d,y,b,E,C,k,S;function L(U,Q,ee,ne=void 0){const le=w(U,Q,ee,ne);return b.isCodecSupportedBasedOnTestedConfigurations(le,U)}function P(U,Q,ee,ne,le,j=void 0){const O=w(U,Q,ee,j),D=JSON.stringify(O);ne.has(D)||(ne.add(D),le.push(O))}function w(U,Q,ee,ne){let le=null;switch(U){case c.default.VIDEO:le=(function(j,O,D){let M={codec:O,width:j&&j.width||null,height:j&&j.height||null,framerate:y.getFramerate(j)||null,bitrate:j&&j.bandwidth||null,isSupported:!0};if(j.tagName===fe.default.PRESELECTION&&D&&(M.width||(M.width=D.width||null),M.height||(M.height=D.height||null),M.bitrate||(M.bitrate=D.bandwidth||null),M.framerate||(M.framerate=y.getFramerate(D)||null)),E.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(Object.assign(M,N(j)),j.tagName===fe.default.PRESELECTION&&D)){let me=N(D),ue=me.isSupported;delete me.isSupported,M.isSupported=M.isSupported&&ue,R(M,me)}let ce=M.isSupported;if(E.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(Object.assign(M,F(j)),j.tagName===fe.default.PRESELECTION&&D)){let me=F(D),ue=me.isSupported;delete me.isSupported,M.isSupported=M.isSupported&&ue,R(M,me)}let V=M.isSupported;return ce&&V||(M.isSupported=!1),M})(Q,ee,ne);break;case c.default.AUDIO:le=(function(j,O,D){let M={codec:O,samplerate:j&&j.audioSamplingRate||null,bitrate:j&&j.bandwidth||null,isSupported:!0};return j.tagName===fe.default.PRESELECTION&&D&&(M.samplerate||(M.samplerate=D.audioSamplingRate||null),M.bitrate||(M.bitrate=D.bandwidth||null)),E.get().streaming.capabilities.filterAudioChannelConfiguration&&Object.assign(M,(function(ce,V){let me=ce[fe.default.AUDIO_CHANNEL_CONFIGURATION]||[],ue=null;me.length==0&&V&&(me=V[fe.default.AUDIO_CHANNEL_CONFIGURATION]||[]);const ge=me.map((Ie=>Mo(Ie,!0)));return ge.every((Ie=>Ie==ge[0]))&&(ue=ge[0]),{channels:ue}})(j,D)),M})(Q,ee,ne);break;default:return le}return ne&&(le=q(ne,le)),q(Q,le)}function R(U,Q){for(const ee in Q)Object.prototype.hasOwnProperty.call(Q,ee)&&!(ee in U)&&(U[ee]=Q[ee]);return U}function N(U){let Q={colorGamut:null,transferFunction:null,isSupported:!0};for(const ee of U.EssentialProperty||[])ee.schemeIdUri===c.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["1","5","6","7"].includes(ee.value.toString())?Q.colorGamut=c.default.MEDIA_CAPABILITIES_API.COLORGAMUT.SRGB:ee.schemeIdUri===c.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["11","12"].includes(ee.value.toString())?Q.colorGamut=c.default.MEDIA_CAPABILITIES_API.COLORGAMUT.P3:ee.schemeIdUri===c.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["9"].includes(ee.value.toString())?Q.colorGamut=c.default.MEDIA_CAPABILITIES_API.COLORGAMUT.REC2020:ee.schemeIdUri===c.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&["2"].includes(ee.value.toString())?Q.colorGamut=null:ee.schemeIdUri===c.default.COLOUR_PRIMARIES_SCHEME_ID_URI&&(Q.isSupported=!1),ee.schemeIdUri===c.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["1","6","13","14","15"].includes(ee.value.toString())?Q.transferFunction=c.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.SRGB:ee.schemeIdUri===c.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["16"].includes(ee.value.toString())?Q.transferFunction=c.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.PQ:ee.schemeIdUri===c.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["18"].includes(ee.value.toString())?Q.transferFunction=c.default.MEDIA_CAPABILITIES_API.TRANSFERFUNCTION.HLG:ee.schemeIdUri===c.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&["2"].includes(ee.value.toString())?Q.transferFunction=null:ee.schemeIdUri===c.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI&&(Q.isSupported=!1);return Q}function F(U){let Q={isSupported:!0,hdrMetadataType:null};for(const ee of U.EssentialProperty||[])ee.schemeIdUri===c.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&ee.value===c.default.HDR_METADATA_FORMAT_VALUES.ST2094_10?Q.hdrMetadataType=c.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_10:ee.schemeIdUri===c.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&ee.value===c.default.HDR_METADATA_FORMAT_VALUES.SL_HDR2?Q.hdrMetadataType=c.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SLHDR2:ee.schemeIdUri===c.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&ee.value===c.default.HDR_METADATA_FORMAT_VALUES.ST2094_40?Q.hdrMetadataType=c.default.MEDIA_CAPABILITIES_API.HDR_METADATATYPE.SMPTE_ST_2094_40:ee.schemeIdUri===c.default.HDR_METADATA_FORMAT_SCHEME_ID_URI&&(Q.isSupported=!1);return Q}function q(U,Q){return k&&U&&U[fe.default.CONTENT_PROTECTION]&&U[fe.default.CONTENT_PROTECTION].length>0&&(Q.keySystemsMetadata=k.getSupportedKeySystemMetadataFromContentProtection(U[fe.default.CONTENT_PROTECTION])),Q}function H(U){if(!U||U.length===0)return!0;let Q=0;for(;Q<U.length;){if(!b.supportsEssentialProperty(U[Q]))return S.debug("[Stream] EssentialProperty not supported: "+U[Q].schemeIdUri),!1;Q+=1}return!0}return d={setConfig:function(U){U&&(U.adapter&&(y=U.adapter),U.capabilities&&(b=U.capabilities),U.settings&&(E=U.settings),U.protectionController&&(k=U.protectionController),U.customParametersModel&&(C=U.customParametersModel))},filterUnsupportedFeatures:function(U){return new Promise((Q=>{const ee=[c.default.VIDEO,c.default.AUDIO],ne=[];ee.forEach((le=>{(function(O,D){if(!O||!O.Period||O.Period.length===0)return[];const M=new Set,ce=[];return O.Period.forEach((V=>{V.AdaptationSet.forEach((me=>{y.getIsTypeOf(me,D)&&me.Representation.forEach(((ue,ge)=>{const Ie=y.getCodec(me,ge,!1);P(D,ue,Ie,M,ce);const Ee=y.getSupplementalCodecs(ue);Ee.length>0&&P(D,ue,Ee[0],M,ce)}))})),V.Preselection&&V.Preselection.length&&V.Preselection.forEach((me=>{if(y.getPreselectionIsTypeOf(me,V.AdaptationSet,D)){const ue=y.getCodecForPreselection(me,V.AdaptationSet),ge=y.getCommonRepresentationForPreselection(me,V.AdaptationSet);P(D,me,ue,M,ce,ge)}}))})),ce})(U,le).forEach((O=>{ne.push(b.runCodecSupportCheck(O,le))}))})),Promise.allSettled(ne).then((()=>(ee.forEach((le=>{(function(j,O){O&&O.Period&&O.Period.length!==0&&O.Period.forEach((D=>{(function(M,ce){M&&M.AdaptationSet&&M.AdaptationSet.length!==0&&(M.AdaptationSet=M.AdaptationSet.filter((V=>{y.getIsTypeOf(V,ce)&&(function(ue,ge){ue.Representation&&ue.Representation.length!==0&&(ue.Representation=ue.Representation.filter(((Ie,Ee)=>{const B=y.getCodec(ue,Ee,!1),K=L(ge,Ie,B);let Z=(function(W,X){let ae=!1;const z=y.getSupplementalCodecs(W);return z.length>0&&(z.length>1&&S.warn("[CapabilitiesFilter] Multiple supplemental codecs not supported; using the first in list"),ae=L(X,W,z[0])),ae})(Ie,ge);return Z&&(S.debug(`[CapabilitiesFilter] Codec supported. Upgrading codecs string of Representation with ID ${Ie.id}`),Ie.codecs=Ie[fe.default.SUPPLEMENTAL_CODECS]),K||Z||S.warn(`[CapabilitiesFilter] Codec ${B} not supported. Removing Representation with ID ${Ie.id}`),K||Z})))})(V,ce);const me=V.Representation&&V.Representation.length>0;return me||(i.trigger(f.default.ADAPTATION_SET_REMOVED_NO_CAPABILITIES,{adaptationSet:V}),S.warn(`[CapabilitiesFilter] AdaptationSet with ID ${V.id?V.id:"undefined"} and codec ${V.codecs?V.codecs:"undefined"} has been removed because of no supported Representation`)),me})))})(D,j),(function(M,ce){M&&M.Preselection&&M.Preselection.length!==0&&(M.Preselection=M.Preselection.filter((V=>{if(y.getPreselectionIsTypeOf(V,M.AdaptationSet,ce)){const me=y.getCodecForPreselection(V,M.AdaptationSet);let ue=!0;if(me){let ge=y.getCommonRepresentationForPreselection(V,M.AdaptationSet);ue=L(ce,V,me,ge)}return ue||S.warn(`[CapabilitiesFilter] Preselection@codecs ${me} not supported. Removing Preselection with ID ${V.id}`),ue}return!0})))})(D,j)}))})(le,U)})),E.get().streaming.capabilities.filterUnsupportedEssentialProperties&&(function(le){le&&le.Period&&le.Period.length!==0&&le.Period.forEach((j=>{j.AdaptationSet=j.AdaptationSet.filter((O=>!O.Representation||O.Representation.length===0||!!H(y.getEssentialProperties(O))&&(O.Representation=O.Representation.filter((D=>H(y.getEssentialProperties(D)))),O.Representation&&O.Representation.length>0))),j.Preselection&&j.Preselection.length&&(j.Preselection=j.Preselection.filter((O=>!!H(y.getEssentialProperties(O))||(S.warn(`[CapabilitiesFilter] removed Preselection (id: ${O.id}) with unsupported EssentialProperty`),!1))))}))})(U),(function(le){le&&le.Period&&le.Period.length!==0&&le.Period.forEach((j=>{j.Preselection&&(j.Preselection=j.Preselection.filter((O=>{const D=String(O.preselectionComponents).split(" ").length;return D!==1&&S.warn(`Multi-Representation Preselection (id: ${O.id}) removed as not supported.`),D===1})))}))})(U),(function(le){le&&le.Period&&le.Period.length!==0&&le.Period.forEach((j=>{j.Preselection&&(j.Preselection=j.Preselection.filter((O=>{const D=String(O.preselectionComponents).split(" "),M=j.AdaptationSet.map((ce=>ce.id));return D.every((ce=>M.includes(ce)))})))}))})(U),(function(le){if(!le||!le.Period||le.Period.length===0)return Promise.resolve();const j=[];return le.Period.forEach((O=>{j.push((function(D){return new Promise((M=>{if(!D||!D.AdaptationSet||D.AdaptationSet.length===0)return void M();const ce=[];D.AdaptationSet.forEach((V=>{ce.push((function(me){return new Promise((ue=>{if(!me.Representation||me.Representation.length===0)return void ue();const ge=[];me.Representation.forEach((Ie=>{ge.push((function(Ee){const B=[],K=C.getCustomCapabilitiesFilters();return K&&K.length!==0?K.forEach((Z=>{B.push(new Promise((W=>W(Z(Ee)))))})):B.push(Promise.resolve(!0)),Promise.all(B)})(Ie))})),Promise.all(ge).then((Ie=>{me.Representation=me.Representation.filter(((Ee,B)=>{let K=Ie[B].every((Z=>Z));return K||S.debug("[Stream] Representation "+Ee.id+" has been removed because of unsupported CustomFilter"),K})),ue()})).catch((Ie=>{S.warn("[Stream] at least one promise rejected in CustomFilter with error: ",Ie),ue()}))}))})(V))})),Promise.all(ce).then((()=>{D.AdaptationSet=D.AdaptationSet.filter((V=>V.Representation&&V.Representation.length>0)),M()})).catch((()=>{M()}))}))})(O))})),Promise.all(j)})(U)))).then((()=>{Q()})).catch((le=>{S.error(le),Q()}))}))}},S=(0,u.default)(l).getInstance().getLogger(d),d}Po.__dashjs_factory_name="CapabilitiesFilter";var Jc=o.default.getSingletonFactory(Po);function Oo(){const l=this.context,i=(0,T.default)(l).getInstance();let d,y,b,E,C,k,S,L,P,w;function R(){y=!1;const le=We.default.parseUserAgent();b=le&&le.browser&&le.browser.name&&le.browser.name.toLowerCase()==="safari"}function N(){y=!1}function F(le){if(le.streamId!==k.getActiveStreamInfo().id||!P)return;const j=S.getLiveDelay();S.getBufferLevel()>j/2&&(P=!1)}function q(le){le.streamId===k.getActiveStreamInfo().id&&(P=le.state===r.BUFFER_EMPTY)}function H(){L.getCatchupModeEnabled()||E.setPlaybackRate(1)}function U(){S.getIsDynamic()&&L.getCatchupModeEnabled()&&(L.getCatchupPlaybackRates().max>0||L.getCatchupPlaybackRates().min<0)&&!S.isPaused()&&!S.isSeeking()&&(function(){try{return!S.getTime()>0||y?!1:ee()===c.default.LIVE_CATCHUP_MODE_LOLP?(function(le,j){try{return Math.abs(Q())>0||le<j}catch{return!1}})(S.getBufferLevel(),C.get().streaming.liveCatchup.playbackBufferMin):(function(){try{return Math.abs(Q())>0}catch{return!1}})()}catch{return!1}})()&&(function(){if(!y&&E){let le;const j=E.getPlaybackRate(),O=L.getCatchupPlaybackRates(),D=S.getBufferLevel(),M=Q(),ce=L.getCatchupMaxDrift();if(!isNaN(ce)&&ce>0&&M>ce)w.info("[CatchupController]: Low Latency catchup mechanism. Latency too high, doing a seek to live point"),y=!0,S.seekToCurrentLive(!0,!1);else{const V=S.getCurrentLiveLatency(),me=S.getLiveDelay();le=ee()===c.default.LIVE_CATCHUP_MODE_LOLP?(function(ge,Ie,Ee,B,K){let Z;if(K<B){const W=Math.abs(ge.min),X=5*(K-B);Z=1-W+2*W/(1+Math.pow(Math.E,-X)),w.debug("[LoL+ playback control_buffer-based] bufferLevel: "+K+", newRate: "+Z)}else{if(Math.abs(Ie-Ee)<=.02*Ee)Z=1;else{const X=Ie-Ee,ae=X<0?Math.abs(ge.min):ge.max,z=5*X;Z=1-ae+2*ae/(1+Math.pow(Math.E,-z))}w.debug("[LoL+ playback control_latency-based] latency: "+Ie+", newRate: "+Z)}return Z})(O,V,me,C.get().streaming.liveCatchup.playbackBufferMin,D):(function(ge,Ie,Ee,B){if(P)return 1;const K=Ie-Ee,Z=K<0?Math.abs(ge.min):ge.max,W=5*K;let X=1-Z+2*Z/(1+Math.pow(Math.E,-W));return S.getPlaybackStalled()&&B<=Ee/2&&K>0&&(X=1),X})(O,V,me,D);const ue=b?.25:.02/(.5/O.max);(le&&Math.abs(j-le)>=ue||le==1)&&(w.debug(`[CatchupController]: Setting playback rate to ${le}`),E.setPlaybackRate(le))}}})()}function Q(){return S.getCurrentLiveLatency()-S.getLiveDelay()}function ee(){const le=C.get().streaming.liveCatchup.playbackBufferMin;return C.get().streaming.liveCatchup.mode!==c.default.LIVE_CATCHUP_MODE_LOLP||le===null||isNaN(le)?c.default.LIVE_CATCHUP_MODE_DEFAULT:c.default.LIVE_CATCHUP_MODE_LOLP}function ne(){L.getCatchupPlaybackRates(!0)}return d={reset:function(){i.off(v.default.BUFFER_LEVEL_UPDATED,F,d),i.off(v.default.BUFFER_LEVEL_STATE_CHANGED,q,d),i.off(v.default.PLAYBACK_PROGRESS,U,d),i.off(v.default.PLAYBACK_TIME_UPDATED,U,d),i.off(v.default.PLAYBACK_SEEKED,N,d),i.off(f.default.SETTING_UPDATED_CATCHUP_ENABLED,H,d),i.off(f.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,ne,d),i.off(f.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,ne,d),i.off(v.default.STREAM_INITIALIZED,ne,d),R(),E.setPlaybackRate(1,!0)},setConfig:function(le){le&&(le.settings&&(C=le.settings),le.videoModel&&(E=le.videoModel),le.streamController&&(k=le.streamController),le.playbackController&&(S=le.playbackController),le.mediaPlayerModel&&(L=le.mediaPlayerModel))},initialize:function(){i.on(v.default.BUFFER_LEVEL_UPDATED,F,d),i.on(v.default.BUFFER_LEVEL_STATE_CHANGED,q,d),i.on(v.default.PLAYBACK_PROGRESS,U,d),i.on(v.default.PLAYBACK_TIME_UPDATED,U,d),i.on(v.default.PLAYBACK_SEEKED,N,d),i.on(f.default.SETTING_UPDATED_CATCHUP_ENABLED,H,d),i.on(f.default.SETTING_UPDATED_PLAYBACK_RATE_MIN,ne,d),i.on(f.default.SETTING_UPDATED_PLAYBACK_RATE_MAX,ne,d),i.on(v.default.STREAM_INITIALIZED,ne,d),ne()}},w=(0,u.default)(l).getInstance().getLogger(d),R(),d}Oo.__dashjs_factory_name="CatchupController";var Zc=o.default.getSingletonFactory(Oo);const ed=[{oldKey:"dashjs_vbitrate",newKey:"dashjs_video_bitrate"},{oldKey:"dashjs_abitrate",newKey:"dashjs_audio_bitrate"},{oldKey:"dashjs_vsettings",newKey:"dashjs_video_settings"},{oldKey:"dashjs_asettings",newKey:"dashjs_audio_settings"}],zo="dashjs_?_bitrate",Fo="dashjs_?_settings",br="localStorage",Uo="lastBitrate",Bo="lastMediaSettings";function jo(l){l=l||{};const i=this.context,d=l.settings;let y,b,E;function C(P){if(E!==void 0)return E;let w;E=!1;try{typeof window<"u"&&(w=window[P])}catch(R){return b.warn("DOMStorage access denied: "+R.message),E}if(!w||P!==br)return E;try{w.setItem("1","1"),w.removeItem("1"),E=!0}catch(R){b.warn("DOMStorage is supported, but cannot be used: "+R.message)}return E}function k(){return Math.round(new Date().getTime()/6e5)*6e5}function S(P,w){return C(P)&&d.get().streaming[w+"CachingInfo"].enabled}function L(){if(!d)throw new Error(c.default.MISSING_CONFIG_ERROR)}return y={getSavedBitrateSettings:function(P){if(L(),!d.get().streaming.lastBitrateCachingInfo.enabled)return NaN;let w=NaN;if(S(br,Uo)){const R=zo.replace(/\?/,P);try{const N=JSON.parse(localStorage.getItem(R))||{},F=new Date().getTime()-parseInt(N.timestamp,10)>=d.get().streaming.lastBitrateCachingInfo.ttl||!1,q=parseFloat(N.bitrate);isNaN(q)||F?F&&localStorage.removeItem(R):(w=q,b.debug("Last saved bitrate for "+P+" was "+q))}catch{return null}}return w},setSavedBitrateSettings:function(P,w){if(S(br,Uo)&&w){const R=zo.replace(/\?/,P);try{localStorage.setItem(R,JSON.stringify({bitrate:w.toFixed(3),timestamp:k()}))}catch(N){b.error(N.message)}}},getSavedMediaSettings:function(P){if(L(),!d.get().streaming.lastMediaSettingsCachingInfo.enabled)return null;let w=null;if(S(br,Bo)){const R=Fo.replace(/\?/,P);try{const N=JSON.parse(localStorage.getItem(R))||{},F=new Date().getTime()-parseInt(N.timestamp,10)>=d.get().streaming.lastMediaSettingsCachingInfo.ttl||!1;w=N.settings,F&&(localStorage.removeItem(R),w=null)}catch{return null}}return w},setSavedMediaSettings:function(P,w){if(S(br,Bo)){const R=Fo.replace(/\?/,P);try{localStorage.setItem(R,JSON.stringify({settings:w,timestamp:k()}))}catch(N){b.error(N.message)}}}},b=(0,u.default)(i).getInstance().getLogger(y),C(br)&&ed.forEach((P=>{const w=localStorage.getItem(P.oldKey);if(w){localStorage.removeItem(P.oldKey);try{localStorage.setItem(P.newKey,w)}catch(R){b.error(R.message)}}})),y}jo.__dashjs_factory_name="DOMStorage";var td=o.default.getSingletonFactory(jo),bi=class{constructor(){this.accessibility=null,this.adaptationSetSwitchingCompatibleIds=[],this.audioChannelConfiguration=null,this.bitrateList=null,this.codec=null,this.contentProtection=null,this.essentialProperties=[],this.id=null,this.index=null,this.isEmbedded=null,this.isFragmented=null,this.isPreselection=!1,this.isText=!1,this.labels=null,this.lang=null,this.mimeType=null,this.normalizedKeyIds=new Set,this.representationCount=0,this.roles=null,this.segmentAlignment=!1,this.segmentSequenceProperties=[],this.selectionPriority=1,this.streamInfo=null,this.subSegmentAlignment=!1,this.supplementalProperties=[],this.type=null,this.viewpoint=null}},qo=class{constructor(){this.id=null,this.index=null,this.start=NaN,this.duration=NaN,this.manifestInfo=null,this.isLast=!0,this.isEncrypted=!1}},nd=class{constructor(){this.availableFrom=null,this.duration=NaN,this.dvrWindowSize=NaN,this.isDynamic=!1,this.loadedTime=null,this.maxFragmentDuration=null,this.minBufferTime=NaN,this.protocol=null,this.serviceDescriptions=[]}},ad=class{constructor(l){this.valid=l[0]=="/",this.path=l.split("/").filter((i=>i.length!==0)).map((i=>{let d={name:i},y=i.indexOf("[");if(y!=-1){d.name=i.substring(0,y);let b=i.substring(y+1,i.length-1);this.valid=this.valid&&b.indexOf("[")==-1;let E=b.indexOf("=");E!=-1?(d.attribute={name:b.substring(1,E),value:b.substring(E+1)},["'",'"'].indexOf(d.attribute.value[0])!=-1&&(d.attribute.value=d.attribute.value.substring(1,d.attribute.value.length-1))):d.position=parseInt(b,10)-1}return d}))}isValid(){return this.valid}findsElement(){return!this.findsAttribute()}findsAttribute(){return this.path[this.path.length-1].name.startsWith("@")}findsTextReplace(){return this.path[this.path.length-1].name==="text()"}getMpdTarget(l,i){let d=null,y=l,b=1,E="MPD";for(;b<this.path.length&&y!==null;){d=y;let C=this.path[b];if(E=C.name,b!==this.path.length-1||!E.startsWith("@")&&E!=="text()"){let k=d[E]||[];if(k.length===0&&d[E]&&k.push(d[E]),C.position)y=k[C.position]||null;else if(C.attribute){let S=C.attribute;y=k.filter((L=>L[S.name]==S.value))[0]||null}else y=Array.isArray(k)?k[0]:k}b++}return y===null?null:E.startsWith("@")?{name:E.substring(1),leaf:y,target:y}:E==="text()"?{name:"__text",leaf:y,target:y}:{name:E,leaf:y,target:i?d:y}}},rd=class{constructor(l,i,d){this.action=l,this.xpath=i,this.value=d,this.position=null}getMpdTarget(l){let i=this.action==="remove"||this.action==="replace"||this.position==="before"||this.position==="after";return this.xpath.getMpdTarget(l,i)}};function Ho(){let l,i;const d=this.context;return l={getIsPatch:function(y){return y&&y.hasOwnProperty(fe.default.ORIGINAL_MPD_ID)||!1},getMpdId:function(y){return y&&y[fe.default.ORIGINAL_MPD_ID]||null},getOriginalPublishTime:function(y){return y&&y.hasOwnProperty(fe.default.ORIGINAL_PUBLISH_TIME)?new Date(y[fe.default.ORIGINAL_PUBLISH_TIME]):null},getPatchOperations:function(y){return y?(y.__children||[]).map((b=>{const E=b.tagName;if(E!=="add"&&E!=="remove"&&E!=="replace")return i.warn(`Ignoring node of invalid action: ${E}`),null;let C=b.sel;if(E==="add"&&b.type){if(!b.type.startsWith("@"))return i.warn(`Ignoring add action for prefixed namespace declaration: ${b.type}=${b.__text}`),null;C=`${C}/${b.type}`}let k=new ad(C);if(!k.isValid())return i.warn(`Ignoring action with invalid selector: ${E} - ${C}`),null;let S=null;k.findsAttribute()||k.findsTextReplace()?S=b.__text||"":E!=="remove"&&(S=b.__children.reduce(((P,w)=>{let R=w.tagName;return R!=="#text"&&(P[R]=P[R]||[],P[R].push(w)),P}),{}));let L=new rd(E,k,S);return E==="add"&&(L.position=b.pos),L})).filter((b=>!!b)):[]},getPublishTime:function(y){return y&&y.hasOwnProperty(fe.default.PUBLISH_TIME)?new Date(y[fe.default.PUBLISH_TIME]):null}},i=(0,u.default)(d).getInstance().getLogger(l),l}Ho.__dashjs_factory_name="PatchManifestModel";var id=o.default.getSingletonFactory(Ho);function ur(l={}){let i=[];if(l.irregular)return l.irregular;if(l.regular)return l.regular;if(l.language){i=i.concat(l.language,l.extendedLanguageSubtags||[],l.script||[],l.region||[],l.variants||[]);const d=l.extensions||[];let y=-1;for(;++y<d.length;){const b=d[y];b.singleton&&b.extensions&&b.extensions.length>0&&i.push(b.singleton,...b.extensions)}}return l.privateuse&&l.privateuse.length>0&&i.push("x",...l.privateuse),i.join("-")}function oa(l){const i=typeof l=="string"?l.charCodeAt(0):l;return i>=97&&i<=122||i>=65&&i<=90}function Er(l){const i=typeof l=="string"?l.charCodeAt(0):l;return i>=48&&i<=57}function Wa(l){return oa(l)||Er(l)}const sd=["art-lojban","cel-gaulish","no-bok","no-nyn","zh-guoyu","zh-hakka","zh-min","zh-min-nan","zh-xiang"],Go={"en-gb-oed":"en-GB-oxendict","i-ami":"ami","i-bnn":"bnn","i-default":null,"i-enochian":null,"i-hak":"hak","i-klingon":"tlh","i-lux":"lb","i-mingo":null,"i-navajo":"nv","i-pwn":"pwn","i-tao":"tao","i-tay":"tay","i-tsu":"tsu","sgn-be-fr":"sfb","sgn-be-nl":"vgt","sgn-ch-de":"sgg","art-lojban":"jbo","cel-gaulish":null,"no-bok":"nb","no-nyn":"nn","zh-guoyu":"cmn","zh-hakka":"hak","zh-min":null,"zh-min-nan":"nan","zh-xiang":"hsn"},od={}.hasOwnProperty;function Qa(l,i={}){const d={language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null},y=String(l),b=y.toLowerCase();let E=0;if(l==null)throw new Error("Expected string, got `"+l+"`");if(od.call(Go,b)){const k=Go[b];return i.normalize!==void 0&&i.normalize!==null&&!i.normalize||typeof k!="string"?(d[sd.includes(b)?"regular":"irregular"]=y,d):Qa(k)}for(;oa(b.charCodeAt(E))&&E<9;)E++;if(E>1&&E<9){if(d.language=y.slice(0,E),E<4){let k=0;for(;b.charCodeAt(E)===45&&oa(b.charCodeAt(E+1))&&oa(b.charCodeAt(E+2))&&oa(b.charCodeAt(E+3))&&!oa(b.charCodeAt(E+4));){if(k>2)return C(E,3,"Too many extended language subtags, expected at most 3 subtags");d.extendedLanguageSubtags.push(y.slice(E+1,E+4)),E+=4,k++}}for(b.charCodeAt(E)===45&&oa(b.charCodeAt(E+1))&&oa(b.charCodeAt(E+2))&&oa(b.charCodeAt(E+3))&&oa(b.charCodeAt(E+4))&&!oa(b.charCodeAt(E+5))&&(d.script=y.slice(E+1,E+5),E+=5),b.charCodeAt(E)===45&&(oa(b.charCodeAt(E+1))&&oa(b.charCodeAt(E+2))&&!oa(b.charCodeAt(E+3))?(d.region=y.slice(E+1,E+3),E+=3):Er(b.charCodeAt(E+1))&&Er(b.charCodeAt(E+2))&&Er(b.charCodeAt(E+3))&&!Er(b.charCodeAt(E+4))&&(d.region=y.slice(E+1,E+4),E+=4));b.charCodeAt(E)===45;){const k=E+1;let S=k;for(;Wa(b.charCodeAt(S));){if(S-k>7)return C(S,1,"Too long variant, expected at most 8 characters");S++}if(!(S-k>4||S-k>3&&Er(b.charCodeAt(k))))break;d.variants.push(y.slice(k,S)),E=S}for(;b.charCodeAt(E)===45&&b.charCodeAt(E+1)!==120&&Wa(b.charCodeAt(E+1))&&b.charCodeAt(E+2)===45&&Wa(b.charCodeAt(E+3));){let k=E+2,S=0;for(;b.charCodeAt(k)===45&&Wa(b.charCodeAt(k+1))&&Wa(b.charCodeAt(k+2));){const L=k+1;for(k=L+2,S++;Wa(b.charCodeAt(k));){if(k-L>7)return C(k,2,"Too long extension, expected at most 8 characters");k++}}if(!S)return C(k,4,"Empty extension, extensions must have at least 2 characters of content");d.extensions.push({singleton:y.charAt(E+1),extensions:y.slice(E+3,k).split("-")}),E=k}}else E=0;if(E===0&&b.charCodeAt(E)===120||b.charCodeAt(E)===45&&b.charCodeAt(E+1)===120){E=E?E+2:1;let k=E;for(;b.charCodeAt(k)===45&&Wa(b.charCodeAt(k+1));){const S=E+1;for(k=S;Wa(b.charCodeAt(k));){if(k-S>7)return C(k,5,"Too long private-use area, expected at most 8 characters");k++}d.privateuse.push(y.slice(E+1,k)),E=k}}return E!==y.length?C(E,6,"Found superfluous content after tag"):d;function C(k,S,L){return i.warning&&i.warning(L,S,k),i.forgiving?d:{language:null,extendedLanguageSubtags:[],script:null,region:null,variants:[],extensions:[],privateuse:[],irregular:null,regular:null}}}function ld(l,i){return function(d,y){let b=Yo(d,"tag");const E=Yo(y??"*","range"),C=[];let k=-1;for(;++k<E.length;){const S=E[k].toLowerCase();if(!i&&S==="*")continue;let L=-1;const P=[];for(;++L<b.length;)if(l(b[L].toLowerCase(),S)){if(!i)return b[L];C.push(b[L])}else P.push(b[L]);b=P}return i?C:void 0}}const ls=ld((function(l,i){const d=l.split("-"),y=i.split("-");let b=0,E=0;if(y[E]!=="*"&&d[b]!==y[E])return!1;for(b++,E++;E<y.length;)if(y[E]!=="*"){if(!d[b])return!1;if(d[b]!==y[E]){if(d[b].length===1)return!1;b++}else b++,E++}else E++;return!0}),!0);function Yo(l,i){const d=l&&typeof l=="string"?[l]:l;if(!d||typeof d!="object"||!("length"in d))throw new Error("Invalid "+i+" `"+d+"`, expected non-empty string");return d}const us=[{from:"in",to:"id"},{from:"iw",to:"he"},{from:"ji",to:"yi"},{from:"jw",to:"jv"},{from:"mo",to:"ro"},{from:"scc",to:"sr"},{from:"scr",to:"hr"},{from:"aam",to:"aas"},{from:"adp",to:"dz"},{from:"aue",to:"ktz"},{from:"ayx",to:"nun"},{from:"bgm",to:"bcg"},{from:"bjd",to:"drl"},{from:"ccq",to:"rki"},{from:"cjr",to:"mom"},{from:"cka",to:"cmr"},{from:"cmk",to:"xch"},{from:"coy",to:"pij"},{from:"cqu",to:"quh"},{from:"drh",to:"mn"},{from:"drw",to:"fa-af"},{from:"gav",to:"dev"},{from:"gfx",to:"vaj"},{from:"ggn",to:"gvr"},{from:"gti",to:"nyc"},{from:"guv",to:"duz"},{from:"hrr",to:"jal"},{from:"ibi",to:"opa"},{from:"ilw",to:"gal"},{from:"jeg",to:"oyb"},{from:"kgc",to:"tdf"},{from:"kgh",to:"kml"},{from:"koj",to:"kwv"},{from:"krm",to:"bmf"},{from:"ktr",to:"dtp"},{from:"kvs",to:"gdj"},{from:"kwq",to:"yam"},{from:"kxe",to:"tvd"},{from:"kzj",to:"dtp"},{from:"kzt",to:"dtp"},{from:"lii",to:"raq"},{from:"lmm",to:"rmx"},{from:"meg",to:"cir"},{from:"mst",to:"mry"},{from:"mwj",to:"vaj"},{from:"myt",to:"mry"},{from:"nad",to:"xny"},{from:"ncp",to:"kdz"},{from:"nnx",to:"ngv"},{from:"nts",to:"pij"},{from:"oun",to:"vaj"},{from:"pcr",to:"adx"},{from:"pmc",to:"huw"},{from:"pmu",to:"phr"},{from:"ppa",to:"bfy"},{from:"ppr",to:"lcq"},{from:"pry",to:"prt"},{from:"puz",to:"pub"},{from:"sca",to:"hle"},{from:"skk",to:"oyb"},{from:"tdu",to:"dtp"},{from:"thc",to:"tpo"},{from:"thx",to:"oyb"},{from:"tie",to:"ras"},{from:"tkk",to:"twm"},{from:"tlw",to:"weo"},{from:"tmp",to:"tyj"},{from:"tne",to:"kak"},{from:"tnf",to:"fa-af"},{from:"tsf",to:"taj"},{from:"uok",to:"ema"},{from:"xba",to:"cax"},{from:"xia",to:"acn"},{from:"xkh",to:"waw"},{from:"xsj",to:"suj"},{from:"ybd",to:"rki"},{from:"yma",to:"lrr"},{from:"ymt",to:"mtm"},{from:"yos",to:"zom"},{from:"yuu",to:"yug"},{from:"asd",to:"snz"},{from:"dit",to:"dif"},{from:"llo",to:"ngt"},{from:"myd",to:"aog"},{from:"nns",to:"nbr"},{from:"agp",to:"apf"},{from:"ais",to:"ami"},{from:"ajt",to:"aeb"},{from:"baz",to:"nvo"},{from:"bhk",to:"fbl"},{from:"bic",to:"bir"},{from:"bjq",to:"bzc"},{from:"bkb",to:"ebk"},{from:"blg",to:"iba"},{from:"btb",to:"beb"},{from:"daf",to:"dnj"},{from:"dap",to:"njz"},{from:"djl",to:"dze"},{from:"dkl",to:"aqd"},{from:"drr",to:"kzk"},{from:"dud",to:"uth"},{from:"duj",to:"dwu"},{from:"dwl",to:"dbt"},{from:"elp",to:"amq"},{from:"gbc",to:"wny"},{from:"ggo",to:"esg"},{from:"ggr",to:"gtu"},{from:"gio",to:"aou"},{from:"gli",to:"kzk"},{from:"ill",to:"ilm"},{from:"izi",to:"eza"},{from:"jar",to:"jgk"},{from:"kdv",to:"zkd"},{from:"kgd",to:"ncq"},{from:"kpp",to:"jkm"},{from:"kxl",to:"kru"},{from:"kzh",to:"dgl"},{from:"lak",to:"ksp"},{from:"leg",to:"enl"},{from:"mgx",to:"jbk"},{from:"mnt",to:"wnn"},{from:"mof",to:"xnt"},{from:"mwd",to:"dmw"},{from:"nbf",to:"nru"},{from:"nbx",to:"ekc"},{from:"nln",to:"azd"},{from:"nlr",to:"nrk"},{from:"noo",to:"dtd"},{from:"nxu",to:"bpp"},{from:"pat",to:"kxr"},{from:"rmr",to:"emx"},{from:"sap",to:"aqt"},{from:"sgl",to:"isk"},{from:"smd",to:"kmb"},{from:"snb",to:"iba"},{from:"sul",to:"sgd"},{from:"sum",to:"ulw"},{from:"tgg",to:"bjp"},{from:"thw",to:"ola"},{from:"tid",to:"itd"},{from:"unp",to:"wro"},{from:"wgw",to:"wgb"},{from:"wit",to:"nol"},{from:"wiw",to:"nwo"},{from:"xrq",to:"dmw"},{from:"yen",to:"ynq"},{from:"yiy",to:"yrm"},{from:"zir",to:"scv"},{from:"sgn-br",to:"bzs"},{from:"sgn-co",to:"csn"},{from:"sgn-de",to:"gsg"},{from:"sgn-dk",to:"dsl"},{from:"sgn-fr",to:"fsl"},{from:"sgn-gb",to:"bfi"},{from:"sgn-gr",to:"gss"},{from:"sgn-ie",to:"isg"},{from:"sgn-it",to:"ise"},{from:"sgn-jp",to:"jsl"},{from:"sgn-mx",to:"mfs"},{from:"sgn-ni",to:"ncs"},{from:"sgn-nl",to:"dse"},{from:"sgn-no",to:"nsi"},{from:"sgn-pt",to:"psr"},{from:"sgn-se",to:"swl"},{from:"sgn-us",to:"ase"},{from:"sgn-za",to:"sfs"},{from:"sgn-es",to:"ssp"},{from:"zh-cmn",to:"zh"},{from:"zh-cmn-hans",to:"zh-hans"},{from:"zh-cmn-hant",to:"zh-hant"},{from:"zh-gan",to:"gan"},{from:"zh-wuu",to:"wuu"},{from:"zh-yue",to:"yue"},{from:"no-bokmal",to:"nb"},{from:"no-nynorsk",to:"nn"},{from:"aa-saaho",to:"ssy"},{from:"sh",to:"sr-latn"},{from:"cnr",to:"sr-me"},{from:"tl",to:"fil"},{from:"aju",to:"jrb"},{from:"als",to:"sq"},{from:"arb",to:"ar"},{from:"ayr",to:"ay"},{from:"azj",to:"az"},{from:"bcc",to:"bal"},{from:"bcl",to:"bik"},{from:"bxk",to:"luy"},{from:"bxr",to:"bua"},{from:"cld",to:"syr"},{from:"cmn",to:"zh"},{from:"cwd",to:"cr"},{from:"dgo",to:"doi"},{from:"dhd",to:"mwr"},{from:"dik",to:"din"},{from:"diq",to:"zza"},{from:"lbk",to:"bnc"},{from:"ekk",to:"et"},{from:"emk",to:"man"},{from:"esk",to:"ik"},{from:"fat",to:"ak"},{from:"fuc",to:"ff"},{from:"gaz",to:"om"},{from:"gbo",to:"grb"},{from:"gno",to:"gon"},{from:"gug",to:"gn"},{from:"gya",to:"gba"},{from:"hdn",to:"hai"},{from:"hea",to:"hmn"},{from:"ike",to:"iu"},{from:"kmr",to:"ku"},{from:"knc",to:"kr"},{from:"kng",to:"kg"},{from:"knn",to:"kok"},{from:"kpv",to:"kv"},{from:"lvs",to:"lv"},{from:"mhr",to:"chm"},{from:"mup",to:"raj"},{from:"khk",to:"mn"},{from:"npi",to:"ne"},{from:"ojg",to:"oj"},{from:"ory",to:"or"},{from:"pbu",to:"ps"},{from:"pes",to:"fa"},{from:"plt",to:"mg"},{from:"pnb",to:"lah"},{from:"quz",to:"qu"},{from:"rmy",to:"rom"},{from:"spy",to:"kln"},{from:"src",to:"sc"},{from:"swh",to:"sw"},{from:"ttq",to:"tmh"},{from:"tw",to:"ak"},{from:"umu",to:"del"},{from:"uzn",to:"uz"},{from:"xpe",to:"kpe"},{from:"xsl",to:"den"},{from:"ydd",to:"yi"},{from:"zai",to:"zap"},{from:"zsm",to:"ms"},{from:"zyb",to:"za"},{from:"him",to:"srx"},{from:"mnk",to:"man"},{from:"bh",to:"bho"},{from:"prs",to:"fa-af"},{from:"swc",to:"sw-cd"},{from:"aar",to:"aa"},{from:"abk",to:"ab"},{from:"ave",to:"ae"},{from:"afr",to:"af"},{from:"aka",to:"ak"},{from:"amh",to:"am"},{from:"arg",to:"an"},{from:"ara",to:"ar"},{from:"asm",to:"as"},{from:"ava",to:"av"},{from:"aym",to:"ay"},{from:"aze",to:"az"},{from:"bak",to:"ba"},{from:"bel",to:"be"},{from:"bul",to:"bg"},{from:"bih",to:"bho"},{from:"bis",to:"bi"},{from:"bam",to:"bm"},{from:"ben",to:"bn"},{from:"bod",to:"bo"},{from:"bre",to:"br"},{from:"bos",to:"bs"},{from:"cat",to:"ca"},{from:"che",to:"ce"},{from:"cha",to:"ch"},{from:"cos",to:"co"},{from:"cre",to:"cr"},{from:"ces",to:"cs"},{from:"chu",to:"cu"},{from:"chv",to:"cv"},{from:"cym",to:"cy"},{from:"dan",to:"da"},{from:"deu",to:"de"},{from:"div",to:"dv"},{from:"dzo",to:"dz"},{from:"ewe",to:"ee"},{from:"ell",to:"el"},{from:"eng",to:"en"},{from:"epo",to:"eo"},{from:"spa",to:"es"},{from:"est",to:"et"},{from:"eus",to:"eu"},{from:"fas",to:"fa"},{from:"ful",to:"ff"},{from:"fin",to:"fi"},{from:"fij",to:"fj"},{from:"fao",to:"fo"},{from:"fra",to:"fr"},{from:"fry",to:"fy"},{from:"gle",to:"ga"},{from:"gla",to:"gd"},{from:"glg",to:"gl"},{from:"grn",to:"gn"},{from:"guj",to:"gu"},{from:"glv",to:"gv"},{from:"hau",to:"ha"},{from:"heb",to:"he"},{from:"hin",to:"hi"},{from:"hmo",to:"ho"},{from:"hrv",to:"hr"},{from:"hat",to:"ht"},{from:"hun",to:"hu"},{from:"hye",to:"hy"},{from:"her",to:"hz"},{from:"ina",to:"ia"},{from:"ind",to:"id"},{from:"ile",to:"ie"},{from:"ibo",to:"ig"},{from:"iii",to:"ii"},{from:"ipk",to:"ik"},{from:"ido",to:"io"},{from:"isl",to:"is"},{from:"ita",to:"it"},{from:"iku",to:"iu"},{from:"jpn",to:"ja"},{from:"jav",to:"jv"},{from:"kat",to:"ka"},{from:"kon",to:"kg"},{from:"kik",to:"ki"},{from:"kua",to:"kj"},{from:"kaz",to:"kk"},{from:"kal",to:"kl"},{from:"khm",to:"km"},{from:"kan",to:"kn"},{from:"kor",to:"ko"},{from:"kau",to:"kr"},{from:"kas",to:"ks"},{from:"kur",to:"ku"},{from:"kom",to:"kv"},{from:"cor",to:"kw"},{from:"kir",to:"ky"},{from:"lat",to:"la"},{from:"ltz",to:"lb"},{from:"lug",to:"lg"},{from:"lim",to:"li"},{from:"lin",to:"ln"},{from:"lao",to:"lo"},{from:"lit",to:"lt"},{from:"lub",to:"lu"},{from:"lav",to:"lv"},{from:"mlg",to:"mg"},{from:"mah",to:"mh"},{from:"mri",to:"mi"},{from:"mkd",to:"mk"},{from:"mal",to:"ml"},{from:"mon",to:"mn"},{from:"mol",to:"ro"},{from:"mar",to:"mr"},{from:"msa",to:"ms"},{from:"mlt",to:"mt"},{from:"mya",to:"my"},{from:"nau",to:"na"},{from:"nob",to:"nb"},{from:"nde",to:"nd"},{from:"nep",to:"ne"},{from:"ndo",to:"ng"},{from:"nld",to:"nl"},{from:"nno",to:"nn"},{from:"nor",to:"no"},{from:"nbl",to:"nr"},{from:"nav",to:"nv"},{from:"nya",to:"ny"},{from:"oci",to:"oc"},{from:"oji",to:"oj"},{from:"orm",to:"om"},{from:"ori",to:"or"},{from:"oss",to:"os"},{from:"pan",to:"pa"},{from:"pli",to:"pi"},{from:"pol",to:"pl"},{from:"pus",to:"ps"},{from:"por",to:"pt"},{from:"que",to:"qu"},{from:"roh",to:"rm"},{from:"run",to:"rn"},{from:"ron",to:"ro"},{from:"rus",to:"ru"},{from:"kin",to:"rw"},{from:"san",to:"sa"},{from:"srd",to:"sc"},{from:"snd",to:"sd"},{from:"sme",to:"se"},{from:"sag",to:"sg"},{from:"hbs",to:"sr-latn"},{from:"sin",to:"si"},{from:"slk",to:"sk"},{from:"slv",to:"sl"},{from:"smo",to:"sm"},{from:"sna",to:"sn"},{from:"som",to:"so"},{from:"sqi",to:"sq"},{from:"srp",to:"sr"},{from:"ssw",to:"ss"},{from:"sot",to:"st"},{from:"sun",to:"su"},{from:"swe",to:"sv"},{from:"swa",to:"sw"},{from:"tam",to:"ta"},{from:"tel",to:"te"},{from:"tgk",to:"tg"},{from:"tha",to:"th"},{from:"tir",to:"ti"},{from:"tuk",to:"tk"},{from:"tgl",to:"fil"},{from:"tsn",to:"tn"},{from:"ton",to:"to"},{from:"tur",to:"tr"},{from:"tso",to:"ts"},{from:"tat",to:"tt"},{from:"twi",to:"ak"},{from:"tah",to:"ty"},{from:"uig",to:"ug"},{from:"ukr",to:"uk"},{from:"urd",to:"ur"},{from:"uzb",to:"uz"},{from:"ven",to:"ve"},{from:"vie",to:"vi"},{from:"vol",to:"vo"},{from:"wln",to:"wa"},{from:"wol",to:"wo"},{from:"xho",to:"xh"},{from:"yid",to:"yi"},{from:"yor",to:"yo"},{from:"zha",to:"za"},{from:"zho",to:"zh"},{from:"zul",to:"zu"},{from:"alb",to:"sq"},{from:"arm",to:"hy"},{from:"baq",to:"eu"},{from:"bur",to:"my"},{from:"chi",to:"zh"},{from:"cze",to:"cs"},{from:"dut",to:"nl"},{from:"fre",to:"fr"},{from:"geo",to:"ka"},{from:"ger",to:"de"},{from:"gre",to:"el"},{from:"ice",to:"is"},{from:"mac",to:"mk"},{from:"mao",to:"mi"},{from:"may",to:"ms"},{from:"per",to:"fa"},{from:"rum",to:"ro"},{from:"slo",to:"sk"},{from:"tib",to:"bo"},{from:"wel",to:"cy"},{from:"und-aaland",to:"und-ax"},{from:"hy-arevmda",to:"hyw"},{from:"und-arevmda",to:"und"},{from:"und-arevela",to:"und"},{from:"und-lojban",to:"und"},{from:"und-saaho",to:"und"},{from:"und-bokmal",to:"und"},{from:"und-nynorsk",to:"und"},{from:"und-hakka",to:"und"},{from:"und-xiang",to:"und"},{from:"und-hepburn-heploc",to:"und-alalc97"}],Vr=[{from:{field:"script",value:"qaai"},to:{field:"script",value:"zinh"}},{from:{field:"region",value:"bu"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"ct"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"dd"},to:{field:"region",value:"de"}},{from:{field:"region",value:"dy"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"fx"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"hv"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"jt"},to:{field:"region",value:"um"}},{from:{field:"region",value:"mi"},to:{field:"region",value:"um"}},{from:{field:"region",value:"nh"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"nq"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"pu"},to:{field:"region",value:"um"}},{from:{field:"region",value:"pz"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"qu"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"rh"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"tp"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"uk"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"vd"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"wk"},to:{field:"region",value:"um"}},{from:{field:"region",value:"yd"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"zr"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"230"},to:{field:"region",value:"et"}},{from:{field:"region",value:"280"},to:{field:"region",value:"de"}},{from:{field:"region",value:"736"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"886"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"958"},to:{field:"region",value:"aa"}},{from:{field:"region",value:"020"},to:{field:"region",value:"ad"}},{from:{field:"region",value:"784"},to:{field:"region",value:"ae"}},{from:{field:"region",value:"004"},to:{field:"region",value:"af"}},{from:{field:"region",value:"028"},to:{field:"region",value:"ag"}},{from:{field:"region",value:"660"},to:{field:"region",value:"ai"}},{from:{field:"region",value:"008"},to:{field:"region",value:"al"}},{from:{field:"region",value:"051"},to:{field:"region",value:"am"}},{from:{field:"region",value:"024"},to:{field:"region",value:"ao"}},{from:{field:"region",value:"010"},to:{field:"region",value:"aq"}},{from:{field:"region",value:"032"},to:{field:"region",value:"ar"}},{from:{field:"region",value:"016"},to:{field:"region",value:"as"}},{from:{field:"region",value:"040"},to:{field:"region",value:"at"}},{from:{field:"region",value:"036"},to:{field:"region",value:"au"}},{from:{field:"region",value:"533"},to:{field:"region",value:"aw"}},{from:{field:"region",value:"248"},to:{field:"region",value:"ax"}},{from:{field:"region",value:"031"},to:{field:"region",value:"az"}},{from:{field:"region",value:"070"},to:{field:"region",value:"ba"}},{from:{field:"region",value:"052"},to:{field:"region",value:"bb"}},{from:{field:"region",value:"050"},to:{field:"region",value:"bd"}},{from:{field:"region",value:"056"},to:{field:"region",value:"be"}},{from:{field:"region",value:"854"},to:{field:"region",value:"bf"}},{from:{field:"region",value:"100"},to:{field:"region",value:"bg"}},{from:{field:"region",value:"048"},to:{field:"region",value:"bh"}},{from:{field:"region",value:"108"},to:{field:"region",value:"bi"}},{from:{field:"region",value:"204"},to:{field:"region",value:"bj"}},{from:{field:"region",value:"652"},to:{field:"region",value:"bl"}},{from:{field:"region",value:"060"},to:{field:"region",value:"bm"}},{from:{field:"region",value:"096"},to:{field:"region",value:"bn"}},{from:{field:"region",value:"068"},to:{field:"region",value:"bo"}},{from:{field:"region",value:"535"},to:{field:"region",value:"bq"}},{from:{field:"region",value:"076"},to:{field:"region",value:"br"}},{from:{field:"region",value:"044"},to:{field:"region",value:"bs"}},{from:{field:"region",value:"064"},to:{field:"region",value:"bt"}},{from:{field:"region",value:"104"},to:{field:"region",value:"mm"}},{from:{field:"region",value:"074"},to:{field:"region",value:"bv"}},{from:{field:"region",value:"072"},to:{field:"region",value:"bw"}},{from:{field:"region",value:"112"},to:{field:"region",value:"by"}},{from:{field:"region",value:"084"},to:{field:"region",value:"bz"}},{from:{field:"region",value:"124"},to:{field:"region",value:"ca"}},{from:{field:"region",value:"166"},to:{field:"region",value:"cc"}},{from:{field:"region",value:"180"},to:{field:"region",value:"cd"}},{from:{field:"region",value:"140"},to:{field:"region",value:"cf"}},{from:{field:"region",value:"178"},to:{field:"region",value:"cg"}},{from:{field:"region",value:"756"},to:{field:"region",value:"ch"}},{from:{field:"region",value:"384"},to:{field:"region",value:"ci"}},{from:{field:"region",value:"184"},to:{field:"region",value:"ck"}},{from:{field:"region",value:"152"},to:{field:"region",value:"cl"}},{from:{field:"region",value:"120"},to:{field:"region",value:"cm"}},{from:{field:"region",value:"156"},to:{field:"region",value:"cn"}},{from:{field:"region",value:"170"},to:{field:"region",value:"co"}},{from:{field:"region",value:"188"},to:{field:"region",value:"cr"}},{from:{field:"region",value:"192"},to:{field:"region",value:"cu"}},{from:{field:"region",value:"132"},to:{field:"region",value:"cv"}},{from:{field:"region",value:"531"},to:{field:"region",value:"cw"}},{from:{field:"region",value:"162"},to:{field:"region",value:"cx"}},{from:{field:"region",value:"196"},to:{field:"region",value:"cy"}},{from:{field:"region",value:"203"},to:{field:"region",value:"cz"}},{from:{field:"region",value:"278"},to:{field:"region",value:"de"}},{from:{field:"region",value:"276"},to:{field:"region",value:"de"}},{from:{field:"region",value:"262"},to:{field:"region",value:"dj"}},{from:{field:"region",value:"208"},to:{field:"region",value:"dk"}},{from:{field:"region",value:"212"},to:{field:"region",value:"dm"}},{from:{field:"region",value:"214"},to:{field:"region",value:"do"}},{from:{field:"region",value:"012"},to:{field:"region",value:"dz"}},{from:{field:"region",value:"218"},to:{field:"region",value:"ec"}},{from:{field:"region",value:"233"},to:{field:"region",value:"ee"}},{from:{field:"region",value:"818"},to:{field:"region",value:"eg"}},{from:{field:"region",value:"732"},to:{field:"region",value:"eh"}},{from:{field:"region",value:"232"},to:{field:"region",value:"er"}},{from:{field:"region",value:"724"},to:{field:"region",value:"es"}},{from:{field:"region",value:"231"},to:{field:"region",value:"et"}},{from:{field:"region",value:"246"},to:{field:"region",value:"fi"}},{from:{field:"region",value:"242"},to:{field:"region",value:"fj"}},{from:{field:"region",value:"238"},to:{field:"region",value:"fk"}},{from:{field:"region",value:"583"},to:{field:"region",value:"fm"}},{from:{field:"region",value:"234"},to:{field:"region",value:"fo"}},{from:{field:"region",value:"250"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"249"},to:{field:"region",value:"fr"}},{from:{field:"region",value:"266"},to:{field:"region",value:"ga"}},{from:{field:"region",value:"826"},to:{field:"region",value:"gb"}},{from:{field:"region",value:"308"},to:{field:"region",value:"gd"}},{from:{field:"region",value:"268"},to:{field:"region",value:"ge"}},{from:{field:"region",value:"254"},to:{field:"region",value:"gf"}},{from:{field:"region",value:"831"},to:{field:"region",value:"gg"}},{from:{field:"region",value:"288"},to:{field:"region",value:"gh"}},{from:{field:"region",value:"292"},to:{field:"region",value:"gi"}},{from:{field:"region",value:"304"},to:{field:"region",value:"gl"}},{from:{field:"region",value:"270"},to:{field:"region",value:"gm"}},{from:{field:"region",value:"324"},to:{field:"region",value:"gn"}},{from:{field:"region",value:"312"},to:{field:"region",value:"gp"}},{from:{field:"region",value:"226"},to:{field:"region",value:"gq"}},{from:{field:"region",value:"300"},to:{field:"region",value:"gr"}},{from:{field:"region",value:"239"},to:{field:"region",value:"gs"}},{from:{field:"region",value:"320"},to:{field:"region",value:"gt"}},{from:{field:"region",value:"316"},to:{field:"region",value:"gu"}},{from:{field:"region",value:"624"},to:{field:"region",value:"gw"}},{from:{field:"region",value:"328"},to:{field:"region",value:"gy"}},{from:{field:"region",value:"344"},to:{field:"region",value:"hk"}},{from:{field:"region",value:"334"},to:{field:"region",value:"hm"}},{from:{field:"region",value:"340"},to:{field:"region",value:"hn"}},{from:{field:"region",value:"191"},to:{field:"region",value:"hr"}},{from:{field:"region",value:"332"},to:{field:"region",value:"ht"}},{from:{field:"region",value:"348"},to:{field:"region",value:"hu"}},{from:{field:"region",value:"360"},to:{field:"region",value:"id"}},{from:{field:"region",value:"372"},to:{field:"region",value:"ie"}},{from:{field:"region",value:"376"},to:{field:"region",value:"il"}},{from:{field:"region",value:"833"},to:{field:"region",value:"im"}},{from:{field:"region",value:"356"},to:{field:"region",value:"in"}},{from:{field:"region",value:"086"},to:{field:"region",value:"io"}},{from:{field:"region",value:"368"},to:{field:"region",value:"iq"}},{from:{field:"region",value:"364"},to:{field:"region",value:"ir"}},{from:{field:"region",value:"352"},to:{field:"region",value:"is"}},{from:{field:"region",value:"380"},to:{field:"region",value:"it"}},{from:{field:"region",value:"832"},to:{field:"region",value:"je"}},{from:{field:"region",value:"388"},to:{field:"region",value:"jm"}},{from:{field:"region",value:"400"},to:{field:"region",value:"jo"}},{from:{field:"region",value:"392"},to:{field:"region",value:"jp"}},{from:{field:"region",value:"404"},to:{field:"region",value:"ke"}},{from:{field:"region",value:"417"},to:{field:"region",value:"kg"}},{from:{field:"region",value:"116"},to:{field:"region",value:"kh"}},{from:{field:"region",value:"296"},to:{field:"region",value:"ki"}},{from:{field:"region",value:"174"},to:{field:"region",value:"km"}},{from:{field:"region",value:"659"},to:{field:"region",value:"kn"}},{from:{field:"region",value:"408"},to:{field:"region",value:"kp"}},{from:{field:"region",value:"410"},to:{field:"region",value:"kr"}},{from:{field:"region",value:"414"},to:{field:"region",value:"kw"}},{from:{field:"region",value:"136"},to:{field:"region",value:"ky"}},{from:{field:"region",value:"398"},to:{field:"region",value:"kz"}},{from:{field:"region",value:"418"},to:{field:"region",value:"la"}},{from:{field:"region",value:"422"},to:{field:"region",value:"lb"}},{from:{field:"region",value:"662"},to:{field:"region",value:"lc"}},{from:{field:"region",value:"438"},to:{field:"region",value:"li"}},{from:{field:"region",value:"144"},to:{field:"region",value:"lk"}},{from:{field:"region",value:"430"},to:{field:"region",value:"lr"}},{from:{field:"region",value:"426"},to:{field:"region",value:"ls"}},{from:{field:"region",value:"440"},to:{field:"region",value:"lt"}},{from:{field:"region",value:"442"},to:{field:"region",value:"lu"}},{from:{field:"region",value:"428"},to:{field:"region",value:"lv"}},{from:{field:"region",value:"434"},to:{field:"region",value:"ly"}},{from:{field:"region",value:"504"},to:{field:"region",value:"ma"}},{from:{field:"region",value:"492"},to:{field:"region",value:"mc"}},{from:{field:"region",value:"498"},to:{field:"region",value:"md"}},{from:{field:"region",value:"499"},to:{field:"region",value:"me"}},{from:{field:"region",value:"663"},to:{field:"region",value:"mf"}},{from:{field:"region",value:"450"},to:{field:"region",value:"mg"}},{from:{field:"region",value:"584"},to:{field:"region",value:"mh"}},{from:{field:"region",value:"807"},to:{field:"region",value:"mk"}},{from:{field:"region",value:"466"},to:{field:"region",value:"ml"}},{from:{field:"region",value:"496"},to:{field:"region",value:"mn"}},{from:{field:"region",value:"446"},to:{field:"region",value:"mo"}},{from:{field:"region",value:"580"},to:{field:"region",value:"mp"}},{from:{field:"region",value:"474"},to:{field:"region",value:"mq"}},{from:{field:"region",value:"478"},to:{field:"region",value:"mr"}},{from:{field:"region",value:"500"},to:{field:"region",value:"ms"}},{from:{field:"region",value:"470"},to:{field:"region",value:"mt"}},{from:{field:"region",value:"480"},to:{field:"region",value:"mu"}},{from:{field:"region",value:"462"},to:{field:"region",value:"mv"}},{from:{field:"region",value:"454"},to:{field:"region",value:"mw"}},{from:{field:"region",value:"484"},to:{field:"region",value:"mx"}},{from:{field:"region",value:"458"},to:{field:"region",value:"my"}},{from:{field:"region",value:"508"},to:{field:"region",value:"mz"}},{from:{field:"region",value:"516"},to:{field:"region",value:"na"}},{from:{field:"region",value:"540"},to:{field:"region",value:"nc"}},{from:{field:"region",value:"562"},to:{field:"region",value:"ne"}},{from:{field:"region",value:"574"},to:{field:"region",value:"nf"}},{from:{field:"region",value:"566"},to:{field:"region",value:"ng"}},{from:{field:"region",value:"558"},to:{field:"region",value:"ni"}},{from:{field:"region",value:"528"},to:{field:"region",value:"nl"}},{from:{field:"region",value:"578"},to:{field:"region",value:"no"}},{from:{field:"region",value:"524"},to:{field:"region",value:"np"}},{from:{field:"region",value:"520"},to:{field:"region",value:"nr"}},{from:{field:"region",value:"570"},to:{field:"region",value:"nu"}},{from:{field:"region",value:"554"},to:{field:"region",value:"nz"}},{from:{field:"region",value:"512"},to:{field:"region",value:"om"}},{from:{field:"region",value:"591"},to:{field:"region",value:"pa"}},{from:{field:"region",value:"604"},to:{field:"region",value:"pe"}},{from:{field:"region",value:"258"},to:{field:"region",value:"pf"}},{from:{field:"region",value:"598"},to:{field:"region",value:"pg"}},{from:{field:"region",value:"608"},to:{field:"region",value:"ph"}},{from:{field:"region",value:"586"},to:{field:"region",value:"pk"}},{from:{field:"region",value:"616"},to:{field:"region",value:"pl"}},{from:{field:"region",value:"666"},to:{field:"region",value:"pm"}},{from:{field:"region",value:"612"},to:{field:"region",value:"pn"}},{from:{field:"region",value:"630"},to:{field:"region",value:"pr"}},{from:{field:"region",value:"275"},to:{field:"region",value:"ps"}},{from:{field:"region",value:"620"},to:{field:"region",value:"pt"}},{from:{field:"region",value:"585"},to:{field:"region",value:"pw"}},{from:{field:"region",value:"600"},to:{field:"region",value:"py"}},{from:{field:"region",value:"634"},to:{field:"region",value:"qa"}},{from:{field:"region",value:"959"},to:{field:"region",value:"qm"}},{from:{field:"region",value:"960"},to:{field:"region",value:"qn"}},{from:{field:"region",value:"962"},to:{field:"region",value:"qp"}},{from:{field:"region",value:"963"},to:{field:"region",value:"qq"}},{from:{field:"region",value:"964"},to:{field:"region",value:"qr"}},{from:{field:"region",value:"965"},to:{field:"region",value:"qs"}},{from:{field:"region",value:"966"},to:{field:"region",value:"qt"}},{from:{field:"region",value:"967"},to:{field:"region",value:"eu"}},{from:{field:"region",value:"968"},to:{field:"region",value:"qv"}},{from:{field:"region",value:"969"},to:{field:"region",value:"qw"}},{from:{field:"region",value:"970"},to:{field:"region",value:"qx"}},{from:{field:"region",value:"971"},to:{field:"region",value:"qy"}},{from:{field:"region",value:"972"},to:{field:"region",value:"qz"}},{from:{field:"region",value:"638"},to:{field:"region",value:"re"}},{from:{field:"region",value:"642"},to:{field:"region",value:"ro"}},{from:{field:"region",value:"688"},to:{field:"region",value:"rs"}},{from:{field:"region",value:"643"},to:{field:"region",value:"ru"}},{from:{field:"region",value:"646"},to:{field:"region",value:"rw"}},{from:{field:"region",value:"682"},to:{field:"region",value:"sa"}},{from:{field:"region",value:"090"},to:{field:"region",value:"sb"}},{from:{field:"region",value:"690"},to:{field:"region",value:"sc"}},{from:{field:"region",value:"729"},to:{field:"region",value:"sd"}},{from:{field:"region",value:"752"},to:{field:"region",value:"se"}},{from:{field:"region",value:"702"},to:{field:"region",value:"sg"}},{from:{field:"region",value:"654"},to:{field:"region",value:"sh"}},{from:{field:"region",value:"705"},to:{field:"region",value:"si"}},{from:{field:"region",value:"744"},to:{field:"region",value:"sj"}},{from:{field:"region",value:"703"},to:{field:"region",value:"sk"}},{from:{field:"region",value:"694"},to:{field:"region",value:"sl"}},{from:{field:"region",value:"674"},to:{field:"region",value:"sm"}},{from:{field:"region",value:"686"},to:{field:"region",value:"sn"}},{from:{field:"region",value:"706"},to:{field:"region",value:"so"}},{from:{field:"region",value:"740"},to:{field:"region",value:"sr"}},{from:{field:"region",value:"728"},to:{field:"region",value:"ss"}},{from:{field:"region",value:"678"},to:{field:"region",value:"st"}},{from:{field:"region",value:"222"},to:{field:"region",value:"sv"}},{from:{field:"region",value:"534"},to:{field:"region",value:"sx"}},{from:{field:"region",value:"760"},to:{field:"region",value:"sy"}},{from:{field:"region",value:"748"},to:{field:"region",value:"sz"}},{from:{field:"region",value:"796"},to:{field:"region",value:"tc"}},{from:{field:"region",value:"148"},to:{field:"region",value:"td"}},{from:{field:"region",value:"260"},to:{field:"region",value:"tf"}},{from:{field:"region",value:"768"},to:{field:"region",value:"tg"}},{from:{field:"region",value:"764"},to:{field:"region",value:"th"}},{from:{field:"region",value:"762"},to:{field:"region",value:"tj"}},{from:{field:"region",value:"772"},to:{field:"region",value:"tk"}},{from:{field:"region",value:"626"},to:{field:"region",value:"tl"}},{from:{field:"region",value:"795"},to:{field:"region",value:"tm"}},{from:{field:"region",value:"788"},to:{field:"region",value:"tn"}},{from:{field:"region",value:"776"},to:{field:"region",value:"to"}},{from:{field:"region",value:"792"},to:{field:"region",value:"tr"}},{from:{field:"region",value:"780"},to:{field:"region",value:"tt"}},{from:{field:"region",value:"798"},to:{field:"region",value:"tv"}},{from:{field:"region",value:"158"},to:{field:"region",value:"tw"}},{from:{field:"region",value:"834"},to:{field:"region",value:"tz"}},{from:{field:"region",value:"804"},to:{field:"region",value:"ua"}},{from:{field:"region",value:"800"},to:{field:"region",value:"ug"}},{from:{field:"region",value:"581"},to:{field:"region",value:"um"}},{from:{field:"region",value:"840"},to:{field:"region",value:"us"}},{from:{field:"region",value:"858"},to:{field:"region",value:"uy"}},{from:{field:"region",value:"860"},to:{field:"region",value:"uz"}},{from:{field:"region",value:"336"},to:{field:"region",value:"va"}},{from:{field:"region",value:"670"},to:{field:"region",value:"vc"}},{from:{field:"region",value:"862"},to:{field:"region",value:"ve"}},{from:{field:"region",value:"092"},to:{field:"region",value:"vg"}},{from:{field:"region",value:"850"},to:{field:"region",value:"vi"}},{from:{field:"region",value:"704"},to:{field:"region",value:"vn"}},{from:{field:"region",value:"548"},to:{field:"region",value:"vu"}},{from:{field:"region",value:"876"},to:{field:"region",value:"wf"}},{from:{field:"region",value:"882"},to:{field:"region",value:"ws"}},{from:{field:"region",value:"973"},to:{field:"region",value:"xa"}},{from:{field:"region",value:"974"},to:{field:"region",value:"xb"}},{from:{field:"region",value:"975"},to:{field:"region",value:"xc"}},{from:{field:"region",value:"976"},to:{field:"region",value:"xd"}},{from:{field:"region",value:"977"},to:{field:"region",value:"xe"}},{from:{field:"region",value:"978"},to:{field:"region",value:"xf"}},{from:{field:"region",value:"979"},to:{field:"region",value:"xg"}},{from:{field:"region",value:"980"},to:{field:"region",value:"xh"}},{from:{field:"region",value:"981"},to:{field:"region",value:"xi"}},{from:{field:"region",value:"982"},to:{field:"region",value:"xj"}},{from:{field:"region",value:"983"},to:{field:"region",value:"xk"}},{from:{field:"region",value:"984"},to:{field:"region",value:"xl"}},{from:{field:"region",value:"985"},to:{field:"region",value:"xm"}},{from:{field:"region",value:"986"},to:{field:"region",value:"xn"}},{from:{field:"region",value:"987"},to:{field:"region",value:"xo"}},{from:{field:"region",value:"988"},to:{field:"region",value:"xp"}},{from:{field:"region",value:"989"},to:{field:"region",value:"xq"}},{from:{field:"region",value:"990"},to:{field:"region",value:"xr"}},{from:{field:"region",value:"991"},to:{field:"region",value:"xs"}},{from:{field:"region",value:"992"},to:{field:"region",value:"xt"}},{from:{field:"region",value:"993"},to:{field:"region",value:"xu"}},{from:{field:"region",value:"994"},to:{field:"region",value:"xv"}},{from:{field:"region",value:"995"},to:{field:"region",value:"xw"}},{from:{field:"region",value:"996"},to:{field:"region",value:"xx"}},{from:{field:"region",value:"997"},to:{field:"region",value:"xy"}},{from:{field:"region",value:"998"},to:{field:"region",value:"xz"}},{from:{field:"region",value:"720"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"887"},to:{field:"region",value:"ye"}},{from:{field:"region",value:"175"},to:{field:"region",value:"yt"}},{from:{field:"region",value:"710"},to:{field:"region",value:"za"}},{from:{field:"region",value:"894"},to:{field:"region",value:"zm"}},{from:{field:"region",value:"716"},to:{field:"region",value:"zw"}},{from:{field:"region",value:"999"},to:{field:"region",value:"zz"}},{from:{field:"variants",value:"polytoni"},to:{field:"variants",value:"polyton"}},{from:{field:"variants",value:"heploc"},to:{field:"variants",value:"alalc97"}}],cs={region:{172:["ru","am","az","by","ge","kg","kz","md","tj","tm","ua","uz"],200:["cz","sk"],530:["cw","sx","bq"],532:["cw","sx","bq"],536:["sa","iq"],582:["fm","mh","mp","pw"],810:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],830:["je","gg"],890:["rs","me","si","hr","mk","ba"],891:["rs","me"],an:["cw","sx","bq"],cs:["rs","me"],fq:["aq","tf"],nt:["sa","iq"],pc:["fm","mh","mp","pw"],su:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yu:["rs","me"],"062":["034","143"],ant:["cw","sx","bq"],scg:["rs","me"],ntz:["sa","iq"],sun:["ru","am","az","by","ee","ge","kz","kg","lv","lt","md","tj","tm","ua","uz"],yug:["rs","me"]}},Ei={aa:"aa-latn-et",aaa:"aaa-latn-ng",aab:"aab-latn-ng",aac:"aac-latn-pg",aad:"aad-latn-pg",aae:"aae-latn-it","aae-grek":"aae-grek-it",aaf:"aaf-mlym-in","aaf-arab":"aaf-arab-in",aag:"aag-latn-pg",aah:"aah-latn-pg",aai:"aai-latn-zz",aak:"aak-latn-zz",aal:"aal-latn-cm",aan:"aan-latn-br",aao:"aao-arab-dz",aap:"aap-latn-br",aaq:"aaq-latn-us",aas:"aas-latn-tz",aat:"aat-grek-gr",aau:"aau-latn-zz",aaw:"aaw-latn-pg",aax:"aax-latn-id",aaz:"aaz-latn-id",ab:"ab-cyrl-ge",aba:"aba-latn-ci",abb:"abb-latn-cm",abc:"abc-latn-ph",abd:"abd-latn-ph",abe:"abe-latn-ca",abf:"abf-latn-my",abg:"abg-latn-pg",abh:"abh-arab-tj",abi:"abi-latn-zz",abl:"abl-rjng-id","abl-latn":"abl-latn-id",abm:"abm-latn-ng",abn:"abn-latn-ng",abo:"abo-latn-ng",abp:"abp-latn-ph",abq:"abq-cyrl-zz",abr:"abr-latn-gh",abs:"abs-latn-id",abt:"abt-latn-zz",abu:"abu-latn-ci",abv:"abv-arab-bh",abw:"abw-latn-pg",abx:"abx-latn-ph",aby:"aby-latn-zz",abz:"abz-latn-id",aca:"aca-latn-co",acb:"acb-latn-ng",acd:"acd-latn-zz",ace:"ace-latn-id",acf:"acf-latn-lc",ach:"ach-latn-ug",acm:"acm-arab-iq",acn:"acn-latn-cn",acp:"acp-latn-ng",acq:"acq-arab-ye",acr:"acr-latn-gt",acs:"acs-latn-br",act:"act-latn-nl",acu:"acu-latn-ec",acv:"acv-latn-us",acw:"acw-arab-sa",acx:"acx-arab-om",acy:"acy-latn-cy","acy-arab":"acy-arab-cy","acy-grek":"acy-grek-cy",acz:"acz-latn-sd",ada:"ada-latn-gh",adb:"adb-latn-tl",add:"add-latn-cm",ade:"ade-latn-zz",adf:"adf-arab-om",adg:"adg-latn-au",adh:"adh-latn-ug",adi:"adi-latn-in","adi-tibt":"adi-tibt-cn",adj:"adj-latn-zz",adl:"adl-latn-in",adn:"adn-latn-id",ado:"ado-latn-pg",adp:"adp-tibt-bt",adq:"adq-latn-gh",adr:"adr-latn-id",adt:"adt-latn-au",adu:"adu-latn-ng",adw:"adw-latn-br",adx:"adx-tibt-cn",ady:"ady-cyrl-ru",adz:"adz-latn-zz",ae:"ae-avst-ir",aea:"aea-latn-au",aeb:"aeb-arab-tn",aec:"aec-arab-eg",aee:"aee-arab-af",aek:"aek-latn-nc",ael:"ael-latn-cm",aem:"aem-latn-vn",aeq:"aeq-arab-pk",aer:"aer-latn-au",aeu:"aeu-latn-cn",aew:"aew-latn-pg",aey:"aey-latn-zz",aez:"aez-latn-pg",af:"af-latn-za",afb:"afb-arab-kw",afd:"afd-latn-pg",afe:"afe-latn-ng",afh:"afh-latn-gh",afi:"afi-latn-pg",afk:"afk-latn-pg",afn:"afn-latn-ng",afo:"afo-latn-ng",afp:"afp-latn-pg",afs:"afs-latn-mx",afu:"afu-latn-gh",afz:"afz-latn-id",aga:"aga-latn-pe",agb:"agb-latn-ng",agc:"agc-latn-zz",agd:"agd-latn-zz",age:"age-latn-pg",agf:"agf-latn-id",agg:"agg-latn-zz",agh:"agh-latn-cd",agi:"agi-deva-in",agj:"agj-ethi-et","agj-arab":"agj-arab-et",agk:"agk-latn-ph",agl:"agl-latn-pg",agm:"agm-latn-zz",agn:"agn-latn-ph",ago:"ago-latn-zz",agq:"agq-latn-cm",agr:"agr-latn-pe",ags:"ags-latn-cm",agt:"agt-latn-ph",agu:"agu-latn-gt",agv:"agv-latn-ph",agw:"agw-latn-sb",agx:"agx-cyrl-ru",agy:"agy-latn-ph",agz:"agz-latn-ph",aha:"aha-latn-zz",ahb:"ahb-latn-vu",ahg:"ahg-ethi-et",ahh:"ahh-latn-id",ahi:"ahi-latn-ci",ahk:"ahk-latn-mm","ahk-mymr":"ahk-mymr-mm","ahk-th":"ahk-latn-th","ahk-thai":"ahk-thai-th",ahl:"ahl-latn-zz",ahm:"ahm-latn-ci",ahn:"ahn-latn-ng",aho:"aho-ahom-in",ahp:"ahp-latn-ci",ahr:"ahr-deva-in",ahs:"ahs-latn-ng",aht:"aht-latn-us",aia:"aia-latn-sb",aib:"aib-arab-cn",aic:"aic-latn-pg",aid:"aid-latn-au",aie:"aie-latn-pg",aif:"aif-latn-pg",aig:"aig-latn-ag",aij:"aij-hebr-il",aik:"aik-latn-ng",ail:"ail-latn-pg",aim:"aim-latn-in",ain:"ain-kana-jp","ain-latn":"ain-latn-jp",aio:"aio-mymr-in",aip:"aip-latn-id",aiq:"aiq-arab-af",air:"air-latn-id",ait:"ait-latn-br",aiw:"aiw-latn-et","aiw-arab":"aiw-arab-et","aiw-ethi":"aiw-ethi-et",aix:"aix-latn-pg",aiy:"aiy-latn-cf",aja:"aja-latn-ss",ajg:"ajg-latn-zz",aji:"aji-latn-nc",ajn:"ajn-latn-au",ajp:"ajp-arab-jo",ajt:"ajt-arab-tn",ajw:"ajw-latn-ng",ajz:"ajz-latn-in",ak:"ak-latn-gh",akb:"akb-latn-id","akb-batk":"akb-batk-id",akc:"akc-latn-id",akd:"akd-latn-ng",ake:"ake-latn-gy",akf:"akf-latn-ng",akg:"akg-latn-id",akh:"akh-latn-pg",aki:"aki-latn-pg",akk:"akk-xsux-iq",akl:"akl-latn-ph",ako:"ako-latn-sr",akp:"akp-latn-gh",akq:"akq-latn-pg",akr:"akr-latn-vu",aks:"aks-latn-tg",akt:"akt-latn-pg",aku:"aku-latn-cm",akv:"akv-cyrl-ru",akw:"akw-latn-cg",akz:"akz-latn-us",ala:"ala-latn-zz",alc:"alc-latn-cl",ald:"ald-latn-ci",ale:"ale-latn-us",alf:"alf-latn-ng",alh:"alh-latn-au",ali:"ali-latn-zz",alj:"alj-latn-ph",alk:"alk-laoo-la",all:"all-mlym-in",alm:"alm-latn-vu",aln:"aln-latn-xk",alo:"alo-latn-id",alp:"alp-latn-id",alq:"alq-latn-ca",alr:"alr-cyrl-ru",alt:"alt-cyrl-ru",alu:"alu-latn-sb",alw:"alw-ethi-et",alx:"alx-latn-pg",aly:"aly-latn-au",alz:"alz-latn-cd",am:"am-ethi-et",ama:"ama-latn-br",amb:"amb-latn-ng",amc:"amc-latn-pe",ame:"ame-latn-pe",amf:"amf-latn-et","amf-ethi":"amf-ethi-et",amg:"amg-latn-au",ami:"ami-latn-tw",amj:"amj-latn-td",amk:"amk-latn-id",amm:"amm-latn-zz",amn:"amn-latn-zz",amo:"amo-latn-ng",amp:"amp-latn-zz",amq:"amq-latn-id",amr:"amr-latn-pe",ams:"ams-jpan-jp",amt:"amt-latn-pg",amu:"amu-latn-mx",amv:"amv-latn-id",amw:"amw-syrc-sy","amw-arab":"amw-arab-sy","amw-armi":"amw-armi-sy","amw-latn":"amw-latn-sy",amx:"amx-latn-au",amy:"amy-latn-au",amz:"amz-latn-au",an:"an-latn-es",ana:"ana-latn-co",anb:"anb-latn-pe",anc:"anc-latn-zz",and:"and-latn-id",ane:"ane-latn-nc",anf:"anf-latn-gh",ang:"ang-latn-gb",anh:"anh-latn-pg",ani:"ani-cyrl-ru",anj:"anj-latn-pg",ank:"ank-latn-zz",anl:"anl-latn-mm",anm:"anm-latn-in",ann:"ann-latn-ng",ano:"ano-latn-co",anp:"anp-deva-in",anr:"anr-deva-in",ans:"ans-latn-co",ant:"ant-latn-au",anu:"anu-ethi-et","anu-arab":"anu-arab-ss","anu-latn":"anu-latn-ss",anv:"anv-latn-cm",anw:"anw-latn-ng",anx:"anx-latn-pg",any:"any-latn-zz",anz:"anz-latn-pg",aoa:"aoa-latn-st",aob:"aob-latn-pg",aoc:"aoc-latn-ve",aod:"aod-latn-pg",aoe:"aoe-latn-pg",aof:"aof-latn-pg",aog:"aog-latn-pg",aoi:"aoi-latn-au",aoj:"aoj-latn-zz",aok:"aok-latn-nc",aol:"aol-latn-id",aom:"aom-latn-zz",aon:"aon-latn-pg",aor:"aor-latn-vu",aos:"aos-latn-id",aot:"aot-beng-bd","aot-latn":"aot-latn-in",aox:"aox-latn-gy",aoz:"aoz-latn-id",apb:"apb-latn-sb",apc:"apc-arab-sy",apd:"apd-arab-tg",ape:"ape-latn-zz",apf:"apf-latn-ph",apg:"apg-latn-id",aph:"aph-deva-np",api:"api-latn-br",apj:"apj-latn-us",apk:"apk-latn-us",apl:"apl-latn-us",apm:"apm-latn-us",apn:"apn-latn-br",apo:"apo-latn-pg",app:"app-latn-vu",apr:"apr-latn-zz",aps:"aps-latn-zz",apt:"apt-latn-in",apu:"apu-latn-br",apv:"apv-latn-br",apw:"apw-latn-us",apx:"apx-latn-id",apy:"apy-latn-br",apz:"apz-latn-zz",aqc:"aqc-cyrl-ru",aqd:"aqd-latn-ml",aqg:"aqg-latn-ng",aqk:"aqk-latn-ng",aqm:"aqm-latn-id",aqn:"aqn-latn-ph",aqr:"aqr-latn-nc",aqt:"aqt-latn-py",aqz:"aqz-latn-br",ar:"ar-arab-eg",arc:"arc-armi-ir","arc-nbat":"arc-nbat-jo","arc-palm":"arc-palm-sy",ard:"ard-latn-au",are:"are-latn-au",arh:"arh-latn-zz",ari:"ari-latn-us",arj:"arj-latn-br",ark:"ark-latn-br",arl:"arl-latn-pe",arn:"arn-latn-cl",aro:"aro-latn-bo",arp:"arp-latn-us",arq:"arq-arab-dz",arr:"arr-latn-br",ars:"ars-arab-sa",aru:"aru-latn-br",arw:"arw-latn-sr",arx:"arx-latn-br",ary:"ary-arab-ma",arz:"arz-arab-eg",as:"as-beng-in",asa:"asa-latn-tz",asb:"asb-latn-ca",asc:"asc-latn-id",ase:"ase-sgnw-us",asg:"asg-latn-zz",ash:"ash-latn-pe",asi:"asi-latn-id",asj:"asj-latn-cm",ask:"ask-arab-af",asl:"asl-latn-id",asn:"asn-latn-br",aso:"aso-latn-zz",ass:"ass-latn-cm",ast:"ast-latn-es",asu:"asu-latn-br",asv:"asv-latn-cd",asx:"asx-latn-pg",asy:"asy-latn-id",asz:"asz-latn-id",ata:"ata-latn-zz",atb:"atb-latn-cn","atb-lisu":"atb-lisu-cn",atc:"atc-latn-pe",atd:"atd-latn-ph",ate:"ate-latn-pg",atg:"atg-latn-zz",ati:"ati-latn-ci",atj:"atj-latn-ca",atk:"atk-latn-ph",atl:"atl-latn-ph",atm:"atm-latn-ph",atn:"atn-arab-ir",ato:"ato-latn-cm",atp:"atp-latn-ph",atq:"atq-latn-id",atr:"atr-latn-br",ats:"ats-latn-us",att:"att-latn-ph",atu:"atu-latn-ss",atv:"atv-cyrl-ru",atw:"atw-latn-us",atx:"atx-latn-br",aty:"aty-latn-vu",atz:"atz-latn-ph",aua:"aua-latn-sb",auc:"auc-latn-ec",aud:"aud-latn-sb",aug:"aug-latn-bj",auh:"auh-latn-zm",aui:"aui-latn-pg",auj:"auj-arab-ly","auj-latn":"auj-latn-ly","auj-tfng":"auj-tfng-ly",auk:"auk-latn-pg",aul:"aul-latn-vu",aum:"aum-latn-ng",aun:"aun-latn-pg",auo:"auo-latn-ng",aup:"aup-latn-pg",auq:"auq-latn-id",aur:"aur-latn-pg",aut:"aut-latn-pf",auu:"auu-latn-id",auw:"auw-latn-id",auy:"auy-latn-zz",auz:"auz-arab-uz",av:"av-cyrl-ru",avb:"avb-latn-pg",avd:"avd-arab-ir",avi:"avi-latn-ci",avk:"avk-latn-001",avl:"avl-arab-zz",avm:"avm-latn-au",avn:"avn-latn-zz",avo:"avo-latn-br",avs:"avs-latn-pe",avt:"avt-latn-zz",avu:"avu-latn-zz",avv:"avv-latn-br",awa:"awa-deva-in",awb:"awb-latn-zz",awc:"awc-latn-ng",awe:"awe-latn-br",awg:"awg-latn-au",awh:"awh-latn-id",awi:"awi-latn-pg",awk:"awk-latn-au",awm:"awm-latn-pg",awn:"awn-ethi-et",awo:"awo-latn-zz",awr:"awr-latn-id",aws:"aws-latn-id",awt:"awt-latn-br",awu:"awu-latn-id",awv:"awv-latn-id",aww:"aww-latn-pg",awx:"awx-latn-zz",awy:"awy-latn-id",axb:"axb-latn-ar",axe:"axe-latn-au",axg:"axg-latn-br",axk:"axk-latn-cf",axl:"axl-latn-au",axm:"axm-armn-am",axx:"axx-latn-nc",ay:"ay-latn-bo",aya:"aya-latn-pg",ayb:"ayb-latn-zz",ayc:"ayc-latn-pe",ayd:"ayd-latn-au",aye:"aye-latn-ng",ayg:"ayg-latn-tg",ayh:"ayh-arab-ye",ayi:"ayi-latn-ng",ayk:"ayk-latn-ng",ayl:"ayl-arab-ly",ayn:"ayn-arab-ye",ayo:"ayo-latn-py",ayp:"ayp-arab-iq",ayq:"ayq-latn-pg",ays:"ays-latn-ph",ayt:"ayt-latn-ph",ayu:"ayu-latn-ng",ayz:"ayz-latn-id",az:"az-latn-az","az-arab":"az-arab-ir","az-iq":"az-arab-iq","az-ir":"az-arab-ir","az-ru":"az-cyrl-ru",azb:"azb-arab-ir","azb-cyrl":"azb-cyrl-az","azb-latn":"azb-latn-az",azd:"azd-latn-mx",azg:"azg-latn-mx",azm:"azm-latn-mx",azn:"azn-latn-mx",azo:"azo-latn-cm",azt:"azt-latn-ph",azz:"azz-latn-mx",ba:"ba-cyrl-ru",baa:"baa-latn-sb",bab:"bab-latn-gw",bac:"bac-latn-id",bae:"bae-latn-ve",baf:"baf-latn-cm",bag:"bag-latn-cm",bah:"bah-latn-bs",baj:"baj-latn-id",bal:"bal-arab-pk",ban:"ban-latn-id",bao:"bao-latn-co",bap:"bap-deva-np",bar:"bar-latn-at",bas:"bas-latn-cm",bau:"bau-latn-ng",bav:"bav-latn-zz",baw:"baw-latn-cm",bax:"bax-bamu-cm",bay:"bay-latn-id",bba:"bba-latn-zz",bbb:"bbb-latn-zz",bbc:"bbc-latn-id",bbd:"bbd-latn-zz",bbe:"bbe-latn-cd",bbf:"bbf-latn-pg",bbg:"bbg-latn-ga",bbi:"bbi-latn-cm",bbj:"bbj-latn-cm",bbk:"bbk-latn-cm",bbl:"bbl-geor-ge",bbm:"bbm-latn-cd",bbn:"bbn-latn-pg",bbo:"bbo-latn-bf",bbp:"bbp-latn-zz",bbq:"bbq-latn-cm",bbr:"bbr-latn-zz",bbs:"bbs-latn-ng",bbt:"bbt-latn-ng",bbu:"bbu-latn-ng",bbv:"bbv-latn-pg",bbw:"bbw-latn-cm",bbx:"bbx-latn-cm",bby:"bby-latn-cm",bca:"bca-latn-cn","bca-hani":"bca-hani-cn",bcb:"bcb-latn-sn",bcd:"bcd-latn-id",bce:"bce-latn-cm",bcf:"bcf-latn-zz",bcg:"bcg-latn-gn",bch:"bch-latn-zz",bci:"bci-latn-ci",bcj:"bcj-latn-au",bck:"bck-latn-au",bcm:"bcm-latn-zz",bcn:"bcn-latn-zz",bco:"bco-latn-zz",bcp:"bcp-latn-cd",bcq:"bcq-ethi-zz",bcr:"bcr-latn-ca",bcs:"bcs-latn-ng",bct:"bct-latn-cd",bcu:"bcu-latn-zz",bcv:"bcv-latn-ng",bcw:"bcw-latn-cm",bcy:"bcy-latn-ng",bcz:"bcz-latn-sn",bda:"bda-latn-sn",bdb:"bdb-latn-id",bdc:"bdc-latn-co",bdd:"bdd-latn-zz",bde:"bde-latn-ng",bdf:"bdf-latn-pg",bdg:"bdg-latn-my",bdh:"bdh-latn-ss",bdi:"bdi-latn-sd",bdj:"bdj-latn-ss",bdk:"bdk-latn-az",bdl:"bdl-latn-id",bdm:"bdm-latn-td",bdn:"bdn-latn-cm",bdo:"bdo-latn-td",bdp:"bdp-latn-tz",bdq:"bdq-latn-vn",bdr:"bdr-latn-my",bds:"bds-latn-tz",bdt:"bdt-latn-cf",bdu:"bdu-latn-cm",bdv:"bdv-orya-in",bdw:"bdw-latn-id",bdx:"bdx-latn-id",bdy:"bdy-latn-au",bdz:"bdz-arab-pk",be:"be-cyrl-by",bea:"bea-latn-ca","bea-cans":"bea-cans-ca",beb:"beb-latn-cm",bec:"bec-latn-cm",bed:"bed-latn-id",bee:"bee-deva-in",bef:"bef-latn-zz",beh:"beh-latn-zz",bei:"bei-latn-id",bej:"bej-arab-sd",bek:"bek-latn-pg",bem:"bem-latn-zm",beo:"beo-latn-pg",bep:"bep-latn-id",beq:"beq-latn-cg",bes:"bes-latn-td",bet:"bet-latn-zz",beu:"beu-latn-id",bev:"bev-latn-ci",bew:"bew-latn-id",bex:"bex-latn-zz",bey:"bey-latn-pg",bez:"bez-latn-tz",bfa:"bfa-latn-ss","bfa-arab":"bfa-arab-ss",bfb:"bfb-deva-in",bfc:"bfc-latn-cn",bfd:"bfd-latn-cm",bfe:"bfe-latn-id",bff:"bff-latn-cf",bfg:"bfg-latn-id",bfh:"bfh-latn-pg",bfj:"bfj-latn-cm",bfl:"bfl-latn-cf",bfm:"bfm-latn-cm",bfn:"bfn-latn-tl",bfo:"bfo-latn-bf",bfp:"bfp-latn-cm",bfq:"bfq-taml-in",bfs:"bfs-latn-cn","bfs-hani":"bfs-hani-cn",bft:"bft-arab-pk",bfu:"bfu-tibt-in","bfu-takr":"bfu-takr-in",bfw:"bfw-orya-in",bfx:"bfx-latn-ph",bfy:"bfy-deva-in",bfz:"bfz-deva-in",bg:"bg-cyrl-bg",bga:"bga-latn-ng",bgb:"bgb-latn-id",bgc:"bgc-deva-in",bgd:"bgd-deva-in",bgf:"bgf-latn-cm",bgg:"bgg-latn-in",bgi:"bgi-latn-ph",bgj:"bgj-latn-cm",bgn:"bgn-arab-pk",bgo:"bgo-latn-gn",bgp:"bgp-arab-pk",bgq:"bgq-deva-in",bgr:"bgr-latn-in",bgs:"bgs-latn-ph",bgt:"bgt-latn-sb",bgu:"bgu-latn-ng",bgv:"bgv-latn-id",bgw:"bgw-deva-in",bgx:"bgx-grek-tr",bgy:"bgy-latn-id",bgz:"bgz-latn-id",bha:"bha-deva-in",bhb:"bhb-deva-in",bhc:"bhc-latn-id",bhd:"bhd-deva-in","bhd-arab":"bhd-arab-in","bhd-takr":"bhd-takr-in",bhe:"bhe-arab-pk",bhf:"bhf-latn-pg",bhg:"bhg-latn-zz",bhh:"bhh-cyrl-il","bhh-hebr":"bhh-hebr-il","bhh-latn":"bhh-latn-il",bhi:"bhi-deva-in",bhj:"bhj-deva-np",bhl:"bhl-latn-zz",bhm:"bhm-arab-om",bhn:"bhn-syrc-ge",bho:"bho-deva-in",bhp:"bhp-latn-id",bhq:"bhq-latn-id",bhr:"bhr-latn-mg",bhs:"bhs-latn-cm",bht:"bht-takr-in","bht-deva":"bht-deva-in","bht-latn":"bht-latn-in",bhu:"bhu-deva-in",bhv:"bhv-latn-id",bhw:"bhw-latn-id",bhy:"bhy-latn-zz",bhz:"bhz-latn-id",bi:"bi-latn-vu",bia:"bia-latn-au",bib:"bib-latn-zz",bid:"bid-latn-td",bie:"bie-latn-pg",bif:"bif-latn-gw",big:"big-latn-zz",bik:"bik-latn-ph",bil:"bil-latn-ng",bim:"bim-latn-zz",bin:"bin-latn-ng",bio:"bio-latn-zz",bip:"bip-latn-cd",biq:"biq-latn-zz",bir:"bir-latn-pg",bit:"bit-latn-pg",biu:"biu-latn-in",biv:"biv-latn-gh",biw:"biw-latn-cm",biy:"biy-deva-in",biz:"biz-latn-cd",bja:"bja-latn-cd",bjb:"bjb-latn-au",bjc:"bjc-latn-pg",bjf:"bjf-syrc-il",bjg:"bjg-latn-gw",bjh:"bjh-latn-zz",bji:"bji-ethi-zz",bjj:"bjj-deva-in",bjk:"bjk-latn-pg",bjl:"bjl-latn-pg",bjm:"bjm-arab-iq",bjn:"bjn-latn-id",bjo:"bjo-latn-zz",bjp:"bjp-latn-pg",bjr:"bjr-latn-zz",bjs:"bjs-latn-bb",bjt:"bjt-latn-sn",bju:"bju-latn-cm",bjv:"bjv-latn-td",bjw:"bjw-latn-ci",bjx:"bjx-latn-ph",bjy:"bjy-latn-au",bjz:"bjz-latn-zz",bka:"bka-latn-ng",bkc:"bkc-latn-zz",bkd:"bkd-latn-ph",bkf:"bkf-latn-cd",bkg:"bkg-latn-cf",bkh:"bkh-latn-cm",bki:"bki-latn-vu",bkj:"bkj-latn-cf",bkl:"bkl-latn-id",bkm:"bkm-latn-cm",bkn:"bkn-latn-id",bko:"bko-latn-cm",bkp:"bkp-latn-cd",bkq:"bkq-latn-zz",bkr:"bkr-latn-id",bks:"bks-latn-ph",bkt:"bkt-latn-cd",bku:"bku-latn-ph",bkv:"bkv-latn-zz",bkw:"bkw-latn-cg",bkx:"bkx-latn-tl",bky:"bky-latn-ng",bkz:"bkz-latn-id",bla:"bla-latn-ca",blb:"blb-latn-sb",blc:"blc-latn-ca",bld:"bld-latn-id",ble:"ble-latn-gw",blf:"blf-latn-id",blg:"blg-latn-my",blh:"blh-latn-lr",bli:"bli-latn-cd",blj:"blj-latn-id",blk:"blk-mymr-mm",blm:"blm-latn-ss",bln:"bln-latn-ph",blo:"blo-latn-bj",blp:"blp-latn-sb",blq:"blq-latn-pg",blr:"blr-latn-cn","blr-tale":"blr-tale-cn","blr-thai":"blr-thai-th",bls:"bls-latn-id",blt:"blt-tavt-vn",blv:"blv-latn-ao",blw:"blw-latn-ph",blx:"blx-latn-ph",bly:"bly-latn-bj",blz:"blz-latn-id",bm:"bm-latn-ml",bma:"bma-latn-ng",bmb:"bmb-latn-cd",bmc:"bmc-latn-pg",bmd:"bmd-latn-gn",bme:"bme-latn-cf",bmf:"bmf-latn-sl",bmg:"bmg-latn-cd",bmh:"bmh-latn-zz",bmi:"bmi-latn-td",bmj:"bmj-deva-np",bmk:"bmk-latn-zz",bml:"bml-latn-cd",bmm:"bmm-latn-mg",bmn:"bmn-latn-pg",bmo:"bmo-latn-cm",bmp:"bmp-latn-pg",bmq:"bmq-latn-ml",bmr:"bmr-latn-co",bms:"bms-latn-ne",bmu:"bmu-latn-zz",bmv:"bmv-latn-cm",bmw:"bmw-latn-cg",bmx:"bmx-latn-pg",bmz:"bmz-latn-pg",bn:"bn-beng-bd",bna:"bna-latn-id",bnb:"bnb-latn-my",bnc:"bnc-latn-ph",bnd:"bnd-latn-id",bne:"bne-latn-id",bnf:"bnf-latn-id",bng:"bng-latn-zz",bni:"bni-latn-cd",bnj:"bnj-latn-ph",bnk:"bnk-latn-vu",bnm:"bnm-latn-zz",bnn:"bnn-latn-tw",bno:"bno-latn-ph",bnp:"bnp-latn-zz",bnq:"bnq-latn-id",bnr:"bnr-latn-vu",bns:"bns-deva-in",bnu:"bnu-latn-id",bnv:"bnv-latn-id",bnw:"bnw-latn-pg",bnx:"bnx-latn-cd",bny:"bny-latn-my",bnz:"bnz-latn-cm",bo:"bo-tibt-cn",boa:"boa-latn-pe",bob:"bob-latn-ke",boe:"boe-latn-cm",bof:"bof-latn-bf",boh:"boh-latn-cd",boj:"boj-latn-zz",bok:"bok-latn-cg",bol:"bol-latn-ng",bom:"bom-latn-zz",bon:"bon-latn-zz",boo:"boo-latn-ml",bop:"bop-latn-pg",boq:"boq-latn-pg",bor:"bor-latn-br",bot:"bot-latn-ss",bou:"bou-latn-tz",bov:"bov-latn-gh",bow:"bow-latn-pg",box:"box-latn-bf",boy:"boy-latn-cf",boz:"boz-latn-ml","boz-arab":"boz-arab-ml",bpa:"bpa-latn-vu",bpc:"bpc-latn-cm",bpd:"bpd-latn-cf",bpe:"bpe-latn-pg",bpg:"bpg-latn-id",bph:"bph-cyrl-ru",bpi:"bpi-latn-pg",bpj:"bpj-latn-cd",bpk:"bpk-latn-nc",bpl:"bpl-latn-au",bpm:"bpm-latn-pg",bpo:"bpo-latn-id",bpp:"bpp-latn-id",bpq:"bpq-latn-id",bpr:"bpr-latn-ph",bps:"bps-latn-ph",bpt:"bpt-latn-au",bpu:"bpu-latn-pg",bpv:"bpv-latn-id",bpw:"bpw-latn-pg",bpx:"bpx-deva-in",bpy:"bpy-beng-in",bpz:"bpz-latn-id",bqa:"bqa-latn-bj",bqb:"bqb-latn-id",bqc:"bqc-latn-zz",bqd:"bqd-latn-cm",bqf:"bqf-latn-gn","bqf-arab":"bqf-arab-gn",bqg:"bqg-latn-tg",bqi:"bqi-arab-ir",bqj:"bqj-latn-sn",bqk:"bqk-latn-cf",bql:"bql-latn-pg",bqm:"bqm-latn-cm",bqo:"bqo-latn-cm",bqp:"bqp-latn-zz",bqq:"bqq-latn-id",bqr:"bqr-latn-id",bqs:"bqs-latn-pg",bqt:"bqt-latn-cm",bqu:"bqu-latn-cd",bqv:"bqv-latn-ci",bqw:"bqw-latn-ng",bqx:"bqx-latn-ng",bqz:"bqz-latn-cm",br:"br-latn-fr",bra:"bra-deva-in",brb:"brb-khmr-kh","brb-laoo":"brb-laoo-la","brb-latn":"brb-latn-vn",brc:"brc-latn-gy",brd:"brd-deva-np",brf:"brf-latn-cd",brg:"brg-latn-bo",brh:"brh-arab-pk",bri:"bri-latn-cm",brj:"brj-latn-vu",brk:"brk-arab-sd",brl:"brl-latn-bw",brm:"brm-latn-cd",brn:"brn-latn-cr",brp:"brp-latn-id",brq:"brq-latn-pg",brr:"brr-latn-sb",brs:"brs-latn-id",brt:"brt-latn-ng",bru:"bru-latn-vn","bru-laoo":"bru-laoo-la","bru-thai":"bru-thai-la",brv:"brv-laoo-la",brx:"brx-deva-in",bry:"bry-latn-pg",brz:"brz-latn-zz",bs:"bs-latn-ba",bsa:"bsa-latn-id",bsb:"bsb-latn-bn",bsc:"bsc-latn-sn",bse:"bse-latn-cm",bsf:"bsf-latn-ng",bsh:"bsh-arab-af",bsi:"bsi-latn-cm",bsj:"bsj-latn-zz",bsk:"bsk-arab-pk","bsk-latn":"bsk-latn-pk",bsl:"bsl-latn-ng",bsm:"bsm-latn-id",bsn:"bsn-latn-co",bso:"bso-latn-td",bsp:"bsp-latn-gn",bsq:"bsq-bass-lr",bsr:"bsr-latn-ng",bss:"bss-latn-cm",bst:"bst-ethi-zz",bsu:"bsu-latn-id",bsv:"bsv-latn-gn","bsv-arab":"bsv-arab-gn",bsw:"bsw-latn-et","bsw-ethi":"bsw-ethi-et",bsx:"bsx-latn-ng",bsy:"bsy-latn-my",bta:"bta-latn-ng",btc:"btc-latn-cm",btd:"btd-batk-id",bte:"bte-latn-ng",btf:"btf-latn-td",btg:"btg-latn-ci",bth:"bth-latn-my",bti:"bti-latn-id",btj:"btj-latn-id",btm:"btm-batk-id",btn:"btn-latn-ph",bto:"bto-latn-ph",btp:"btp-latn-pg",btq:"btq-latn-my",btr:"btr-latn-vu",bts:"bts-latn-id","bts-batk":"bts-batk-id",btt:"btt-latn-zz",btu:"btu-latn-ng",btv:"btv-deva-pk",btw:"btw-latn-ph",btx:"btx-latn-id","btx-batk":"btx-batk-id",bty:"bty-latn-id",btz:"btz-latn-id",bua:"bua-cyrl-ru",bub:"bub-latn-td",buc:"buc-latn-yt",bud:"bud-latn-zz",bue:"bue-latn-ca",buf:"buf-latn-cd",bug:"bug-latn-id",buh:"buh-latn-cn",bui:"bui-latn-cg",buj:"buj-latn-ng",buk:"buk-latn-zz",bum:"bum-latn-cm",bun:"bun-latn-sl",buo:"buo-latn-zz",bup:"bup-latn-id",buq:"buq-latn-pg",bus:"bus-latn-zz",but:"but-latn-pg",buu:"buu-latn-zz",buv:"buv-latn-pg",buw:"buw-latn-ga",bux:"bux-latn-ng",buy:"buy-latn-sl",buz:"buz-latn-ng",bva:"bva-latn-td",bvb:"bvb-latn-gq",bvc:"bvc-latn-sb",bvd:"bvd-latn-sb",bve:"bve-latn-id",bvf:"bvf-latn-td",bvg:"bvg-latn-cm",bvh:"bvh-latn-ng",bvi:"bvi-latn-ss",bvj:"bvj-latn-ng",bvk:"bvk-latn-id",bvm:"bvm-latn-cm",bvn:"bvn-latn-pg",bvo:"bvo-latn-td",bvq:"bvq-latn-cf",bvr:"bvr-latn-au",bvt:"bvt-latn-id",bvu:"bvu-latn-id",bvv:"bvv-latn-ve",bvw:"bvw-latn-ng",bvx:"bvx-latn-cg",bvy:"bvy-latn-ph",bvz:"bvz-latn-id",bwa:"bwa-latn-nc",bwb:"bwb-latn-fj",bwc:"bwc-latn-zm",bwd:"bwd-latn-zz",bwe:"bwe-mymr-mm","bwe-latn":"bwe-latn-mm",bwf:"bwf-latn-pg",bwg:"bwg-latn-mz",bwh:"bwh-latn-cm",bwi:"bwi-latn-ve",bwj:"bwj-latn-bf",bwk:"bwk-latn-pg",bwl:"bwl-latn-cd",bwm:"bwm-latn-pg",bwo:"bwo-latn-et","bwo-ethi":"bwo-ethi-et",bwp:"bwp-latn-id",bwq:"bwq-latn-bf",bwr:"bwr-latn-zz",bws:"bws-latn-cd",bwt:"bwt-latn-cm",bwu:"bwu-latn-gh",bww:"bww-latn-cd",bwx:"bwx-latn-cn",bwy:"bwy-latn-bf",bwz:"bwz-latn-cg",bxa:"bxa-latn-sb",bxb:"bxb-latn-ss",bxc:"bxc-latn-gq",bxf:"bxf-latn-pg",bxg:"bxg-latn-cd",bxh:"bxh-latn-zz",bxi:"bxi-latn-au",bxj:"bxj-latn-au",bxl:"bxl-latn-bf",bxm:"bxm-cyrl-mn","bxm-latn":"bxm-latn-mn","bxm-mong":"bxm-mong-mn",bxn:"bxn-latn-au",bxo:"bxo-latn-ng",bxp:"bxp-latn-cm",bxq:"bxq-latn-ng",bxs:"bxs-latn-cm",bxu:"bxu-mong-cn","bxu-cyrl":"bxu-cyrl-cn","bxu-latn":"bxu-latn-cn",bxv:"bxv-latn-td",bxw:"bxw-latn-ml",bxz:"bxz-latn-pg",bya:"bya-latn-ph",byb:"byb-latn-cm",byc:"byc-latn-ng",byd:"byd-latn-id",bye:"bye-latn-zz",byf:"byf-latn-ng",byh:"byh-deva-np",byi:"byi-latn-cd",byj:"byj-latn-ng",byk:"byk-latn-cn",byl:"byl-latn-id",bym:"bym-latn-au",byn:"byn-ethi-er",byp:"byp-latn-ng",byr:"byr-latn-zz",bys:"bys-latn-zz",byv:"byv-latn-cm",byw:"byw-deva-np",byx:"byx-latn-zz",byz:"byz-latn-pg",bza:"bza-latn-zz",bzb:"bzb-latn-id",bzc:"bzc-latn-mg",bzd:"bzd-latn-cr",bze:"bze-latn-ml",bzf:"bzf-latn-zz",bzh:"bzh-latn-zz",bzi:"bzi-thai-th",bzj:"bzj-latn-bz",bzk:"bzk-latn-ni",bzl:"bzl-latn-id",bzm:"bzm-latn-cd",bzn:"bzn-latn-id",bzo:"bzo-latn-cd",bzp:"bzp-latn-id",bzq:"bzq-latn-id",bzr:"bzr-latn-au",bzt:"bzt-latn-001",bzu:"bzu-latn-id",bzv:"bzv-latn-cm",bzw:"bzw-latn-zz",bzx:"bzx-latn-ml",bzy:"bzy-latn-ng",bzz:"bzz-latn-ng",ca:"ca-latn-es",caa:"caa-latn-gt",cab:"cab-latn-hn",cac:"cac-latn-gt",cad:"cad-latn-us",cae:"cae-latn-sn",caf:"caf-latn-ca","caf-cans":"caf-cans-ca",cag:"cag-latn-py",cah:"cah-latn-pe",caj:"caj-latn-ar",cak:"cak-latn-gt",cal:"cal-latn-mp",cam:"cam-latn-nc",can:"can-latn-zz",cao:"cao-latn-bo",cap:"cap-latn-bo",caq:"caq-latn-in",car:"car-latn-ve",cas:"cas-latn-bo",cav:"cav-latn-bo",caw:"caw-latn-bo",cax:"cax-latn-bo",cay:"cay-latn-ca",caz:"caz-latn-bo",cbb:"cbb-latn-co",cbc:"cbc-latn-co",cbd:"cbd-latn-co",cbg:"cbg-latn-co",cbi:"cbi-latn-ec",cbj:"cbj-latn-zz",cbk:"cbk-latn-ph","cbk-brai":"cbk-brai-ph",cbl:"cbl-latn-mm",cbn:"cbn-thai-th",cbo:"cbo-latn-ng",cbq:"cbq-latn-ng",cbr:"cbr-latn-pe",cbs:"cbs-latn-pe",cbt:"cbt-latn-pe",cbu:"cbu-latn-pe",cbv:"cbv-latn-co",cbw:"cbw-latn-ph",cby:"cby-latn-co",ccc:"ccc-latn-pe",ccd:"ccd-latn-br",cce:"cce-latn-mz",ccg:"ccg-latn-ng",cch:"cch-latn-ng",ccj:"ccj-latn-gw",ccl:"ccl-latn-tz",ccm:"ccm-latn-my",cco:"cco-latn-mx",ccp:"ccp-cakm-bd",ccr:"ccr-latn-sv",cde:"cde-telu-in",cdf:"cdf-latn-in","cdf-beng":"cdf-beng-in",cdh:"cdh-deva-in","cdh-takr":"cdh-takr-in",cdi:"cdi-gujr-in",cdj:"cdj-deva-in",cdm:"cdm-deva-np","cdm-latn":"cdm-latn-np",cdo:"cdo-hans-cn","cdo-hant":"cdo-hant-cn","cdo-latn":"cdo-latn-cn",cdr:"cdr-latn-ng",cdz:"cdz-beng-in",ce:"ce-cyrl-ru",cea:"cea-latn-us",ceb:"ceb-latn-ph",ceg:"ceg-latn-py",cek:"cek-latn-mm",cen:"cen-latn-ng",cet:"cet-latn-ng",cey:"cey-latn-mm",cfa:"cfa-latn-zz",cfd:"cfd-latn-ng",cfg:"cfg-latn-ng",cfm:"cfm-latn-mm","cfm-beng":"cfm-beng-in",cga:"cga-latn-pg",cgc:"cgc-latn-ph",cgg:"cgg-latn-ug",cgk:"cgk-tibt-bt",ch:"ch-latn-gu",chb:"chb-latn-co",chd:"chd-latn-mx",chf:"chf-latn-mx",chg:"chg-arab-tm",chh:"chh-latn-us",chj:"chj-latn-mx",chk:"chk-latn-fm",chl:"chl-latn-us",chm:"chm-cyrl-ru",chn:"chn-latn-us","chn-dupl":"chn-dupl-us",cho:"cho-latn-us",chp:"chp-latn-ca",chq:"chq-latn-mx",chr:"chr-cher-us",cht:"cht-latn-pe",chw:"chw-latn-mz",chx:"chx-deva-np",chy:"chy-latn-us",chz:"chz-latn-mx",cia:"cia-latn-id","cia-arab":"cia-arab-id","cia-hang":"cia-hang-id",cib:"cib-latn-bj",cic:"cic-latn-us",cie:"cie-latn-ng",cih:"cih-deva-in",cim:"cim-latn-it",cin:"cin-latn-br",cip:"cip-latn-mx",cir:"cir-latn-nc",ciw:"ciw-latn-us","ciw-cans":"ciw-cans-us",ciy:"ciy-latn-ve",cja:"cja-arab-kh",cje:"cje-latn-vn",cjh:"cjh-latn-us",cji:"cji-cyrl-ru",cjk:"cjk-latn-ao",cjm:"cjm-cham-vn",cjn:"cjn-latn-pg",cjo:"cjo-latn-pe",cjp:"cjp-latn-cr",cjs:"cjs-latn-ru","cjs-cyrl":"cjs-cyrl-ru",cjv:"cjv-latn-zz",cjy:"cjy-hans-cn","cjy-hant":"cjy-hant-cn",ckb:"ckb-arab-iq",ckl:"ckl-latn-zz",ckm:"ckm-latn-hr","ckm-glag":"ckm-glag-hr",ckn:"ckn-latn-mm",cko:"cko-latn-zz",ckq:"ckq-latn-td",ckr:"ckr-latn-pg",cks:"cks-latn-nc",ckt:"ckt-cyrl-ru",cku:"cku-latn-us",ckv:"ckv-latn-tw",ckx:"ckx-latn-cm",cky:"cky-latn-zz",ckz:"ckz-latn-gt",cla:"cla-latn-zz",clc:"clc-latn-ca",cle:"cle-latn-mx",clh:"clh-arab-pk",cli:"cli-latn-gh",clj:"clj-latn-mm",clk:"clk-latn-in","clk-tibt":"clk-tibt-cn",cll:"cll-latn-gh",clm:"clm-latn-us",clo:"clo-latn-mx",clt:"clt-latn-mm",clu:"clu-latn-ph",clw:"clw-cyrl-ru",cly:"cly-latn-mx",cma:"cma-latn-vn",cme:"cme-latn-zz",cmg:"cmg-soyo-mn",cmi:"cmi-latn-co",cml:"cml-latn-id",cmo:"cmo-latn-vn","cmo-kh":"cmo-latn-kh","cmo-khmr":"cmo-khmr-kh",cmr:"cmr-latn-mm",cms:"cms-latn-it",cmt:"cmt-latn-za",cna:"cna-tibt-in",cnb:"cnb-latn-mm",cnc:"cnc-latn-vn",cng:"cng-latn-cn",cnh:"cnh-latn-mm",cni:"cni-latn-pe",cnk:"cnk-latn-mm",cnl:"cnl-latn-mx",cnp:"cnp-hans-cn","cnp-hant":"cnp-hant-cn",cnq:"cnq-latn-cm",cns:"cns-latn-id",cnt:"cnt-latn-mx",cnw:"cnw-latn-mm",cnx:"cnx-latn-gb",co:"co-latn-fr",coa:"coa-latn-au",cob:"cob-latn-mx",coc:"coc-latn-mx",cod:"cod-latn-pe",coe:"coe-latn-co",cof:"cof-latn-ec",cog:"cog-thai-th",coh:"coh-latn-ke",coj:"coj-latn-mx",cok:"cok-latn-mx",col:"col-latn-us",com:"com-latn-us",coo:"coo-latn-ca",cop:"cop-copt-eg",coq:"coq-latn-us",cot:"cot-latn-pe",cou:"cou-latn-sn",cox:"cox-latn-pe",coz:"coz-latn-mx",cpa:"cpa-latn-mx",cpb:"cpb-latn-pe",cpc:"cpc-latn-pe",cpg:"cpg-grek-gr",cpi:"cpi-latn-nr",cpn:"cpn-latn-gh",cpo:"cpo-latn-bf",cps:"cps-latn-ph",cpu:"cpu-latn-pe",cpx:"cpx-latn-cn",cpy:"cpy-latn-pe",cqd:"cqd-latn-cn",cr:"cr-cans-ca",crb:"crb-latn-vc",crc:"crc-latn-vu",crd:"crd-latn-us",crf:"crf-latn-co",crg:"crg-latn-ca",crh:"crh-cyrl-ua",cri:"cri-latn-st",crj:"crj-cans-ca","crj-latn":"crj-latn-ca",crk:"crk-cans-ca",crl:"crl-cans-ca",crm:"crm-cans-ca",crn:"crn-latn-mx",cro:"cro-latn-us",crq:"crq-latn-ar",crs:"crs-latn-sc",crt:"crt-latn-ar",crv:"crv-latn-in",crw:"crw-latn-vn",crx:"crx-latn-ca","crx-cans":"crx-cans-ca",cry:"cry-latn-ng",crz:"crz-latn-us",cs:"cs-latn-cz",csa:"csa-latn-mx",csb:"csb-latn-pl",csh:"csh-mymr-mm","csh-latn":"csh-latn-mm",csj:"csj-latn-mm",csk:"csk-latn-sn",csm:"csm-latn-us",cso:"cso-latn-mx",csp:"csp-hans-cn","csp-hant":"csp-hant-cn",css:"css-latn-us",cst:"cst-latn-us",csv:"csv-latn-mm",csw:"csw-cans-ca",csy:"csy-latn-mm",csz:"csz-latn-us",cta:"cta-latn-mx",ctc:"ctc-latn-us",ctd:"ctd-pauc-mm",cte:"cte-latn-mx",ctg:"ctg-beng-bd","ctg-arab":"ctg-arab-bd","ctg-latn":"ctg-latn-bd",cth:"cth-latn-mm",ctl:"ctl-latn-mx",ctm:"ctm-latn-us",ctn:"ctn-deva-np",cto:"cto-latn-co",ctp:"ctp-latn-mx",cts:"cts-latn-ph",ctt:"ctt-taml-in",ctu:"ctu-latn-mx",ctz:"ctz-latn-mx",cu:"cu-cyrl-ru","cu-glag":"cu-glag-bg",cua:"cua-latn-vn",cub:"cub-latn-co",cuc:"cuc-latn-mx",cuh:"cuh-latn-ke",cui:"cui-latn-co",cuj:"cuj-latn-pe",cuk:"cuk-latn-pa",cul:"cul-latn-br",cuo:"cuo-latn-ve",cup:"cup-latn-us",cut:"cut-latn-mx",cuu:"cuu-lana-cn",cuv:"cuv-latn-cm",cux:"cux-latn-mx",cv:"cv-cyrl-ru",cvg:"cvg-latn-in","cvg-tibt":"cvg-tibt-in",cvn:"cvn-latn-mx",cwa:"cwa-latn-tz",cwb:"cwb-latn-mz",cwe:"cwe-latn-tz",cwg:"cwg-latn-my",cwt:"cwt-latn-sn",cy:"cy-latn-gb",cya:"cya-latn-mx",cyb:"cyb-latn-bo",cyo:"cyo-latn-ph",czh:"czh-hans-cn","czh-hant":"czh-hant-cn",czk:"czk-hebr-cz",czn:"czn-latn-mx",czt:"czt-latn-mm",da:"da-latn-dk",daa:"daa-latn-td",dac:"dac-latn-pg",dad:"dad-latn-zz",dae:"dae-latn-cm",daf:"daf-latn-ci",dag:"dag-latn-zz",dah:"dah-latn-zz",dai:"dai-latn-td",daj:"daj-latn-sd",dak:"dak-latn-us",dal:"dal-latn-ke",dam:"dam-latn-ng",dao:"dao-latn-mm",daq:"daq-deva-in",dar:"dar-cyrl-ru",das:"das-latn-ci",dau:"dau-latn-td",dav:"dav-latn-ke",daw:"daw-latn-ph",dax:"dax-latn-au",daz:"daz-latn-id",dba:"dba-latn-ml",dbb:"dbb-latn-ng",dbd:"dbd-latn-zz",dbe:"dbe-latn-id",dbf:"dbf-latn-id",dbg:"dbg-latn-ml",dbi:"dbi-latn-ng",dbj:"dbj-latn-my","dbj-arab":"dbj-arab-my",dbl:"dbl-latn-au",dbm:"dbm-latn-ng",dbn:"dbn-latn-id",dbo:"dbo-latn-ng",dbp:"dbp-latn-ng",dbq:"dbq-latn-zz",dbt:"dbt-latn-ml",dbu:"dbu-latn-ml",dbv:"dbv-latn-ng",dbw:"dbw-latn-ml",dby:"dby-latn-pg",dcc:"dcc-arab-in",dcr:"dcr-latn-vi",dda:"dda-latn-au",ddd:"ddd-latn-ss",dde:"dde-latn-cg",ddg:"ddg-latn-tl",ddi:"ddi-latn-pg",ddj:"ddj-latn-au",ddn:"ddn-latn-zz",ddo:"ddo-cyrl-ru",ddr:"ddr-latn-au",dds:"dds-latn-ml",ddw:"ddw-latn-id",de:"de-latn-de",dec:"dec-latn-sd",ded:"ded-latn-zz",dee:"dee-latn-lr",def:"def-arab-ir",deg:"deg-latn-ng",deh:"deh-arab-pk",dei:"dei-latn-id",dek:"dek-latn-cm",del:"del-latn-us",dem:"dem-latn-id",den:"den-latn-ca",deq:"deq-latn-cf",der:"der-beng-in","der-latn":"der-latn-in",des:"des-latn-br",dev:"dev-latn-pg",dez:"dez-latn-cd",dga:"dga-latn-zz",dgb:"dgb-latn-ml",dgc:"dgc-latn-ph",dgd:"dgd-latn-bf",dge:"dge-latn-pg",dgg:"dgg-latn-pg",dgh:"dgh-latn-zz",dgi:"dgi-latn-zz",dgk:"dgk-latn-cf",dgl:"dgl-arab-zz",dgn:"dgn-latn-au",dgr:"dgr-latn-ca",dgs:"dgs-latn-bf",dgt:"dgt-latn-au",dgw:"dgw-latn-au",dgx:"dgx-latn-pg",dgz:"dgz-latn-zz",dhg:"dhg-latn-au",dhi:"dhi-deva-np",dhl:"dhl-latn-au",dhm:"dhm-latn-ao",dhn:"dhn-gujr-in",dho:"dho-deva-in",dhr:"dhr-latn-au",dhs:"dhs-latn-tz",dhu:"dhu-latn-au",dhv:"dhv-latn-nc",dhw:"dhw-deva-np",dhx:"dhx-latn-au",dia:"dia-latn-zz",dib:"dib-latn-ss",dic:"dic-latn-ci",did:"did-latn-ss",dif:"dif-latn-au",dig:"dig-latn-ke",dih:"dih-latn-mx",dii:"dii-latn-cm",dij:"dij-latn-id",dil:"dil-latn-sd",din:"din-latn-ss","din-arab":"din-arab-ss",dio:"dio-latn-ng",dip:"dip-latn-ss",dir:"dir-latn-ng",dis:"dis-latn-in","dis-beng":"dis-beng-in",diu:"diu-latn-na",diw:"diw-latn-ss",dix:"dix-latn-vu",diy:"diy-latn-id",diz:"diz-latn-cd",dja:"dja-latn-au",djb:"djb-latn-au",djc:"djc-latn-td",djd:"djd-latn-au",dje:"dje-latn-ne",djf:"djf-latn-au",dji:"dji-latn-au",djj:"djj-latn-au",djk:"djk-latn-sr",djm:"djm-latn-ml",djn:"djn-latn-au",djo:"djo-latn-id",djr:"djr-latn-au",dju:"dju-latn-pg",djw:"djw-latn-au",dka:"dka-tibt-bt",dkg:"dkg-latn-ng",dkk:"dkk-latn-id",dkr:"dkr-latn-my",dks:"dks-latn-ss",dkx:"dkx-latn-cm",dlg:"dlg-cyrl-ru",dlm:"dlm-latn-hr",dln:"dln-latn-in",dma:"dma-latn-ga",dmb:"dmb-latn-ml",dmc:"dmc-latn-pg",dmd:"dmd-latn-au",dme:"dme-latn-cm",dmf:"dmf-medf-ng",dmg:"dmg-latn-my",dmk:"dmk-arab-pk",dml:"dml-arab-pk",dmm:"dmm-latn-cm",dmo:"dmo-latn-cm",dmr:"dmr-latn-id",dms:"dms-latn-id",dmu:"dmu-latn-id",dmv:"dmv-latn-my",dmw:"dmw-latn-au",dmx:"dmx-latn-mz",dmy:"dmy-latn-id",dna:"dna-latn-id",dnd:"dnd-latn-pg",dne:"dne-latn-tz",dng:"dng-cyrl-kg","dng-arab":"dng-arab-kg",dni:"dni-latn-id",dnj:"dnj-latn-ci",dnk:"dnk-latn-id",dnn:"dnn-latn-bf",dno:"dno-latn-cd",dnr:"dnr-latn-pg",dnt:"dnt-latn-id",dnu:"dnu-mymr-mm",dnv:"dnv-mymr-mm",dnw:"dnw-latn-id",dny:"dny-latn-br",doa:"doa-latn-pg",dob:"dob-latn-zz",doc:"doc-latn-cn",doe:"doe-latn-tz",dof:"dof-latn-pg",doh:"doh-latn-ng",doi:"doi-deva-in",dok:"dok-latn-id",dol:"dol-latn-pg",don:"don-latn-pg",doo:"doo-latn-cd",dop:"dop-latn-zz",dor:"dor-latn-sb",dos:"dos-latn-bf",dot:"dot-latn-ng",dov:"dov-latn-zw",dow:"dow-latn-zz",dox:"dox-ethi-et",doy:"doy-latn-gh",dpp:"dpp-latn-my",drc:"drc-latn-pt",dre:"dre-tibt-np",drg:"drg-latn-my",drh:"drh-mong-cn",dri:"dri-latn-zz",drl:"drl-latn-au",drn:"drn-latn-id",dro:"dro-latn-my",drq:"drq-deva-np",drs:"drs-ethi-zz",drt:"drt-latn-nl",dru:"dru-latn-tw",dry:"dry-deva-np",dsb:"dsb-latn-de",dsh:"dsh-latn-ke",dsi:"dsi-latn-td",dsn:"dsn-latn-id",dso:"dso-orya-in",dsq:"dsq-latn-ml","dsq-arab":"dsq-arab-ml",dta:"dta-latn-cn","dta-cyrl":"dta-cyrl-cn","dta-hans":"dta-hans-cn",dtb:"dtb-latn-my",dtd:"dtd-latn-ca",dth:"dth-latn-au",dti:"dti-latn-ml",dtk:"dtk-latn-ml",dtm:"dtm-latn-ml",dto:"dto-latn-ml",dtp:"dtp-latn-my",dtr:"dtr-latn-my",dts:"dts-latn-zz",dtt:"dtt-latn-ml",dtu:"dtu-latn-ml",dty:"dty-deva-np",dua:"dua-latn-cm",dub:"dub-gujr-in",duc:"duc-latn-zz",dud:"dud-latn-zz",due:"due-latn-ph",duf:"duf-latn-nc",dug:"dug-latn-zz",duh:"duh-deva-in","duh-gujr":"duh-gujr-in",dui:"dui-latn-pg",duk:"duk-latn-pg",dul:"dul-latn-ph",dum:"dum-latn-nl",dun:"dun-latn-id",duo:"duo-latn-ph",dup:"dup-latn-id",duq:"duq-latn-id",dur:"dur-latn-cm",dus:"dus-deva-np",duu:"duu-latn-cn",duv:"duv-latn-id",duw:"duw-latn-id",dux:"dux-latn-ml",duy:"duy-latn-ph",duz:"duz-latn-cm",dv:"dv-thaa-mv",dva:"dva-latn-zz",dwa:"dwa-latn-ng",dwk:"dwk-orya-in",dwr:"dwr-latn-et","dwr-ethi":"dwr-ethi-et",dws:"dws-latn-001",dwu:"dwu-latn-au",dww:"dww-latn-zz",dwy:"dwy-latn-au",dwz:"dwz-deva-np",dya:"dya-latn-bf",dyb:"dyb-latn-au",dyd:"dyd-latn-au",dyg:"dyg-latn-ph",dyi:"dyi-latn-ci",dym:"dym-latn-ml",dyn:"dyn-latn-au",dyo:"dyo-latn-sn",dyu:"dyu-latn-bf",dyy:"dyy-latn-au",dz:"dz-tibt-bt",dza:"dza-latn-ng",dze:"dze-latn-au",dzg:"dzg-latn-zz",dzl:"dzl-tibt-bt",dzn:"dzn-latn-cd",eaa:"eaa-latn-au",ebc:"ebc-latn-id",ebg:"ebg-latn-ng",ebk:"ebk-latn-ph",ebo:"ebo-latn-cg",ebr:"ebr-latn-ci",ebu:"ebu-latn-ke",ecr:"ecr-grek-gr",ecy:"ecy-cprt-cy",ee:"ee-latn-gh",efa:"efa-latn-ng",efe:"efe-latn-cd",efi:"efi-latn-ng",ega:"ega-latn-ci",egl:"egl-latn-it",egm:"egm-latn-tz",ego:"ego-latn-ng",egy:"egy-egyp-eg",ehu:"ehu-latn-ng",eip:"eip-latn-id",eit:"eit-latn-pg",eiv:"eiv-latn-pg",eja:"eja-latn-gw",eka:"eka-latn-zz",eke:"eke-latn-ng",ekg:"ekg-latn-id",eki:"eki-latn-ng",ekl:"ekl-latn-bd",ekm:"ekm-latn-cm",eko:"eko-latn-mz","eko-arab":"eko-arab-mz",ekp:"ekp-latn-ng",ekr:"ekr-latn-ng",eky:"eky-kali-mm",el:"el-grek-gr",ele:"ele-latn-pg",elk:"elk-latn-pg",elm:"elm-latn-ng",elo:"elo-latn-ke",elu:"elu-latn-pg",ema:"ema-latn-zz",emb:"emb-latn-id",eme:"eme-latn-gf",emg:"emg-deva-np",emi:"emi-latn-zz",emm:"emm-latn-mx",emn:"emn-latn-cm",emp:"emp-latn-pa",ems:"ems-latn-us","ems-cyrl":"ems-cyrl-us",emu:"emu-deva-in",emw:"emw-latn-id",emx:"emx-latn-fr",emz:"emz-latn-cm",en:"en-latn-us","en-shaw":"en-shaw-gb",ena:"ena-latn-pg",enb:"enb-latn-ke",enc:"enc-latn-vn",end:"end-latn-id",enf:"enf-cyrl-ru",enh:"enh-cyrl-ru",enl:"enl-latn-py",enm:"enm-latn-gb",enn:"enn-latn-zz",eno:"eno-latn-id",enq:"enq-latn-zz",enr:"enr-latn-id",env:"env-latn-ng",enw:"enw-latn-ng",enx:"enx-latn-py",eo:"eo-latn-001",eot:"eot-latn-ci",epi:"epi-latn-ng",era:"era-taml-in",erg:"erg-latn-vu",erh:"erh-latn-ng",eri:"eri-latn-zz",erk:"erk-latn-vu",err:"err-latn-au",ert:"ert-latn-id",erw:"erw-latn-id",es:"es-latn-es",ese:"ese-latn-bo",esg:"esg-gonm-in",esh:"esh-arab-ir",esi:"esi-latn-us",esm:"esm-latn-ci",ess:"ess-latn-us","ess-cyrl":"ess-cyrl-us",esu:"esu-latn-us",esy:"esy-latn-ph",et:"et-latn-ee",etb:"etb-latn-ng",etn:"etn-latn-vu",eto:"eto-latn-cm",etr:"etr-latn-zz",ets:"ets-latn-ng",ett:"ett-ital-it",etu:"etu-latn-zz",etx:"etx-latn-zz",etz:"etz-latn-id",eu:"eu-latn-es",eve:"eve-cyrl-ru",evh:"evh-latn-ng",evn:"evn-cyrl-ru","evn-latn":"evn-latn-cn","evn-mong":"evn-mong-cn",ewo:"ewo-latn-cm",ext:"ext-latn-es",eya:"eya-latn-us",eyo:"eyo-latn-ke",eza:"eza-latn-zz",eze:"eze-latn-ng",fa:"fa-arab-ir",faa:"faa-latn-zz",fab:"fab-latn-zz",fad:"fad-latn-pg",faf:"faf-latn-sb",fag:"fag-latn-zz",fah:"fah-latn-ng",fai:"fai-latn-zz",faj:"faj-latn-pg",fak:"fak-latn-cm",fal:"fal-latn-cm",fam:"fam-latn-ng",fan:"fan-latn-gq",fap:"fap-latn-sn",far:"far-latn-sb",fau:"fau-latn-id",fax:"fax-latn-es",fay:"fay-arab-ir",faz:"faz-arab-ir",fbl:"fbl-latn-ph",fer:"fer-latn-ss",ff:"ff-latn-sn","ff-adlm":"ff-adlm-gn",ffi:"ffi-latn-zz",ffm:"ffm-latn-ml",fgr:"fgr-latn-td",fi:"fi-latn-fi",fia:"fia-arab-sd",fie:"fie-latn-ng",fif:"fif-latn-sa",fil:"fil-latn-ph",fip:"fip-latn-tz",fir:"fir-latn-ng",fit:"fit-latn-se",fiw:"fiw-latn-pg",fj:"fj-latn-fj",fkk:"fkk-latn-ng",fkv:"fkv-latn-no",fla:"fla-latn-us",flh:"flh-latn-id",fli:"fli-latn-ng",fll:"fll-latn-cm",fln:"fln-latn-au",flr:"flr-latn-zz",fly:"fly-latn-za",fmp:"fmp-latn-zz",fmu:"fmu-deva-in",fnb:"fnb-latn-vu",fng:"fng-latn-za",fni:"fni-latn-td",fo:"fo-latn-fo",fod:"fod-latn-zz",foi:"foi-latn-pg",fom:"fom-latn-cd",fon:"fon-latn-bj",for:"for-latn-zz",fos:"fos-latn-tw",fpe:"fpe-latn-zz",fqs:"fqs-latn-zz",fr:"fr-latn-fr",frc:"frc-latn-us",frd:"frd-latn-id",frk:"frk-latn-de",frm:"frm-latn-fr",fro:"fro-latn-fr",frp:"frp-latn-fr",frq:"frq-latn-pg",frr:"frr-latn-de",frs:"frs-latn-de",frt:"frt-latn-vu",fub:"fub-arab-cm",fud:"fud-latn-wf",fue:"fue-latn-zz",fuf:"fuf-latn-gn",fuh:"fuh-latn-zz",fui:"fui-latn-td",fum:"fum-latn-ng",fun:"fun-latn-br",fuq:"fuq-latn-ne",fur:"fur-latn-it",fut:"fut-latn-vu",fuu:"fuu-latn-cd",fuv:"fuv-latn-ng",fuy:"fuy-latn-zz",fvr:"fvr-latn-sd",fwa:"fwa-latn-nc",fwe:"fwe-latn-na",fy:"fy-latn-nl",ga:"ga-latn-ie",gaa:"gaa-latn-gh",gab:"gab-latn-td",gac:"gac-latn-in","gac-deva":"gac-deva-in",gad:"gad-latn-ph",gae:"gae-latn-ve",gaf:"gaf-latn-zz",gag:"gag-latn-md",gah:"gah-latn-zz",gai:"gai-latn-pg",gaj:"gaj-latn-zz",gak:"gak-latn-id",gal:"gal-latn-tl",gam:"gam-latn-zz",gan:"gan-hans-cn",gao:"gao-latn-pg",gap:"gap-latn-pg",gaq:"gaq-orya-in",gar:"gar-latn-pg",gas:"gas-gujr-in",gat:"gat-latn-pg",gau:"gau-telu-in",gaw:"gaw-latn-zz",gax:"gax-latn-et","gax-ethi":"gax-ethi-et",gay:"gay-latn-id",gba:"gba-latn-zz",gbb:"gbb-latn-au",gbd:"gbd-latn-au",gbe:"gbe-latn-pg",gbf:"gbf-latn-zz",gbg:"gbg-latn-cf",gbh:"gbh-latn-bj",gbi:"gbi-latn-id",gbj:"gbj-orya-in",gbk:"gbk-deva-in","gbk-takr":"gbk-takr-in",gbl:"gbl-gujr-in","gbl-deva":"gbl-deva-in",gbm:"gbm-deva-in",gbn:"gbn-latn-ss",gbp:"gbp-latn-cf",gbq:"gbq-latn-cf",gbr:"gbr-latn-ng",gbs:"gbs-latn-bj",gbu:"gbu-latn-au",gbv:"gbv-latn-cf",gbw:"gbw-latn-au",gbx:"gbx-latn-bj",gby:"gby-latn-zz",gbz:"gbz-arab-ir",gcc:"gcc-latn-pg",gcd:"gcd-latn-au",gcf:"gcf-latn-gp",gcl:"gcl-latn-gd",gcn:"gcn-latn-pg",gcr:"gcr-latn-gf",gct:"gct-latn-ve",gd:"gd-latn-gb",gdb:"gdb-orya-in","gdb-telu":"gdb-telu-in",gdc:"gdc-latn-au",gdd:"gdd-latn-pg",gde:"gde-latn-zz",gdf:"gdf-latn-ng",gdg:"gdg-latn-ph",gdh:"gdh-latn-au",gdi:"gdi-latn-cf",gdj:"gdj-latn-au",gdk:"gdk-latn-td",gdl:"gdl-latn-et","gdl-ethi":"gdl-ethi-et",gdm:"gdm-latn-td",gdn:"gdn-latn-zz",gdo:"gdo-cyrl-ru",gdq:"gdq-latn-ye",gdr:"gdr-latn-zz",gdt:"gdt-latn-au",gdu:"gdu-latn-ng",gdx:"gdx-deva-in",gea:"gea-latn-ng",geb:"geb-latn-zz",gec:"gec-latn-lr",ged:"ged-latn-ng",gef:"gef-latn-id",geg:"geg-latn-ng",geh:"geh-latn-ca",gei:"gei-latn-id",gej:"gej-latn-zz",gek:"gek-latn-ng",gel:"gel-latn-zz",geq:"geq-latn-cf",ges:"ges-latn-id",gev:"gev-latn-ga",gew:"gew-latn-ng",gex:"gex-latn-so",gey:"gey-latn-cd",gez:"gez-ethi-et",gfk:"gfk-latn-zz",gga:"gga-latn-sb",ggb:"ggb-latn-lr",ggd:"ggd-latn-au",gge:"gge-latn-au",ggg:"ggg-arab-pk",ggk:"ggk-latn-au",ggl:"ggl-latn-pg",ggn:"ggn-deva-np",ggt:"ggt-latn-pg",ggu:"ggu-latn-ci",ggw:"ggw-latn-pg",gha:"gha-arab-ly","gha-latn":"gha-latn-ly","gha-tfng":"gha-tfng-ly",ghc:"ghc-latn-gb",ghe:"ghe-deva-np",ghk:"ghk-latn-mm",ghn:"ghn-latn-sb",ghr:"ghr-arab-pk",ghs:"ghs-latn-zz",ght:"ght-tibt-np",gia:"gia-latn-au",gib:"gib-latn-ng",gic:"gic-latn-za",gid:"gid-latn-cm",gie:"gie-latn-ci",gig:"gig-arab-pk",gih:"gih-latn-au",gil:"gil-latn-ki",gim:"gim-latn-zz",gin:"gin-cyrl-ru",gip:"gip-latn-pg",giq:"giq-latn-vn",gir:"gir-latn-vn",gis:"gis-latn-cm",git:"git-latn-ca",gix:"gix-latn-cd",giy:"giy-latn-au",giz:"giz-latn-cm",gjk:"gjk-arab-pk",gjm:"gjm-latn-au",gjn:"gjn-latn-zz",gjr:"gjr-latn-au",gju:"gju-arab-pk",gka:"gka-latn-pg",gkd:"gkd-latn-pg",gke:"gke-latn-cm",gkn:"gkn-latn-zz",gko:"gko-latn-au",gkp:"gkp-latn-zz",gku:"gku-latn-za",gl:"gl-latn-es",glb:"glb-latn-ng",glc:"glc-latn-td",gld:"gld-cyrl-ru",glh:"glh-arab-af",glj:"glj-latn-td",glk:"glk-arab-ir",gll:"gll-latn-au",glo:"glo-latn-ng",glr:"glr-latn-lr",glu:"glu-latn-td",glw:"glw-latn-ng",gma:"gma-latn-au",gmb:"gmb-latn-sb",gmd:"gmd-latn-ng",gmg:"gmg-latn-pg",gmh:"gmh-latn-de",gmm:"gmm-latn-zz",gmn:"gmn-latn-cm",gmr:"gmr-latn-au",gmu:"gmu-latn-pg",gmv:"gmv-ethi-zz",gmx:"gmx-latn-tz",gmy:"gmy-linb-gr",gmz:"gmz-latn-ng",gn:"gn-latn-py",gna:"gna-latn-bf",gnb:"gnb-latn-in",gnc:"gnc-latn-es",gnd:"gnd-latn-zz",gne:"gne-latn-ng",gng:"gng-latn-zz",gnh:"gnh-latn-ng",gni:"gni-latn-au",gnj:"gnj-latn-ci",gnk:"gnk-latn-bw",gnl:"gnl-latn-au",gnm:"gnm-latn-pg",gnn:"gnn-latn-au",gnq:"gnq-latn-my",gnr:"gnr-latn-au",gnt:"gnt-latn-pg",gnu:"gnu-latn-pg",gnw:"gnw-latn-bo",gnz:"gnz-latn-cf",goa:"goa-latn-ci",gob:"gob-latn-co",goc:"goc-latn-pg",god:"god-latn-zz",goe:"goe-tibt-bt",gof:"gof-ethi-zz",gog:"gog-latn-tz",goh:"goh-latn-de",goi:"goi-latn-zz",gok:"gok-deva-in",gol:"gol-latn-lr",gom:"gom-deva-in",gon:"gon-telu-in",goo:"goo-latn-fj",gop:"gop-latn-id",goq:"goq-latn-id",gor:"gor-latn-id",gos:"gos-latn-nl",got:"got-goth-ua",gou:"gou-latn-cm",gov:"gov-latn-ci",gow:"gow-latn-tz",gox:"gox-latn-cd",goy:"goy-latn-td",gpa:"gpa-latn-ng",gpe:"gpe-latn-gh",gpn:"gpn-latn-pg",gqa:"gqa-latn-ng",gqn:"gqn-latn-br",gqr:"gqr-latn-td",gra:"gra-deva-in","gra-gujr":"gra-gujr-in",grb:"grb-latn-zz",grc:"grc-cprt-cy","grc-linb":"grc-linb-gr",grd:"grd-latn-ng",grg:"grg-latn-pg",grh:"grh-latn-ng",gri:"gri-latn-sb",grj:"grj-latn-lr",grm:"grm-latn-my",grq:"grq-latn-pg",grs:"grs-latn-id",grt:"grt-beng-in",gru:"gru-ethi-et","gru-latn":"gru-latn-et",grv:"grv-latn-lr",grw:"grw-latn-zz",grx:"grx-latn-pg",gry:"gry-latn-lr",grz:"grz-latn-pg",gsl:"gsl-latn-sn",gsn:"gsn-latn-pg",gso:"gso-latn-cf",gsp:"gsp-latn-pg",gsw:"gsw-latn-ch",gta:"gta-latn-br",gtu:"gtu-latn-au",gu:"gu-gujr-in",gua:"gua-latn-ng",gub:"gub-latn-br",guc:"guc-latn-co",gud:"gud-latn-zz",gue:"gue-latn-au",guf:"guf-latn-au",guh:"guh-latn-co",gui:"gui-latn-bo",guk:"guk-latn-et","guk-ethi":"guk-ethi-et",gul:"gul-latn-us",gum:"gum-latn-co",gun:"gun-latn-br",guo:"guo-latn-co",gup:"gup-latn-au",guq:"guq-latn-py",gur:"gur-latn-gh",gut:"gut-latn-cr",guu:"guu-latn-ve",guw:"guw-latn-zz",gux:"gux-latn-zz",guz:"guz-latn-ke",gv:"gv-latn-im",gva:"gva-latn-py",gvc:"gvc-latn-br",gve:"gve-latn-pg",gvf:"gvf-latn-zz",gvj:"gvj-latn-br",gvl:"gvl-latn-td",gvm:"gvm-latn-ng",gvn:"gvn-latn-au",gvo:"gvo-latn-br",gvp:"gvp-latn-br",gvr:"gvr-deva-np",gvs:"gvs-latn-zz",gvy:"gvy-latn-au",gwa:"gwa-latn-ci",gwb:"gwb-latn-ng",gwc:"gwc-arab-zz",gwd:"gwd-latn-et",gwe:"gwe-latn-tz",gwf:"gwf-arab-pk",gwg:"gwg-latn-ng",gwi:"gwi-latn-ca",gwj:"gwj-latn-bw",gwm:"gwm-latn-au",gwn:"gwn-latn-ng",gwr:"gwr-latn-ug",gwt:"gwt-arab-zz",gwu:"gwu-latn-au",gww:"gww-latn-au",gwx:"gwx-latn-gh",gxx:"gxx-latn-ci",gyb:"gyb-latn-pg",gyd:"gyd-latn-au",gye:"gye-latn-ng",gyf:"gyf-latn-au",gyg:"gyg-latn-cf",gyi:"gyi-latn-zz",gyl:"gyl-latn-et","gyl-ethi":"gyl-ethi-et",gym:"gym-latn-pa",gyn:"gyn-latn-gy",gyo:"gyo-deva-np",gyr:"gyr-latn-bo",gyy:"gyy-latn-au",gyz:"gyz-latn-ng",gza:"gza-latn-sd",gzi:"gzi-arab-ir",gzn:"gzn-latn-id",ha:"ha-latn-ng","ha-cm":"ha-arab-cm","ha-sd":"ha-arab-sd",haa:"haa-latn-us",hac:"hac-arab-ir",had:"had-latn-id",hae:"hae-latn-et",hag:"hag-latn-zz",hah:"hah-latn-pg",hai:"hai-latn-ca",haj:"haj-latn-in","haj-beng":"haj-beng-in",hak:"hak-hans-cn",hal:"hal-latn-vn",ham:"ham-latn-zz",han:"han-latn-tz",hao:"hao-latn-pg",hap:"hap-latn-id",haq:"haq-latn-tz",har:"har-ethi-et","har-arab":"har-arab-et","har-latn":"har-latn-et",has:"has-latn-ca",hav:"hav-latn-cd",haw:"haw-latn-us",hax:"hax-latn-ca",hay:"hay-latn-tz",haz:"haz-arab-af",hba:"hba-latn-cd",hbb:"hbb-latn-zz",hbn:"hbn-latn-sd",hbo:"hbo-hebr-il",hbu:"hbu-latn-tl",hch:"hch-latn-mx",hdy:"hdy-ethi-zz",he:"he-hebr-il",hed:"hed-latn-td",heg:"heg-latn-id",heh:"heh-latn-tz",hei:"hei-latn-ca",hem:"hem-latn-cd",hgm:"hgm-latn-na",hgw:"hgw-latn-pg",hhi:"hhi-latn-pg",hhr:"hhr-latn-sn",hhy:"hhy-latn-zz",hi:"hi-deva-in","hi-latn":"hi-latn-in",hia:"hia-latn-zz",hib:"hib-latn-pe",hid:"hid-latn-us",hif:"hif-latn-fj",hig:"hig-latn-zz",hih:"hih-latn-zz",hii:"hii-takr-in","hii-deva":"hii-deva-in",hij:"hij-latn-cm",hik:"hik-latn-id",hil:"hil-latn-ph",hio:"hio-latn-bw",hir:"hir-latn-br",hit:"hit-xsux-tr",hiw:"hiw-latn-vu",hix:"hix-latn-br",hji:"hji-latn-id",hka:"hka-latn-tz",hke:"hke-latn-cd",hkh:"hkh-arab-in","hkh-deva":"hkh-deva-in","hkh-latn":"hkh-latn-in",hkk:"hkk-latn-pg",hla:"hla-latn-zz",hlb:"hlb-deva-in",hld:"hld-latn-vn",hlt:"hlt-latn-mm",hlu:"hlu-hluw-tr",hma:"hma-latn-cn",hmb:"hmb-latn-ml",hmd:"hmd-plrd-cn",hmf:"hmf-latn-vn",hmj:"hmj-bopo-cn",hmm:"hmm-latn-cn",hmn:"hmn-latn-cn","hmn-bopo":"hmn-bopo-cn","hmn-hmng":"hmn-hmng-cn",hmp:"hmp-latn-cn",hmq:"hmq-bopo-cn",hmr:"hmr-latn-in",hms:"hms-latn-cn",hmt:"hmt-latn-zz",hmu:"hmu-latn-id",hmv:"hmv-latn-vn",hmw:"hmw-latn-cn",hmy:"hmy-latn-cn",hmz:"hmz-latn-cn","hmz-plrd":"hmz-plrd-cn",hna:"hna-latn-cm",hnd:"hnd-arab-pk",hne:"hne-deva-in",hng:"hng-latn-ao",hnh:"hnh-latn-bw",hni:"hni-latn-cn",hnj:"hnj-hmnp-us","hnj-au":"hnj-laoo-au","hnj-cn":"hnj-laoo-cn","hnj-fr":"hnj-laoo-fr","hnj-gf":"hnj-laoo-gf","hnj-la":"hnj-laoo-la","hnj-laoo":"hnj-laoo-la","hnj-mm":"hnj-laoo-mm","hnj-sr":"hnj-laoo-sr","hnj-th":"hnj-laoo-th","hnj-us":"hnj-hmnp-us","hnj-vn":"hnj-laoo-vn",hnn:"hnn-latn-ph",hno:"hno-arab-pk",hns:"hns-latn-sr",ho:"ho-latn-pg",hoa:"hoa-latn-sb",hob:"hob-latn-pg",hoc:"hoc-deva-in",hod:"hod-latn-ng",hoe:"hoe-latn-ng",hoh:"hoh-arab-om",hoi:"hoi-latn-us",hoj:"hoj-deva-in",hol:"hol-latn-ao",hom:"hom-latn-ss",hoo:"hoo-latn-cd",hop:"hop-latn-us",hor:"hor-latn-td",hot:"hot-latn-zz",hov:"hov-latn-id",how:"how-hani-cn",hoy:"hoy-deva-in",hpo:"hpo-mymr-mm",hr:"hr-latn-hr",hra:"hra-latn-in",hrc:"hrc-latn-pg",hre:"hre-latn-vn",hrk:"hrk-latn-id",hrm:"hrm-latn-cn","hrm-hmng":"hrm-hmng-cn",hro:"hro-latn-vn",hrp:"hrp-latn-au",hrt:"hrt-syrc-tr",hru:"hru-latn-in",hrw:"hrw-latn-pg",hrx:"hrx-latn-br",hrz:"hrz-arab-ir",hsb:"hsb-latn-de",hsn:"hsn-hans-cn",hss:"hss-arab-om",ht:"ht-latn-ht",hti:"hti-latn-id",hto:"hto-latn-co",hts:"hts-latn-tz",htu:"htu-latn-id",htx:"htx-xsux-tr",hu:"hu-latn-hu",hub:"hub-latn-pe",huc:"huc-latn-bw",hud:"hud-latn-id",hue:"hue-latn-mx",huf:"huf-latn-pg",hug:"hug-latn-pe",huh:"huh-latn-cl",hui:"hui-latn-zz",huk:"huk-latn-id",hul:"hul-latn-pg",hum:"hum-latn-cd",hup:"hup-latn-us",hur:"hur-latn-ca",hus:"hus-latn-mx",hut:"hut-deva-np","hut-tibt":"hut-tibt-np",huu:"huu-latn-pe",huv:"huv-latn-mx",huw:"huw-latn-id",hux:"hux-latn-pe",huy:"huy-hebr-il",huz:"huz-cyrl-ru",hvc:"hvc-latn-ht",hve:"hve-latn-mx",hvk:"hvk-latn-nc",hvn:"hvn-latn-id",hvv:"hvv-latn-mx",hwa:"hwa-latn-ci",hwc:"hwc-latn-us",hwo:"hwo-latn-ng",hy:"hy-armn-am",hya:"hya-latn-cm",hyw:"hyw-armn-am",hz:"hz-latn-na",ia:"ia-latn-001",iai:"iai-latn-nc",ian:"ian-latn-zz",iar:"iar-latn-zz",iba:"iba-latn-my",ibb:"ibb-latn-ng",ibd:"ibd-latn-au",ibe:"ibe-latn-ng",ibg:"ibg-latn-ph",ibh:"ibh-latn-vn",ibl:"ibl-latn-ph",ibm:"ibm-latn-ng",ibn:"ibn-latn-ng",ibr:"ibr-latn-ng",ibu:"ibu-latn-id",iby:"iby-latn-zz",ica:"ica-latn-zz",ich:"ich-latn-zz",icr:"icr-latn-co",id:"id-latn-id",ida:"ida-latn-ke",idb:"idb-latn-in",idc:"idc-latn-ng",idd:"idd-latn-zz",ide:"ide-latn-ng",idi:"idi-latn-zz",idr:"idr-latn-ss",ids:"ids-latn-ng",idt:"idt-latn-tl",idu:"idu-latn-zz",ie:"ie-latn-001",ifa:"ifa-latn-ph",ifb:"ifb-latn-ph",ife:"ife-latn-tg",iff:"iff-latn-vu",ifk:"ifk-latn-ph",ifm:"ifm-latn-cg",ifu:"ifu-latn-ph",ify:"ify-latn-ph",ig:"ig-latn-ng",igb:"igb-latn-zz",ige:"ige-latn-zz",igg:"igg-latn-pg",igl:"igl-latn-ng",igm:"igm-latn-pg",ign:"ign-latn-bo",igo:"igo-latn-pg",igs:"igs-latn-001","igs-grek":"igs-grek-001",igw:"igw-latn-ng",ihb:"ihb-latn-id",ihi:"ihi-latn-ng",ihp:"ihp-latn-id",ihw:"ihw-latn-au",ii:"ii-yiii-cn",iin:"iin-latn-au",ijc:"ijc-latn-ng",ije:"ije-latn-ng",ijj:"ijj-latn-zz",ijn:"ijn-latn-ng",ijs:"ijs-latn-ng",ik:"ik-latn-us",iki:"iki-latn-ng",ikk:"ikk-latn-zz",ikl:"ikl-latn-ng",iko:"iko-latn-ng",ikp:"ikp-latn-ng",ikr:"ikr-latn-au",ikt:"ikt-latn-ca","ikt-cans":"ikt-cans-ca",ikv:"ikv-latn-ng",ikw:"ikw-latn-zz",ikx:"ikx-latn-zz",ikz:"ikz-latn-tz",ila:"ila-latn-id",ilb:"ilb-latn-zm",ilg:"ilg-latn-au",ili:"ili-latn-cn","ili-arab":"ili-arab-cn","ili-cyrl":"ili-cyrl-kz",ilk:"ilk-latn-ph",ilm:"ilm-latn-my",ilo:"ilo-latn-ph",ilp:"ilp-latn-ph",ilu:"ilu-latn-id",ilv:"ilv-latn-ng",imi:"imi-latn-pg",iml:"iml-latn-us",imn:"imn-latn-pg",imo:"imo-latn-zz",imr:"imr-latn-id",ims:"ims-latn-it",imt:"imt-latn-ss",imy:"imy-lyci-tr",in:"in-latn-id",inb:"inb-latn-co",ing:"ing-latn-us",inh:"inh-cyrl-ru",inj:"inj-latn-co",inn:"inn-latn-ph",ino:"ino-latn-pg",inp:"inp-latn-pe",int:"int-mymr-mm",io:"io-latn-001",ior:"ior-ethi-et",iou:"iou-latn-zz",iow:"iow-latn-us",ipi:"ipi-latn-pg",ipo:"ipo-latn-pg",iqu:"iqu-latn-pe",iqw:"iqw-latn-ng",ire:"ire-latn-id",irh:"irh-latn-id",iri:"iri-latn-zz",irk:"irk-latn-tz",irn:"irn-latn-br",iru:"iru-taml-in","iru-mlym":"iru-mlym-in",irx:"irx-latn-id",iry:"iry-latn-ph",is:"is-latn-is",isa:"isa-latn-pg",isc:"isc-latn-pe",isd:"isd-latn-ph",ish:"ish-latn-ng",isi:"isi-latn-ng",isk:"isk-arab-af","isk-cyrl":"isk-cyrl-tj",ism:"ism-latn-id",isn:"isn-latn-tz",iso:"iso-latn-ng",ist:"ist-latn-hr",isu:"isu-latn-cm",it:"it-latn-it",itb:"itb-latn-ph",itd:"itd-latn-id",ite:"ite-latn-bo",iti:"iti-latn-ph",itk:"itk-hebr-it",itl:"itl-cyrl-ru",itm:"itm-latn-ng",ito:"ito-latn-bo",itr:"itr-latn-pg",its:"its-latn-ng",itt:"itt-latn-ph",itv:"itv-latn-ph",itw:"itw-latn-ng",itx:"itx-latn-id",ity:"ity-latn-ph",itz:"itz-latn-gt",iu:"iu-cans-ca",ium:"ium-latn-cn","ium-hani":"ium-hani-cn","ium-laoo":"ium-laoo-la","ium-thai":"ium-thai-th",ivb:"ivb-latn-ph",ivv:"ivv-latn-ph",iw:"iw-hebr-il",iwk:"iwk-latn-ph",iwm:"iwm-latn-zz",iwo:"iwo-latn-id",iws:"iws-latn-zz",ixc:"ixc-latn-mx",ixl:"ixl-latn-gt",iya:"iya-latn-ng",iyo:"iyo-latn-cm",iyx:"iyx-latn-cg",izh:"izh-latn-ru",izi:"izi-latn-zz",izr:"izr-latn-ng",izz:"izz-latn-ng",ja:"ja-jpan-jp",jaa:"jaa-latn-br",jab:"jab-latn-zz",jac:"jac-latn-gt",jad:"jad-arab-gn",jae:"jae-latn-pg",jaf:"jaf-latn-ng",jah:"jah-latn-my",jaj:"jaj-latn-sb",jak:"jak-latn-my",jal:"jal-latn-id",jam:"jam-latn-jm",jan:"jan-latn-au",jao:"jao-latn-au",jaq:"jaq-latn-id",jar:"jar-latn-zz",jas:"jas-latn-nc",jat:"jat-arab-af",jau:"jau-latn-id",jax:"jax-latn-id",jay:"jay-latn-au",jaz:"jaz-latn-nc",jbe:"jbe-hebr-il",jbi:"jbi-latn-au",jbj:"jbj-latn-id",jbk:"jbk-latn-pg",jbm:"jbm-latn-ng",jbn:"jbn-arab-ly",jbo:"jbo-latn-001",jbr:"jbr-latn-id",jbt:"jbt-latn-br",jbu:"jbu-latn-zz",jbw:"jbw-latn-au",jct:"jct-cyrl-ua","jct-latn":"jct-latn-ua",jda:"jda-tibt-in",jdg:"jdg-arab-pk",jdt:"jdt-cyrl-ru","jdt-hebr":"jdt-hebr-ru","jdt-latn":"jdt-latn-az",jeb:"jeb-latn-pe",jee:"jee-deva-np",jeh:"jeh-latn-vn","jeh-laoo":"jeh-laoo-la",jei:"jei-latn-id",jek:"jek-latn-ci",jel:"jel-latn-id",jen:"jen-latn-zz",jer:"jer-latn-ng",jet:"jet-latn-pg",jeu:"jeu-latn-td",jgb:"jgb-latn-cd",jge:"jge-geor-ge","jge-hebr":"jge-hebr-il",jgk:"jgk-latn-zz",jgo:"jgo-latn-cm",jhi:"jhi-latn-my",ji:"ji-hebr-ua",jia:"jia-latn-cm",jib:"jib-latn-zz",jic:"jic-latn-hn",jid:"jid-latn-ng",jie:"jie-latn-ng",jig:"jig-latn-au",jil:"jil-latn-pg",jim:"jim-latn-cm",jit:"jit-latn-tz",jiu:"jiu-latn-cn",jiv:"jiv-latn-ec",jiy:"jiy-latn-cn",jje:"jje-hang-kr",jjr:"jjr-latn-ng",jka:"jka-latn-id",jkm:"jkm-mymr-mm","jkm-brai":"jkm-brai-mm","jkm-latn":"jkm-latn-mm",jko:"jko-latn-pg",jku:"jku-latn-ng",jle:"jle-latn-sd",jma:"jma-latn-pg",jmb:"jmb-latn-ng",jmc:"jmc-latn-tz",jmd:"jmd-latn-id",jmi:"jmi-latn-ng",jml:"jml-deva-np",jmn:"jmn-latn-mm",jmr:"jmr-latn-gh",jms:"jms-latn-ng",jmw:"jmw-latn-pg",jmx:"jmx-latn-mx",jna:"jna-takr-in",jnd:"jnd-arab-pk",jng:"jng-latn-au",jni:"jni-latn-ng",jnj:"jnj-latn-et","jnj-ethi":"jnj-ethi-et",jnl:"jnl-deva-in",jns:"jns-deva-in","jns-latn":"jns-latn-in","jns-takr":"jns-takr-in",job:"job-latn-cd",jod:"jod-latn-ci",jog:"jog-arab-pk",jor:"jor-latn-bo",jow:"jow-latn-ml",jpa:"jpa-hebr-ps",jpr:"jpr-hebr-il",jqr:"jqr-latn-pe",jra:"jra-latn-zz",jrr:"jrr-latn-ng",jrt:"jrt-latn-ng",jru:"jru-latn-ve",jua:"jua-latn-br",jub:"jub-latn-ng",jud:"jud-latn-ci",juh:"juh-latn-ng",jui:"jui-latn-au",juk:"juk-latn-ng",jul:"jul-deva-np",jum:"jum-latn-sd",jun:"jun-orya-in",juo:"juo-latn-ng",jup:"jup-latn-br",jur:"jur-latn-br",jut:"jut-latn-dk",juu:"juu-latn-ng",juw:"juw-latn-ng",juy:"juy-orya-in",jv:"jv-latn-id",jvd:"jvd-latn-id",jvn:"jvn-latn-sr",jw:"jw-latn-id",jwi:"jwi-latn-gh",jya:"jya-tibt-cn",jye:"jye-hebr-il",jyy:"jyy-latn-td",ka:"ka-geor-ge",kaa:"kaa-cyrl-uz",kab:"kab-latn-dz",kac:"kac-latn-mm",kad:"kad-latn-zz",kag:"kag-latn-my",kah:"kah-latn-cf",kai:"kai-latn-zz",kaj:"kaj-latn-ng",kak:"kak-latn-ph",kam:"kam-latn-ke",kao:"kao-latn-ml",kap:"kap-cyrl-ru",kaq:"kaq-latn-pe",kav:"kav-latn-br",kaw:"kaw-kawi-id",kax:"kax-latn-id",kay:"kay-latn-br",kba:"kba-latn-au",kbb:"kbb-latn-br",kbc:"kbc-latn-br",kbd:"kbd-cyrl-ru",kbe:"kbe-latn-au",kbh:"kbh-latn-co",kbi:"kbi-latn-id",kbj:"kbj-latn-cd",kbk:"kbk-latn-pg",kbl:"kbl-latn-td",kbm:"kbm-latn-zz",kbn:"kbn-latn-cf",kbo:"kbo-latn-ss",kbp:"kbp-latn-zz",kbq:"kbq-latn-zz",kbr:"kbr-latn-et","kbr-ethi":"kbr-ethi-et",kbs:"kbs-latn-ga",kbt:"kbt-latn-pg",kbu:"kbu-arab-pk",kbv:"kbv-latn-id",kbw:"kbw-latn-pg",kbx:"kbx-latn-zz",kby:"kby-arab-ne",kbz:"kbz-latn-ng",kca:"kca-cyrl-ru",kcb:"kcb-latn-pg",kcc:"kcc-latn-ng",kcd:"kcd-latn-id",kce:"kce-latn-ng",kcf:"kcf-latn-ng",kcg:"kcg-latn-ng",kch:"kch-latn-ng",kci:"kci-latn-ng",kcj:"kcj-latn-gw",kck:"kck-latn-zw",kcl:"kcl-latn-zz",kcm:"kcm-latn-cf",kcn:"kcn-latn-ug",kco:"kco-latn-pg",kcp:"kcp-latn-sd",kcq:"kcq-latn-ng",kcs:"kcs-latn-ng",kct:"kct-latn-zz",kcu:"kcu-latn-tz",kcv:"kcv-latn-cd",kcw:"kcw-latn-cd",kcz:"kcz-latn-tz",kda:"kda-latn-au",kdc:"kdc-latn-tz",kdd:"kdd-latn-au",kde:"kde-latn-tz",kdf:"kdf-latn-pg",kdg:"kdg-latn-cd",kdh:"kdh-latn-tg",kdi:"kdi-latn-ug",kdj:"kdj-latn-ug",kdk:"kdk-latn-nc",kdl:"kdl-latn-zz",kdm:"kdm-latn-ng",kdn:"kdn-latn-zw",kdp:"kdp-latn-ng",kdq:"kdq-beng-in",kdr:"kdr-latn-lt","kdr-cyrl":"kdr-cyrl-ua",kdt:"kdt-thai-th",kdw:"kdw-latn-id",kdx:"kdx-latn-ng",kdy:"kdy-latn-id",kdz:"kdz-latn-cm",kea:"kea-latn-cv",keb:"keb-latn-ga",kec:"kec-latn-sd",ked:"ked-latn-tz",kee:"kee-latn-us",kef:"kef-latn-tg",keg:"keg-latn-sd",keh:"keh-latn-pg",kei:"kei-latn-id",kek:"kek-latn-gt",kel:"kel-latn-cd",kem:"kem-latn-tl",ken:"ken-latn-cm",keo:"keo-latn-ug",ker:"ker-latn-td",kes:"kes-latn-ng",ket:"ket-cyrl-ru",keu:"keu-latn-tg",kew:"kew-latn-pg",kex:"kex-deva-in","kex-gujr":"kex-gujr-in",key:"key-telu-in",kez:"kez-latn-zz",kfa:"kfa-knda-in",kfb:"kfb-deva-in",kfc:"kfc-telu-in",kfd:"kfd-knda-in",kfe:"kfe-taml-in",kff:"kff-latn-in","kff-deva":"kff-deva-in","kff-orya":"kff-orya-in","kff-telu":"kff-telu-in",kfh:"kfh-mlym-in",kfi:"kfi-taml-in","kfi-knda":"kfi-knda-in",kfk:"kfk-deva-in","kfk-takr":"kfk-takr-in",kfl:"kfl-latn-cm",kfm:"kfm-arab-ir",kfn:"kfn-latn-cm",kfo:"kfo-latn-ci",kfp:"kfp-deva-in",kfq:"kfq-deva-in",kfr:"kfr-deva-in",kfs:"kfs-deva-in",kfv:"kfv-latn-in",kfw:"kfw-latn-in",kfx:"kfx-deva-in","kfx-takr":"kfx-takr-in",kfy:"kfy-deva-in",kfz:"kfz-latn-bf",kg:"kg-latn-cd",kga:"kga-latn-ci",kgb:"kgb-latn-id",kge:"kge-latn-id",kgf:"kgf-latn-zz",kgj:"kgj-deva-np",kgk:"kgk-latn-br",kgl:"kgl-latn-au",kgm:"kgm-latn-br",kgo:"kgo-latn-sd",kgp:"kgp-latn-br",kgq:"kgq-latn-id",kgr:"kgr-latn-id",kgs:"kgs-latn-au",kgt:"kgt-latn-ng",kgu:"kgu-latn-pg",kgv:"kgv-latn-id",kgw:"kgw-latn-id",kgx:"kgx-latn-id",kgy:"kgy-deva-np",kha:"kha-latn-in",khb:"khb-talu-cn",khc:"khc-latn-id",khd:"khd-latn-id",khe:"khe-latn-id",khf:"khf-thai-la",khg:"khg-tibt-cn",khh:"khh-latn-id",khj:"khj-latn-ng",khl:"khl-latn-pg",khn:"khn-deva-in",khp:"khp-latn-id",khq:"khq-latn-ml",khr:"khr-latn-in","khr-deva":"khr-deva-in",khs:"khs-latn-zz",kht:"kht-mymr-in",khu:"khu-latn-ao",khv:"khv-cyrl-ru",khw:"khw-arab-pk",khx:"khx-latn-cd",khy:"khy-latn-cd",khz:"khz-latn-zz",ki:"ki-latn-ke",kia:"kia-latn-td",kib:"kib-latn-sd",kic:"kic-latn-us",kid:"kid-latn-cm",kie:"kie-latn-td",kif:"kif-deva-np",kig:"kig-latn-id",kih:"kih-latn-pg",kij:"kij-latn-zz",kil:"kil-latn-ng",kim:"kim-cyrl-ru",kio:"kio-latn-us",kip:"kip-deva-np",kiq:"kiq-latn-id",kis:"kis-latn-pg",kit:"kit-latn-pg",kiu:"kiu-latn-tr",kiv:"kiv-latn-tz",kiw:"kiw-latn-zz",kix:"kix-latn-in",kiy:"kiy-latn-id",kiz:"kiz-latn-tz",kj:"kj-latn-na",kja:"kja-latn-id",kjb:"kjb-latn-gt",kjc:"kjc-latn-id",kjd:"kjd-latn-zz",kje:"kje-latn-id",kjg:"kjg-laoo-la",kjh:"kjh-cyrl-ru",kji:"kji-latn-sb",kjj:"kjj-latn-az",kjk:"kjk-latn-id",kjl:"kjl-deva-np",kjm:"kjm-latn-vn",kjn:"kjn-latn-au",kjo:"kjo-deva-in",kjp:"kjp-mymr-mm","kjp-thai":"kjp-thai-th",kjq:"kjq-latn-us",kjr:"kjr-latn-id",kjs:"kjs-latn-zz",kjt:"kjt-thai-th",kju:"kju-latn-us",kjx:"kjx-latn-pg",kjy:"kjy-latn-zz",kk:"kk-cyrl-kz","kk-af":"kk-arab-af","kk-arab":"kk-arab-cn","kk-cn":"kk-arab-cn","kk-ir":"kk-arab-ir","kk-mn":"kk-arab-mn",kka:"kka-latn-ng",kkb:"kkb-latn-id",kkc:"kkc-latn-zz",kkd:"kkd-latn-ng",kke:"kke-latn-gn","kke-arab":"kke-arab-gn",kkf:"kkf-tibt-in",kkg:"kkg-latn-ph",kkh:"kkh-lana-mm",kki:"kki-latn-tz",kkj:"kkj-latn-cm",kkk:"kkk-latn-sb",kkl:"kkl-latn-id",kkm:"kkm-latn-ng",kko:"kko-latn-sd",kkp:"kkp-latn-au",kkq:"kkq-latn-cd",kkr:"kkr-latn-ng",kks:"kks-latn-ng",kkt:"kkt-deva-np",kku:"kku-latn-ng",kkv:"kkv-latn-id",kkw:"kkw-latn-cg",kkx:"kkx-latn-id",kky:"kky-latn-au",kkz:"kkz-latn-ca",kl:"kl-latn-gl",kla:"kla-latn-us",klb:"klb-latn-mx",klc:"klc-latn-cm",kld:"kld-latn-au",kle:"kle-deva-np",klf:"klf-latn-td",klg:"klg-latn-ph",klh:"klh-latn-pg",kli:"kli-latn-id",klj:"klj-arab-ir",klk:"klk-latn-ng",kll:"kll-latn-ph",klm:"klm-latn-pg",kln:"kln-latn-ke",klo:"klo-latn-ng",klp:"klp-latn-pg",klq:"klq-latn-zz",klr:"klr-deva-np",kls:"kls-latn-pk","kls-arab":"kls-arab-pk",klt:"klt-latn-zz",klu:"klu-latn-lr",klv:"klv-latn-vu",klw:"klw-latn-id",klx:"klx-latn-zz",kly:"kly-latn-id",klz:"klz-latn-id",km:"km-khmr-kh",kma:"kma-latn-gh",kmb:"kmb-latn-ao",kmc:"kmc-latn-cn","kmc-hani":"kmc-hani-cn",kmd:"kmd-latn-ph",kme:"kme-latn-cm",kmf:"kmf-latn-pg",kmg:"kmg-latn-pg",kmh:"kmh-latn-zz",kmi:"kmi-latn-ng",kmj:"kmj-deva-in",kmk:"kmk-latn-ph",kml:"kml-latn-ph",kmm:"kmm-latn-in",kmn:"kmn-latn-pg",kmo:"kmo-latn-zz",kmp:"kmp-latn-cm",kmq:"kmq-latn-et",kms:"kms-latn-zz",kmt:"kmt-latn-id",kmu:"kmu-latn-zz",kmv:"kmv-latn-br",kmw:"kmw-latn-zz",kmx:"kmx-latn-pg",kmy:"kmy-latn-ng",kmz:"kmz-arab-ir",kn:"kn-knda-in",kna:"kna-latn-ng",knb:"knb-latn-ph",knd:"knd-latn-id",kne:"kne-latn-ph",knf:"knf-latn-gw",kni:"kni-latn-ng",knj:"knj-latn-gt",knk:"knk-latn-sl","knk-arab":"knk-arab-sl",knl:"knl-latn-id",knm:"knm-latn-br",kno:"kno-latn-sl",knp:"knp-latn-zz",knq:"knq-latn-my",knr:"knr-latn-pg",kns:"kns-latn-my","kns-thai":"kns-thai-th",knt:"knt-latn-br",knu:"knu-latn-gn",knv:"knv-latn-pg",knw:"knw-latn-na",knx:"knx-latn-id",kny:"kny-latn-cd",knz:"knz-latn-bf",ko:"ko-kore-kr",koa:"koa-latn-pg",koc:"koc-latn-ng",kod:"kod-latn-id",koe:"koe-latn-ss",kof:"kof-latn-ng",kog:"kog-latn-co",koh:"koh-latn-cg",koi:"koi-cyrl-ru",kok:"kok-deva-in",kol:"kol-latn-zz",koo:"koo-latn-ug",kop:"kop-latn-pg",koq:"koq-latn-ga",kos:"kos-latn-fm",kot:"kot-latn-cm",kou:"kou-latn-td",kov:"kov-latn-ng",kow:"kow-latn-ng",koy:"koy-latn-us",koz:"koz-latn-zz",kpa:"kpa-latn-ng",kpc:"kpc-latn-co",kpd:"kpd-latn-id",kpe:"kpe-latn-lr",kpf:"kpf-latn-zz",kpg:"kpg-latn-fm",kph:"kph-latn-gh",kpi:"kpi-latn-id",kpj:"kpj-latn-br",kpk:"kpk-latn-ng",kpl:"kpl-latn-cd",kpm:"kpm-latn-vn",kpn:"kpn-latn-br",kpo:"kpo-latn-zz",kpq:"kpq-latn-id",kpr:"kpr-latn-zz",kps:"kps-latn-id",kpt:"kpt-cyrl-ru",kpu:"kpu-latn-id",kpw:"kpw-latn-pg",kpx:"kpx-latn-zz",kpy:"kpy-cyrl-ru",kpz:"kpz-latn-ug",kqa:"kqa-latn-pg",kqb:"kqb-latn-zz",kqc:"kqc-latn-pg",kqd:"kqd-syrc-iq",kqe:"kqe-latn-ph",kqf:"kqf-latn-zz",kqg:"kqg-latn-bf",kqh:"kqh-latn-tz",kqi:"kqi-latn-pg",kqj:"kqj-latn-pg",kqk:"kqk-latn-bj",kql:"kql-latn-pg",kqm:"kqm-latn-ci",kqn:"kqn-latn-zm",kqo:"kqo-latn-lr",kqp:"kqp-latn-td",kqq:"kqq-latn-br",kqr:"kqr-latn-my",kqs:"kqs-latn-zz",kqt:"kqt-latn-my",kqu:"kqu-latn-za",kqv:"kqv-latn-id",kqw:"kqw-latn-pg",kqx:"kqx-latn-cm",kqy:"kqy-ethi-zz",kqz:"kqz-latn-za",kr:"kr-latn-zz",kra:"kra-deva-np",krb:"krb-latn-us",krc:"krc-cyrl-ru",krd:"krd-latn-tl",kre:"kre-latn-br",krf:"krf-latn-vu",krh:"krh-latn-ng",kri:"kri-latn-sl",krj:"krj-latn-ph",krk:"krk-cyrl-ru",krl:"krl-latn-ru",krn:"krn-latn-lr",krp:"krp-latn-ng",krr:"krr-khmr-kh",krs:"krs-latn-zz",krt:"krt-latn-ne",kru:"kru-deva-in",krv:"krv-khmr-kh",krw:"krw-latn-lr",krx:"krx-latn-sn",kry:"kry-latn-az",krz:"krz-latn-id",ks:"ks-arab-in",ksa:"ksa-latn-ng",ksb:"ksb-latn-tz",ksc:"ksc-latn-ph",ksd:"ksd-latn-zz",kse:"kse-latn-pg",ksf:"ksf-latn-cm",ksg:"ksg-latn-sb",ksh:"ksh-latn-de",ksi:"ksi-latn-pg",ksj:"ksj-latn-zz",ksk:"ksk-latn-us",ksl:"ksl-latn-pg",ksm:"ksm-latn-ng",ksn:"ksn-latn-ph",kso:"kso-latn-ng",ksp:"ksp-latn-cf",ksq:"ksq-latn-ng",ksr:"ksr-latn-zz",kss:"kss-latn-lr",kst:"kst-latn-bf",ksu:"ksu-mymr-in",ksv:"ksv-latn-cd",ksw:"ksw-mymr-mm","ksw-latn":"ksw-latn-mm",ksx:"ksx-latn-id",ksz:"ksz-deva-in",kta:"kta-latn-vn",ktb:"ktb-ethi-zz",ktc:"ktc-latn-ng",ktd:"ktd-latn-au",ktf:"ktf-latn-cd",ktg:"ktg-latn-au",kth:"kth-latn-td",kti:"kti-latn-id",ktj:"ktj-latn-ci",ktk:"ktk-latn-pg",ktl:"ktl-arab-ir",ktm:"ktm-latn-zz",ktn:"ktn-latn-br",kto:"kto-latn-zz",ktp:"ktp-plrd-cn",ktq:"ktq-latn-ph",ktr:"ktr-latn-my",kts:"kts-latn-id",ktt:"ktt-latn-id",ktu:"ktu-latn-cd",ktv:"ktv-latn-vn",ktw:"ktw-latn-us",ktx:"ktx-latn-br",kty:"kty-latn-cd",ktz:"ktz-latn-na",ku:"ku-latn-tr","ku-arab":"ku-arab-iq","ku-lb":"ku-arab-lb","ku-yezi":"ku-yezi-ge",kub:"kub-latn-zz",kuc:"kuc-latn-id",kud:"kud-latn-zz",kue:"kue-latn-zz",kuf:"kuf-laoo-la",kug:"kug-latn-ng",kuh:"kuh-latn-ng",kui:"kui-latn-br",kuj:"kuj-latn-zz",kuk:"kuk-latn-id",kul:"kul-latn-ng",kum:"kum-cyrl-ru",kun:"kun-latn-zz",kuo:"kuo-latn-pg",kup:"kup-latn-zz",kuq:"kuq-latn-br",kus:"kus-latn-zz",kut:"kut-latn-ca",kuu:"kuu-latn-us",kuv:"kuv-latn-id",kuw:"kuw-latn-cf",kux:"kux-latn-au",kuy:"kuy-latn-au",kuz:"kuz-latn-cl",kv:"kv-cyrl-ru",kva:"kva-cyrl-ru",kvb:"kvb-latn-id",kvc:"kvc-latn-pg",kvd:"kvd-latn-id",kve:"kve-latn-my",kvf:"kvf-latn-td",kvg:"kvg-latn-zz",kvh:"kvh-latn-id",kvi:"kvi-latn-td",kvj:"kvj-latn-cm",kvl:"kvl-latn-mm",kvm:"kvm-latn-cm",kvn:"kvn-latn-co",kvo:"kvo-latn-id",kvp:"kvp-latn-id",kvq:"kvq-mymr-mm","kvq-latn":"kvq-latn-mm",kvr:"kvr-latn-id",kvt:"kvt-mymr-mm",kvv:"kvv-latn-id",kvw:"kvw-latn-id",kvx:"kvx-arab-pk",kvy:"kvy-kali-mm",kvz:"kvz-latn-id",kw:"kw-latn-gb",kwa:"kwa-latn-br",kwb:"kwb-latn-ng",kwc:"kwc-latn-cg",kwd:"kwd-latn-sb",kwe:"kwe-latn-id",kwf:"kwf-latn-sb",kwg:"kwg-latn-td",kwh:"kwh-latn-id",kwi:"kwi-latn-co",kwj:"kwj-latn-zz",kwk:"kwk-latn-ca",kwl:"kwl-latn-ng",kwm:"kwm-latn-na",kwn:"kwn-latn-na",kwo:"kwo-latn-zz",kwp:"kwp-latn-ci",kwq:"kwq-latn-zz",kwr:"kwr-latn-id",kws:"kws-latn-cd",kwt:"kwt-latn-id",kwu:"kwu-latn-cm",kwv:"kwv-latn-td",kww:"kww-latn-sr",kwy:"kwy-latn-cd",kwz:"kwz-latn-ao",kxa:"kxa-latn-zz",kxb:"kxb-latn-ci",kxc:"kxc-ethi-zz",kxd:"kxd-latn-bn","kxd-arab":"kxd-arab-bn",kxe:"kxe-latn-zz",kxf:"kxf-mymr-mm","kxf-latn":"kxf-latn-mm",kxi:"kxi-latn-my",kxj:"kxj-latn-td",kxk:"kxk-mymr-mm",kxl:"kxl-deva-in",kxm:"kxm-thai-th",kxn:"kxn-latn-my",kxo:"kxo-latn-br",kxp:"kxp-arab-pk",kxq:"kxq-latn-id",kxr:"kxr-latn-pg",kxt:"kxt-latn-pg",kxv:"kxv-orya-in","kxv-latn":"kxv-latn-in","kxv-telu":"kxv-telu-in",kxw:"kxw-latn-zz",kxx:"kxx-latn-cg",kxy:"kxy-latn-vn",kxz:"kxz-latn-zz",ky:"ky-cyrl-kg","ky-arab":"ky-arab-cn","ky-cn":"ky-arab-cn","ky-latn":"ky-latn-tr","ky-tr":"ky-latn-tr",kya:"kya-latn-tz",kyb:"kyb-latn-ph",kyc:"kyc-latn-pg",kyd:"kyd-latn-id",kye:"kye-latn-zz",kyf:"kyf-latn-ci",kyg:"kyg-latn-pg",kyh:"kyh-latn-us",kyi:"kyi-latn-my",kyj:"kyj-latn-ph",kyk:"kyk-latn-ph",kyl:"kyl-latn-us",kym:"kym-latn-cf",kyn:"kyn-latn-ph",kyo:"kyo-latn-id",kyq:"kyq-latn-td",kyr:"kyr-latn-br",kys:"kys-latn-my",kyt:"kyt-latn-id",kyu:"kyu-kali-mm","kyu-latn":"kyu-latn-mm","kyu-mymr":"kyu-mymr-mm",kyv:"kyv-deva-np",kyw:"kyw-deva-in","kyw-beng":"kyw-beng-in","kyw-orya":"kyw-orya-in",kyx:"kyx-latn-zz",kyy:"kyy-latn-pg",kyz:"kyz-latn-br",kza:"kza-latn-bf",kzb:"kzb-latn-id",kzc:"kzc-latn-ci",kzd:"kzd-latn-id",kze:"kze-latn-pg",kzf:"kzf-latn-id",kzh:"kzh-arab-zz",kzi:"kzi-latn-my",kzj:"kzj-latn-my",kzk:"kzk-latn-sb",kzl:"kzl-latn-id",kzm:"kzm-latn-id",kzn:"kzn-latn-mw",kzo:"kzo-latn-ga",kzp:"kzp-latn-id",kzr:"kzr-latn-zz",kzs:"kzs-latn-my",kzt:"kzt-latn-my",kzu:"kzu-latn-id",kzv:"kzv-latn-id",kzw:"kzw-latn-br",kzx:"kzx-latn-id",kzy:"kzy-latn-cd",kzz:"kzz-latn-id",la:"la-latn-va",laa:"laa-latn-ph",lab:"lab-lina-gr",lac:"lac-latn-mx",lad:"lad-hebr-il",lae:"lae-deva-in","lae-tibt":"lae-tibt-in",lag:"lag-latn-tz",lah:"lah-arab-pk",lai:"lai-latn-mw",laj:"laj-latn-ug",lal:"lal-latn-cd",lam:"lam-latn-zm",lan:"lan-latn-ng",lap:"lap-latn-td",laq:"laq-latn-vn",lar:"lar-latn-gh",las:"las-latn-zz",lau:"lau-latn-id",law:"law-latn-id",lax:"lax-latn-in","lax-beng":"lax-beng-in",laz:"laz-latn-pg",lb:"lb-latn-lu",lbb:"lbb-latn-pg",lbc:"lbc-lisu-cn",lbe:"lbe-cyrl-ru",lbf:"lbf-deva-in","lbf-tibt":"lbf-tibt-cn",lbi:"lbi-latn-cm",lbj:"lbj-tibt-in","lbj-arab":"lbj-arab-in",lbl:"lbl-latn-ph",lbm:"lbm-deva-in",lbn:"lbn-latn-la","lbn-laoo":"lbn-laoo-la",lbo:"lbo-laoo-la","lbo-latn":"lbo-latn-us",lbq:"lbq-latn-pg",lbr:"lbr-deva-np",lbt:"lbt-latn-vn",lbu:"lbu-latn-zz",lbv:"lbv-latn-pg",lbw:"lbw-latn-id",lbx:"lbx-latn-id",lby:"lby-latn-au",lbz:"lbz-latn-au",lcc:"lcc-latn-id",lcd:"lcd-latn-id",lce:"lce-latn-id",lcf:"lcf-latn-id",lch:"lch-latn-ao",lcl:"lcl-latn-id",lcm:"lcm-latn-zz",lcp:"lcp-thai-cn",lcq:"lcq-latn-id",lcs:"lcs-latn-id",lda:"lda-latn-ci",ldb:"ldb-latn-zz",ldd:"ldd-latn-ng",ldg:"ldg-latn-ng",ldh:"ldh-latn-ng",ldi:"ldi-latn-cg",ldj:"ldj-latn-ng",ldk:"ldk-latn-ng",ldl:"ldl-latn-ng",ldm:"ldm-latn-gn",ldn:"ldn-latn-001",ldo:"ldo-latn-ng",ldp:"ldp-latn-ng",ldq:"ldq-latn-ng",lea:"lea-latn-cd",leb:"leb-latn-zm",lec:"lec-latn-bo",led:"led-latn-zz",lee:"lee-latn-zz",lef:"lef-latn-gh",leh:"leh-latn-zm",lei:"lei-latn-pg",lej:"lej-latn-cd",lek:"lek-latn-pg",lel:"lel-latn-cd",lem:"lem-latn-zz",len:"len-latn-hn",leo:"leo-latn-cm",lep:"lep-lepc-in",leq:"leq-latn-zz",ler:"ler-latn-pg",les:"les-latn-cd",let:"let-latn-pg",leu:"leu-latn-zz",lev:"lev-latn-id",lew:"lew-latn-id",lex:"lex-latn-id",ley:"ley-latn-id",lez:"lez-cyrl-ru",lfa:"lfa-latn-cm",lfn:"lfn-latn-001","lfn-cyrl":"lfn-cyrl-001",lg:"lg-latn-ug",lga:"lga-latn-sb",lgb:"lgb-latn-sb",lgg:"lgg-latn-zz",lgh:"lgh-latn-vn",lgi:"lgi-latn-id",lgk:"lgk-latn-vu",lgl:"lgl-latn-sb",lgm:"lgm-latn-cd",lgn:"lgn-latn-et",lgo:"lgo-latn-ss",lgq:"lgq-latn-gh",lgr:"lgr-latn-sb",lgt:"lgt-latn-pg",lgu:"lgu-latn-sb",lgz:"lgz-latn-cd",lha:"lha-latn-vn",lhh:"lhh-latn-id",lhi:"lhi-latn-cn",lhm:"lhm-deva-np",lhn:"lhn-latn-my",lhs:"lhs-syrc-sy",lht:"lht-latn-vu",lhu:"lhu-latn-cn",li:"li-latn-nl",lia:"lia-latn-zz",lib:"lib-latn-pg",lic:"lic-latn-cn",lid:"lid-latn-zz",lie:"lie-latn-cd",lif:"lif-deva-np","lif-limb":"lif-limb-in",lig:"lig-latn-zz",lih:"lih-latn-zz",lij:"lij-latn-it",lik:"lik-latn-cd",lil:"lil-latn-ca",lio:"lio-latn-id",lip:"lip-latn-gh",liq:"liq-latn-et",lir:"lir-latn-lr",lis:"lis-lisu-cn",liu:"liu-latn-sd",liv:"liv-latn-lv",liw:"liw-latn-id",lix:"lix-latn-id",liy:"liy-latn-cf",liz:"liz-latn-cd",lja:"lja-latn-au",lje:"lje-latn-id",lji:"lji-latn-id",ljl:"ljl-latn-id",ljp:"ljp-latn-id",ljw:"ljw-latn-au",ljx:"ljx-latn-au",lka:"lka-latn-tl",lkb:"lkb-latn-ke",lkc:"lkc-latn-vn",lkd:"lkd-latn-br",lke:"lke-latn-ug",lkh:"lkh-tibt-bt",lki:"lki-arab-ir",lkj:"lkj-latn-my",lkl:"lkl-latn-pg",lkm:"lkm-latn-au",lkn:"lkn-latn-vu",lko:"lko-latn-ke",lkr:"lkr-latn-ss",lks:"lks-latn-ke",lkt:"lkt-latn-us",lku:"lku-latn-au",lky:"lky-latn-ss",lla:"lla-latn-ng",llb:"llb-latn-mz",llc:"llc-latn-gn",lld:"lld-latn-it",lle:"lle-latn-zz",llf:"llf-latn-pg",llg:"llg-latn-id",lli:"lli-latn-cg",llj:"llj-latn-au",llk:"llk-latn-my",lll:"lll-latn-pg",llm:"llm-latn-id",lln:"lln-latn-zz",llp:"llp-latn-vu",llq:"llq-latn-id",llu:"llu-latn-sb",llx:"llx-latn-fj",lma:"lma-latn-gn",lmb:"lmb-latn-vu",lmc:"lmc-latn-au",lmd:"lmd-latn-sd",lme:"lme-latn-td",lmf:"lmf-latn-id",lmg:"lmg-latn-pg",lmh:"lmh-deva-np",lmi:"lmi-latn-cd",lmj:"lmj-latn-id",lmk:"lmk-latn-in","lmk-mymr":"lmk-mymr-in",lml:"lml-latn-vu",lmn:"lmn-telu-in",lmo:"lmo-latn-it",lmp:"lmp-latn-zz",lmq:"lmq-latn-id",lmr:"lmr-latn-id",lmu:"lmu-latn-vu",lmv:"lmv-latn-fj",lmw:"lmw-latn-us",lmx:"lmx-latn-cm",lmy:"lmy-latn-id",ln:"ln-latn-cd",lna:"lna-latn-cf",lnb:"lnb-latn-na",lnd:"lnd-latn-id",lnh:"lnh-latn-my",lni:"lni-latn-pg",lnj:"lnj-latn-au",lnl:"lnl-latn-cf",lnm:"lnm-latn-pg",lnn:"lnn-latn-vu",lns:"lns-latn-zz",lnu:"lnu-latn-zz",lnw:"lnw-latn-au",lnz:"lnz-latn-cd",lo:"lo-laoo-la",loa:"loa-latn-id",lob:"lob-latn-bf",loc:"loc-latn-ph",loe:"loe-latn-id",log:"log-latn-cd",loh:"loh-latn-ss",loi:"loi-latn-ci",loj:"loj-latn-zz",lok:"lok-latn-zz",lol:"lol-latn-cd",lom:"lom-latn-lr",lon:"lon-latn-mw",loo:"loo-latn-cd",lop:"lop-latn-ng",loq:"loq-latn-cd",lor:"lor-latn-zz",los:"los-latn-zz",lot:"lot-latn-ss","lot-arab":"lot-arab-ss",lou:"lou-latn-us",low:"low-latn-my",lox:"lox-latn-id",loy:"loy-deva-np","loy-tibt":"loy-tibt-np",loz:"loz-latn-zm",lpa:"lpa-latn-vu",lpe:"lpe-latn-id",lpn:"lpn-latn-mm",lpo:"lpo-plrd-cn","lpo-lisu":"lpo-lisu-cn",lpx:"lpx-latn-ss",lqr:"lqr-latn-ss",lra:"lra-latn-my",lrc:"lrc-arab-ir",lrg:"lrg-latn-au",lri:"lri-latn-ke",lrk:"lrk-arab-pk",lrl:"lrl-arab-ir",lrm:"lrm-latn-ke",lrn:"lrn-latn-id",lro:"lro-latn-sd",lrt:"lrt-latn-id",lrv:"lrv-latn-vu",lrz:"lrz-latn-vu",lsa:"lsa-arab-ir",lsd:"lsd-hebr-il",lse:"lse-latn-cd",lsi:"lsi-latn-mm",lsm:"lsm-latn-ug",lsr:"lsr-latn-pg",lss:"lss-arab-pk",lt:"lt-latn-lt",ltg:"ltg-latn-lv",lth:"lth-latn-ug",lti:"lti-latn-id",ltn:"ltn-latn-br",lto:"lto-latn-ke",lts:"lts-latn-ke",ltu:"ltu-latn-id",lu:"lu-latn-cd",lua:"lua-latn-cd",luc:"luc-latn-ug",lud:"lud-latn-ru",lue:"lue-latn-zm",luf:"luf-latn-pg",lui:"lui-latn-us",luj:"luj-latn-cd",luk:"luk-tibt-bt",lul:"lul-latn-ss",lum:"lum-latn-ao",lun:"lun-latn-zm",luo:"luo-latn-ke",lup:"lup-latn-ga",luq:"luq-latn-cu",lur:"lur-latn-id",lus:"lus-latn-in","lus-beng":"lus-beng-bd","lus-brai":"lus-brai-in",lut:"lut-latn-us",luu:"luu-deva-np",luv:"luv-arab-om",luw:"luw-latn-cm",luy:"luy-latn-ke",luz:"luz-arab-ir",lv:"lv-latn-lv",lva:"lva-latn-tl",lvi:"lvi-latn-la",lvk:"lvk-latn-sb",lvu:"lvu-latn-id",lwa:"lwa-latn-cd",lwe:"lwe-latn-id",lwg:"lwg-latn-ke",lwh:"lwh-latn-vn",lwl:"lwl-thai-th",lwm:"lwm-thai-cn",lwo:"lwo-latn-ss","lwo-za":"lwo-latn-za",lwt:"lwt-latn-id",lww:"lww-latn-vu",lxm:"lxm-latn-pg",lya:"lya-tibt-bt",lyn:"lyn-latn-zm",lzh:"lzh-hans-cn",lzl:"lzl-latn-vu",lzn:"lzn-latn-mm",lzz:"lzz-latn-tr",maa:"maa-latn-mx",mab:"mab-latn-mx",mad:"mad-latn-id",mae:"mae-latn-ng",maf:"maf-latn-cm",mag:"mag-deva-in",mai:"mai-deva-in",maj:"maj-latn-mx",mak:"mak-latn-id",mam:"mam-latn-gt",man:"man-latn-gm","man-gn":"man-nkoo-gn","man-nkoo":"man-nkoo-gn",maq:"maq-latn-mx",mas:"mas-latn-ke",mat:"mat-latn-mx",mau:"mau-latn-mx",mav:"mav-latn-br",maw:"maw-latn-zz",max:"max-latn-id",maz:"maz-latn-mx",mba:"mba-latn-ph",mbb:"mbb-latn-ph",mbc:"mbc-latn-br",mbd:"mbd-latn-ph",mbf:"mbf-latn-sg",mbh:"mbh-latn-zz",mbi:"mbi-latn-ph",mbj:"mbj-latn-br",mbk:"mbk-latn-pg",mbl:"mbl-latn-br",mbm:"mbm-latn-cg",mbn:"mbn-latn-co",mbo:"mbo-latn-zz",mbp:"mbp-latn-co",mbq:"mbq-latn-zz",mbr:"mbr-latn-co",mbs:"mbs-latn-ph",mbt:"mbt-latn-ph",mbu:"mbu-latn-zz",mbv:"mbv-latn-gn",mbw:"mbw-latn-zz",mbx:"mbx-latn-pg",mby:"mby-arab-pk",mbz:"mbz-latn-mx",mca:"mca-latn-py",mcb:"mcb-latn-pe",mcc:"mcc-latn-pg",mcd:"mcd-latn-pe",mce:"mce-latn-mx",mcf:"mcf-latn-pe",mcg:"mcg-latn-ve",mch:"mch-latn-ve",mci:"mci-latn-zz",mcj:"mcj-latn-ng",mck:"mck-latn-ao",mcl:"mcl-latn-co",mcm:"mcm-latn-my",mcn:"mcn-latn-td",mco:"mco-latn-mx",mcp:"mcp-latn-zz",mcq:"mcq-latn-zz",mcr:"mcr-latn-zz",mcs:"mcs-latn-cm",mct:"mct-latn-cm",mcu:"mcu-latn-zz",mcv:"mcv-latn-pg",mcw:"mcw-latn-td",mcx:"mcx-latn-cf",mcy:"mcy-latn-pg",mcz:"mcz-latn-pg",mda:"mda-latn-zz",mdb:"mdb-latn-pg",mdc:"mdc-latn-pg",mdd:"mdd-latn-cm",mde:"mde-arab-zz",mdf:"mdf-cyrl-ru",mdg:"mdg-latn-td",mdh:"mdh-latn-ph",mdi:"mdi-latn-cd",mdj:"mdj-latn-zz",mdk:"mdk-latn-cd",mdm:"mdm-latn-cd",mdn:"mdn-latn-cf",mdp:"mdp-latn-cd",mdq:"mdq-latn-cd",mdr:"mdr-latn-id",mds:"mds-latn-pg",mdt:"mdt-latn-cg",mdu:"mdu-latn-cg",mdv:"mdv-latn-mx",mdw:"mdw-latn-cg",mdx:"mdx-ethi-zz",mdy:"mdy-ethi-et","mdy-latn":"mdy-latn-et",mdz:"mdz-latn-br",mea:"mea-latn-cm",meb:"meb-latn-pg",mec:"mec-latn-au",med:"med-latn-zz",mee:"mee-latn-zz",meh:"meh-latn-mx",mej:"mej-latn-id",mek:"mek-latn-zz",mel:"mel-latn-my",mem:"mem-latn-au",men:"men-latn-sl",meo:"meo-latn-my","meo-arab":"meo-arab-my",mep:"mep-latn-au",meq:"meq-latn-cm",mer:"mer-latn-ke",mes:"mes-latn-td",met:"met-latn-zz",meu:"meu-latn-zz",mev:"mev-latn-lr",mew:"mew-latn-ng",mey:"mey-latn-mr","mey-arab":"mey-arab-mr",mez:"mez-latn-us",mfa:"mfa-arab-th",mfb:"mfb-latn-id",mfc:"mfc-latn-cd",mfd:"mfd-latn-cm",mfe:"mfe-latn-mu",mff:"mff-latn-cm",mfg:"mfg-latn-gn","mfg-arab":"mfg-arab-gn",mfh:"mfh-latn-cm",mfi:"mfi-arab-cm","mfi-latn":"mfi-latn-cm",mfj:"mfj-latn-cm",mfk:"mfk-latn-cm",mfl:"mfl-latn-ng",mfm:"mfm-latn-ng",mfn:"mfn-latn-zz",mfo:"mfo-latn-zz",mfp:"mfp-latn-id",mfq:"mfq-latn-zz",mfr:"mfr-latn-au",mft:"mft-latn-pg",mfu:"mfu-latn-ao",mfv:"mfv-latn-gw",mfw:"mfw-latn-pg",mfx:"mfx-latn-et","mfx-ethi":"mfx-ethi-et",mfy:"mfy-latn-mx",mfz:"mfz-latn-ss",mg:"mg-latn-mg",mgb:"mgb-latn-td",mgc:"mgc-latn-ss",mgd:"mgd-latn-ss","mgd-arab":"mgd-arab-ss",mge:"mge-latn-td",mgf:"mgf-latn-id",mgg:"mgg-latn-cm",mgh:"mgh-latn-mz",mgi:"mgi-latn-ng",mgj:"mgj-latn-ng",mgk:"mgk-latn-id",mgl:"mgl-latn-zz",mgm:"mgm-latn-tl",mgn:"mgn-latn-cf",mgo:"mgo-latn-cm",mgp:"mgp-deva-np",mgq:"mgq-latn-tz",mgr:"mgr-latn-zm",mgs:"mgs-latn-tz",mgt:"mgt-latn-pg",mgu:"mgu-latn-pg",mgv:"mgv-latn-tz",mgw:"mgw-latn-tz",mgy:"mgy-latn-tz",mgz:"mgz-latn-tz",mh:"mh-latn-mh",mhb:"mhb-latn-ga",mhc:"mhc-latn-mx",mhd:"mhd-latn-tz",mhe:"mhe-latn-my",mhf:"mhf-latn-pg",mhg:"mhg-latn-au",mhi:"mhi-latn-zz",mhj:"mhj-arab-af",mhk:"mhk-latn-cm",mhl:"mhl-latn-zz",mhm:"mhm-latn-mz",mhn:"mhn-latn-it",mho:"mho-latn-zm",mhp:"mhp-latn-id",mhq:"mhq-latn-us",mhs:"mhs-latn-id",mht:"mht-latn-ve",mhu:"mhu-latn-in",mhw:"mhw-latn-bw",mhx:"mhx-latn-mm",mhy:"mhy-latn-id",mhz:"mhz-latn-id",mi:"mi-latn-nz",mia:"mia-latn-us",mib:"mib-latn-mx",mic:"mic-latn-ca",mid:"mid-mand-iq",mie:"mie-latn-mx",mif:"mif-latn-zz",mig:"mig-latn-mx",mih:"mih-latn-mx",mii:"mii-latn-mx",mij:"mij-latn-cm",mik:"mik-latn-us",mil:"mil-latn-mx",mim:"mim-latn-mx",min:"min-latn-id",mio:"mio-latn-mx",mip:"mip-latn-mx",miq:"miq-latn-ni",mir:"mir-latn-mx",mit:"mit-latn-mx",miu:"miu-latn-mx",miw:"miw-latn-zz",mix:"mix-latn-mx",miy:"miy-latn-mx",miz:"miz-latn-mx",mjb:"mjb-latn-tl",mjc:"mjc-latn-mx",mjd:"mjd-latn-us",mje:"mje-latn-td",mjg:"mjg-latn-cn",mjh:"mjh-latn-tz",mji:"mji-latn-cn",mjj:"mjj-latn-pg",mjk:"mjk-latn-pg",mjl:"mjl-deva-in","mjl-takr":"mjl-takr-in",mjm:"mjm-latn-pg",mjn:"mjn-latn-pg",mjq:"mjq-mlym-in",mjr:"mjr-mlym-in",mjs:"mjs-latn-ng",mjt:"mjt-deva-in","mjt-beng":"mjt-beng-bd",mju:"mju-telu-in",mjv:"mjv-mlym-in",mjw:"mjw-latn-in",mjx:"mjx-latn-bd","mjx-beng":"mjx-beng-bd",mjy:"mjy-latn-us",mjz:"mjz-deva-np",mk:"mk-cyrl-mk",mka:"mka-latn-ci",mkb:"mkb-deva-in",mkc:"mkc-latn-pg",mke:"mke-deva-in",mkf:"mkf-latn-ng",mki:"mki-arab-zz",mkj:"mkj-latn-fm",mkk:"mkk-latn-cm",mkl:"mkl-latn-zz",mkm:"mkm-thai-th",mkn:"mkn-latn-id",mko:"mko-latn-ng",mkp:"mkp-latn-zz",mkr:"mkr-latn-pg",mks:"mks-latn-mx",mkt:"mkt-latn-nc",mku:"mku-latn-gn",mkv:"mkv-latn-vu",mkw:"mkw-latn-zz",mkx:"mkx-latn-ph",mky:"mky-latn-id",mkz:"mkz-latn-tl",ml:"ml-mlym-in",mla:"mla-latn-vu",mlb:"mlb-latn-cm",mlc:"mlc-latn-vn",mle:"mle-latn-zz",mlf:"mlf-thai-la","mlf-latn":"mlf-latn-la",mlh:"mlh-latn-pg",mli:"mli-latn-id",mlj:"mlj-latn-td",mlk:"mlk-latn-ke",mll:"mll-latn-vu",mln:"mln-latn-sb",mlo:"mlo-latn-sn",mlp:"mlp-latn-zz",mlq:"mlq-latn-sn","mlq-arab":"mlq-arab-sn",mlr:"mlr-latn-cm",mls:"mls-latn-sd",mlu:"mlu-latn-sb",mlv:"mlv-latn-vu",mlw:"mlw-latn-cm",mlx:"mlx-latn-vu",mlz:"mlz-latn-ph",mma:"mma-latn-ng",mmb:"mmb-latn-id",mmc:"mmc-latn-mx",mmd:"mmd-latn-cn","mmd-hans":"mmd-hans-cn","mmd-hant":"mmd-hant-cn",mme:"mme-latn-vu",mmf:"mmf-latn-ng",mmg:"mmg-latn-vu",mmh:"mmh-latn-br",mmi:"mmi-latn-pg",mmm:"mmm-latn-vu",mmn:"mmn-latn-ph",mmo:"mmo-latn-zz",mmp:"mmp-latn-pg",mmq:"mmq-latn-pg",mmr:"mmr-latn-cn",mmt:"mmt-latn-pg",mmu:"mmu-latn-zz",mmv:"mmv-latn-br",mmw:"mmw-latn-vu",mmx:"mmx-latn-zz",mmy:"mmy-latn-td",mmz:"mmz-latn-cd",mn:"mn-cyrl-mn","mn-cn":"mn-mong-cn","mn-mong":"mn-mong-cn",mna:"mna-latn-zz",mnb:"mnb-latn-id",mnd:"mnd-latn-br",mne:"mne-latn-td",mnf:"mnf-latn-zz",mng:"mng-latn-vn",mnh:"mnh-latn-cd",mni:"mni-beng-in",mnj:"mnj-arab-af",mnl:"mnl-latn-vu",mnm:"mnm-latn-pg",mnn:"mnn-latn-vn",mnp:"mnp-latn-cn",mnq:"mnq-latn-my",mnr:"mnr-latn-us",mns:"mns-cyrl-ru",mnu:"mnu-latn-id",mnv:"mnv-latn-sb",mnw:"mnw-mymr-mm",mnx:"mnx-latn-id",mny:"mny-latn-mz",mnz:"mnz-latn-id",mo:"mo-latn-ro",moa:"moa-latn-zz",moc:"moc-latn-ar",mod:"mod-latn-us",moe:"moe-latn-ca",mog:"mog-latn-id",moh:"moh-latn-ca",moi:"moi-latn-ng",moj:"moj-latn-cg",mok:"mok-latn-id",mom:"mom-latn-ni",moo:"moo-latn-vn",mop:"mop-latn-bz",moq:"moq-latn-id",mor:"mor-latn-sd",mos:"mos-latn-bf",mot:"mot-latn-co",mou:"mou-latn-td",mov:"mov-latn-us",mow:"mow-latn-cg",mox:"mox-latn-zz",moy:"moy-latn-et","moy-ethi":"moy-ethi-et",moz:"moz-latn-td",mpa:"mpa-latn-tz",mpb:"mpb-latn-au",mpc:"mpc-latn-au",mpd:"mpd-latn-br",mpe:"mpe-latn-et","mpe-ethi":"mpe-ethi-et",mpg:"mpg-latn-td",mph:"mph-latn-au",mpi:"mpi-latn-cm",mpj:"mpj-latn-au",mpk:"mpk-latn-td",mpl:"mpl-latn-pg",mpm:"mpm-latn-mx",mpn:"mpn-latn-pg",mpo:"mpo-latn-pg",mpp:"mpp-latn-zz",mpq:"mpq-latn-br",mpr:"mpr-latn-sb",mps:"mps-latn-zz",mpt:"mpt-latn-zz",mpu:"mpu-latn-br",mpv:"mpv-latn-pg",mpw:"mpw-latn-br",mpx:"mpx-latn-zz",mpy:"mpy-latn-id",mpz:"mpz-thai-th",mqa:"mqa-latn-id",mqb:"mqb-latn-cm",mqc:"mqc-latn-id",mqe:"mqe-latn-pg",mqf:"mqf-latn-id",mqg:"mqg-latn-id",mqh:"mqh-latn-mx",mqi:"mqi-latn-id",mqj:"mqj-latn-id",mqk:"mqk-latn-ph",mql:"mql-latn-zz",mqm:"mqm-latn-pf",mqn:"mqn-latn-id",mqo:"mqo-latn-id",mqp:"mqp-latn-id",mqq:"mqq-latn-my",mqr:"mqr-latn-id",mqs:"mqs-latn-id",mqu:"mqu-latn-ss",mqv:"mqv-latn-pg",mqw:"mqw-latn-pg",mqx:"mqx-latn-id","mqx-bugi":"mqx-bugi-id",mqy:"mqy-latn-id",mqz:"mqz-latn-pg",mr:"mr-deva-in",mra:"mra-thai-th",mrb:"mrb-latn-vu",mrc:"mrc-latn-us",mrd:"mrd-deva-np",mrf:"mrf-latn-id",mrg:"mrg-latn-in","mrg-beng":"mrg-beng-in","mrg-deva":"mrg-deva-in",mrh:"mrh-latn-in",mrj:"mrj-cyrl-ru",mrk:"mrk-latn-nc",mrl:"mrl-latn-fm",mrm:"mrm-latn-vu",mrn:"mrn-latn-sb",mro:"mro-mroo-bd",mrp:"mrp-latn-vu",mrq:"mrq-latn-pf",mrr:"mrr-deva-in",mrs:"mrs-latn-vu",mrt:"mrt-latn-ng",mru:"mru-latn-cm",mrv:"mrv-latn-pf",mrw:"mrw-latn-ph","mrw-arab":"mrw-arab-ph",mrx:"mrx-latn-id",mry:"mry-latn-ph",mrz:"mrz-latn-id",ms:"ms-latn-my","ms-cc":"ms-arab-cc",msb:"msb-latn-ph",msc:"msc-latn-gn",mse:"mse-latn-td",msf:"msf-latn-id",msg:"msg-latn-id",msh:"msh-latn-mg",msi:"msi-latn-my",msj:"msj-latn-cd",msk:"msk-latn-ph",msl:"msl-latn-id",msm:"msm-latn-ph",msn:"msn-latn-vu",mso:"mso-latn-id",msp:"msp-latn-br",msq:"msq-latn-nc",mss:"mss-latn-id",msu:"msu-latn-pg",msv:"msv-latn-cm",msw:"msw-latn-gw",msx:"msx-latn-pg",msy:"msy-latn-pg",msz:"msz-latn-pg",mt:"mt-latn-mt",mta:"mta-latn-ph",mtb:"mtb-latn-ci",mtc:"mtc-latn-zz",mtd:"mtd-latn-id",mte:"mte-latn-sb",mtf:"mtf-latn-zz",mtg:"mtg-latn-id",mth:"mth-latn-id",mti:"mti-latn-zz",mtj:"mtj-latn-id",mtk:"mtk-latn-cm",mtl:"mtl-latn-ng",mtm:"mtm-cyrl-ru",mtn:"mtn-latn-ni",mto:"mto-latn-mx",mtp:"mtp-latn-bo",mtq:"mtq-latn-vn",mtr:"mtr-deva-in",mts:"mts-latn-pe",mtt:"mtt-latn-vu",mtu:"mtu-latn-mx",mtv:"mtv-latn-pg",mtw:"mtw-latn-ph",mtx:"mtx-latn-mx",mty:"mty-latn-pg",mua:"mua-latn-cm",mub:"mub-latn-td",muc:"muc-latn-cm",mud:"mud-cyrl-ru",mue:"mue-latn-ec",mug:"mug-latn-cm",muh:"muh-latn-ss",mui:"mui-latn-id",muj:"muj-latn-td",muk:"muk-tibt-np",mum:"mum-latn-pg",muo:"muo-latn-cm",muq:"muq-latn-cn",mur:"mur-latn-zz",mus:"mus-latn-us",mut:"mut-deva-in",muu:"muu-latn-ke",muv:"muv-taml-in",mux:"mux-latn-pg",muy:"muy-latn-cm",muz:"muz-ethi-et","muz-latn":"muz-latn-et",mva:"mva-latn-zz",mvd:"mvd-latn-id",mvf:"mvf-mong-cn","mvf-phag":"mvf-phag-cn",mvg:"mvg-latn-mx",mvh:"mvh-latn-td",mvk:"mvk-latn-pg",mvl:"mvl-latn-au",mvn:"mvn-latn-zz",mvo:"mvo-latn-sb",mvp:"mvp-latn-id",mvq:"mvq-latn-pg",mvr:"mvr-latn-id",mvs:"mvs-latn-id",mvt:"mvt-latn-vu",mvu:"mvu-latn-td",mvv:"mvv-latn-my",mvw:"mvw-latn-tz",mvx:"mvx-latn-id",mvy:"mvy-arab-pk",mvz:"mvz-ethi-et","mvz-arab":"mvz-arab-et",mwa:"mwa-latn-pg",mwb:"mwb-latn-pg",mwc:"mwc-latn-pg",mwe:"mwe-latn-tz",mwf:"mwf-latn-au",mwg:"mwg-latn-pg",mwh:"mwh-latn-pg",mwi:"mwi-latn-vu",mwk:"mwk-latn-ml",mwl:"mwl-latn-pt",mwm:"mwm-latn-td",mwn:"mwn-latn-zm",mwo:"mwo-latn-vu",mwp:"mwp-latn-au",mwq:"mwq-latn-mm",mwr:"mwr-deva-in",mws:"mws-latn-ke",mwt:"mwt-mymr-mm","mwt-thai":"mwt-thai-th",mwu:"mwu-latn-ss",mwv:"mwv-latn-id",mww:"mww-hmnp-us",mwz:"mwz-latn-cd",mxa:"mxa-latn-mx",mxb:"mxb-latn-mx",mxc:"mxc-latn-zw",mxd:"mxd-latn-id",mxe:"mxe-latn-vu",mxf:"mxf-latn-cm",mxg:"mxg-latn-ao",mxh:"mxh-latn-cd",mxi:"mxi-latn-es",mxj:"mxj-latn-in",mxk:"mxk-latn-pg",mxl:"mxl-latn-bj",mxm:"mxm-latn-zz",mxn:"mxn-latn-id",mxo:"mxo-latn-zm",mxp:"mxp-latn-mx",mxq:"mxq-latn-mx",mxr:"mxr-latn-my",mxs:"mxs-latn-mx",mxt:"mxt-latn-mx",mxu:"mxu-latn-cm",mxv:"mxv-latn-mx",mxw:"mxw-latn-pg",mxx:"mxx-latn-ci",mxy:"mxy-latn-mx",mxz:"mxz-latn-id",my:"my-mymr-mm",myb:"myb-latn-td",myc:"myc-latn-cd",mye:"mye-latn-ga",myf:"myf-latn-et",myg:"myg-latn-cm",myh:"myh-latn-us",myj:"myj-latn-ss",myk:"myk-latn-zz",myl:"myl-latn-id",mym:"mym-ethi-zz",myp:"myp-latn-br",myr:"myr-latn-pe",myu:"myu-latn-br",myv:"myv-cyrl-ru",myw:"myw-latn-zz",myx:"myx-latn-ug",myy:"myy-latn-co",myz:"myz-mand-ir",mza:"mza-latn-mx",mzd:"mzd-latn-cm",mze:"mze-latn-pg",mzh:"mzh-latn-ar",mzi:"mzi-latn-mx",mzj:"mzj-latn-lr",mzk:"mzk-latn-zz",mzl:"mzl-latn-mx",mzm:"mzm-latn-zz",mzn:"mzn-arab-ir",mzo:"mzo-latn-br",mzp:"mzp-latn-zz",mzq:"mzq-latn-id",mzr:"mzr-latn-br",mzt:"mzt-latn-my",mzu:"mzu-latn-pg",mzv:"mzv-latn-cf",mzw:"mzw-latn-zz",mzx:"mzx-latn-gy",mzz:"mzz-latn-zz",na:"na-latn-nr",naa:"naa-latn-id",nab:"nab-latn-br",nac:"nac-latn-zz",nae:"nae-latn-id",naf:"naf-latn-zz",nag:"nag-latn-in",naj:"naj-latn-gn",nak:"nak-latn-zz",nal:"nal-latn-pg",nam:"nam-latn-au",nan:"nan-hans-cn",nao:"nao-deva-np",nap:"nap-latn-it",naq:"naq-latn-na",nar:"nar-latn-ng",nas:"nas-latn-zz",nat:"nat-latn-ng",naw:"naw-latn-gh",nax:"nax-latn-pg",nay:"nay-latn-au",naz:"naz-latn-mx",nb:"nb-latn-no",nba:"nba-latn-ao",nbb:"nbb-latn-ng",nbc:"nbc-latn-in",nbd:"nbd-latn-cd",nbe:"nbe-latn-in",nbh:"nbh-latn-ng",nbi:"nbi-latn-in",nbj:"nbj-latn-au",nbk:"nbk-latn-pg",nbm:"nbm-latn-cf",nbn:"nbn-latn-id",nbo:"nbo-latn-ng",nbp:"nbp-latn-ng",nbq:"nbq-latn-id",nbr:"nbr-latn-ng",nbt:"nbt-latn-in","nbt-deva":"nbt-deva-in",nbu:"nbu-latn-in",nbv:"nbv-latn-cm",nbw:"nbw-latn-cd",nby:"nby-latn-pg",nca:"nca-latn-zz",ncb:"ncb-latn-in","ncb-deva":"ncb-deva-in",ncc:"ncc-latn-pg",ncd:"ncd-deva-np",nce:"nce-latn-zz",ncf:"ncf-latn-zz",ncg:"ncg-latn-ca",nch:"nch-latn-mx",nci:"nci-latn-mx",ncj:"ncj-latn-mx",nck:"nck-latn-au",ncl:"ncl-latn-mx",ncm:"ncm-latn-pg",ncn:"ncn-latn-pg",nco:"nco-latn-zz",ncq:"ncq-laoo-la","ncq-thai":"ncq-thai-la",ncr:"ncr-latn-cm",nct:"nct-latn-in","nct-beng":"nct-beng-in",ncu:"ncu-latn-zz",ncx:"ncx-latn-mx",ncz:"ncz-latn-us",nd:"nd-latn-zw",nda:"nda-latn-cg",ndb:"ndb-latn-cm",ndc:"ndc-latn-mz",ndd:"ndd-latn-ng",ndf:"ndf-cyrl-ru",ndg:"ndg-latn-tz",ndh:"ndh-latn-tz",ndi:"ndi-latn-ng",ndj:"ndj-latn-tz",ndk:"ndk-latn-cd",ndl:"ndl-latn-cd",ndm:"ndm-latn-td",ndn:"ndn-latn-cg",ndp:"ndp-latn-ug",ndq:"ndq-latn-ao",ndr:"ndr-latn-ng",nds:"nds-latn-de",ndt:"ndt-latn-cd",ndu:"ndu-latn-cm",ndv:"ndv-latn-sn",ndw:"ndw-latn-cd",ndx:"ndx-latn-id",ndy:"ndy-latn-cf","ndy-td":"ndy-latn-td",ndz:"ndz-latn-ss",ne:"ne-deva-np",nea:"nea-latn-id",neb:"neb-latn-zz",nec:"nec-latn-id",ned:"ned-latn-ng",nee:"nee-latn-nc",neg:"neg-cyrl-ru",neh:"neh-tibt-bt",nei:"nei-xsux-tr",nej:"nej-latn-pg",nek:"nek-latn-nc",nem:"nem-latn-nc",nen:"nen-latn-nc",neo:"neo-latn-vn",neq:"neq-latn-mx",ner:"ner-latn-id",net:"net-latn-pg",neu:"neu-latn-001",new:"new-deva-np",nex:"nex-latn-zz",ney:"ney-latn-ci",nez:"nez-latn-us",nfa:"nfa-latn-id",nfd:"nfd-latn-ng",nfl:"nfl-latn-sb",nfr:"nfr-latn-zz",nfu:"nfu-latn-cm",ng:"ng-latn-na",nga:"nga-latn-zz",ngb:"ngb-latn-zz",ngc:"ngc-latn-cd",ngd:"ngd-latn-cf",nge:"nge-latn-cm",ngg:"ngg-latn-cf",ngh:"ngh-latn-za",ngi:"ngi-latn-ng",ngj:"ngj-latn-cm",ngk:"ngk-latn-au",ngl:"ngl-latn-mz",ngm:"ngm-latn-fm",ngn:"ngn-latn-cm",ngp:"ngp-latn-tz",ngq:"ngq-latn-tz",ngr:"ngr-latn-sb",ngs:"ngs-latn-ng",ngt:"ngt-laoo-la",ngu:"ngu-latn-mx",ngv:"ngv-latn-cm",ngw:"ngw-latn-ng",ngx:"ngx-latn-ng",ngy:"ngy-latn-cm",ngz:"ngz-latn-cg",nha:"nha-latn-au",nhb:"nhb-latn-zz",nhc:"nhc-latn-mx",nhd:"nhd-latn-py",nhe:"nhe-latn-mx",nhf:"nhf-latn-au",nhg:"nhg-latn-mx",nhi:"nhi-latn-mx",nhk:"nhk-latn-mx",nhm:"nhm-latn-mx",nhn:"nhn-latn-mx",nho:"nho-latn-pg",nhp:"nhp-latn-mx",nhq:"nhq-latn-mx",nhr:"nhr-latn-bw",nht:"nht-latn-mx",nhu:"nhu-latn-cm",nhv:"nhv-latn-mx",nhw:"nhw-latn-mx",nhx:"nhx-latn-mx",nhy:"nhy-latn-mx",nhz:"nhz-latn-mx",nia:"nia-latn-id",nib:"nib-latn-pg",nid:"nid-latn-au",nie:"nie-latn-td",nif:"nif-latn-zz",nig:"nig-latn-au",nih:"nih-latn-tz",nii:"nii-latn-zz",nij:"nij-latn-id",nil:"nil-latn-id",nim:"nim-latn-tz",nin:"nin-latn-zz",nio:"nio-cyrl-ru",niq:"niq-latn-ke",nir:"nir-latn-id",nis:"nis-latn-pg",nit:"nit-telu-in",niu:"niu-latn-nu",niv:"niv-cyrl-ru","niv-latn":"niv-latn-ru",niw:"niw-latn-pg",nix:"nix-latn-cd",niy:"niy-latn-zz",niz:"niz-latn-zz",nja:"nja-latn-ng",njb:"njb-latn-in",njd:"njd-latn-tz",njh:"njh-latn-in",nji:"nji-latn-au",njj:"njj-latn-cm",njl:"njl-latn-ss",njm:"njm-latn-in",njn:"njn-latn-in",njo:"njo-latn-in",njr:"njr-latn-ng",njs:"njs-latn-id",njt:"njt-latn-sr",nju:"nju-latn-au",njx:"njx-latn-cg",njy:"njy-latn-cm",njz:"njz-latn-in","njz-beng":"njz-beng-in",nka:"nka-latn-zm",nkb:"nkb-latn-in",nkc:"nkc-latn-cm",nkd:"nkd-latn-in",nke:"nke-latn-sb",nkf:"nkf-latn-in",nkg:"nkg-latn-zz",nkh:"nkh-latn-in",nki:"nki-latn-in","nki-beng":"nki-beng-in",nkj:"nkj-latn-id",nkk:"nkk-latn-vu",nkm:"nkm-latn-pg",nkn:"nkn-latn-ao",nko:"nko-latn-zz",nkq:"nkq-latn-gh",nkr:"nkr-latn-fm",nks:"nks-latn-id",nkt:"nkt-latn-tz",nku:"nku-latn-ci",nkv:"nkv-latn-mw",nkw:"nkw-latn-cd",nkx:"nkx-latn-ng",nkz:"nkz-latn-ng",nl:"nl-latn-nl",nla:"nla-latn-cm",nlc:"nlc-latn-id",nle:"nle-latn-ke",nlg:"nlg-latn-sb",nli:"nli-arab-af",nlj:"nlj-latn-cd",nlk:"nlk-latn-id",nlm:"nlm-arab-pk",nlo:"nlo-latn-cd",nlq:"nlq-latn-mm",nlu:"nlu-latn-gh",nlv:"nlv-latn-mx",nlw:"nlw-latn-au",nlx:"nlx-deva-in",nly:"nly-latn-au",nlz:"nlz-latn-sb",nma:"nma-latn-in",nmb:"nmb-latn-vu",nmc:"nmc-latn-td",nmd:"nmd-latn-ga",nme:"nme-latn-in",nmf:"nmf-latn-in",nmg:"nmg-latn-cm",nmh:"nmh-latn-in",nmi:"nmi-latn-ng",nmj:"nmj-latn-cf",nmk:"nmk-latn-vu",nml:"nml-latn-cm",nmm:"nmm-deva-np","nmm-tibt":"nmm-tibt-np",nmn:"nmn-latn-bw",nmo:"nmo-latn-in","nmo-beng":"nmo-beng-in",nmp:"nmp-latn-au",nmq:"nmq-latn-zw",nmr:"nmr-latn-cm",nms:"nms-latn-vu",nmt:"nmt-latn-fm",nmu:"nmu-latn-us",nmv:"nmv-latn-au",nmw:"nmw-latn-pg",nmx:"nmx-latn-pg",nmz:"nmz-latn-zz",nn:"nn-latn-no",nna:"nna-latn-au",nnb:"nnb-latn-cd",nnc:"nnc-latn-td",nnd:"nnd-latn-vu",nne:"nne-latn-ao",nnf:"nnf-latn-zz",nng:"nng-latn-in","nng-beng":"nng-beng-in",nnh:"nnh-latn-cm",nni:"nni-latn-id",nnj:"nnj-latn-et",nnk:"nnk-latn-zz",nnl:"nnl-latn-in",nnm:"nnm-latn-zz",nnn:"nnn-latn-td",nnp:"nnp-wcho-in",nnq:"nnq-latn-tz",nnr:"nnr-latn-au",nnt:"nnt-latn-us",nnu:"nnu-latn-gh",nnv:"nnv-latn-au",nnw:"nnw-latn-bf",nny:"nny-latn-au",nnz:"nnz-latn-cm",no:"no-latn-no",noa:"noa-latn-co",noc:"noc-latn-pg",nod:"nod-lana-th",noe:"noe-deva-in",nof:"nof-latn-pg",nog:"nog-cyrl-ru",noh:"noh-latn-pg",noi:"noi-deva-in",noj:"noj-latn-co",nok:"nok-latn-us",nom:"nom-latn-pe",non:"non-runr-se",nop:"nop-latn-zz",noq:"noq-latn-cd",nos:"nos-yiii-cn",not:"not-latn-pe",nou:"nou-latn-zz",nov:"nov-latn-001",now:"now-latn-tz",noy:"noy-latn-td",npb:"npb-tibt-bt",npg:"npg-latn-mm",nph:"nph-latn-in",npl:"npl-latn-mx",npn:"npn-latn-pg",npo:"npo-latn-in",nps:"nps-latn-id",npu:"npu-latn-in",npx:"npx-latn-sb",npy:"npy-latn-id",nqg:"nqg-latn-bj",nqk:"nqk-latn-bj",nql:"nql-latn-ao",nqm:"nqm-latn-id",nqn:"nqn-latn-pg",nqo:"nqo-nkoo-gn",nqq:"nqq-latn-mm",nqt:"nqt-latn-ng",nqy:"nqy-latn-mm",nr:"nr-latn-za",nra:"nra-latn-ga",nrb:"nrb-latn-zz",nre:"nre-latn-in",nrf:"nrf-latn-je",nrg:"nrg-latn-vu",nri:"nri-latn-in",nrk:"nrk-latn-au",nrl:"nrl-latn-au",nrm:"nrm-latn-my",nrp:"nrp-latn-it",nru:"nru-latn-cn","nru-hans":"nru-hans-cn","nru-hant":"nru-hant-cn",nrx:"nrx-latn-au",nrz:"nrz-latn-pg",nsa:"nsa-latn-in",nsb:"nsb-latn-za",nsc:"nsc-latn-ng",nsd:"nsd-yiii-cn",nse:"nse-latn-zm",nsf:"nsf-yiii-cn",nsg:"nsg-latn-tz",nsh:"nsh-latn-cm",nsk:"nsk-cans-ca",nsm:"nsm-latn-in",nsn:"nsn-latn-zz",nso:"nso-latn-za",nsq:"nsq-latn-us",nss:"nss-latn-zz",nst:"nst-tnsa-in",nsu:"nsu-latn-mx",nsv:"nsv-yiii-cn",nsw:"nsw-latn-vu",nsx:"nsx-latn-ao",nsy:"nsy-latn-id",nsz:"nsz-latn-us",ntd:"ntd-latn-my",nte:"nte-latn-mz",ntg:"ntg-latn-au",nti:"nti-latn-bf",ntj:"ntj-latn-au",ntk:"ntk-latn-tz",ntm:"ntm-latn-zz",nto:"nto-latn-cd",ntp:"ntp-latn-mx",ntr:"ntr-latn-zz",ntu:"ntu-latn-sb",ntx:"ntx-latn-mm",nty:"nty-yiii-vn",ntz:"ntz-arab-ir",nua:"nua-latn-nc",nuc:"nuc-latn-br",nud:"nud-latn-pg",nue:"nue-latn-cd",nuf:"nuf-latn-cn",nug:"nug-latn-au",nuh:"nuh-latn-ng",nui:"nui-latn-zz",nuj:"nuj-latn-ug",nuk:"nuk-latn-ca",num:"num-latn-to",nun:"nun-latn-mm",nuo:"nuo-latn-vn",nup:"nup-latn-zz",nuq:"nuq-latn-pg",nur:"nur-latn-pg",nus:"nus-latn-ss",nut:"nut-latn-vn",nuu:"nuu-latn-cd",nuv:"nuv-latn-zz",nuw:"nuw-latn-fm",nux:"nux-latn-zz",nuy:"nuy-latn-au",nuz:"nuz-latn-mx",nv:"nv-latn-us",nvh:"nvh-latn-vu",nvm:"nvm-latn-pg",nvo:"nvo-latn-cm",nwb:"nwb-latn-zz",nwc:"nwc-newa-np","nwc-brah":"nwc-brah-np","nwc-deva":"nwc-deva-np","nwc-sidd":"nwc-sidd-np",nwe:"nwe-latn-cm",nwg:"nwg-latn-au",nwi:"nwi-latn-vu",nwm:"nwm-latn-ss",nwo:"nwo-latn-au",nwr:"nwr-latn-pg",nww:"nww-latn-tz",nwx:"nwx-deva-np",nxa:"nxa-latn-tl",nxd:"nxd-latn-cd",nxe:"nxe-latn-id",nxg:"nxg-latn-id",nxi:"nxi-latn-tz",nxl:"nxl-latn-id",nxn:"nxn-latn-au",nxo:"nxo-latn-ga",nxq:"nxq-latn-cn",nxr:"nxr-latn-zz",nxx:"nxx-latn-id",ny:"ny-latn-mw",nyb:"nyb-latn-gh",nyc:"nyc-latn-cd",nyd:"nyd-latn-ke",nye:"nye-latn-ao",nyf:"nyf-latn-ke",nyg:"nyg-latn-cd",nyh:"nyh-latn-au",nyi:"nyi-latn-sd",nyj:"nyj-latn-cd",nyk:"nyk-latn-ao",nyl:"nyl-thai-th",nym:"nym-latn-tz",nyn:"nyn-latn-ug",nyo:"nyo-latn-ug",nyp:"nyp-latn-ug",nyq:"nyq-arab-ir",nyr:"nyr-latn-mw",nys:"nys-latn-au",nyt:"nyt-latn-au",nyu:"nyu-latn-mz",nyv:"nyv-latn-au",nyx:"nyx-latn-au",nyy:"nyy-latn-tz",nza:"nza-latn-cm",nzb:"nzb-latn-ga",nzd:"nzd-latn-cd",nzi:"nzi-latn-gh",nzk:"nzk-latn-cf",nzm:"nzm-latn-in",nzu:"nzu-latn-cg",nzy:"nzy-latn-td",nzz:"nzz-latn-ml",oaa:"oaa-cyrl-ru",oac:"oac-cyrl-ru",oar:"oar-syrc-sy",oav:"oav-geor-ge",obi:"obi-latn-us",obk:"obk-latn-ph",obl:"obl-latn-cm",obm:"obm-phnx-jo",obo:"obo-latn-ph",obr:"obr-mymr-mm",obt:"obt-latn-fr",obu:"obu-latn-ng",oc:"oc-latn-fr",oca:"oca-latn-pe",oco:"oco-latn-gb",ocu:"ocu-latn-mx",oda:"oda-latn-ng",odk:"odk-arab-pk",odt:"odt-latn-nl",odu:"odu-latn-ng",ofu:"ofu-latn-ng",ogb:"ogb-latn-ng",ogc:"ogc-latn-zz",ogg:"ogg-latn-ng",ogo:"ogo-latn-ng",ogu:"ogu-latn-ng",oht:"oht-xsux-tr",oia:"oia-latn-id",oie:"oie-latn-ss",oin:"oin-latn-pg",oj:"oj-cans-ca",ojb:"ojb-latn-ca","ojb-cans":"ojb-cans-ca",ojc:"ojc-latn-ca",ojs:"ojs-cans-ca",ojv:"ojv-latn-sb",ojw:"ojw-latn-ca","ojw-cans":"ojw-cans-ca",oka:"oka-latn-ca",okb:"okb-latn-ng",okc:"okc-latn-cd",okd:"okd-latn-ng",oke:"oke-latn-ng",okg:"okg-latn-au",oki:"oki-latn-ke",okk:"okk-latn-pg",okm:"okm-hang-kr",oko:"oko-hani-kr",okr:"okr-latn-zz",oks:"oks-latn-ng",oku:"oku-latn-cm",okv:"okv-latn-zz",okx:"okx-latn-ng",okz:"okz-khmr-kh",ola:"ola-deva-np","ola-tibt":"ola-tibt-cn",old:"old-latn-tz",ole:"ole-tibt-bt",olk:"olk-latn-au",olm:"olm-latn-ng",olo:"olo-latn-ru",olr:"olr-latn-vu",olt:"olt-latn-lt",olu:"olu-latn-ao",om:"om-latn-et",oma:"oma-latn-us",omb:"omb-latn-vu",omc:"omc-latn-pe",omg:"omg-latn-pe",omi:"omi-latn-cd",omk:"omk-cyrl-ru",oml:"oml-latn-cd",omo:"omo-latn-pg",omp:"omp-mtei-in",omr:"omr-modi-in",omt:"omt-latn-ke",omu:"omu-latn-pe",omw:"omw-latn-pg",ona:"ona-latn-ar",one:"one-latn-ca",ong:"ong-latn-zz",oni:"oni-latn-id",onj:"onj-latn-pg",onk:"onk-latn-pg",onn:"onn-latn-zz",ono:"ono-latn-ca",onp:"onp-latn-in","onp-deva":"onp-deva-in",onr:"onr-latn-pg",ons:"ons-latn-zz",ont:"ont-latn-pg",onu:"onu-latn-vu",onx:"onx-latn-id",ood:"ood-latn-us",oon:"oon-deva-in",oor:"oor-latn-za",opa:"opa-latn-ng",opk:"opk-latn-id",opm:"opm-latn-zz",opo:"opo-latn-pg",opt:"opt-latn-mx",opy:"opy-latn-br",or:"or-orya-in",ora:"ora-latn-sb",orc:"orc-latn-ke",ore:"ore-latn-pe",org:"org-latn-ng",orn:"orn-latn-my",oro:"oro-latn-zz",orr:"orr-latn-ng",ors:"ors-latn-my",ort:"ort-telu-in",oru:"oru-arab-zz",orv:"orv-cyrl-ru",orw:"orw-latn-br",orx:"orx-latn-ng",orz:"orz-latn-id",os:"os-cyrl-ge",osa:"osa-osge-us",osc:"osc-ital-it","osc-latn":"osc-latn-it",osi:"osi-java-id",oso:"oso-latn-ng",osp:"osp-latn-es",ost:"ost-latn-cm",osu:"osu-latn-pg",osx:"osx-latn-de",ota:"ota-arab-zz",otb:"otb-tibt-cn",otd:"otd-latn-id",ote:"ote-latn-mx",oti:"oti-latn-br",otk:"otk-orkh-mn",otl:"otl-latn-mx",otm:"otm-latn-mx",otn:"otn-latn-mx",otq:"otq-latn-mx",otr:"otr-latn-sd",ots:"ots-latn-mx",ott:"ott-latn-mx",otu:"otu-latn-br",otw:"otw-latn-ca",otx:"otx-latn-mx",oty:"oty-gran-in",otz:"otz-latn-mx",oub:"oub-latn-lr",oue:"oue-latn-pg",oui:"oui-ougr-143",oum:"oum-latn-pg",ovd:"ovd-latn-se",owi:"owi-latn-pg",owl:"owl-latn-gb",oyd:"oyd-latn-et",oym:"oym-latn-br",oyy:"oyy-latn-pg",ozm:"ozm-latn-zz",pa:"pa-guru-in","pa-arab":"pa-arab-pk","pa-pk":"pa-arab-pk",pab:"pab-latn-br",pac:"pac-latn-vn",pad:"pad-latn-br",pae:"pae-latn-cd",paf:"paf-latn-br",pag:"pag-latn-ph",pah:"pah-latn-br",pai:"pai-latn-ng",pak:"pak-latn-br",pal:"pal-phli-ir","pal-phlp":"pal-phlp-cn",pam:"pam-latn-ph",pao:"pao-latn-us",pap:"pap-latn-cw",paq:"paq-cyrl-tj",par:"par-latn-us",pas:"pas-latn-id",pau:"pau-latn-pw",pav:"pav-latn-br",paw:"paw-latn-us",pax:"pax-latn-br",pay:"pay-latn-hn",paz:"paz-latn-br",pbb:"pbb-latn-co",pbc:"pbc-latn-gy",pbe:"pbe-latn-mx",pbf:"pbf-latn-mx",pbg:"pbg-latn-ve",pbh:"pbh-latn-ve",pbi:"pbi-latn-zz",pbl:"pbl-latn-ng",pbm:"pbm-latn-mx",pbn:"pbn-latn-ng",pbo:"pbo-latn-gw",pbp:"pbp-latn-gn",pbr:"pbr-latn-tz",pbs:"pbs-latn-mx",pbt:"pbt-arab-af",pbv:"pbv-latn-in",pby:"pby-latn-pg",pca:"pca-latn-mx",pcb:"pcb-khmr-kh",pcc:"pcc-latn-cn","pcc-hani":"pcc-hani-cn",pcd:"pcd-latn-fr",pce:"pce-mymr-mm","pce-thai":"pce-thai-th",pcf:"pcf-mlym-in",pcg:"pcg-mlym-in","pcg-knda":"pcg-knda-in","pcg-taml":"pcg-taml-in",pch:"pch-deva-in",pci:"pci-deva-in","pci-orya":"pci-orya-in",pcj:"pcj-telu-in",pck:"pck-latn-in",pcm:"pcm-latn-ng",pcn:"pcn-latn-ng",pcp:"pcp-latn-bo",pcw:"pcw-latn-ng",pda:"pda-latn-pg",pdc:"pdc-latn-us",pdn:"pdn-latn-id",pdo:"pdo-latn-id",pdt:"pdt-latn-ca",pdu:"pdu-latn-mm","pdu-mymr":"pdu-mymr-mm",pea:"pea-latn-id",peb:"peb-latn-us",ped:"ped-latn-zz",pee:"pee-latn-id",peg:"peg-orya-in",pei:"pei-latn-mx",pek:"pek-latn-pg",pel:"pel-latn-id",pem:"pem-latn-cd",peo:"peo-xpeo-ir",pep:"pep-latn-pg",peq:"peq-latn-us",pev:"pev-latn-ve",pex:"pex-latn-zz",pey:"pey-latn-id",pez:"pez-latn-my",pfa:"pfa-latn-fm",pfe:"pfe-latn-cm",pfl:"pfl-latn-de",pga:"pga-latn-ss",pgd:"pgd-khar-pk",pgg:"pgg-deva-in",pgi:"pgi-latn-pg",pgk:"pgk-latn-vu",pgl:"pgl-ogam-ie",pgn:"pgn-ital-it",pgs:"pgs-latn-ng",pgu:"pgu-latn-id",phd:"phd-deva-in",phg:"phg-latn-vn",phh:"phh-latn-vn",phk:"phk-mymr-in",phl:"phl-arab-zz",phm:"phm-latn-mz",phn:"phn-phnx-lb",pho:"pho-laoo-la",phr:"phr-arab-pk",pht:"pht-thai-th",phv:"phv-arab-af",phw:"phw-deva-np",pi:"pi-sinh-in","pi-brah":"pi-brah-in","pi-deva":"pi-deva-in","pi-khar":"pi-khar-in","pi-khmr":"pi-khmr-in","pi-mymr":"pi-mymr-in","pi-thai":"pi-thai-in",pia:"pia-latn-mx",pib:"pib-latn-pe",pic:"pic-latn-ga",pid:"pid-latn-ve",pif:"pif-latn-fm",pig:"pig-latn-pe",pih:"pih-latn-nf",pij:"pij-latn-co",pil:"pil-latn-zz",pim:"pim-latn-us",pin:"pin-latn-pg",pio:"pio-latn-co",pip:"pip-latn-zz",pir:"pir-latn-br",pis:"pis-latn-sb",pit:"pit-latn-au",piu:"piu-latn-au",piv:"piv-latn-sb",piw:"piw-latn-tz",pix:"pix-latn-pg",piy:"piy-latn-ng",piz:"piz-latn-nc",pjt:"pjt-latn-au",pka:"pka-brah-in",pkb:"pkb-latn-ke",pkg:"pkg-latn-pg",pkh:"pkh-latn-bd","pkh-deva":"pkh-deva-bd",pkn:"pkn-latn-au",pko:"pko-latn-ke",pkp:"pkp-latn-ck",pkr:"pkr-mlym-in",pku:"pku-latn-id",pl:"pl-latn-pl",pla:"pla-latn-zz",plb:"plb-latn-vu",plc:"plc-latn-ph",pld:"pld-latn-gb",ple:"ple-latn-id",plg:"plg-latn-ar",plh:"plh-latn-id",plj:"plj-latn-ng",plk:"plk-arab-pk",pll:"pll-mymr-mm",pln:"pln-latn-co",plo:"plo-latn-mx",plr:"plr-latn-ci",pls:"pls-latn-mx",plu:"plu-latn-br",plv:"plv-latn-ph",plw:"plw-latn-ph",plz:"plz-latn-my",pma:"pma-latn-vu",pmb:"pmb-latn-cd",pmd:"pmd-latn-au",pme:"pme-latn-nc",pmf:"pmf-latn-id",pmh:"pmh-brah-in",pmi:"pmi-latn-cn",pmj:"pmj-latn-cn",pml:"pml-latn-tn",pmm:"pmm-latn-cm",pmn:"pmn-latn-cm",pmo:"pmo-latn-id",pmq:"pmq-latn-mx",pmr:"pmr-latn-pg",pms:"pms-latn-it",pmt:"pmt-latn-pf",pmw:"pmw-latn-us",pmx:"pmx-latn-in",pmy:"pmy-latn-id",pmz:"pmz-latn-mx",pna:"pna-latn-my",pnc:"pnc-latn-id",pnd:"pnd-latn-ao",pne:"pne-latn-my",png:"png-latn-zz",pnh:"pnh-latn-ck",pni:"pni-latn-id",pnj:"pnj-latn-au",pnk:"pnk-latn-bo",pnl:"pnl-latn-bf",pnm:"pnm-latn-my",pnn:"pnn-latn-zz",pno:"pno-latn-pe",pnp:"pnp-latn-id",pnq:"pnq-latn-bf",pnr:"pnr-latn-pg",pns:"pns-latn-id",pnt:"pnt-grek-gr",pnv:"pnv-latn-au",pnw:"pnw-latn-au",pny:"pny-latn-cm",pnz:"pnz-latn-cf",poc:"poc-latn-gt",poe:"poe-latn-mx",pof:"pof-latn-cd",pog:"pog-latn-br",poh:"poh-latn-gt",poi:"poi-latn-mx",pok:"pok-latn-br",pom:"pom-latn-us",pon:"pon-latn-fm",poo:"poo-latn-us",pop:"pop-latn-nc",poq:"poq-latn-mx",pos:"pos-latn-mx",pot:"pot-latn-us",pov:"pov-latn-gw",pow:"pow-latn-mx",poy:"poy-latn-tz",ppa:"ppa-deva-in",ppe:"ppe-latn-pg",ppi:"ppi-latn-mx",ppk:"ppk-latn-id",ppl:"ppl-latn-sv",ppm:"ppm-latn-id",ppn:"ppn-latn-pg",ppo:"ppo-latn-zz",ppp:"ppp-latn-cd",ppq:"ppq-latn-pg",pps:"pps-latn-mx",ppt:"ppt-latn-pg",pqa:"pqa-latn-ng",pqm:"pqm-latn-ca",pra:"pra-khar-pk",prc:"prc-arab-af",prd:"prd-arab-ir",pre:"pre-latn-st",prf:"prf-latn-ph",prg:"prg-latn-001",prh:"prh-latn-ph",pri:"pri-latn-nc",prk:"prk-latn-mm",prm:"prm-latn-pg",pro:"pro-latn-fr",prp:"prp-gujr-in",prq:"prq-latn-pe",prr:"prr-latn-br",prt:"prt-thai-th",pru:"pru-latn-id",prw:"prw-latn-pg",prx:"prx-arab-in","prx-tibt":"prx-tibt-in",ps:"ps-arab-af",psa:"psa-latn-id",pse:"pse-latn-id",psh:"psh-arab-af",psi:"psi-arab-af",psm:"psm-latn-bo",psn:"psn-latn-id",psq:"psq-latn-pg",pss:"pss-latn-zz",pst:"pst-arab-pk",psw:"psw-latn-vu",pt:"pt-latn-br",pta:"pta-latn-py",pth:"pth-latn-br",pti:"pti-latn-au",ptn:"ptn-latn-id",pto:"pto-latn-br",ptp:"ptp-latn-zz",ptr:"ptr-latn-vu",ptt:"ptt-latn-id",ptu:"ptu-latn-id",ptv:"ptv-latn-vu",pua:"pua-latn-mx",pub:"pub-latn-in",puc:"puc-latn-id",pud:"pud-latn-id",pue:"pue-latn-ar",puf:"puf-latn-id",pug:"pug-latn-bf",pui:"pui-latn-co",puj:"puj-latn-id",pum:"pum-deva-np",puo:"puo-latn-vn",pup:"pup-latn-pg",puq:"puq-latn-pe",pur:"pur-latn-br",put:"put-latn-id",puu:"puu-latn-ga",puw:"puw-latn-fm",pux:"pux-latn-pg",puy:"puy-latn-us",pwa:"pwa-latn-zz",pwb:"pwb-latn-ng",pwg:"pwg-latn-pg",pwm:"pwm-latn-ph",pwn:"pwn-latn-tw",pwo:"pwo-mymr-mm",pwr:"pwr-deva-in",pww:"pww-thai-th",pxm:"pxm-latn-mx",pye:"pye-latn-ci",pym:"pym-latn-ng",pyn:"pyn-latn-br",pyu:"pyu-latn-tw","pyu-hani":"pyu-hani-tw",pyx:"pyx-mymr-mm",pyy:"pyy-latn-mm",pzh:"pzh-latn-tw",pzn:"pzn-latn-mm",qu:"qu-latn-pe",qua:"qua-latn-us",qub:"qub-latn-pe",quc:"quc-latn-gt",qud:"qud-latn-ec",quf:"quf-latn-pe",qug:"qug-latn-ec",qui:"qui-latn-us",quk:"quk-latn-pe",qul:"qul-latn-bo",qum:"qum-latn-gt",qun:"qun-latn-us",qup:"qup-latn-pe",quq:"quq-latn-es",qur:"qur-latn-pe",qus:"qus-latn-ar",quv:"quv-latn-gt",quw:"quw-latn-ec",qux:"qux-latn-pe",quy:"quy-latn-pe",qva:"qva-latn-pe",qvc:"qvc-latn-pe",qve:"qve-latn-pe",qvh:"qvh-latn-pe",qvi:"qvi-latn-ec",qvj:"qvj-latn-ec",qvl:"qvl-latn-pe",qvm:"qvm-latn-pe",qvn:"qvn-latn-pe",qvo:"qvo-latn-pe",qvp:"qvp-latn-pe",qvs:"qvs-latn-pe",qvw:"qvw-latn-pe",qvz:"qvz-latn-ec",qwa:"qwa-latn-pe",qwc:"qwc-latn-pe",qwh:"qwh-latn-pe",qwm:"qwm-latn-ru","qwm-cyrl":"qwm-cyrl-ru","qwm-runr":"qwm-runr-ru",qws:"qws-latn-pe",qwt:"qwt-latn-us",qxa:"qxa-latn-pe",qxc:"qxc-latn-pe",qxh:"qxh-latn-pe",qxl:"qxl-latn-ec",qxn:"qxn-latn-pe",qxo:"qxo-latn-pe",qxp:"qxp-latn-pe",qxq:"qxq-arab-ir",qxr:"qxr-latn-ec",qxt:"qxt-latn-pe",qxu:"qxu-latn-pe",qxw:"qxw-latn-pe",qya:"qya-latn-001",qyp:"qyp-latn-us",raa:"raa-deva-np",rab:"rab-deva-np",rac:"rac-latn-id",rad:"rad-latn-vn",raf:"raf-deva-np",rag:"rag-latn-ke",rah:"rah-beng-in","rah-latn":"rah-latn-in",rai:"rai-latn-zz",raj:"raj-deva-in",rak:"rak-latn-pg",ram:"ram-latn-br",ran:"ran-latn-id",rao:"rao-latn-zz",rap:"rap-latn-cl",rar:"rar-latn-ck",rav:"rav-deva-np",raw:"raw-latn-mm",rax:"rax-latn-ng",ray:"ray-latn-pf",raz:"raz-latn-id",rbb:"rbb-mymr-mm",rbk:"rbk-latn-ph",rbl:"rbl-latn-ph",rbp:"rbp-latn-au",rcf:"rcf-latn-re",rdb:"rdb-arab-ir",rea:"rea-latn-pg",reb:"reb-latn-id",ree:"ree-latn-my",reg:"reg-latn-tz",rei:"rei-orya-in","rei-telu":"rei-telu-in",rej:"rej-latn-id",rel:"rel-latn-zz",rem:"rem-latn-pe",ren:"ren-latn-vn",res:"res-latn-zz",ret:"ret-latn-id",rey:"rey-latn-bo",rga:"rga-latn-vu",rgn:"rgn-latn-it",rgr:"rgr-latn-pe",rgs:"rgs-latn-vn",rgu:"rgu-latn-id",rhg:"rhg-rohg-mm",rhp:"rhp-latn-pg",ria:"ria-latn-in",rif:"rif-latn-ma",ril:"ril-latn-mm",rim:"rim-latn-tz",rin:"rin-latn-ng",rir:"rir-latn-id",rit:"rit-latn-au",riu:"riu-latn-id",rjg:"rjg-latn-id",rji:"rji-deva-np",rjs:"rjs-deva-np",rka:"rka-khmr-kh",rkb:"rkb-latn-br",rkh:"rkh-latn-ck",rki:"rki-mymr-mm",rkm:"rkm-latn-bf",rkt:"rkt-beng-bd",rkw:"rkw-latn-au",rm:"rm-latn-ch",rma:"rma-latn-ni",rmb:"rmb-latn-au",rmc:"rmc-latn-sk",rmd:"rmd-latn-dk",rme:"rme-latn-gb",rmf:"rmf-latn-fi",rmg:"rmg-latn-no",rmh:"rmh-latn-id",rmi:"rmi-armn-am",rmk:"rmk-latn-pg",rml:"rml-latn-pl","rml-cyrl":"rml-cyrl-by",rmm:"rmm-latn-id",rmn:"rmn-latn-rs","rmn-cyrl":"rmn-cyrl-bg","rmn-grek":"rmn-grek-gr",rmo:"rmo-latn-ch",rmp:"rmp-latn-pg",rmq:"rmq-latn-es",rmt:"rmt-arab-ir",rmu:"rmu-latn-se",rmw:"rmw-latn-gb",rmx:"rmx-latn-vn",rmz:"rmz-mymr-in",rn:"rn-latn-bi",rna:"rna-latn-zz",rnd:"rnd-latn-cd",rng:"rng-latn-mz",rnl:"rnl-latn-in",rnn:"rnn-latn-id",rnr:"rnr-latn-au",rnw:"rnw-latn-tz",ro:"ro-latn-ro",rob:"rob-latn-id",roc:"roc-latn-vn",rod:"rod-latn-ng",roe:"roe-latn-pg",rof:"rof-latn-tz",rog:"rog-latn-vn",rol:"rol-latn-ph",rom:"rom-latn-ro","rom-cyrl":"rom-cyrl-ro",roo:"roo-latn-zz",rop:"rop-latn-au",ror:"ror-latn-id",rou:"rou-latn-td",row:"row-latn-id",rpn:"rpn-latn-vu",rpt:"rpt-latn-pg",rri:"rri-latn-sb",rro:"rro-latn-zz",rrt:"rrt-latn-au",rsk:"rsk-cyrl-rs",rtc:"rtc-latn-mm",rth:"rth-latn-id",rtm:"rtm-latn-fj",rtw:"rtw-deva-in",ru:"ru-cyrl-ru",rub:"rub-latn-ug",ruc:"ruc-latn-ug",rue:"rue-cyrl-ua",ruf:"ruf-latn-tz",rug:"rug-latn-sb",rui:"rui-latn-tz",ruk:"ruk-latn-ng",ruo:"ruo-latn-hr",rup:"rup-latn-ro","rup-grek":"rup-grek-gr",ruq:"ruq-latn-gr",rut:"rut-cyrl-ru","rut-latn":"rut-latn-az",ruu:"ruu-latn-my",ruy:"ruy-latn-ng",ruz:"ruz-latn-ng",rw:"rw-latn-rw",rwa:"rwa-latn-pg",rwk:"rwk-latn-tz",rwl:"rwl-latn-tz",rwm:"rwm-latn-ug",rwo:"rwo-latn-zz",rwr:"rwr-deva-in",rxd:"rxd-latn-au",rxw:"rxw-latn-au",ryu:"ryu-kana-jp",sa:"sa-deva-in",saa:"saa-latn-td",sab:"sab-latn-pa",sac:"sac-latn-us",sad:"sad-latn-tz",sae:"sae-latn-br",saf:"saf-latn-gh",sah:"sah-cyrl-ru",saj:"saj-latn-id",sak:"sak-latn-ga",sam:"sam-samr-ps","sam-hebr":"sam-hebr-ps","sam-syrc":"sam-syrc-ps",sao:"sao-latn-id",saq:"saq-latn-ke",sar:"sar-latn-bo",sas:"sas-latn-id",sat:"sat-olck-in",sau:"sau-latn-id",sav:"sav-latn-sn",saw:"saw-latn-id",sax:"sax-latn-vu",say:"say-latn-ng",saz:"saz-saur-in",sba:"sba-latn-zz",sbb:"sbb-latn-sb",sbc:"sbc-latn-pg",sbd:"sbd-latn-bf",sbe:"sbe-latn-zz",sbg:"sbg-latn-id",sbh:"sbh-latn-pg",sbi:"sbi-latn-pg",sbj:"sbj-latn-td",sbk:"sbk-latn-tz",sbl:"sbl-latn-ph",sbm:"sbm-latn-tz",sbn:"sbn-arab-pk",sbo:"sbo-latn-my",sbp:"sbp-latn-tz",sbq:"sbq-latn-pg",sbr:"sbr-latn-id",sbs:"sbs-latn-na",sbt:"sbt-latn-id",sbu:"sbu-tibt-in","sbu-deva":"sbu-deva-in",sbv:"sbv-latn-it",sbw:"sbw-latn-ga",sbx:"sbx-latn-id",sby:"sby-latn-zm",sbz:"sbz-latn-cf",sc:"sc-latn-it",scb:"scb-latn-vn",sce:"sce-latn-cn","sce-arab":"sce-arab-cn",scf:"scf-latn-pa",scg:"scg-latn-id",sch:"sch-latn-in",sci:"sci-latn-lk",sck:"sck-deva-in",scl:"scl-arab-zz",scn:"scn-latn-it",sco:"sco-latn-gb",scp:"scp-deva-np",scs:"scs-latn-ca","scs-cans":"scs-cans-ca",sct:"sct-laoo-la",scu:"scu-takr-in",scv:"scv-latn-ng",scw:"scw-latn-ng",scx:"scx-grek-it",sd:"sd-arab-pk","sd-deva":"sd-deva-in","sd-in":"sd-deva-in","sd-khoj":"sd-khoj-in","sd-sind":"sd-sind-in",sda:"sda-latn-id",sdb:"sdb-arab-iq",sdc:"sdc-latn-it",sde:"sde-latn-ng",sdf:"sdf-arab-iq",sdg:"sdg-arab-af",sdh:"sdh-arab-ir",sdj:"sdj-latn-cg",sdk:"sdk-latn-pg",sdn:"sdn-latn-it",sdo:"sdo-latn-my",sdq:"sdq-latn-id",sds:"sds-arab-tn",sdu:"sdu-latn-id",sdx:"sdx-latn-my",se:"se-latn-no",sea:"sea-latn-my",seb:"seb-latn-ci",sec:"sec-latn-ca",sed:"sed-latn-vn",see:"see-latn-us",sef:"sef-latn-ci",seg:"seg-latn-tz",seh:"seh-latn-mz",sei:"sei-latn-mx",sej:"sej-latn-pg",sek:"sek-latn-ca","sek-cans":"sek-cans-ca",sel:"sel-cyrl-ru",sen:"sen-latn-bf",seo:"seo-latn-pg",sep:"sep-latn-bf",seq:"seq-latn-bf",ser:"ser-latn-us",ses:"ses-latn-ml",set:"set-latn-id",seu:"seu-latn-id",sev:"sev-latn-ci",sew:"sew-latn-pg",sey:"sey-latn-ec",sez:"sez-latn-mm",sfe:"sfe-latn-ph",sfm:"sfm-plrd-cn",sfw:"sfw-latn-gh",sg:"sg-latn-cf",sga:"sga-ogam-ie",sgb:"sgb-latn-ph",sgc:"sgc-latn-ke",sgd:"sgd-latn-ph",sge:"sge-latn-id",sgh:"sgh-cyrl-tj","sgh-arab":"sgh-arab-af","sgh-latn":"sgh-latn-tj",sgi:"sgi-latn-cm",sgj:"sgj-deva-in",sgm:"sgm-latn-ke",sgp:"sgp-latn-in",sgr:"sgr-arab-ir",sgs:"sgs-latn-lt",sgt:"sgt-tibt-bt",sgu:"sgu-latn-id",sgw:"sgw-ethi-zz",sgy:"sgy-arab-af",sgz:"sgz-latn-zz",sha:"sha-latn-ng",shb:"shb-latn-br",shc:"shc-latn-cd",shd:"shd-arab-pk",she:"she-latn-et",shg:"shg-latn-bw",shh:"shh-latn-us",shi:"shi-tfng-ma",shj:"shj-latn-sd",shk:"shk-latn-zz",shm:"shm-arab-ir",shn:"shn-mymr-mm",sho:"sho-latn-ng",shp:"shp-latn-pe",shq:"shq-latn-zm",shr:"shr-latn-cd",shs:"shs-latn-ca",sht:"sht-latn-us",shu:"shu-arab-zz",shv:"shv-arab-om",shw:"shw-latn-sd",shy:"shy-latn-dz","shy-arab":"shy-arab-dz","shy-tfng":"shy-tfng-dz",shz:"shz-latn-ml",si:"si-sinh-lk",sia:"sia-cyrl-ru",sib:"sib-latn-my",sid:"sid-latn-et",sie:"sie-latn-zm",sif:"sif-latn-bf",sig:"sig-latn-zz",sih:"sih-latn-nc",sii:"sii-latn-in",sij:"sij-latn-pg",sik:"sik-latn-br",sil:"sil-latn-zz",sim:"sim-latn-zz",sip:"sip-tibt-in",siq:"siq-latn-pg",sir:"sir-latn-ng",sis:"sis-latn-us",siu:"siu-latn-pg",siv:"siv-latn-pg",siw:"siw-latn-pg",six:"six-latn-pg",siy:"siy-arab-ir",siz:"siz-arab-eg",sja:"sja-latn-co",sjb:"sjb-latn-id",sjd:"sjd-cyrl-ru",sje:"sje-latn-se",sjg:"sjg-latn-td",sjl:"sjl-latn-in",sjm:"sjm-latn-ph",sjp:"sjp-deva-in","sjp-beng":"sjp-beng-in",sjr:"sjr-latn-zz",sjt:"sjt-cyrl-ru",sju:"sju-latn-se",sjw:"sjw-latn-us",sk:"sk-latn-sk",ska:"ska-latn-us",skb:"skb-thai-th",skc:"skc-latn-zz",skd:"skd-latn-us",ske:"ske-latn-vu",skf:"skf-latn-br",skg:"skg-latn-mg",skh:"skh-latn-id",ski:"ski-latn-id",skj:"skj-deva-np",skm:"skm-latn-pg",skn:"skn-latn-ph",sko:"sko-latn-id",skp:"skp-latn-my",skq:"skq-latn-bf",skr:"skr-arab-pk",sks:"sks-latn-zz",skt:"skt-latn-cd",sku:"sku-latn-vu",skv:"skv-latn-id",skw:"skw-latn-gy",skx:"skx-latn-id",sky:"sky-latn-sb",skz:"skz-latn-id",sl:"sl-latn-si",slc:"slc-latn-co",sld:"sld-latn-zz",slg:"slg-latn-id",slh:"slh-latn-us",sli:"sli-latn-pl",slj:"slj-latn-br",sll:"sll-latn-zz",slm:"slm-latn-ph",sln:"sln-latn-us",slp:"slp-latn-id",slq:"slq-arab-ir",slr:"slr-latn-cn",slu:"slu-latn-id",slw:"slw-latn-pg",slx:"slx-latn-cd",sly:"sly-latn-id",slz:"slz-latn-id",sm:"sm-latn-ws",sma:"sma-latn-se",smb:"smb-latn-pg",smc:"smc-latn-pg",smd:"smd-latn-ao",smf:"smf-latn-pg",smg:"smg-latn-pg",smh:"smh-yiii-cn",smj:"smj-latn-se",smk:"smk-latn-ph",sml:"sml-latn-ph",smn:"smn-latn-fi",smp:"smp-samr-il",smq:"smq-latn-zz",smr:"smr-latn-id",sms:"sms-latn-fi",smt:"smt-latn-in",smu:"smu-khmr-kh",smw:"smw-latn-id",smx:"smx-latn-cd",smy:"smy-arab-ir",smz:"smz-latn-pg",sn:"sn-latn-zw",snb:"snb-latn-my",snc:"snc-latn-zz",sne:"sne-latn-my",snf:"snf-latn-sn",sng:"sng-latn-cd","sng-brai":"sng-brai-cd",sni:"sni-latn-pe",snj:"snj-latn-cf",snk:"snk-latn-ml",snl:"snl-latn-ph",snm:"snm-latn-ug",snn:"snn-latn-co",sno:"sno-latn-us",snp:"snp-latn-zz",snq:"snq-latn-ga",snr:"snr-latn-pg",sns:"sns-latn-vu",snu:"snu-latn-id",snv:"snv-latn-my",snw:"snw-latn-gh",snx:"snx-latn-zz",sny:"sny-latn-zz",snz:"snz-latn-pg",so:"so-latn-so",soa:"soa-tavt-th","soa-thai":"soa-thai-th",sob:"sob-latn-id",soc:"soc-latn-cd",sod:"sod-latn-cd",soe:"soe-latn-cd",sog:"sog-sogd-uz",soi:"soi-deva-np",sok:"sok-latn-zz",sol:"sol-latn-pg",soo:"soo-latn-cd",sop:"sop-latn-cd",soq:"soq-latn-zz",sor:"sor-latn-td",sos:"sos-latn-bf",sou:"sou-thai-th",sov:"sov-latn-pw",sow:"sow-latn-pg",sox:"sox-latn-cm",soy:"soy-latn-zz",soz:"soz-latn-tz",spb:"spb-latn-id",spc:"spc-latn-ve",spd:"spd-latn-zz",spe:"spe-latn-pg",spg:"spg-latn-my",spi:"spi-latn-id",spk:"spk-latn-pg",spl:"spl-latn-zz",spm:"spm-latn-pg",spn:"spn-latn-py",spo:"spo-latn-us",spp:"spp-latn-ml",spq:"spq-latn-pe",spr:"spr-latn-id",sps:"sps-latn-zz",spt:"spt-tibt-in",spv:"spv-orya-in",sq:"sq-latn-al",sqa:"sqa-latn-ng",sqh:"sqh-latn-ng",sqm:"sqm-latn-cf",sqo:"sqo-arab-ir",sqq:"sqq-laoo-la",sqt:"sqt-arab-ye","sqt-latn":"sqt-latn-ye",squ:"squ-latn-ca",sr:"sr-cyrl-rs","sr-me":"sr-latn-me","sr-ro":"sr-latn-ro","sr-ru":"sr-latn-ru","sr-tr":"sr-latn-tr",sra:"sra-latn-pg",srb:"srb-sora-in",sre:"sre-latn-id",srf:"srf-latn-pg",srg:"srg-latn-ph",srh:"srh-arab-cn",sri:"sri-latn-co",srk:"srk-latn-my",srl:"srl-latn-id",srm:"srm-latn-sr",srn:"srn-latn-sr",sro:"sro-latn-it",srq:"srq-latn-bo",srr:"srr-latn-sn",srs:"srs-latn-ca",srt:"srt-latn-id",sru:"sru-latn-br",srv:"srv-latn-ph",srw:"srw-latn-id",srx:"srx-deva-in",sry:"sry-latn-pg",srz:"srz-arab-ir",ss:"ss-latn-za",ssb:"ssb-latn-ph",ssc:"ssc-latn-tz",ssd:"ssd-latn-zz",sse:"sse-latn-ph","sse-arab":"sse-arab-ph",ssf:"ssf-latn-tw",ssg:"ssg-latn-zz",ssh:"ssh-arab-ae",ssj:"ssj-latn-pg",ssl:"ssl-latn-gh",ssm:"ssm-latn-my",ssn:"ssn-latn-ke",sso:"sso-latn-pg",ssq:"ssq-latn-id",sss:"sss-laoo-la","sss-thai":"sss-thai-th",sst:"sst-latn-pg",ssu:"ssu-latn-pg",ssv:"ssv-latn-vu",ssx:"ssx-latn-pg",ssy:"ssy-latn-er",ssz:"ssz-latn-pg",st:"st-latn-za",sta:"sta-latn-zm",stb:"stb-latn-ph",ste:"ste-latn-id",stf:"stf-latn-pg",stg:"stg-latn-vn",sth:"sth-latn-ie",sti:"sti-latn-vn","sti-kh":"sti-latn-kh",stj:"stj-latn-bf",stk:"stk-latn-zz",stl:"stl-latn-nl",stm:"stm-latn-pg",stn:"stn-latn-sb",sto:"sto-latn-ca",stp:"stp-latn-mx",stq:"stq-latn-de",str:"str-latn-ca",sts:"sts-arab-af",stt:"stt-latn-vn",stv:"stv-ethi-et","stv-arab":"stv-arab-et",stw:"stw-latn-fm",sty:"sty-cyrl-ru",su:"su-latn-id",sua:"sua-latn-zz",sub:"sub-latn-cd",suc:"suc-latn-ph",sue:"sue-latn-zz",sug:"sug-latn-pg",sui:"sui-latn-pg",suj:"suj-latn-tz",suk:"suk-latn-tz",suo:"suo-latn-pg",suq:"suq-latn-et","suq-ethi":"suq-ethi-et",sur:"sur-latn-zz",sus:"sus-latn-gn",sut:"sut-latn-ni",suv:"suv-latn-in","suv-beng":"suv-beng-in","suv-deva":"suv-deva-in",suw:"suw-latn-tz",suy:"suy-latn-br",suz:"suz-deva-np",sv:"sv-latn-se",sva:"sva-geor-ge","sva-cyrl":"sva-cyrl-ge","sva-latn":"sva-latn-ge",svb:"svb-latn-pg",svc:"svc-latn-vc",sve:"sve-latn-id",svm:"svm-latn-it",svs:"svs-latn-sb",sw:"sw-latn-tz",swb:"swb-arab-yt",swc:"swc-latn-cd",swf:"swf-latn-cd",swg:"swg-latn-de",swi:"swi-hani-cn",swj:"swj-latn-ga",swk:"swk-latn-mw",swm:"swm-latn-pg",swo:"swo-latn-br",swp:"swp-latn-zz",swq:"swq-latn-cm",swr:"swr-latn-id",sws:"sws-latn-id",swt:"swt-latn-id",swu:"swu-latn-id",swv:"swv-deva-in",sww:"sww-latn-vu",swx:"swx-latn-br",swy:"swy-latn-td",sxb:"sxb-latn-ke",sxe:"sxe-latn-ga",sxn:"sxn-latn-id",sxr:"sxr-latn-tw",sxs:"sxs-latn-ng",sxu:"sxu-latn-de","sxu-runr":"sxu-runr-de",sxw:"sxw-latn-zz",sya:"sya-latn-id",syb:"syb-latn-ph",syc:"syc-syrc-tr",syi:"syi-latn-ga",syk:"syk-latn-ng",syl:"syl-beng-bd",sym:"sym-latn-bf",syn:"syn-syrc-ir",syo:"syo-latn-kh",syr:"syr-syrc-iq",sys:"sys-latn-td",syw:"syw-deva-np",syx:"syx-latn-ga",sza:"sza-latn-my",szb:"szb-latn-id",szc:"szc-latn-my",szd:"szd-latn-my",szg:"szg-latn-cd",szl:"szl-latn-pl",szn:"szn-latn-id",szp:"szp-latn-id",szv:"szv-latn-cm",szw:"szw-latn-id",szy:"szy-latn-tw",ta:"ta-taml-in",taa:"taa-latn-us",tab:"tab-cyrl-ru",tac:"tac-latn-mx",tad:"tad-latn-id",tae:"tae-latn-br",taf:"taf-latn-br",tag:"tag-latn-sd",taj:"taj-deva-np",tak:"tak-latn-ng",tal:"tal-latn-zz",tan:"tan-latn-zz",tao:"tao-latn-tw",tap:"tap-latn-cd",taq:"taq-latn-zz",tar:"tar-latn-mx",tas:"tas-latn-vn",tau:"tau-latn-us",tav:"tav-latn-co",taw:"taw-latn-pg",tax:"tax-latn-td",tay:"tay-latn-tw","tay-hans":"tay-hans-tw","tay-hant":"tay-hant-tw",taz:"taz-latn-sd",tba:"tba-latn-br",tbc:"tbc-latn-zz",tbd:"tbd-latn-zz",tbe:"tbe-latn-sb",tbf:"tbf-latn-zz",tbg:"tbg-latn-zz",tbh:"tbh-latn-au",tbi:"tbi-latn-sd",tbj:"tbj-latn-pg",tbk:"tbk-tagb-ph","tbk-hano":"tbk-hano-ph","tbk-latn":"tbk-latn-ph",tbl:"tbl-latn-ph",tbm:"tbm-latn-cd",tbn:"tbn-latn-co",tbo:"tbo-latn-zz",tbp:"tbp-latn-id",tbs:"tbs-latn-pg",tbt:"tbt-latn-cd",tbu:"tbu-latn-mx",tbv:"tbv-latn-pg",tbw:"tbw-latn-ph",tbx:"tbx-latn-pg",tby:"tby-latn-id",tbz:"tbz-latn-zz",tca:"tca-latn-br",tcb:"tcb-latn-us",tcc:"tcc-latn-tz",tcd:"tcd-latn-gh",tce:"tce-latn-ca",tcf:"tcf-latn-mx",tcg:"tcg-latn-id",tch:"tch-latn-tc",tci:"tci-latn-zz",tck:"tck-latn-ga",tcm:"tcm-latn-id",tcn:"tcn-tibt-np",tco:"tco-mymr-mm",tcp:"tcp-latn-mm",tcq:"tcq-latn-id",tcs:"tcs-latn-au",tcu:"tcu-latn-mx",tcw:"tcw-latn-mx",tcx:"tcx-taml-in",tcy:"tcy-knda-in",tcz:"tcz-latn-in",tda:"tda-tfng-ne","tda-arab":"tda-arab-ne","tda-latn":"tda-latn-ne",tdb:"tdb-deva-in","tdb-beng":"tdb-beng-in","tdb-kthi":"tdb-kthi-in",tdc:"tdc-latn-co",tdd:"tdd-tale-cn",tde:"tde-latn-ml",tdg:"tdg-deva-np",tdh:"tdh-deva-np",tdi:"tdi-latn-id",tdj:"tdj-latn-id",tdk:"tdk-latn-ng",tdl:"tdl-latn-ng",tdm:"tdm-latn-gy",tdn:"tdn-latn-id",tdo:"tdo-latn-ng",tdq:"tdq-latn-ng",tdr:"tdr-latn-vn",tds:"tds-latn-id",tdt:"tdt-latn-tl",tdu:"tdu-latn-my",tdv:"tdv-latn-ng",tdx:"tdx-latn-mg",tdy:"tdy-latn-ph",te:"te-telu-in",tea:"tea-latn-my",teb:"teb-latn-ec",tec:"tec-latn-ke",ted:"ted-latn-zz",tee:"tee-latn-mx",teg:"teg-latn-ga",teh:"teh-latn-ar",tei:"tei-latn-pg",tek:"tek-latn-cd",tem:"tem-latn-sl",ten:"ten-latn-co",teo:"teo-latn-ug",tep:"tep-latn-mx",teq:"teq-latn-sd",ter:"ter-latn-br",tes:"tes-java-id",tet:"tet-latn-tl",teu:"teu-latn-ug",tev:"tev-latn-id",tew:"tew-latn-us",tex:"tex-latn-ss",tey:"tey-latn-sd",tfi:"tfi-latn-zz",tfn:"tfn-latn-us",tfo:"tfo-latn-id",tfr:"tfr-latn-pa",tft:"tft-latn-id",tg:"tg-cyrl-tj","tg-arab":"tg-arab-pk","tg-pk":"tg-arab-pk",tga:"tga-latn-ke",tgb:"tgb-latn-my",tgc:"tgc-latn-zz",tgd:"tgd-latn-ng",tge:"tge-deva-np",tgf:"tgf-tibt-bt",tgh:"tgh-latn-tt",tgi:"tgi-latn-pg",tgj:"tgj-latn-in",tgn:"tgn-latn-ph",tgo:"tgo-latn-zz",tgp:"tgp-latn-vu",tgq:"tgq-latn-my",tgs:"tgs-latn-vu",tgt:"tgt-latn-ph","tgt-hano":"tgt-hano-ph","tgt-tagb":"tgt-tagb-ph",tgu:"tgu-latn-zz",tgv:"tgv-latn-br",tgw:"tgw-latn-ci",tgx:"tgx-latn-ca",tgy:"tgy-latn-ss",tgz:"tgz-latn-au",th:"th-thai-th",thd:"thd-latn-au",the:"the-deva-np",thf:"thf-deva-np",thh:"thh-latn-mx",thi:"thi-tale-la",thk:"thk-latn-ke",thl:"thl-deva-np",thm:"thm-thai-th",thp:"thp-latn-ca","thp-dupl":"thp-dupl-ca",thq:"thq-deva-np",thr:"thr-deva-np",ths:"ths-deva-np",tht:"tht-latn-ca",thu:"thu-latn-ss",thv:"thv-latn-dz","thv-arab":"thv-arab-dz","thv-tfng":"thv-tfng-dz",thy:"thy-latn-ng",thz:"thz-latn-ne","thz-tfng":"thz-tfng-ne",ti:"ti-ethi-et",tic:"tic-latn-sd",tif:"tif-latn-zz",tig:"tig-ethi-er",tih:"tih-latn-my",tii:"tii-latn-cd",tij:"tij-deva-np",tik:"tik-latn-zz",til:"til-latn-us",tim:"tim-latn-zz",tin:"tin-cyrl-ru",tio:"tio-latn-zz",tip:"tip-latn-id",tiq:"tiq-latn-bf",tis:"tis-latn-ph",tit:"tit-latn-co",tiu:"tiu-latn-ph",tiv:"tiv-latn-ng",tiw:"tiw-latn-au",tix:"tix-latn-us",tiy:"tiy-latn-ph",tja:"tja-latn-lr",tjg:"tjg-latn-id",tji:"tji-latn-cn",tjj:"tjj-latn-au",tjl:"tjl-mymr-mm",tjn:"tjn-latn-ci",tjo:"tjo-arab-dz",tjp:"tjp-latn-au",tjs:"tjs-latn-cn",tju:"tju-latn-au",tjw:"tjw-latn-au",tk:"tk-latn-tm",tka:"tka-latn-br",tkb:"tkb-deva-in",tkd:"tkd-latn-tl",tke:"tke-latn-mz",tkf:"tkf-latn-br",tkg:"tkg-latn-mg",tkl:"tkl-latn-tk",tkp:"tkp-latn-sb",tkq:"tkq-latn-ng",tkr:"tkr-latn-az",tks:"tks-arab-ir",tkt:"tkt-deva-np",tku:"tku-latn-mx",tkv:"tkv-latn-pg",tkw:"tkw-latn-sb",tkx:"tkx-latn-id",tkz:"tkz-latn-vn",tl:"tl-latn-ph",tla:"tla-latn-mx",tlb:"tlb-latn-id",tlc:"tlc-latn-mx",tld:"tld-latn-id",tlf:"tlf-latn-zz",tlg:"tlg-latn-id",tli:"tli-latn-us","tli-cyrl":"tli-cyrl-us",tlj:"tlj-latn-ug",tlk:"tlk-latn-id",tll:"tll-latn-cd",tlm:"tlm-latn-vu",tln:"tln-latn-id",tlp:"tlp-latn-mx",tlq:"tlq-latn-mm",tlr:"tlr-latn-sb",tls:"tls-latn-vu",tlt:"tlt-latn-id",tlu:"tlu-latn-id",tlv:"tlv-latn-id",tlx:"tlx-latn-zz",tly:"tly-latn-az",tma:"tma-latn-td",tmb:"tmb-latn-vu",tmc:"tmc-latn-td",tmd:"tmd-latn-pg",tme:"tme-latn-br",tmf:"tmf-latn-py",tmg:"tmg-latn-id",tmh:"tmh-latn-ne",tmi:"tmi-latn-vu",tmj:"tmj-latn-id",tmk:"tmk-deva-np",tml:"tml-latn-id",tmm:"tmm-latn-vn",tmn:"tmn-latn-id",tmo:"tmo-latn-my",tmq:"tmq-latn-pg",tmr:"tmr-syrc-il",tmt:"tmt-latn-vu",tmu:"tmu-latn-id",tmv:"tmv-latn-cd",tmw:"tmw-latn-my",tmy:"tmy-latn-zz",tmz:"tmz-latn-ve",tn:"tn-latn-za",tna:"tna-latn-bo",tnb:"tnb-latn-co",tnc:"tnc-latn-co",tnd:"tnd-latn-co",tng:"tng-latn-td",tnh:"tnh-latn-zz",tni:"tni-latn-id",tnk:"tnk-latn-vu",tnl:"tnl-latn-vu",tnm:"tnm-latn-id",tnn:"tnn-latn-vu",tno:"tno-latn-bo",tnp:"tnp-latn-vu",tnq:"tnq-latn-pr",tnr:"tnr-latn-sn",tns:"tns-latn-pg",tnt:"tnt-latn-id",tnv:"tnv-cakm-bd",tnw:"tnw-latn-id",tnx:"tnx-latn-sb",tny:"tny-latn-tz",to:"to-latn-to",tob:"tob-latn-ar",toc:"toc-latn-mx",tod:"tod-latn-gn",tof:"tof-latn-zz",tog:"tog-latn-mw",toh:"toh-latn-mz",toi:"toi-latn-zm",toj:"toj-latn-mx",tok:"tok-latn-001",tol:"tol-latn-us",tom:"tom-latn-id",too:"too-latn-mx",top:"top-latn-mx",toq:"toq-latn-zz",tor:"tor-latn-cd",tos:"tos-latn-mx",tou:"tou-latn-vn",tov:"tov-arab-ir",tow:"tow-latn-us",tox:"tox-latn-pw",toy:"toy-latn-id",toz:"toz-latn-cm",tpa:"tpa-latn-pg",tpc:"tpc-latn-mx",tpe:"tpe-latn-bd","tpe-beng":"tpe-beng-bd",tpf:"tpf-latn-id",tpg:"tpg-latn-id",tpi:"tpi-latn-pg",tpj:"tpj-latn-py",tpk:"tpk-latn-br",tpl:"tpl-latn-mx",tpm:"tpm-latn-zz",tpn:"tpn-latn-br",tpp:"tpp-latn-mx",tpr:"tpr-latn-br",tpt:"tpt-latn-mx",tpu:"tpu-khmr-kh",tpv:"tpv-latn-mp",tpx:"tpx-latn-mx",tpy:"tpy-latn-br",tpz:"tpz-latn-zz",tqb:"tqb-latn-br",tql:"tql-latn-vu",tqm:"tqm-latn-pg",tqn:"tqn-latn-us",tqo:"tqo-latn-zz",tqp:"tqp-latn-pg",tqt:"tqt-latn-mx",tqu:"tqu-latn-sb",tqw:"tqw-latn-us",tr:"tr-latn-tr",tra:"tra-arab-af",trb:"trb-latn-pg",trc:"trc-latn-mx",tre:"tre-latn-id",trf:"trf-latn-tt",trg:"trg-hebr-il",trh:"trh-latn-pg",tri:"tri-latn-sr",trj:"trj-latn-td",trl:"trl-latn-gb",trm:"trm-arab-af",trn:"trn-latn-bo",tro:"tro-latn-in",trp:"trp-latn-in","trp-beng":"trp-beng-in",trq:"trq-latn-mx",trr:"trr-latn-pe",trs:"trs-latn-mx",trt:"trt-latn-id",tru:"tru-latn-tr",trv:"trv-latn-tw",trw:"trw-arab-pk",trx:"trx-latn-my",try:"try-latn-in",trz:"trz-latn-br",ts:"ts-latn-za",tsa:"tsa-latn-cg",tsb:"tsb-latn-et",tsc:"tsc-latn-mz",tsd:"tsd-grek-gr",tsf:"tsf-deva-np",tsg:"tsg-latn-ph",tsh:"tsh-latn-cm",tsi:"tsi-latn-ca",tsj:"tsj-tibt-bt",tsl:"tsl-latn-vn",tsp:"tsp-latn-bf",tsr:"tsr-latn-vu",tst:"tst-latn-ml",tsu:"tsu-latn-tw",tsv:"tsv-latn-ga",tsw:"tsw-latn-zz",tsx:"tsx-latn-pg",tsz:"tsz-latn-mx",tt:"tt-cyrl-ru",ttb:"ttb-latn-ng",ttc:"ttc-latn-gt",ttd:"ttd-latn-zz",tte:"tte-latn-zz",ttf:"ttf-latn-cm",tth:"tth-laoo-la",tti:"tti-latn-id",ttj:"ttj-latn-ug",ttk:"ttk-latn-co",ttl:"ttl-latn-zm",ttm:"ttm-latn-ca",ttn:"ttn-latn-id",tto:"tto-laoo-la",ttp:"ttp-latn-id",ttr:"ttr-latn-zz",tts:"tts-thai-th",ttt:"ttt-latn-az",ttu:"ttu-latn-pg",ttv:"ttv-latn-pg",ttw:"ttw-latn-my",tty:"tty-latn-id",tua:"tua-latn-pg",tub:"tub-latn-us",tuc:"tuc-latn-pg",tud:"tud-latn-br",tue:"tue-latn-co",tuf:"tuf-latn-co",tug:"tug-latn-td",tuh:"tuh-latn-zz",tui:"tui-latn-cm",tuj:"tuj-latn-id",tul:"tul-latn-zz",tum:"tum-latn-mw",tun:"tun-latn-us",tuo:"tuo-latn-br",tuq:"tuq-latn-zz",tus:"tus-latn-ca",tuu:"tuu-latn-us",tuv:"tuv-latn-ke",tux:"tux-latn-br",tuy:"tuy-latn-ke",tuz:"tuz-latn-bf",tva:"tva-latn-sb",tvd:"tvd-latn-zz",tve:"tve-latn-id",tvk:"tvk-latn-vu",tvl:"tvl-latn-tv",tvm:"tvm-latn-id",tvn:"tvn-mymr-mm",tvo:"tvo-latn-id",tvs:"tvs-latn-ke",tvt:"tvt-latn-in",tvu:"tvu-latn-zz",tvw:"tvw-latn-id",tvx:"tvx-latn-tw",twa:"twa-latn-us",twb:"twb-latn-ph",twd:"twd-latn-nl",twe:"twe-latn-id",twf:"twf-latn-us",twg:"twg-latn-id",twh:"twh-latn-zz",twl:"twl-latn-mz",twm:"twm-deva-in",twn:"twn-latn-cm",two:"two-latn-bw",twp:"twp-latn-pg",twq:"twq-latn-ne",twr:"twr-latn-mx",twt:"twt-latn-br",twu:"twu-latn-id",tww:"tww-latn-pg",twx:"twx-latn-mz",twy:"twy-latn-id",txa:"txa-latn-my",txe:"txe-latn-id",txg:"txg-tang-cn",txi:"txi-latn-br",txj:"txj-latn-ng",txm:"txm-latn-id",txn:"txn-latn-id",txo:"txo-toto-in",txq:"txq-latn-id",txs:"txs-latn-id",txt:"txt-latn-id",txu:"txu-latn-br",txx:"txx-latn-my",txy:"txy-latn-mg",ty:"ty-latn-pf",tya:"tya-latn-zz",tye:"tye-latn-ng",tyh:"tyh-latn-vn",tyi:"tyi-latn-cg",tyj:"tyj-latn-vn",tyl:"tyl-latn-vn",tyn:"tyn-latn-id",typ:"typ-latn-au",tyr:"tyr-tavt-vn",tys:"tys-latn-vn",tyt:"tyt-latn-vn","tyt-tavt":"tyt-tavt-vn",tyu:"tyu-latn-bw",tyv:"tyv-cyrl-ru",tyx:"tyx-latn-cg",tyy:"tyy-latn-ng",tyz:"tyz-latn-vn",tzh:"tzh-latn-mx",tzj:"tzj-latn-gt",tzl:"tzl-latn-001",tzm:"tzm-latn-ma",tzn:"tzn-latn-id",tzo:"tzo-latn-mx",tzx:"tzx-latn-pg",uam:"uam-latn-br",uar:"uar-latn-pg",uba:"uba-latn-ng",ubi:"ubi-latn-td",ubl:"ubl-latn-ph",ubr:"ubr-latn-pg",ubu:"ubu-latn-zz",uda:"uda-latn-ng",ude:"ude-cyrl-ru",udg:"udg-mlym-in",udi:"udi-aghb-ru",udj:"udj-latn-id",udl:"udl-latn-cm",udm:"udm-cyrl-ru",udu:"udu-latn-sd",ues:"ues-latn-id",ufi:"ufi-latn-pg",ug:"ug-arab-cn","ug-cyrl":"ug-cyrl-kz","ug-kz":"ug-cyrl-kz","ug-mn":"ug-cyrl-mn",uga:"uga-ugar-sy",ugb:"ugb-latn-au",uge:"uge-latn-sb",ugh:"ugh-cyrl-ru",ugo:"ugo-thai-th",uha:"uha-latn-ng",uhn:"uhn-latn-id",uis:"uis-latn-pg",uiv:"uiv-latn-cm",uji:"uji-latn-ng",uk:"uk-cyrl-ua",uka:"uka-latn-id",ukg:"ukg-latn-pg",ukh:"ukh-latn-cf",uki:"uki-orya-in",ukk:"ukk-latn-mm",ukp:"ukp-latn-ng",ukq:"ukq-latn-ng",uku:"uku-latn-ng",ukv:"ukv-latn-ss",ukw:"ukw-latn-ng",uky:"uky-latn-au",ula:"ula-latn-ng",ulb:"ulb-latn-ng",ulc:"ulc-cyrl-ru",ule:"ule-latn-ar",ulf:"ulf-latn-id",uli:"uli-latn-fm",ulk:"ulk-latn-au",ulm:"ulm-latn-id",uln:"uln-latn-pg",ulu:"ulu-latn-id",ulw:"ulw-latn-ni",uma:"uma-latn-us",umb:"umb-latn-ao",umd:"umd-latn-au",umg:"umg-latn-au",umi:"umi-latn-my",umm:"umm-latn-ng",umn:"umn-latn-mm",umo:"umo-latn-br",ump:"ump-latn-au",umr:"umr-latn-au",ums:"ums-latn-id",una:"una-latn-pg",und:"en-latn-us","und-002":"en-latn-ng","und-003":"en-latn-us","und-005":"pt-latn-br","und-009":"en-latn-au","und-011":"en-latn-ng","und-013":"es-latn-mx","und-014":"sw-latn-tz","und-015":"ar-arab-eg","und-017":"sw-latn-cd","und-018":"en-latn-za","und-019":"en-latn-us","und-021":"en-latn-us","und-029":"es-latn-cu","und-030":"zh-hans-cn","und-034":"hi-deva-in","und-035":"id-latn-id","und-039":"it-latn-it","und-053":"en-latn-au","und-054":"en-latn-pg","und-057":"en-latn-gu","und-061":"sm-latn-ws","und-142":"zh-hans-cn","und-143":"uz-latn-uz","und-145":"ar-arab-sa","und-150":"ru-cyrl-ru","und-151":"ru-cyrl-ru","und-154":"en-latn-gb","und-155":"de-latn-de","und-202":"en-latn-ng","und-419":"es-latn-419","und-ad":"ca-latn-ad","und-adlm":"ff-adlm-gn","und-ae":"ar-arab-ae","und-af":"fa-arab-af","und-aghb":"udi-aghb-ru","und-ahom":"aho-ahom-in","und-al":"sq-latn-al","und-am":"hy-armn-am","und-ao":"pt-latn-ao","und-aq":"und-latn-aq","und-ar":"es-latn-ar","und-arab":"ar-arab-eg","und-arab-cc":"ms-arab-cc","und-arab-cn":"ug-arab-cn","und-arab-gb":"ur-arab-gb","und-arab-id":"ms-arab-id","und-arab-in":"ur-arab-in","und-arab-kh":"cja-arab-kh","und-arab-mm":"rhg-arab-mm","und-arab-mn":"kk-arab-mn","und-arab-mu":"ur-arab-mu","und-arab-ng":"ha-arab-ng","und-arab-pk":"ur-arab-pk","und-arab-tg":"apd-arab-tg","und-arab-th":"mfa-arab-th","und-arab-tj":"fa-arab-tj","und-arab-tr":"apc-arab-tr","und-arab-yt":"swb-arab-yt","und-armi":"arc-armi-ir","und-armn":"hy-armn-am","und-as":"sm-latn-as","und-at":"de-latn-at","und-avst":"ae-avst-ir","und-aw":"nl-latn-aw","und-ax":"sv-latn-ax","und-az":"az-latn-az","und-ba":"bs-latn-ba","und-bali":"ban-bali-id","und-bamu":"bax-bamu-cm","und-bass":"bsq-bass-lr","und-batk":"bbc-batk-id","und-bd":"bn-beng-bd","und-be":"nl-latn-be","und-beng":"bn-beng-bd","und-bf":"fr-latn-bf","und-bg":"bg-cyrl-bg","und-bh":"ar-arab-bh","und-bhks":"sa-bhks-in","und-bi":"rn-latn-bi","und-bj":"fr-latn-bj","und-bl":"fr-latn-bl","und-bn":"ms-latn-bn","und-bo":"es-latn-bo","und-bopo":"zh-bopo-tw","und-bq":"pap-latn-bq","und-br":"pt-latn-br","und-brah":"pka-brah-in","und-brai":"fr-brai-fr","und-bt":"dz-tibt-bt","und-bugi":"bug-bugi-id","und-buhd":"bku-buhd-ph","und-bv":"und-latn-bv","und-by":"be-cyrl-by","und-cakm":"ccp-cakm-bd","und-cans":"iu-cans-ca","und-cari":"xcr-cari-tr","und-cd":"sw-latn-cd","und-cf":"fr-latn-cf","und-cg":"fr-latn-cg","und-ch":"de-latn-ch","und-cham":"cjm-cham-vn","und-cher":"chr-cher-us","und-chrs":"xco-chrs-uz","und-ci":"fr-latn-ci","und-cl":"es-latn-cl","und-cm":"fr-latn-cm","und-cn":"zh-hans-cn","und-co":"es-latn-co","und-copt":"cop-copt-eg","und-cp":"und-latn-cp","und-cpmn":"und-cpmn-cy","und-cpmn-cy":"und-cpmn-cy","und-cprt":"grc-cprt-cy","und-cr":"es-latn-cr","und-cu":"es-latn-cu","und-cv":"pt-latn-cv","und-cw":"pap-latn-cw","und-cy":"el-grek-cy","und-cyrl":"ru-cyrl-ru","und-cyrl-al":"mk-cyrl-al","und-cyrl-ba":"sr-cyrl-ba","und-cyrl-ge":"ab-cyrl-ge","und-cyrl-gr":"mk-cyrl-gr","und-cyrl-md":"uk-cyrl-md","und-cyrl-ro":"bg-cyrl-ro","und-cyrl-sk":"uk-cyrl-sk","und-cyrl-tr":"kbd-cyrl-tr","und-cyrl-xk":"sr-cyrl-xk","und-cz":"cs-latn-cz","und-de":"de-latn-de","und-deva":"hi-deva-in","und-deva-bt":"ne-deva-bt","und-deva-fj":"hif-deva-fj","und-deva-mu":"bho-deva-mu","und-deva-pk":"btv-deva-pk","und-diak":"dv-diak-mv","und-dj":"aa-latn-dj","und-dk":"da-latn-dk","und-do":"es-latn-do","und-dogr":"doi-dogr-in","und-dupl":"fr-dupl-fr","und-dz":"ar-arab-dz","und-ea":"es-latn-ea","und-ec":"es-latn-ec","und-ee":"et-latn-ee","und-eg":"ar-arab-eg","und-egyp":"egy-egyp-eg","und-eh":"ar-arab-eh","und-elba":"sq-elba-al","und-elym":"arc-elym-ir","und-er":"ti-ethi-er","und-es":"es-latn-es","und-et":"am-ethi-et","und-ethi":"am-ethi-et","und-eu":"en-latn-ie","und-ez":"de-latn-ez","und-fi":"fi-latn-fi","und-fo":"fo-latn-fo","und-fr":"fr-latn-fr","und-ga":"fr-latn-ga","und-ge":"ka-geor-ge","und-geor":"ka-geor-ge","und-gf":"fr-latn-gf","und-gh":"ak-latn-gh","und-gl":"kl-latn-gl","und-glag":"cu-glag-bg","und-gn":"fr-latn-gn","und-gong":"wsg-gong-in","und-gonm":"esg-gonm-in","und-goth":"got-goth-ua","und-gp":"fr-latn-gp","und-gq":"es-latn-gq","und-gr":"el-grek-gr","und-gran":"sa-gran-in","und-grek":"el-grek-gr","und-grek-tr":"bgx-grek-tr","und-gs":"und-latn-gs","und-gt":"es-latn-gt","und-gujr":"gu-gujr-in","und-guru":"pa-guru-in","und-gw":"pt-latn-gw","und-hanb":"zh-hanb-tw","und-hang":"ko-hang-kr","und-hani":"zh-hani-cn","und-hano":"hnn-hano-ph","und-hans":"zh-hans-cn","und-hant":"zh-hant-tw","und-hant-ca":"yue-hant-ca","und-hebr":"he-hebr-il","und-hebr-se":"yi-hebr-se","und-hebr-ua":"yi-hebr-ua","und-hebr-us":"yi-hebr-us","und-hira":"ja-hira-jp","und-hk":"zh-hant-hk","und-hluw":"hlu-hluw-tr","und-hm":"und-latn-hm","und-hmng":"hnj-hmng-la","und-hmnp":"hnj-hmnp-us","und-hn":"es-latn-hn","und-hr":"hr-latn-hr","und-ht":"ht-latn-ht","und-hu":"hu-latn-hu","und-hung":"hu-hung-hu","und-ic":"es-latn-ic","und-id":"id-latn-id","und-il":"he-hebr-il","und-in":"hi-deva-in","und-iq":"ar-arab-iq","und-ir":"fa-arab-ir","und-is":"is-latn-is","und-it":"it-latn-it","und-ital":"ett-ital-it","und-jamo":"ko-jamo-kr","und-java":"jv-java-id","und-jo":"ar-arab-jo","und-jp":"ja-jpan-jp","und-jpan":"ja-jpan-jp","und-kali":"eky-kali-mm","und-kana":"ja-kana-jp","und-kawi":"kaw-kawi-id","und-ke":"sw-latn-ke","und-kg":"ky-cyrl-kg","und-kh":"km-khmr-kh","und-khar":"pra-khar-pk","und-khmr":"km-khmr-kh","und-khoj":"sd-khoj-in","und-kits":"zkt-kits-cn","und-km":"ar-arab-km","und-knda":"kn-knda-in","und-kore":"ko-kore-kr","und-kp":"ko-kore-kp","und-kr":"ko-kore-kr","und-kthi":"bho-kthi-in","und-kw":"ar-arab-kw","und-kz":"ru-cyrl-kz","und-la":"lo-laoo-la","und-lana":"nod-lana-th","und-laoo":"lo-laoo-la","und-laoo-au":"hnj-laoo-au","und-laoo-cn":"hnj-laoo-cn","und-laoo-fr":"hnj-laoo-fr","und-laoo-gf":"hnj-laoo-gf","und-laoo-mm":"hnj-laoo-mm","und-laoo-sr":"hnj-laoo-sr","und-laoo-th":"hnj-laoo-th","und-laoo-us":"hnj-laoo-us","und-laoo-vn":"hnj-laoo-vn","und-latn-af":"tk-latn-af","und-latn-am":"ku-latn-am","und-latn-cn":"za-latn-cn","und-latn-cy":"tr-latn-cy","und-latn-dz":"fr-latn-dz","und-latn-et":"en-latn-et","und-latn-ge":"ku-latn-ge","und-latn-ir":"tk-latn-ir","und-latn-km":"fr-latn-km","und-latn-ma":"fr-latn-ma","und-latn-mk":"sq-latn-mk","und-latn-mm":"kac-latn-mm","und-latn-mo":"pt-latn-mo","und-latn-mr":"fr-latn-mr","und-latn-ru":"krl-latn-ru","und-latn-sy":"fr-latn-sy","und-latn-tn":"fr-latn-tn","und-latn-tw":"trv-latn-tw","und-latn-ua":"pl-latn-ua","und-lb":"ar-arab-lb","und-lepc":"lep-lepc-in","und-li":"de-latn-li","und-limb":"lif-limb-in","und-lina":"lab-lina-gr","und-linb":"grc-linb-gr","und-lisu":"lis-lisu-cn","und-lk":"si-sinh-lk","und-ls":"st-latn-ls","und-lt":"lt-latn-lt","und-lu":"fr-latn-lu","und-lv":"lv-latn-lv","und-ly":"ar-arab-ly","und-lyci":"xlc-lyci-tr","und-lydi":"xld-lydi-tr","und-ma":"ar-arab-ma","und-mahj":"hi-mahj-in","und-maka":"mak-maka-id","und-mand":"myz-mand-ir","und-mani":"xmn-mani-cn","und-marc":"bo-marc-cn","und-mc":"fr-latn-mc","und-md":"ro-latn-md","und-me":"sr-latn-me","und-medf":"dmf-medf-ng","und-mend":"men-mend-sl","und-merc":"xmr-merc-sd","und-mero":"xmr-mero-sd","und-mf":"fr-latn-mf","und-mg":"mg-latn-mg","und-mk":"mk-cyrl-mk","und-ml":"bm-latn-ml","und-mlym":"ml-mlym-in","und-mm":"my-mymr-mm","und-mn":"mn-cyrl-mn","und-mo":"zh-hant-mo","und-modi":"mr-modi-in","und-mong":"mn-mong-cn","und-mq":"fr-latn-mq","und-mr":"ar-arab-mr","und-mroo":"mro-mroo-bd","und-mt":"mt-latn-mt","und-mtei":"mni-mtei-in","und-mu":"mfe-latn-mu","und-mult":"skr-mult-pk","und-mv":"dv-thaa-mv","und-mx":"es-latn-mx","und-my":"ms-latn-my","und-mymr":"my-mymr-mm","und-mymr-in":"kht-mymr-in","und-mymr-th":"mnw-mymr-th","und-mz":"pt-latn-mz","und-na":"af-latn-na","und-nagm":"unr-nagm-in","und-nand":"sa-nand-in","und-narb":"xna-narb-sa","und-nbat":"arc-nbat-jo","und-nc":"fr-latn-nc","und-ne":"ha-latn-ne","und-newa":"new-newa-np","und-ni":"es-latn-ni","und-nkoo":"man-nkoo-gn","und-nl":"nl-latn-nl","und-no":"nb-latn-no","und-np":"ne-deva-np","und-nshu":"zhx-nshu-cn","und-ogam":"sga-ogam-ie","und-olck":"sat-olck-in","und-om":"ar-arab-om","und-orkh":"otk-orkh-mn","und-orya":"or-orya-in","und-osge":"osa-osge-us","und-osma":"so-osma-so","und-ougr":"oui-ougr-143","und-pa":"es-latn-pa","und-palm":"arc-palm-sy","und-pauc":"ctd-pauc-mm","und-pe":"es-latn-pe","und-perm":"kv-perm-ru","und-pf":"fr-latn-pf","und-pg":"tpi-latn-pg","und-ph":"fil-latn-ph","und-phag":"lzh-phag-cn","und-phli":"pal-phli-ir","und-phlp":"pal-phlp-cn","und-phnx":"phn-phnx-lb","und-pk":"ur-arab-pk","und-pl":"pl-latn-pl","und-plrd":"hmd-plrd-cn","und-pm":"fr-latn-pm","und-pr":"es-latn-pr","und-prti":"xpr-prti-ir","und-ps":"ar-arab-ps","und-pt":"pt-latn-pt","und-pw":"pau-latn-pw","und-py":"gn-latn-py","und-qa":"ar-arab-qa","und-qo":"en-latn-dg","und-re":"fr-latn-re","und-rjng":"rej-rjng-id","und-ro":"ro-latn-ro","und-rohg":"rhg-rohg-mm","und-rs":"sr-cyrl-rs","und-ru":"ru-cyrl-ru","und-runr":"non-runr-se","und-rw":"rw-latn-rw","und-sa":"ar-arab-sa","und-samr":"smp-samr-il","und-sarb":"xsa-sarb-ye","und-saur":"saz-saur-in","und-sc":"fr-latn-sc","und-sd":"ar-arab-sd","und-se":"sv-latn-se","und-sgnw":"ase-sgnw-us","und-shaw":"en-shaw-gb","und-shrd":"sa-shrd-in","und-si":"sl-latn-si","und-sidd":"sa-sidd-in","und-sind":"sd-sind-in","und-sinh":"si-sinh-lk","und-sj":"nb-latn-sj","und-sk":"sk-latn-sk","und-sm":"it-latn-sm","und-sn":"fr-latn-sn","und-so":"so-latn-so","und-sogd":"sog-sogd-uz","und-sogo":"sog-sogo-uz","und-sora":"srb-sora-in","und-soyo":"cmg-soyo-mn","und-sr":"nl-latn-sr","und-st":"pt-latn-st","und-sund":"su-sund-id","und-sv":"es-latn-sv","und-sy":"ar-arab-sy","und-sylo":"syl-sylo-bd","und-syrc":"syr-syrc-iq","und-tagb":"tbw-tagb-ph","und-takr":"doi-takr-in","und-tale":"tdd-tale-cn","und-talu":"khb-talu-cn","und-taml":"ta-taml-in","und-tang":"txg-tang-cn","und-tavt":"blt-tavt-vn","und-td":"fr-latn-td","und-telu":"te-telu-in","und-tf":"fr-latn-tf","und-tfng":"zgh-tfng-ma","und-tg":"fr-latn-tg","und-tglg":"fil-tglg-ph","und-th":"th-thai-th","und-thaa":"dv-thaa-mv","und-thai":"th-thai-th","und-thai-cn":"lcp-thai-cn","und-thai-kh":"kdt-thai-kh","und-thai-la":"kdt-thai-la","und-tibt":"bo-tibt-cn","und-tirh":"mai-tirh-in","und-tj":"tg-cyrl-tj","und-tk":"tkl-latn-tk","und-tl":"pt-latn-tl","und-tm":"tk-latn-tm","und-tn":"ar-arab-tn","und-tnsa":"nst-tnsa-in","und-to":"to-latn-to","und-toto":"txo-toto-in","und-tr":"tr-latn-tr","und-tv":"tvl-latn-tv","und-tw":"zh-hant-tw","und-tz":"sw-latn-tz","und-ua":"uk-cyrl-ua","und-ug":"sw-latn-ug","und-ugar":"uga-ugar-sy","und-uy":"es-latn-uy","und-uz":"uz-latn-uz","und-va":"it-latn-va","und-vaii":"vai-vaii-lr","und-ve":"es-latn-ve","und-vith":"sq-vith-al","und-vn":"vi-latn-vn","und-vu":"bi-latn-vu","und-wara":"hoc-wara-in","und-wcho":"nnp-wcho-in","und-wf":"fr-latn-wf","und-ws":"sm-latn-ws","und-xk":"sq-latn-xk","und-xpeo":"peo-xpeo-ir","und-xsux":"akk-xsux-iq","und-ye":"ar-arab-ye","und-yezi":"ku-yezi-ge","und-yiii":"ii-yiii-cn","und-yt":"fr-latn-yt","und-zanb":"cmg-zanb-mn","und-zw":"sn-latn-zw",une:"une-latn-ng",ung:"ung-latn-au",uni:"uni-latn-pg",unk:"unk-latn-br",unm:"unm-latn-us",unn:"unn-latn-au",unr:"unr-beng-in","unr-deva":"unr-deva-np","unr-np":"unr-deva-np",unu:"unu-latn-pg",unx:"unx-beng-in",unz:"unz-latn-id",uok:"uok-latn-zz",uon:"uon-latn-tw",upi:"upi-latn-pg",upv:"upv-latn-vu",ur:"ur-arab-pk",ura:"ura-latn-pe",urb:"urb-latn-br",urc:"urc-latn-au",ure:"ure-latn-bo",urf:"urf-latn-au",urg:"urg-latn-pg",urh:"urh-latn-ng",uri:"uri-latn-zz",urk:"urk-thai-th",urm:"urm-latn-pg",urn:"urn-latn-id",uro:"uro-latn-pg",urp:"urp-latn-br",urr:"urr-latn-vu",urt:"urt-latn-zz",uru:"uru-latn-br",urv:"urv-latn-pg",urw:"urw-latn-zz",urx:"urx-latn-pg",ury:"ury-latn-id",urz:"urz-latn-br",usa:"usa-latn-zz",ush:"ush-arab-pk",usi:"usi-latn-bd","usi-beng":"usi-beng-bd",usk:"usk-latn-cm",usp:"usp-latn-gt",uss:"uss-latn-ng",usu:"usu-latn-pg",uta:"uta-latn-ng",ute:"ute-latn-us",uth:"uth-latn-zz",utp:"utp-latn-sb",utr:"utr-latn-zz",utu:"utu-latn-pg",uum:"uum-grek-ge","uum-cyrl":"uum-cyrl-ge",uur:"uur-latn-vu",uve:"uve-latn-nc",uvh:"uvh-latn-zz",uvl:"uvl-latn-zz",uwa:"uwa-latn-au",uya:"uya-latn-ng",uz:"uz-latn-uz","uz-af":"uz-arab-af","uz-arab":"uz-arab-af","uz-cn":"uz-cyrl-cn",uzs:"uzs-arab-af",vaa:"vaa-taml-in",vae:"vae-latn-cf",vaf:"vaf-arab-ir",vag:"vag-latn-zz",vah:"vah-deva-in",vai:"vai-vaii-lr",vaj:"vaj-latn-na",val:"val-latn-pg",vam:"vam-latn-pg",van:"van-latn-zz",vao:"vao-latn-vu",vap:"vap-latn-in",var:"var-latn-mx",vas:"vas-deva-in","vas-gujr":"vas-gujr-in",vau:"vau-latn-cd",vav:"vav-deva-in","vav-gujr":"vav-gujr-in",vay:"vay-deva-np",vbb:"vbb-latn-id",vbk:"vbk-latn-ph",ve:"ve-latn-za",vec:"vec-latn-it",vem:"vem-latn-ng",veo:"veo-latn-us",vep:"vep-latn-ru",ver:"ver-latn-ng",vgr:"vgr-arab-pk",vi:"vi-latn-vn",vic:"vic-latn-sx",vid:"vid-latn-tz",vif:"vif-latn-cg",vig:"vig-latn-bf",vil:"vil-latn-ar",vin:"vin-latn-tz",vit:"vit-latn-ng",viv:"viv-latn-zz",vka:"vka-latn-au",vkj:"vkj-latn-td",vkk:"vkk-latn-id",vkl:"vkl-latn-id",vkm:"vkm-latn-br",vkn:"vkn-latn-ng",vko:"vko-latn-id",vkp:"vkp-latn-in","vkp-deva":"vkp-deva-in",vkt:"vkt-latn-id",vku:"vku-latn-au",vkz:"vkz-latn-ng",vlp:"vlp-latn-vu",vls:"vls-latn-be",vma:"vma-latn-au",vmb:"vmb-latn-au",vmc:"vmc-latn-mx",vmd:"vmd-knda-in",vme:"vme-latn-id",vmf:"vmf-latn-de",vmg:"vmg-latn-pg",vmh:"vmh-arab-ir",vmi:"vmi-latn-au",vmj:"vmj-latn-mx",vmk:"vmk-latn-mz",vml:"vml-latn-au",vmm:"vmm-latn-mx",vmp:"vmp-latn-mx",vmq:"vmq-latn-mx",vmr:"vmr-latn-mz",vms:"vms-latn-id",vmu:"vmu-latn-au",vmw:"vmw-latn-mz",vmx:"vmx-latn-mx",vmy:"vmy-latn-mx",vmz:"vmz-latn-mx",vnk:"vnk-latn-sb",vnm:"vnm-latn-vu",vnp:"vnp-latn-vu",vo:"vo-latn-001",vor:"vor-latn-ng",vot:"vot-latn-ru",vra:"vra-latn-vu",vro:"vro-latn-ee",vrs:"vrs-latn-sb",vrt:"vrt-latn-vu",vto:"vto-latn-id",vum:"vum-latn-ga",vun:"vun-latn-tz",vut:"vut-latn-zz",vwa:"vwa-latn-cn","vwa-mymr":"vwa-mymr-cn",wa:"wa-latn-be",waa:"waa-latn-us",wab:"wab-latn-pg",wac:"wac-latn-us",wad:"wad-latn-id",wae:"wae-latn-ch",waf:"waf-latn-br",wag:"wag-latn-pg",wah:"wah-latn-id",wai:"wai-latn-id",waj:"waj-latn-zz",wal:"wal-ethi-et",wam:"wam-latn-us",wan:"wan-latn-zz",wap:"wap-latn-gy",waq:"waq-latn-au",war:"war-latn-ph",was:"was-latn-us",wat:"wat-latn-pg",wau:"wau-latn-br",wav:"wav-latn-ng",waw:"waw-latn-br",wax:"wax-latn-pg",way:"way-latn-sr",waz:"waz-latn-pg",wba:"wba-latn-ve",wbb:"wbb-latn-id",wbe:"wbe-latn-id",wbf:"wbf-latn-bf",wbh:"wbh-latn-tz",wbi:"wbi-latn-tz",wbj:"wbj-latn-tz",wbk:"wbk-arab-af",wbl:"wbl-latn-pk","wbl-arab":"wbl-arab-af","wbl-cyrl":"wbl-cyrl-tj",wbm:"wbm-latn-cn",wbp:"wbp-latn-au",wbq:"wbq-telu-in",wbr:"wbr-deva-in",wbt:"wbt-latn-au",wbv:"wbv-latn-au",wbw:"wbw-latn-id",wca:"wca-latn-br",wci:"wci-latn-zz",wdd:"wdd-latn-ga",wdg:"wdg-latn-pg",wdj:"wdj-latn-au",wdk:"wdk-latn-au",wdt:"wdt-latn-ca",wdu:"wdu-latn-au",wdy:"wdy-latn-au",wec:"wec-latn-ci",wed:"wed-latn-pg",weg:"weg-latn-au",weh:"weh-latn-cm",wei:"wei-latn-pg",wem:"wem-latn-bj",weo:"weo-latn-id",wep:"wep-latn-de",wer:"wer-latn-zz",wes:"wes-latn-cm",wet:"wet-latn-id",weu:"weu-latn-mm",wew:"wew-latn-id",wfg:"wfg-latn-id",wga:"wga-latn-au",wgb:"wgb-latn-pg",wgg:"wgg-latn-au",wgi:"wgi-latn-zz",wgo:"wgo-latn-id",wgu:"wgu-latn-au",wgy:"wgy-latn-au",wha:"wha-latn-id",whg:"whg-latn-zz",whk:"whk-latn-id",whu:"whu-latn-id",wib:"wib-latn-zz",wic:"wic-latn-us",wie:"wie-latn-au",wif:"wif-latn-au",wig:"wig-latn-au",wih:"wih-latn-au",wii:"wii-latn-pg",wij:"wij-latn-au",wik:"wik-latn-au",wil:"wil-latn-au",wim:"wim-latn-au",win:"win-latn-us",wir:"wir-latn-br",wiu:"wiu-latn-zz",wiv:"wiv-latn-zz",wiy:"wiy-latn-us",wja:"wja-latn-zz",wji:"wji-latn-zz",wka:"wka-latn-tz",wkd:"wkd-latn-id",wkr:"wkr-latn-au",wkw:"wkw-latn-au",wky:"wky-latn-au",wla:"wla-latn-pg",wlg:"wlg-latn-au",wlh:"wlh-latn-tl",wli:"wli-latn-id",wlm:"wlm-latn-gb",wlo:"wlo-arab-id",wlr:"wlr-latn-vu",wls:"wls-latn-wf",wlu:"wlu-latn-au",wlv:"wlv-latn-ar",wlw:"wlw-latn-id",wlx:"wlx-latn-gh",wma:"wma-latn-ng",wmb:"wmb-latn-au",wmc:"wmc-latn-pg",wmd:"wmd-latn-br",wme:"wme-deva-np",wmh:"wmh-latn-tl",wmi:"wmi-latn-au",wmm:"wmm-latn-id",wmn:"wmn-latn-nc",wmo:"wmo-latn-zz",wms:"wms-latn-id",wmt:"wmt-latn-au",wmw:"wmw-latn-mz","wmw-arab":"wmw-arab-mz",wmx:"wmx-latn-pg",wnb:"wnb-latn-pg",wnc:"wnc-latn-zz",wnd:"wnd-latn-au",wne:"wne-arab-pk",wng:"wng-latn-id",wni:"wni-arab-km",wnk:"wnk-latn-id",wnm:"wnm-latn-au",wnn:"wnn-latn-au",wno:"wno-latn-id",wnp:"wnp-latn-pg",wnu:"wnu-latn-zz",wnw:"wnw-latn-us",wny:"wny-latn-au",wo:"wo-latn-sn",woa:"woa-latn-au",wob:"wob-latn-zz",woc:"woc-latn-pg",wod:"wod-latn-id",woe:"woe-latn-fm",wof:"wof-latn-gm","wof-arab":"wof-arab-gm",wog:"wog-latn-pg",woi:"woi-latn-id",wok:"wok-latn-cm",wom:"wom-latn-ng",won:"won-latn-cd",woo:"woo-latn-id",wor:"wor-latn-id",wos:"wos-latn-zz",wow:"wow-latn-id",wpc:"wpc-latn-ve",wrb:"wrb-latn-au",wrg:"wrg-latn-au",wrh:"wrh-latn-au",wri:"wri-latn-au",wrk:"wrk-latn-au",wrl:"wrl-latn-au",wrm:"wrm-latn-au",wro:"wro-latn-au",wrp:"wrp-latn-id",wrr:"wrr-latn-au",wrs:"wrs-latn-zz",wru:"wru-latn-id",wrv:"wrv-latn-pg",wrw:"wrw-latn-au",wrx:"wrx-latn-id",wrz:"wrz-latn-au",wsa:"wsa-latn-id",wsg:"wsg-gong-in",wsi:"wsi-latn-vu",wsk:"wsk-latn-zz",wsr:"wsr-latn-pg",wss:"wss-latn-gh",wsu:"wsu-latn-br",wsv:"wsv-arab-af",wtf:"wtf-latn-pg",wth:"wth-latn-au",wti:"wti-latn-et",wtk:"wtk-latn-pg",wtm:"wtm-deva-in",wtw:"wtw-latn-id","wtw-bugi":"wtw-bugi-id",wua:"wua-latn-au",wub:"wub-latn-au",wud:"wud-latn-tg",wul:"wul-latn-id",wum:"wum-latn-ga",wun:"wun-latn-tz",wur:"wur-latn-au",wut:"wut-latn-pg",wuu:"wuu-hans-cn",wuv:"wuv-latn-zz",wux:"wux-latn-au",wuy:"wuy-latn-id",wwa:"wwa-latn-zz",wwb:"wwb-latn-au",wwo:"wwo-latn-vu",wwr:"wwr-latn-au",www:"www-latn-cm",wxw:"wxw-latn-au",wyb:"wyb-latn-au",wyi:"wyi-latn-au",wym:"wym-latn-pl",wyn:"wyn-latn-us",wyr:"wyr-latn-br",wyy:"wyy-latn-fj",xaa:"xaa-latn-es",xab:"xab-latn-ng",xai:"xai-latn-br",xaj:"xaj-latn-br",xak:"xak-latn-ve",xal:"xal-cyrl-ru",xam:"xam-latn-za",xan:"xan-ethi-et",xao:"xao-latn-vn",xar:"xar-latn-pg",xas:"xas-cyrl-ru",xat:"xat-latn-br",xau:"xau-latn-id",xav:"xav-latn-br",xaw:"xaw-latn-us",xay:"xay-latn-id",xbb:"xbb-latn-au",xbd:"xbd-latn-au",xbe:"xbe-latn-au",xbg:"xbg-latn-au",xbi:"xbi-latn-zz",xbj:"xbj-latn-au",xbm:"xbm-latn-fr",xbn:"xbn-latn-my",xbp:"xbp-latn-au",xbr:"xbr-latn-id",xbw:"xbw-latn-br",xby:"xby-latn-au",xch:"xch-latn-us",xco:"xco-chrs-uz",xcr:"xcr-cari-tr",xda:"xda-latn-au",xdk:"xdk-latn-au",xdo:"xdo-latn-ao",xdq:"xdq-cyrl-ru",xdy:"xdy-latn-id",xed:"xed-latn-cm",xeg:"xeg-latn-za",xem:"xem-latn-id",xer:"xer-latn-br",xes:"xes-latn-zz",xet:"xet-latn-br",xeu:"xeu-latn-pg",xgb:"xgb-latn-ci",xgd:"xgd-latn-au",xgg:"xgg-latn-au",xgi:"xgi-latn-au",xgm:"xgm-latn-au",xgu:"xgu-latn-au",xgw:"xgw-latn-au",xh:"xh-latn-za",xhe:"xhe-arab-pk",xhm:"xhm-khmr-kh",xhv:"xhv-latn-vn",xii:"xii-latn-za",xin:"xin-latn-gt",xir:"xir-latn-br",xis:"xis-orya-in",xiy:"xiy-latn-br",xjb:"xjb-latn-au",xjt:"xjt-latn-au",xka:"xka-arab-pk",xkb:"xkb-latn-bj",xkc:"xkc-arab-ir",xkd:"xkd-latn-id",xke:"xke-latn-id",xkg:"xkg-latn-ml",xkj:"xkj-arab-ir",xkl:"xkl-latn-id",xkn:"xkn-latn-id",xkp:"xkp-arab-ir",xkq:"xkq-latn-id",xkr:"xkr-latn-br",xks:"xks-latn-id",xkt:"xkt-latn-gh",xku:"xku-latn-cg",xkv:"xkv-latn-bw",xkw:"xkw-latn-id",xkx:"xkx-latn-pg",xky:"xky-latn-my",xkz:"xkz-latn-bt",xla:"xla-latn-zz",xlc:"xlc-lyci-tr",xld:"xld-lydi-tr",xly:"xly-elym-ir",xma:"xma-latn-so",xmb:"xmb-latn-cm",xmc:"xmc-latn-mz",xmd:"xmd-latn-cm",xmf:"xmf-geor-ge",xmg:"xmg-latn-cm",xmh:"xmh-latn-au",xmj:"xmj-latn-cm",xmm:"xmm-latn-id",xmn:"xmn-mani-cn",xmo:"xmo-latn-br",xmp:"xmp-latn-au",xmq:"xmq-latn-au",xmr:"xmr-merc-sd",xmt:"xmt-latn-id",xmu:"xmu-latn-au",xmv:"xmv-latn-mg",xmw:"xmw-latn-mg",xmx:"xmx-latn-id",xmy:"xmy-latn-au",xmz:"xmz-latn-id",xna:"xna-narb-sa",xnb:"xnb-latn-tw",xni:"xni-latn-au",xnj:"xnj-latn-tz",xnk:"xnk-latn-au",xnm:"xnm-latn-au",xnn:"xnn-latn-ph",xnq:"xnq-latn-mz",xnr:"xnr-deva-in",xnt:"xnt-latn-us",xnu:"xnu-latn-au",xny:"xny-latn-au",xnz:"xnz-latn-eg","xnz-arab":"xnz-arab-eg",xoc:"xoc-latn-ng",xod:"xod-latn-id",xog:"xog-latn-ug",xoi:"xoi-latn-pg",xok:"xok-latn-br",xom:"xom-latn-sd","xom-ethi":"xom-ethi-et",xon:"xon-latn-zz",xoo:"xoo-latn-br",xop:"xop-latn-pg",xor:"xor-latn-br",xow:"xow-latn-pg",xpa:"xpa-latn-au",xpb:"xpb-latn-au",xpd:"xpd-latn-au",xpf:"xpf-latn-au",xpg:"xpg-grek-tr",xph:"xph-latn-au",xpi:"xpi-ogam-gb",xpj:"xpj-latn-au",xpk:"xpk-latn-br",xpl:"xpl-latn-au",xpm:"xpm-cyrl-ru",xpn:"xpn-latn-br",xpo:"xpo-latn-mx",xpq:"xpq-latn-us",xpr:"xpr-prti-ir",xpt:"xpt-latn-au",xpv:"xpv-latn-au",xpw:"xpw-latn-au",xpx:"xpx-latn-au",xpz:"xpz-latn-au",xra:"xra-latn-br",xrb:"xrb-latn-zz",xrd:"xrd-latn-au",xre:"xre-latn-br",xrg:"xrg-latn-au",xri:"xri-latn-br",xrm:"xrm-cyrl-ru",xrn:"xrn-cyrl-ru",xrr:"xrr-latn-it",xru:"xru-latn-au",xrw:"xrw-latn-pg",xsa:"xsa-sarb-ye",xsb:"xsb-latn-ph",xse:"xse-latn-id",xsh:"xsh-latn-ng",xsi:"xsi-latn-zz",xsm:"xsm-latn-zz",xsn:"xsn-latn-ng",xsp:"xsp-latn-pg",xsq:"xsq-latn-mz",xsr:"xsr-deva-np",xss:"xss-cyrl-ru",xsu:"xsu-latn-ve",xsy:"xsy-latn-tw",xta:"xta-latn-mx",xtb:"xtb-latn-mx",xtc:"xtc-latn-sd",xtd:"xtd-latn-mx",xte:"xte-latn-id",xth:"xth-latn-au",xti:"xti-latn-mx",xtj:"xtj-latn-mx",xtl:"xtl-latn-mx",xtm:"xtm-latn-mx",xtn:"xtn-latn-mx",xtp:"xtp-latn-mx",xts:"xts-latn-mx",xtt:"xtt-latn-mx",xtu:"xtu-latn-mx",xtv:"xtv-latn-au",xtw:"xtw-latn-br",xty:"xty-latn-mx",xub:"xub-taml-in","xub-knda":"xub-knda-in","xub-mlym":"xub-mlym-in",xud:"xud-latn-au",xuj:"xuj-taml-in",xul:"xul-latn-au",xum:"xum-latn-it","xum-ital":"xum-ital-it",xun:"xun-latn-au",xuo:"xuo-latn-td",xut:"xut-latn-au",xuu:"xuu-latn-na",xve:"xve-ital-it",xvi:"xvi-arab-af",xvn:"xvn-latn-es",xvo:"xvo-latn-it",xvs:"xvs-latn-it",xwa:"xwa-latn-br",xwd:"xwd-latn-au",xwe:"xwe-latn-zz",xwj:"xwj-latn-au",xwk:"xwk-latn-au",xwl:"xwl-latn-bj",xwo:"xwo-cyrl-ru",xwr:"xwr-latn-id",xwt:"xwt-latn-au",xww:"xww-latn-au",xxb:"xxb-latn-gh",xxk:"xxk-latn-id",xxm:"xxm-latn-au",xxr:"xxr-latn-br",xxt:"xxt-latn-id",xya:"xya-latn-au",xyb:"xyb-latn-au",xyj:"xyj-latn-au",xyk:"xyk-latn-au",xyl:"xyl-latn-br",xyt:"xyt-latn-au",xyy:"xyy-latn-au",xzh:"xzh-marc-cn",xzp:"xzp-latn-mx",yaa:"yaa-latn-pe",yab:"yab-latn-br",yac:"yac-latn-id",yad:"yad-latn-pe",yae:"yae-latn-ve",yaf:"yaf-latn-cd",yag:"yag-latn-cl",yai:"yai-cyrl-tj",yaj:"yaj-latn-cf",yak:"yak-latn-us",yal:"yal-latn-gn","yal-arab":"yal-arab-gn",yam:"yam-latn-zz",yan:"yan-latn-ni",yao:"yao-latn-mz",yap:"yap-latn-fm",yaq:"yaq-latn-mx",yar:"yar-latn-ve",yas:"yas-latn-zz",yat:"yat-latn-zz",yau:"yau-latn-ve",yav:"yav-latn-cm",yaw:"yaw-latn-br",yax:"yax-latn-ao",yay:"yay-latn-zz",yaz:"yaz-latn-zz",yba:"yba-latn-zz",ybb:"ybb-latn-cm",ybe:"ybe-latn-cn","ybe-ougr":"ybe-ougr-cn",ybh:"ybh-deva-np",ybi:"ybi-deva-np",ybj:"ybj-latn-ng",ybl:"ybl-latn-ng",ybm:"ybm-latn-pg",ybn:"ybn-latn-br",ybo:"ybo-latn-pg",ybx:"ybx-latn-pg",yby:"yby-latn-zz",ycl:"ycl-latn-cn",ycn:"ycn-latn-co",yda:"yda-latn-au",yde:"yde-latn-pg",ydg:"ydg-arab-pk",ydk:"ydk-latn-pg",yea:"yea-mlym-in","yea-knda":"yea-knda-in",yec:"yec-latn-de",yee:"yee-latn-pg",yei:"yei-latn-cm",yej:"yej-grek-il",yel:"yel-latn-cd",yer:"yer-latn-zz",yes:"yes-latn-ng",yet:"yet-latn-id",yeu:"yeu-telu-in",yev:"yev-latn-pg",yey:"yey-latn-bw",yga:"yga-latn-au",ygi:"ygi-latn-au",ygl:"ygl-latn-pg",ygm:"ygm-latn-pg",ygp:"ygp-plrd-cn",ygr:"ygr-latn-zz",ygu:"ygu-latn-au",ygw:"ygw-latn-zz",yhd:"yhd-hebr-il",yi:"yi-hebr-001",yia:"yia-latn-au",yig:"yig-yiii-cn",yih:"yih-hebr-de",yii:"yii-latn-au",yij:"yij-latn-au",yil:"yil-latn-au",yim:"yim-latn-in",yir:"yir-latn-id",yis:"yis-latn-pg",yiv:"yiv-yiii-cn",yka:"yka-latn-ph","yka-arab":"yka-arab-ph",ykg:"ykg-cyrl-ru",yki:"yki-latn-id",ykk:"ykk-latn-pg",ykm:"ykm-latn-pg",yko:"yko-latn-zz",ykr:"ykr-latn-pg",yky:"yky-latn-cf",yla:"yla-latn-pg",ylb:"ylb-latn-pg",yle:"yle-latn-zz",ylg:"ylg-latn-zz",yli:"yli-latn-id",yll:"yll-latn-zz",ylr:"ylr-latn-au",ylu:"ylu-latn-pg",yly:"yly-latn-nc",ymb:"ymb-latn-pg",yme:"yme-latn-pe",ymg:"ymg-latn-cd",ymk:"ymk-latn-mz","ymk-arab":"ymk-arab-mz",yml:"yml-latn-zz",ymm:"ymm-latn-so",ymn:"ymn-latn-id",ymo:"ymo-latn-pg",ymp:"ymp-latn-pg",yna:"yna-plrd-cn",ynd:"ynd-latn-au",yng:"yng-latn-cd",ynk:"ynk-cyrl-ru",ynl:"ynl-latn-pg",ynq:"ynq-latn-ng",yns:"yns-latn-cd",ynu:"ynu-latn-co",yo:"yo-latn-ng",yob:"yob-latn-pg",yog:"yog-latn-ph",yoi:"yoi-jpan-jp",yok:"yok-latn-us",yol:"yol-latn-gb",yom:"yom-latn-cd",yon:"yon-latn-zz",yot:"yot-latn-ng",yoy:"yoy-thai-th",yra:"yra-latn-pg",yrb:"yrb-latn-zz",yre:"yre-latn-zz",yrk:"yrk-cyrl-ru",yrl:"yrl-latn-br",yrm:"yrm-latn-au",yro:"yro-latn-br",yrs:"yrs-latn-id",yrw:"yrw-latn-pg",yry:"yry-latn-au",ysd:"ysd-yiii-cn",ysn:"ysn-yiii-cn",ysp:"ysp-yiii-cn",ysr:"ysr-cyrl-ru",yss:"yss-latn-zz",ysy:"ysy-plrd-cn",ytw:"ytw-latn-pg",yty:"yty-latn-au",yua:"yua-latn-mx",yub:"yub-latn-au",yuc:"yuc-latn-us",yud:"yud-hebr-il",yue:"yue-hant-hk","yue-cn":"yue-hans-cn","yue-hans":"yue-hans-cn",yuf:"yuf-latn-us",yug:"yug-cyrl-ru",yui:"yui-latn-co",yuj:"yuj-latn-zz",yul:"yul-latn-cf",yum:"yum-latn-us",yun:"yun-latn-ng",yup:"yup-latn-co",yuq:"yuq-latn-bo",yur:"yur-latn-us",yut:"yut-latn-zz",yuw:"yuw-latn-zz",yux:"yux-cyrl-ru",yuz:"yuz-latn-bo",yva:"yva-latn-id",yvt:"yvt-latn-ve",ywa:"ywa-latn-pg",ywg:"ywg-latn-au",ywn:"ywn-latn-br",ywq:"ywq-plrd-cn","ywq-yiii":"ywq-yiii-cn",ywr:"ywr-latn-au",ywu:"ywu-plrd-cn","ywu-yiii":"ywu-yiii-cn",yww:"yww-latn-au",yxa:"yxa-latn-au",yxg:"yxg-latn-au",yxl:"yxl-latn-au",yxm:"yxm-latn-au",yxu:"yxu-latn-au",yxy:"yxy-latn-au",yyr:"yyr-latn-au",yyu:"yyu-latn-pg",za:"za-latn-cn",zaa:"zaa-latn-mx",zab:"zab-latn-mx",zac:"zac-latn-mx",zad:"zad-latn-mx",zae:"zae-latn-mx",zaf:"zaf-latn-mx",zag:"zag-latn-sd",zah:"zah-latn-ng",zaj:"zaj-latn-tz",zak:"zak-latn-tz",zam:"zam-latn-mx",zao:"zao-latn-mx",zap:"zap-latn-mx",zaq:"zaq-latn-mx",zar:"zar-latn-mx",zas:"zas-latn-mx",zat:"zat-latn-mx",zau:"zau-tibt-in","zau-arab":"zau-arab-in",zav:"zav-latn-mx",zaw:"zaw-latn-mx",zax:"zax-latn-mx",zay:"zay-latn-et","zay-ethi":"zay-ethi-et",zaz:"zaz-latn-ng",zba:"zba-arab-001",zbc:"zbc-latn-my",zbe:"zbe-latn-my",zbt:"zbt-latn-id",zbu:"zbu-latn-ng",zbw:"zbw-latn-my",zca:"zca-latn-mx",zch:"zch-hani-cn",zdj:"zdj-arab-km",zea:"zea-latn-nl",zeg:"zeg-latn-pg",zeh:"zeh-hani-cn",zen:"zen-tfng-mr","zen-arab":"zen-arab-mr",zga:"zga-latn-tz",zgb:"zgb-hani-cn",zgh:"zgh-tfng-ma",zgm:"zgm-hani-cn",zgn:"zgn-hani-cn",zgr:"zgr-latn-pg",zh:"zh-hans-cn","zh-au":"zh-hant-au","zh-bn":"zh-hant-bn","zh-bopo":"zh-bopo-tw","zh-gb":"zh-hant-gb","zh-gf":"zh-hant-gf","zh-hanb":"zh-hanb-tw","zh-hant":"zh-hant-tw","zh-hk":"zh-hant-hk","zh-id":"zh-hant-id","zh-mo":"zh-hant-mo","zh-pa":"zh-hant-pa","zh-pf":"zh-hant-pf","zh-ph":"zh-hant-ph","zh-sr":"zh-hant-sr","zh-th":"zh-hant-th","zh-tw":"zh-hant-tw","zh-us":"zh-hant-us","zh-vn":"zh-hant-vn",zhd:"zhd-hani-cn","zhd-latn":"zhd-latn-vn",zhi:"zhi-latn-ng",zhn:"zhn-latn-cn","zhn-hani":"zhn-hani-cn",zhw:"zhw-latn-cm",zhx:"zhx-nshu-cn",zia:"zia-latn-zz",zik:"zik-latn-pg",zil:"zil-latn-gn",zim:"zim-latn-td",zin:"zin-latn-tz",ziw:"ziw-latn-tz",ziz:"ziz-latn-ng",zka:"zka-latn-id",zkb:"zkb-cyrl-ru",zkd:"zkd-latn-mm",zko:"zko-cyrl-ru",zkp:"zkp-latn-br",zkt:"zkt-kits-cn",zku:"zku-latn-au",zkz:"zkz-cyrl-ru",zla:"zla-latn-cd",zlj:"zlj-hani-cn","zlj-latn":"zlj-latn-cn",zlm:"zlm-latn-tg",zln:"zln-hani-cn",zlq:"zlq-hani-cn",zma:"zma-latn-au",zmb:"zmb-latn-cd",zmc:"zmc-latn-au",zmd:"zmd-latn-au",zme:"zme-latn-au",zmf:"zmf-latn-cd",zmg:"zmg-latn-au",zmh:"zmh-latn-pg",zmi:"zmi-latn-my",zmj:"zmj-latn-au",zmk:"zmk-latn-au",zml:"zml-latn-au",zmm:"zmm-latn-au",zmn:"zmn-latn-ga",zmo:"zmo-latn-sd",zmp:"zmp-latn-cd",zmq:"zmq-latn-cd",zmr:"zmr-latn-au",zms:"zms-latn-cd",zmt:"zmt-latn-au",zmu:"zmu-latn-au",zmv:"zmv-latn-au",zmw:"zmw-latn-cd",zmx:"zmx-latn-cg",zmy:"zmy-latn-au",zmz:"zmz-latn-cd",zna:"zna-latn-td",zne:"zne-latn-zz",zng:"zng-latn-vn",znk:"znk-latn-au",zns:"zns-latn-ng",zoc:"zoc-latn-mx",zoh:"zoh-latn-mx",zom:"zom-latn-in",zoo:"zoo-latn-mx",zoq:"zoq-latn-mx",zor:"zor-latn-mx",zos:"zos-latn-mx",zpa:"zpa-latn-mx",zpb:"zpb-latn-mx",zpc:"zpc-latn-mx",zpd:"zpd-latn-mx",zpe:"zpe-latn-mx",zpf:"zpf-latn-mx",zpg:"zpg-latn-mx",zph:"zph-latn-mx",zpi:"zpi-latn-mx",zpj:"zpj-latn-mx",zpk:"zpk-latn-mx",zpl:"zpl-latn-mx",zpm:"zpm-latn-mx",zpn:"zpn-latn-mx",zpo:"zpo-latn-mx",zpp:"zpp-latn-mx",zpq:"zpq-latn-mx",zpr:"zpr-latn-mx",zps:"zps-latn-mx",zpt:"zpt-latn-mx",zpu:"zpu-latn-mx",zpv:"zpv-latn-mx",zpw:"zpw-latn-mx",zpx:"zpx-latn-mx",zpy:"zpy-latn-mx",zpz:"zpz-latn-mx",zqe:"zqe-hani-cn","zqe-latn":"zqe-latn-cn",zrn:"zrn-latn-td",zro:"zro-latn-ec",zrp:"zrp-hebr-fr",zrs:"zrs-latn-id",zsa:"zsa-latn-pg",zsr:"zsr-latn-mx",zsu:"zsu-latn-pg",zte:"zte-latn-mx",ztg:"ztg-latn-mx",ztl:"ztl-latn-mx",ztm:"ztm-latn-mx",ztn:"ztn-latn-mx",ztp:"ztp-latn-mx",ztq:"ztq-latn-mx",zts:"zts-latn-mx",ztt:"ztt-latn-mx",ztu:"ztu-latn-mx",ztx:"ztx-latn-mx",zty:"zty-latn-mx",zu:"zu-latn-za",zua:"zua-latn-ng",zuh:"zuh-latn-pg",zum:"zum-arab-om",zun:"zun-latn-us",zuy:"zuy-latn-cm",zyg:"zyg-hani-cn",zyj:"zyj-latn-cn","zyj-hani":"zyj-hani-cn",zyn:"zyn-hani-cn",zyp:"zyp-latn-mm",zza:"zza-latn-tr",zzj:"zzj-hani-cn"},Ti={}.hasOwnProperty;function vi(l){const{language:i,script:d,region:y}=l;let b;var E,C;return d&&y&&(b=Ei[ur({language:i,script:d,region:y})])?(l.script=void 0,l.region=void 0):d&&(b=Ei[ur({language:i,script:d})])?l.script=void 0:y&&(b=Ei[ur({language:i,region:y})])?l.region=void 0:i&&(b=Ei[i]),b&&(l.language=void 0,E=l,C=Qa(b),E.language||(E.language=C.language),E.script||(E.script=C.script),E.region||(E.region=C.region),C.variants&&E.variants.push(...C.variants)),ur(l)}function wi(l,i){const d={},y=Qa(String(l||"").toLowerCase(),d),b=ur(y);if(!b)return b;let E=-1;for(;++E<us.length;){let C=us[E].from;C.slice(0,4)==="und-"&&y.language&&(C=y.language+C.slice(3)),ls(b,C).length>0&&ud(y,C,us[E].to)}for(E=-1;++E<Vr.length;)Ko(y,Vr[E].from.field,Vr[E].from.value)&&Vo(y,Vr[E].to.field,Vr[E].to.value);if((function(C){vi(C);const{language:k,script:S,region:L}=C;if(!k)return C;const P=ur({language:k,script:S,region:L});P===vi(Qa(k))?(C.script=void 0,C.region=void 0):L&&P===vi(Qa(k+"-"+L))?C.script=void 0:S&&P===vi(Qa(k+"-"+S))&&(C.region=void 0)})(y),y.variants.sort(),y.extensions.sort(cd),d.warning){let C;for(C in cs)if(Ti.call(cs,C)){const k=cs[C],S=y[C];if(S&&Ti.call(k,S)){const L=k[S];d.warning("Deprecated "+C+" `"+S+"`, expected one of `"+L.join("`, `")+"`",-1,7)}}}return y.script&&(y.script=y.script.charAt(0).toUpperCase()+y.script.slice(1)),y.region&&(y.region=y.region.toUpperCase()),ur(y)}function ud(l,i,d){const y=Qa(i),b=Qa(d),E=[],C=y.language;let k;for(k in y)if(Ti.call(y,k)){const S=y[k];S&&Ko(l,k,S)&&E.push(k)}for(k in b)if(Ti.call(b,k)){const S=b[k];C&&S&&(E.includes(k)||!l[k])&&Vo(l,k,k==="language"&&S==="und"?C:S)}}function Ko(l,i,d){let y,b=!1;if(d){const E=l[i];if(y=E,Array.isArray(E)){y=[];let C=-1;for(;++C<E.length;){const k=E[C];d.includes(k)?b=!0:y.push(k)}}else E===d&&(y=null,b=!0);l[i]=y}return b}function Vo(l,i,d){const y=l[i];if(Array.isArray(y)){const b=Array.isArray(d)?d:[d];let E=-1;for(;++E<b.length;){const C=b[E];y.includes(C)||y.push(C)}}else l[i]=d}function cd(l,i){return l.singleton>i.singleton?1:l.singleton<i.singleton?-1:0}function dd(l,i){return i+10<=l.length&&l[i]===73&&l[i+1]===68&&l[i+2]===51&&l[i+3]<255&&l[i+4]<255&&l[i+6]<128&&l[i+7]<128&&l[i+8]<128&&l[i+9]<128}function $o(l,i){let d=0;return d=(127&l[i])<<21,d|=(127&l[i+1])<<14,d|=(127&l[i+2])<<7,d|=127&l[i+3],d}function fd(l,i){return i+10<=l.length&&l[i]===51&&l[i+1]===68&&l[i+2]===73&&l[i+3]<255&&l[i+4]<255&&l[i+6]<128&&l[i+7]<128&&l[i+8]<128&&l[i+9]<128}function ds(l,i=0,d=1/0){return(function(y,b,E,C){const k=(S=y)instanceof ArrayBuffer?S:S.buffer;var S;let L=1;"BYTES_PER_ELEMENT"in C&&(L=C.BYTES_PER_ELEMENT);const P=(F=y)&&F.buffer instanceof ArrayBuffer&&F.byteLength!==void 0&&F.byteOffset!==void 0?y.byteOffset:0,w=(P+y.byteLength)/L,R=(P+b)/L,N=Math.floor(Math.max(0,Math.min(R,w)));var F;return new C(k,N,Math.floor(Math.min(N+Math.max(E,0),w))-N)})(l,i,d,Uint8Array)}function Pa(l,i=!1){const d=i?l.indexOf(0):l.length,y=(function(b,E={}){let C;C=b instanceof ArrayBuffer?new DataView(b):new DataView(b.buffer,b.byteOffset,b.byteLength);let k=0,{encoding:S}=E;if(!S){const N=C.getUint8(0),F=C.getUint8(1);N==239&&F==187&&C.getUint8(2)==191?(S=_a,k=3):N==254&&F==255?(S=va,k=2):N==255&&F==254?(S=wa,k=2):S=_a}if(typeof TextDecoder<"u")return new TextDecoder(S).decode(C);const{byteLength:L}=C,P=S!==va;let w,R="";for(;k<L;){switch(S){case _a:if(w=C.getUint8(k),w<128)k++;else if(w>=194&&w<=223)if(k+1<L){const N=C.getUint8(k+1);N>=128&&N<=191?(w=(31&w)<<6|63&N,k+=2):k++}else k++;else if(w>=224&&w<=239)if(k+2<=L-1){const N=C.getUint8(k+1),F=C.getUint8(k+2);N>=128&&N<=191&&F>=128&&F<=191?(w=(15&w)<<12|(63&N)<<6|63&F,k+=3):k++}else k++;else if(w>=240&&w<=244)if(k+3<=L-1){const N=C.getUint8(k+1),F=C.getUint8(k+2),q=C.getUint8(k+3);N>=128&&N<=191&&F>=128&&F<=191&&q>=128&&q<=191?(w=(7&w)<<18|(63&N)<<12|(63&F)<<6|63&q,k+=4):k++}else k++;else k++;break;case va:case Mn:case wa:w=C.getUint16(k,P),k+=2}R+=String.fromCodePoint(w)}return R})(new DataView(l.buffer,l.byteOffset,d),{encoding:_a});return i?y:y.replace(/\0/g,"")}function md(l){return l.type==="PRIV"?(function(i){if(i.size<2)return;const d=Pa(i.data,!0),y=new Uint8Array(i.data.subarray(d.length+1));return{key:i.type,info:d,data:y.buffer}})(l):l.type[0]==="W"?(function(i){if(i.type==="WXXX"){if(i.size<2)return;let y=1;const b=Pa(i.data.subarray(y),!0);y+=b.length+1;const E=Pa(i.data.subarray(y));return{key:i.type,info:b,data:E}}const d=Pa(i.data);return{key:i.type,info:"",data:d}})(l):l.type==="APIC"?(function(i){const d={key:i.type,description:"",data:"",mimeType:null,pictureType:null};if(i.size<2)return;if(i.data[0]!==3)return void console.log("Ignore frame with unrecognized character encoding");const y=i.data.subarray(1).indexOf(0);if(y===-1)return;const b=Pa(ds(i.data,1,y)),E=i.data[2+y],C=i.data.subarray(3+y).indexOf(0);if(C===-1)return;const k=Pa(ds(i.data,3+y,C));let S;var L;return S=b==="-->"?Pa(ds(i.data,4+y+C)):(L=i.data.subarray(4+y+C))instanceof ArrayBuffer?L:L.byteOffset==0&&L.byteLength==L.buffer.byteLength?L.buffer:new Uint8Array(L).buffer,d.mimeType=b,d.pictureType=E,d.description=k,d.data=S,d})(l):(function(i){if(i.size<2)return;if(i.type==="TXXX"){let y=1;const{data:b}=i,E=Pa(b.subarray(y),!0);y+=E.length+1;const C=Pa(b.subarray(y));return{key:i.type,info:E,data:C}}const d=Pa(i.data.subarray(1));return{key:i.type,info:"",data:d}})(l)}function gd(l){const i=String.fromCharCode(l[0],l[1],l[2],l[3]),d=$o(l,4);return{type:i,size:d,data:l.subarray(10,10+d)}}const _i=10,hd=10;function Wo(){let l,i,d,y,b,E,C;const k=this.context;function S(O,D){const M=D?D.index:0,ce=i.getAdaptationsForType(b[M].mpd.manifest,M,O);if(!ce||ce.length===0)return null;if(ce.length>1&&D){for(let me=0,ue=ce.length;me<ue;me++)if(V=ce[me],i.getRolesForAdaptation(V).filter((function(ge){return ge.schemeIdUri===c.default.DASH_ROLE_SCHEME_ID&&ge.value===fe.default.MAIN}))[0])return ce[me]}var V;return ce[0]}function L(O,D,M,ce,V,me){let ue,ge,Ie,Ee,B,K,Z=[];if(!ce||ce.length===0)return[];const W=i.getAdaptationsForPeriod(D);for(Ee=0,K=ce.length;Ee<K;Ee++)if(ue=ce[Ee],Ie=i.getIndexForAdaptation(ue,O,M.index),ge=H(W[Ie]),me){let X=ge.accessibility.length;for(B=0;B<X;B++){if(!ge)continue;let ae=ge.accessibility[B];if(ae.schemeIdUri===E.ACCESSIBILITY_CEA608_SCHEME)if(ae.value&&ae.value!==""){let z=ae.value.split(";");if(z[0].substring(0,2)==="CC")for(B=0;B<z.length;B++)ge||(ge=H.call(this,W[Ie])),Q(ge,z[B].substring(0,3),z[B].substring(4)),Z.push(ge),ge=null;else for(B=0;B<z.length;B++)ge||(ge=H.call(this,W[Ie])),Q(ge,"CC"+(B+1),z[B]),Z.push(ge),ge=null}else Q(ge,E.CC1,"eng"),Z.push(ge),ge=null}}else V===E.IMAGE?(ge.type=E.IMAGE,Z.push(ge),ge=null):ge&&Z.push(ge);if(y.get().streaming.includePreselectionsInMediainfoArray){const X=i.getPreselectionsForPeriod(D);for(Ee=0,K=X.length;Ee<K;Ee++){const ae=X[Ee];ae.hasOwnProperty("type")&&ae.type===V&&(ge=U(X[Ee]),ge&&Z.push(ge))}}return Z}function P(O){const D=w(O);return i.getRegularPeriods(D)}function w(O){const D=N(O);return i.getMpd(D)}function R(){b=[]}function N(O){return O||(b.length>0?b[0].mpd.manifest:null)}function F(O){try{const D=q(O.streamInfo,b),M=i.getAdaptationsForPeriod(D);return O&&O.streamInfo&&O.streamInfo.id!==void 0&&M?M[O.index]:null}catch{return null}}function q(O,D){const M=D.length;for(let ce=0;ce<M;ce++){let V=D[ce];if(O&&O.id===V.id)return V}return null}function H(O){if(!O)return null;let D=new bi;const M=O.period.mpd.manifest.Period[O.period.index].AdaptationSet[O.index];D.id=O.id,D.index=O.index,D.codec=i.getCodec(M);const ce=y.get().streaming.enhancement.codecs;return D.type=ce.some((V=>D.codec?.includes(V)))?c.default.ENHANCEMENT:O.type,D.streamInfo=ee(O.period),D.representationCount=i.getRepresentationCount(M),D.labels=i.getLabelsForAdaptation(M),D.lang=i.getLanguageForAdaptation(M),D.segmentAlignment=i.getSegmentAlignment(M),D.subSegmentAlignment=i.getSubSegmentAlignment(M),D.viewpoint=i.getViewpointForAdaptation(M),D.accessibility=i.getAccessibilityForAdaptation(M),D.accessibility.filter((function(V){if(V.schemeIdUri&&V.schemeIdUri.search("cea-608")>=0&&C!==void 0)return!0}))[0]&&(D.embeddedCaptions=!0),D.audioChannelConfiguration=i.getAudioChannelConfigurationForAdaptation(M),D.audioChannelConfiguration.length===0&&M.Representation&&M.Representation.length>0&&(D.audioChannelConfiguration=i.getAudioChannelConfigurationForRepresentation(M.Representation[0])),D.roles=i.getRolesForAdaptation(M),D.mimeType=i.getMimeType(M),D.contentProtection=i.getContentProtectionByAdaptation(M),D.bitrateList=i.getBitrateListForAdaptation(M),D.selectionPriority=i.getSelectionPriority(M),D.contentProtection&&D.contentProtection.length>0&&(D.contentProtection=(function(V,me){if(!V||!V.length||!me)return V;const ue=i.getContentProtectionByManifest(me);if(!ue||!ue.length)return V;const ge=ue.reduce(((Ie,Ee)=>(Ee.refId&&Ie.set(Ee.refId,Ee),Ie)),new Map);return V.map((Ie=>{if(Ie.ref){const Ee=ge.get(Ie.ref);Ee&&Ie.mergeAttributesFromReference(Ee)}return Ie}))})(D.contentProtection,O.period.mpd.manifest),D.contentProtection=(function(V){const me=V.map((ue=>ue.cencDefaultKid)).filter((ue=>ue!==null));if(me.length){const ue=me[0];V.forEach((ge=>{ge.keyId=ue}))}return V})(D.contentProtection),D.normalizedKeyIds=(function(V){const me=new Set;return V.forEach((ue=>{ue.cencDefaultKid&&typeof ue.cencDefaultKid=="string"&&me.add(ue.cencDefaultKid.replace(/-/g,"").toLowerCase())})),me})(D.contentProtection)),D.isText=i.getIsText(M),D.essentialProperties=i.getCombinedEssentialPropertiesForAdaptationSet(M),D.supplementalProperties=i.getCombinedSupplementalPropertiesForAdaptationSet(M),D.isFragmented=i.getIsFragmented(M),D.isEmbedded=!1,D.adaptationSetSwitchingCompatibleIds=(function(V){if(!V||!V.supplementalProperties)return[];let me=[];const ue=V.supplementalProperties.filter((ge=>ge.schemeIdUri===fe.default.ADAPTATION_SET_SWITCHING_SCHEME_ID_URI));return ue&&ue.length>0&&(me=ue[0].value.toString().split(",").map((ge=>ge))),me})(D),D.segmentSequenceProperties=i.getSegmentSequencePropertiesForAdaptationSet(M),D}function U(O){if(!O)return null;let D=new bi;const M=O.period.mpd.manifest.Period[O.period.index].Preselection[O.index],ce=O.period.mpd.manifest.Period[O.period.index].AdaptationSet,V=i.getAdaptationsForPeriod(O.period);return D=H(i.getMainAdaptationSetForPreselection(M,V)),D&&(D.isPreselection=!0,D.tag=O.tag,D.id=O.id,D.codec=i.getCodecForPreselection(M,ce),D.selectionPriority=i.getSelectionPriority(M),D.labels=i.getLabelsForAdaptation(M),D.lang=i.getLanguageForAdaptation(M),D.viewpoint=i.getViewpointForAdaptation(M),D.accessibility=i.getAccessibilityForAdaptation(M),D.audioChannelConfiguration=i.getAudioChannelConfigurationForAdaptation(M),D.roles=i.getRolesForAdaptation(M),D.essentialProperties=i.getCombinedEssentialPropertiesForAdaptationSet(M),D.supplementalProperties=i.getCombinedSupplementalPropertiesForAdaptationSet(M)),D}function Q(O,D,M){O.id=D,O.index=100+parseInt(D.substring(2,3)),O.type=E.TEXT,O.codec="cea-608-in-SEI",O.isEmbedded=!0,O.isFragmented=!1,O.lang=wi(M),O.roles=[{schemeIdUri:"urn:mpeg:dash:role:2011",value:"caption"}]}function ee(O){let D=new qo;return D.id=O.id,D.index=O.index,D.start=O.start,D.duration=O.duration,D.manifestInfo=(function(M){let ce=new nd;return ce.dvrWindowSize=M.timeShiftBufferDepth,ce.loadedTime=M.manifest.loadedTime,ce.availableFrom=M.availabilityStartTime,ce.minBufferTime=M.manifest.minBufferTime,ce.maxFragmentDuration=M.maxSegmentDuration,ce.duration=i.getDuration(M.manifest),ce.isDynamic=i.getIsDynamic(M.manifest),ce.serviceDescriptions=i.getServiceDescriptions(M.manifest),ce.protocol=M.manifest.protocol,ce})(O.mpd),D.isLast=O.mpd.manifest.Period.length===1||Math.abs(D.start+D.duration-D.manifestInfo.duration)<1,D.isEncrypted=O.isEncrypted,D}function ne(){if(!E)throw new Error("setConfig function has to be called previously")}function le(O){return b.length>0?b[0].mpd.manifest.Period[O]:null}function j(O,D,M){let ce,V,me,ue,ge,Ie;if(O){for(V=O.AdaptationSet,ge=0;ge<V.length;ge+=1)for(ce=V[ge],ue=ce.Representation,Ie=0;Ie<ue.length;Ie+=1)if(me=ue[Ie],D===me.id)return M?Ie:me}return null}return l={applyPatchToManifest:function(O,D){d.getPatchOperations(D).forEach((M=>{let ce=M.getMpdTarget(O);if(ce===null)return;let{name:V,target:me,leaf:ue}=ce;if(M.xpath.findsAttribute()||V==="__text"){switch(M.action){case"add":case"replace":me[V]=M.value;break;case"remove":delete me[V]}return}let ge=(me[V]||[]).indexOf(ue),Ie=M.position==="prepend"||M.position==="before";if(M.action==="remove"||M.action==="replace")if(Array.isArray(me[V])){if(ge!=-1){let Ee=me[V];Ee.splice(ge,1),Ee.length>0?me[V]=Ee:delete me[V]}}else delete me[V];M.action!=="add"&&M.action!=="replace"||Object.keys(M.value).forEach((Ee=>{let B=M.value[Ee],K=me[Ee]||[];if(K.length===0&&me[Ee]&&K.push(me[Ee]),K.length===0)K=B;else{let Z=K.length;Z=Ee==V&&ge!=-1?ge+(Ie?0:1)+(M.action==="replace"?-1:0):Ie?0:K.length,K.splice.apply(K,[Z,0].concat(B))}me[Ee]=K}))}))},areMediaInfosEqual:function(O,D){if(!O||!D)return!1;const M=O.id===D.id,ce=O.codec===D.codec,V=JSON.stringify(O.viewpoint)===JSON.stringify(D.viewpoint),me=O.lang===D.lang,ue=JSON.stringify(O.roles)===JSON.stringify(D.roles),ge=JSON.stringify(O.accessibility)===JSON.stringify(D.accessibility),Ie=JSON.stringify(O.audioChannelConfiguration)===JSON.stringify(D.audioChannelConfiguration);return M&&ce&&V&&me&&ue&&ge&&Ie},getAllMediaInfoForType:function(O,D,M){let ce=b,V=M,me=[];if(V)ne(),ce=P(V);else{if(!(b.length>0))return me;V=b[0].mpd.manifest}const ue=q(O,ce);let ge=i.getAdaptationsForType(V,O?O.index:null,D);return me=L(V,ue,O,ge,D),D===E.TEXT&&(ge=i.getAdaptationsForType(V,O?O.index:null,E.VIDEO),me=me.concat(L(V,ue,O,ge,D,!0))),me},getAvailabilityStartTime:function(O){const D=w(O);return i.getAvailabilityStartTime(D)},getBandwidthForRepresentation:function(O,D){let M;return M=j(le(D),O),M?M.bandwidth:null},getBaseURLsFromElement:function(O){return i.getBaseURLsFromElement(O)},getCodec:function(O,D,M){return i.getCodec(O,D,M)},getCodecForPreselection:function(O,D){return i.getCodecForPreselection(O,D)},getContentSteering:function(O){return i.getContentSteering(O)},getDuration:function(O){const D=N(O);return i.getDuration(D)},getEssentialProperties:function(O){try{return i.getEssentialProperties(O)}catch{return[]}},getEvent:function(O,D,M,ce){try{if(!O||!D||isNaN(M)||!ce)return null;const V=O.scheme_id_uri,me=O.value;if(!D[V+"/"+me])return null;const ue=new ta,ge=O.timescale||1,Ie=ce.adaptation.period.start,Ee=D[V+"/"+me],B=isNaN(ce.presentationTimeOffset)?isNaN(Ee.presentationTimeOffset)?0:Ee.presentationTimeOffset:ce.presentationTimeOffset;let K,Z=O.presentation_time_delta/ge;K=O.version===0?Ie+M-B+Z:Ie-B+Z;const W=O.event_duration/ge,X=O.id,ae=O.message_data;return ue.eventStream=Ee,ue.eventStream.value=me,ue.eventStream.timescale=ge,ue.duration=W,ue.id=X,ue.calculatedPresentationTime=K,ue.messageData=ae,ue.presentationTimeDelta=Z,ue.parsedMessageData=V===c.default.ID3_SCHEME_ID_URI?(function(z){let ie=0;const de=[];for(;dd(z,ie);){const pe=$o(z,ie+6);z[ie+5]>>6&1&&(ie+=_i),ie+=_i;const _e=ie+pe;for(;ie+hd<_e;){const we=gd(z.subarray(ie)),Pe=md(we);Pe&&de.push(Pe),ie+=we.size+_i}fd(z,ie)&&(ie+=_i)}return de})(ae):null,ue}catch{return null}},getEventsFor:function(O,D,M){let ce=[];if(b.length>0){const V=b[0].mpd.manifest;if(O instanceof qo){const me=q(O,b);ce=i.getEventsForPeriod(me)}else if(O instanceof bi){const me=q(M,b);ce=i.getEventStreamForAdaptationSet(V,F(O),me)}else if(O instanceof $t){const me=q(M,b);ce=i.getEventStreamForRepresentation(V,D,me)}}return ce},getFramerate:function(O){return i.getFramerate(O)},getIndexForRepresentation:function(O,D){return(function(M,ce){const V=j(M,ce,!0);return V!==null?V:-1})(le(D),O)},getIsDVB:function(O){return i.hasProfile(O,"urn:dvb:dash:profile:dvb-dash:2014")},getIsDynamic:function(O){const D=N(O);return i.getIsDynamic(D)},getIsPatch:function(O){return d.getIsPatch(O)},getIsTextTrack:function(O){return i.getIsText(O)},getIsTypeOf:function(O,D){return i.getIsTypeOf(O,D)},getLocation:function(O){return i.getLocation(O)},getMainAdaptationForType:S,getMainAdaptationSetForPreselection:function(O,D){return i.getMainAdaptationSetForPreselection(O,D)},getCommonRepresentationForPreselection:function(O,D){return i.getCommonRepresentationForPreselection(O,D)},getManifestUpdatePeriod:function(O,D=0){return i.getManifestUpdatePeriod(O,D)},getMediaInfoForType:function(O,D){if(b.length===0||!O)return null;let M=q(O,b);if(!M)return null;const ce=i.getAdaptationsForPeriod(M);let V=S(D,O);return V?H(ce[i.getIndexForAdaptation(V,b[0].mpd.manifest,O.index)]):null},getMpd:w,getPatchLocation:function(O){const D=i.getPatchLocation(O),M=i.getPublishTime(O);return D&&D.length!==0&&M?D.filter((ce=>isNaN(ce.ttl)||M.getTime()+ce.ttl>new Date().getTime())):[]},getPeriodById:function(O){if(!O||b.length===0)return null;const D=b.filter((M=>M.id===O));return D&&D.length>0?D[0]:null},getPreselectionIsTypeOf:function(O,D,M){return i.getPreselectionIsTypeOf(O,D,M)},getProducerReferenceTimes:function(O,D){let M,ce;const V=q(O,b);return M=D?D.id:null,b.length>0&&V&&(ce=M?i.getAdaptationForId(M,b[0].mpd.manifest,V.index):i.getAdaptationForIndex(D?D.index:null,b[0].mpd.manifest,V.index)),ce?i.getProducerReferenceTimesForAdaptation(ce):[]},getPublishTime:function(O){return i.getPublishTime(O)},getRealAdaptation:function(O,D){let M,ce;const V=q(O,b);return M=D?D.id:null,b.length>0&&V&&(ce=M?i.getAdaptationForId(M,b[0].mpd.manifest,V.index):i.getAdaptationForIndex(D?D.index:null,b[0].mpd.manifest,V.index)),ce},getRealPeriodByIndex:function(O){return i.getRealPeriodForIndex(O,b[0].mpd.manifest)},getRegularPeriods:P,getRepresentationSortFunction:function(){return i.getRepresentationSortFunction()},getStreamsInfo:function(O,D){const M=[];let ce=b;if(O&&(ne(),ce=P(O)),ce.length>0){(!D||D>ce.length)&&(D=ce.length);for(let V=0;V<D;V++)M.push(ee(ce[V]))}return M},getSuggestedPresentationDelay:function(){const O=b.length>0?b[0].mpd:null;return i.getSuggestedPresentationDelay(O)},getSupplementalCodecs:function(O){const D=O[fe.default.SUPPLEMENTAL_CODECS];return D?D.split(" ").map((M=>O.mimeType+';codecs="'+M+'"')):[]},getUTCTimingSources:function(){const O=N();return i.getUTCTimingSources(O)},getVoRepresentations:function(O){let D;const M=F(O);return D=i.getRepresentationsForAdaptation(M,O),D},isPatchValid:function(O,D){let M=i.getId(O),ce=d.getMpdId(D),V=i.getPublishTime(O),me=d.getPublishTime(D),ue=d.getOriginalPublishTime(D);return!!(M&&ce&&M==ce&&V&&ue&&V.getTime()==ue.getTime()&&me&&V.getTime()<me.getTime())},reset:R,setConfig:function(O){O&&(O.constants&&(E=O.constants),O.cea608parser&&(C=O.cea608parser),O.errHandler&&i.setConfig({errHandler:O.errHandler}),O.BASE64&&i.setConfig({BASE64:O.BASE64}))},updatePeriods:function(O){if(!O)return null;ne(),b=P(O)}},i=In(k).getInstance(),d=id(k).getInstance(),y=(0,p.default)(k).getInstance(),R(),l}Wo.__dashjs_factory_name="DashAdapter";var pd=o.default.getSingletonFactory(Wo);class yd{static round10(i,d){return(function(y,b,E){return E===void 0||+E==0?Math[y](b):(E=+E,(b=+b)===null||isNaN(b)||typeof E!="number"||E%1!=0?NaN:(b=b.toString().split("e"),+((b=(b=Math[y](+(b[0]+"e"+(b[1]?+b[1]-E:-E)))).toString().split("e"))[0]+"e"+(b[1]?+b[1]+E:E))))})("round",i,d)}}var bd=class{constructor(){this.TcpList=[],this.HttpList=[],this.RepSwitchList=[],this.BufferLevel=[],this.BufferState=[],this.PlayList=[],this.DroppedFrames=[],this.SchedulingInfo=[],this.DVRInfo=[],this.ManifestUpdate=[],this.RequestsQueue=null,this.DVBErrors=[]}},Ed=class{constructor(){this.t=null,this.mt=null,this.to=null,this.lto=null}},Td=class{constructor(){this.t=null,this.level=null}},vd=class{constructor(){this.target=null,this.state=r.BUFFER_EMPTY}},wd=class{constructor(){this.time=null,this.range=null,this.manifestInfo=null}},_d=class{constructor(){this.time=null,this.droppedFrames=null}};class Sd{constructor(){this.mediaType=null,this.type=null,this.requestTime=null,this.fetchTime=null,this.availabilityStartTime=null,this.presentationStartTime=0,this.clientTimeOffset=0,this.currentTime=null,this.buffered=null,this.latency=0,this.streamInfo=[],this.representationInfo=[]}}class kd{constructor(){this.id=null,this.index=null,this.start=null,this.duration=null}}class Id{constructor(){this.id=null,this.index=null,this.mediaType=null,this.presentationTimeOffset=null,this.startNumber=null}}var Ad=class{constructor(){this.mediaType=null,this.t=null,this.type=null,this.startTime=null,this.availabilityStartTime=null,this.duration=null,this.bandwidth=null,this.range=null,this.state=null}},Rd=class{constructor(){this.loadingRequests=[],this.executedRequests=[]}};function Qo(l){const i=(l=l||{}).settings;let d,y,b=this.context,E=(0,T.default)(b).getInstance();function C(){E.trigger(f.default.METRICS_CHANGED)}function k(N){E.trigger(f.default.METRIC_CHANGED,{mediaType:N}),C()}function S(N,F,q){E.trigger(f.default.METRIC_UPDATED,{mediaType:N,metric:F,value:q}),k(N)}function L(N,F,q){E.trigger(f.default.METRIC_ADDED,{mediaType:N,metric:F,value:q}),k(N)}function P(N,F){let q=null;return N&&(y.hasOwnProperty(N)?q=y[N]:F||(q=new bd,y[N]=q)),q}function w(N,F,q){let H=P(N);H!==null&&(H[F].push(q),H[F].length>i.get().streaming.metrics.maxListDepth&&H[F].shift())}function R(N,F,q){w(N,F,q),L(N,F,q)}return d={addBufferLevel:function(N,F,q){let H=new Td;H.t=F,H.level=q,R(N,r.BUFFER_LEVEL,H)},addBufferState:function(N,F,q){let H=new vd;H.target=q,H.state=F,R(N,r.BUFFER_STATE,H)},addDVBErrors:function(N){R(c.default.STREAM,r.DVB_ERRORS,N)},addDVRInfo:function(N,F,q,H){let U=new wd;U.time=F,U.range=H,U.manifestInfo=q,R(N,r.DVR_INFO,U)},addDroppedFrames:function(N,F){let q=new _d,H=P(N).DroppedFrames;F&&(q.time=F.creationTime,q.droppedFrames=F.droppedVideoFrames,H.length>0&&H[H.length-1]==q||R(N,r.DROPPED_FRAMES,q))},addHttpRequest:function N(F,q,H,U){let Q=new De.HTTPRequest;q.url&&q.url!==F.url&&(N({mediaType:F.mediaType,type:F.type,url:F.url,serviceLocation:null,range:F.range,startDate:F.startDate,firstByteDate:null,endDate:null,duration:F.duration,fileLoaderType:F.fileLoaderType,resourceTimingValues:F.resourceTimingValues},{url:null,status:null,headers:null},null,U),Q.actualurl=q.url),Q.tcpid=null,Q.type=F.type,Q.url=F.url,Q.range=F.range||null,Q.trequest=F.startDate,Q.tresponse=F.firstByteDate,Q.responsecode=q.status,Q.cmsd=U,Q._tfinish=F.endDate,Q._stream=F.mediaType,Q._mediaduration=F.duration,Q._responseHeaders="";for(const ee in q.headers)Q._responseHeaders+=ee+": "+q.headers[ee]+`\r
`;Q._serviceLocation=F.serviceLocation||null,Q._fileLoaderType=F.fileLoaderType,Q._resourceTimingValues=F.resourceTimingValues,Q._streamId=F&&F.representation&&F.representation.mediaInfo&&F.representation.mediaInfo.streamInfo?F.representation.mediaInfo.streamInfo.id:null,H?H.forEach((ee=>{(function(ne,le,j,O){let D=new De.HTTPRequestTrace;D.s=le,D.d=j,D.b=O,ne.trace.push(D),ne.interval||(ne.interval=0),ne.interval+=j})(Q,ee.s,ee.d,ee.b,ee.t)})):(delete Q.interval,delete Q.trace),R(F.mediaType,r.HTTP_REQUEST,Q)},addManifestUpdate:function(N,F,q,H){let U=new Sd;U.mediaType=N,U.type=F,U.requestTime=q,U.fetchTime=H,w(c.default.STREAM,r.MANIFEST_UPDATE,U),L(N,r.MANIFEST_UPDATE,U)},addManifestUpdateRepresentationInfo:function(N,F,q){if(N&&N.representationInfo){const H=new Id;H.id=F?F.id:null,H.index=F?F.index:null,H.mediaType=q,H.startNumber=F?F.startNumber:null,H.presentationTimeOffset=F?F.presentationTimeOffset:null,N.representationInfo.push(H),S(N.mediaType,r.MANIFEST_UPDATE_TRACK_INFO,N)}},addManifestUpdateStreamInfo:function(N,F,q,H,U){if(N){let Q=new kd;Q.id=F,Q.index=q,Q.start=H,Q.duration=U,N.streamInfo.push(Q),S(N.mediaType,r.MANIFEST_UPDATE_STREAM_INFO,N)}},addPlayList:function(N){N.trace&&Array.isArray(N.trace)?N.trace.forEach((F=>{F.hasOwnProperty("subreplevel")&&!F.subreplevel&&delete F.subreplevel})):delete N.trace,R(c.default.STREAM,r.PLAY_LIST,N)},addRepresentationSwitch:function(N,F,q,H,U){let Q=new Ed;Q.t=F,Q.mt=q,Q.to=H,U?Q.lto=U:delete Q.lto,R(N,r.TRACK_SWITCH,Q)},addRequestsQueue:function(N,F,q){let H=new Rd;H.loadingRequests=F,H.executedRequests=q,P(N).RequestsQueue=H,L(N,r.REQUESTS_QUEUE,H)},addSchedulingInfo:function(N,F,q,H,U,Q,ee,ne,le){let j=new Ad;j.mediaType=N,j.t=F,j.type=q,j.startTime=H,j.availabilityStartTime=U,j.duration=Q,j.bandwidth=ee,j.range=ne,j.state=le,R(N,r.SCHEDULING_INFO,j)},clearAllCurrentMetrics:function(){y={},C()},clearCurrentMetricsForType:function(N){delete y[N],k(N)},getMetricsFor:P,updateManifestUpdateInfo:function(N,F){if(N){for(let q in F)N[q]=F[q];S(N.mediaType,r.MANIFEST_UPDATE,N)}}},y={},d}Qo.__dashjs_factory_name="MetricsModel";var Cd=o.default.getSingletonFactory(Qo);class Xa{constructor(){this.start=null,this.mstart=null,this.starttype=null,this.trace=[]}}Xa.INITIAL_PLAYOUT_START_REASON="initial_playout",Xa.SEEK_START_REASON="seek",Xa.RESUME_FROM_PAUSE_START_REASON="resume",Xa.METRICS_COLLECTION_START_REASON="metrics_collection_start";class na{constructor(){this.representationid=null,this.subreplevel=null,this.start=null,this.mstart=null,this.duration=null,this.playbackspeed=null,this.stopreason=null}}function Xo(l){l=l||{};const i=this.context;let d,y,b,E,C=l.metricsModel;function k(P){const w=C.getMetricsFor(P,!0);if(!w)return null;const R=w.HttpList;let N,F=null;if(!R||R.length<=0)return null;for(N=R.length-1;N>=0;){if(R[N].responsecode){F=R[N];break}N--}return F}function S(P){const w=C.getMetricsFor(P,!0);return w&&w.HttpList?w.HttpList:[]}function L(P,w){if(!P)return null;const R=P[w];return R&&R.length!==0?R[R.length-1]:null}return d={getCurrentRepresentationSwitch:function(P){return L(C.getMetricsFor(P,!0),r.TRACK_SWITCH)},getCurrentBufferState:function(P){return L(C.getMetricsFor(P,!0),r.BUFFER_STATE)},getCurrentBufferLevel:function(P){const w=L(C.getMetricsFor(P,!0),r.BUFFER_LEVEL);return w?yd.round10(w.level/1e3,-3):0},getCurrentHttpRequest:k,getHttpRequests:S,getCurrentDroppedFrames:function(){return L(C.getMetricsFor(c.default.VIDEO,!0),r.DROPPED_FRAMES)},getCurrentSchedulingInfo:function(P){return L(C.getMetricsFor(P,!0),r.SCHEDULING_INFO)},getCurrentDVRInfo:function(P){return L(P?C.getMetricsFor(P,!0):C.getMetricsFor(c.default.VIDEO,!0)||C.getMetricsFor(c.default.AUDIO,!0),r.DVR_INFO)},getCurrentManifestUpdate:function(){return L(C.getMetricsFor(c.default.STREAM),r.MANIFEST_UPDATE)},getLatestFragmentRequestHeaderValueByID:function(P,w){if(!w)return null;let R={},N=k(P);N&&(R=We.default.parseHttpHeaders(N._responseHeaders));const F=R[w.toLowerCase()];return F===void 0?null:F},getLatestMPDRequestHeaderValueByID:function(P){if(!P)return null;let w,R,N,F={};for(w=S(c.default.STREAM),N=w.length-1;N>=0;N--)if(R=w[N],R.type===De.HTTPRequest.MPD_TYPE){F=We.default.parseHttpHeaders(R._responseHeaders);break}const q=F[P.toLowerCase()];return q===void 0?null:q},addRepresentationSwitch:function(P,w,R,N,F){C.addRepresentationSwitch(P,w,R,N,F)},addDVRInfo:function(P,w,R,N){C.addDVRInfo(P,w,R,N)},updateManifestUpdateInfo:function(P){const w=this.getCurrentManifestUpdate();C.updateManifestUpdateInfo(w,P)},addManifestUpdateStreamInfo:function(P){if(P){const w=this.getCurrentManifestUpdate();C.addManifestUpdateStreamInfo(w,P.id,P.index,P.start,P.duration)}},addManifestUpdateRepresentationInfo:function(P,w){if(P){const R=this.getCurrentManifestUpdate();C.addManifestUpdateRepresentationInfo(R,P,w)}},addManifestUpdate:function(P){C.addManifestUpdate(c.default.STREAM,P.type,P.startDate,P.endDate)},addHttpRequest:function(P,w,R,N,F,q){const H={status:R,headers:N,url:w};C.addHttpRequest(P,H,F,q)},addSchedulingInfo:function(P,w){C.addSchedulingInfo(P.mediaType,new Date,P.type,P.startTime,P.availabilityStartTime,P.duration,P.bandwidth,P.range,w)},addRequestsQueue:function(P,w,R){C.addRequestsQueue(P,w,R)},addBufferLevel:function(P,w,R){C.addBufferLevel(P,w,R)},addBufferState:function(P,w,R){C.addBufferState(P,w,R)},addDroppedFrames:function(P){C.addDroppedFrames(c.default.VIDEO,P)},addPlayList:function(){E&&(C.addPlayList(E),E=null)},addDVBErrors:function(P){C.addDVBErrors(P)},createPlaylistMetrics:function(P,w){E=new Xa,E.start=new Date,E.mstart=P,E.starttype=w},createPlaylistTraceMetrics:function(P,w,R){y===!0&&(y=!1,b=new na,b.representationid=P,b.start=new Date,b.mstart=w,b.playbackspeed=R!==null?R.toString():null)},updatePlayListTraceMetrics:function(P){if(b)for(let w in b)b[w]=P[w]},pushPlayListTraceMetrics:function(P,w){if(y===!1&&E&&b&&b.start){const R=b.start;b.duration=P.getTime()-R.getTime(),b.stopreason=w,E.trace.push(b),y=!0}},clearAllCurrentMetrics:function(){C.clearAllCurrentMetrics()}},C=C||Cd(i).getInstance({settings:l.settings}),y=!0,b=null,E=null,d}na.REPRESENTATION_SWITCH_STOP_REASON="representation_switch",na.REBUFFERING_REASON="rebuffering",na.USER_REQUEST_STOP_REASON="user_request",na.END_OF_PERIOD_STOP_REASON="end_of_period",na.END_OF_CONTENT_STOP_REASON="end_of_content",na.METRICS_COLLECTION_STOP_REASON="metrics_collection_end",na.FAILURE_STOP_REASON="failure",Xo.__dashjs_factory_name="DashMetrics";var Nd=o.default.getSingletonFactory(Xo);function Jo(){let l;const i=this.context,d=(0,T.default)(i).getInstance();return l={error:function(y){d.trigger(f.default.ERROR,{error:y})}},l}Jo.__dashjs_factory_name="ErrorHandler";var xd=o.default.getSingletonFactory(Jo),Dd=t(5560);function Zo(){const l=this.context,i=(0,T.default)(l).getInstance();let d,y,b,E,C,k,S,L,P,w,R,N;function F(){N.debug("Stopping the gap controller"),C&&(clearInterval(C),C=null),(function(){i.off(f.default.WALLCLOCK_TIME_UPDATED,ee,this),i.off(f.default.INITIAL_STREAM_SWITCH,Q,this),i.off(f.default.PLAYBACK_SEEKING,q,this),i.off(f.default.BUFFER_REPLACEMENT_STARTED,H,d),i.off(f.default.TRACK_CHANGE_RENDERED,U,d)})(),C=null,k=NaN,E=0,w=null,R={}}function q(){w&&(clearTimeout(w),w=null)}function H(j){try{if(j.streamId!==L.getActiveStreamInfo().id||j.mediaType!==c.default.VIDEO&&j.mediaType!==c.default.AUDIO)return;j.streamId===L.getActiveStreamInfo().id&&(R[j.mediaType]=!0)}catch(O){N.error(O)}}function U(j){j&&j.mediaType&&(R[j.mediaType]=!1)}function Q(){C||(function(){try{C||(N.debug("Starting the gap controller"),C=setInterval((()=>{ne()&&le(S.getTime())}),100))}catch{}})()}function ee(){if(ne(b.get().streaming.gaps.enableSeekFix)&&(E++,E>=10)){const j=S.getTime();y===j?le(j,!0):(y=j,k=NaN),E=0}}function ne(j=!1){if(!L.getActiveStream())return!1;const O=Object.keys(R).some((M=>R[M])),D=!!j&&(function(){const M=L.getActiveStream(),ce=parseFloat((M.getStartTime()+M.getDuration()).toFixed(5));return S.getTime()+b.get().streaming.gaps.threshold>=ce})();return!O&&b.get().streaming.gaps.jumpGaps&&L.getActiveStreamProcessors().length>0&&(!S.isSeeking()||D)&&!S.isPaused()&&!L.getIsStreamSwitchInProgress()&&!L.getHasMediaOrInitialisationError()}function le(j,O=!1){const D=b.get().streaming.gaps.enableStallFix,M=b.get().streaming.gaps.stallSeek,ce=b.get().streaming.gaps.smallGapLimit,V=b.get().streaming.gaps.jumpLargeGaps,me=b.get().streaming.gaps.seekOffset,ue=P.getBufferRange();let ge,Ie=NaN,Ee=!1;if(ge=(function(K,Z){try{if(!K||K.length<=1&&Z>0)return NaN;let W=NaN,X=0;for(;isNaN(W)&&X<K.length;){const ae=X>0?K.end(X-1):0;Z<K.start(X)&&ae-Z<b.get().streaming.gaps.threshold&&(W=X),X+=1}return W}catch{return null}})(ue,j),!isNaN(ge)){const K=ue.start(ge),Z=K-j;Z>0&&(Z<=ce||V)&&(Ie=K)}const B=S.getTimeToStreamEnd();if(isNaN(Ie)&&O&&isFinite(B)&&!isNaN(B)&&B<ce&&(Ie=parseFloat(S.getStreamEndTime().toFixed(5)),Ee=!0),D&&isNaN(Ie)&&O&&isNaN(ge)&&(function(K,Z){for(let W=0,X=K.length;W<X;W++)if(Z>=K.start(W)&&Z<=K.end(W))return!0;return!1})(ue,j)&&(M===0?(N.warn("Toggle play pause to break stall"),P.pause(),P.play()):(N.warn(`Jumping ${M}s to break stall`),Ie=j+M)),Ie>0&&k!==Ie&&Ie>j&&!w){const K=Ie-j;if(Ee){const Z=L.getStreamForTime(Ie),W=Z&&!!Z.getPreloaded();N.warn(`Jumping to end of stream because of gap from ${j} to ${Ie}. Gap duration: ${K}`),S.seek(Ie+me,!0,W)}else{const Z=S.getIsDynamic(),W=ge>0?ue.end(ge-1):j,X=Z?1e3*Math.max(0,K-.1):0;w=window.setTimeout((()=>{S.seek(Ie+me,!0,!0);const ae=L.getActiveStream();ae&&N.warn(`Jumping gap occuring in period ${ae.getStreamId()} starting at ${W} and ending at ${Ie}. Jumping by: ${Ie+me-W}`),w=null}),X)}k=Ie}}return d={reset:F,setConfig:function(j){j&&(j.settings&&(b=j.settings),j.playbackController&&(S=j.playbackController),j.streamController&&(L=j.streamController),j.videoModel&&(P=j.videoModel))},initialize:function(){(function(){i.on(f.default.WALLCLOCK_TIME_UPDATED,ee,this),i.on(f.default.INITIAL_STREAM_SWITCH,Q,this),i.on(f.default.PLAYBACK_SEEKING,q,this),i.on(f.default.BUFFER_REPLACEMENT_STARTED,H,d),i.on(f.default.TRACK_CHANGE_RENDERED,U,d)})()}},N=(0,u.default)(l).getInstance().getLogger(d),F(),d}Zo.__dashjs_factory_name="GapController";var Ld=o.default.getSingletonFactory(Zo),el=class extends J{constructor(l,i){super(),this.url=l||null,this.type=i||null,this.mediaType=c.default.STREAM,this.responseType=""}};function tl(l){l=l||{};const i=this.context,d=(0,T.default)(i).getInstance();let y,b=yr(i).create({errHandler:l.errHandler,dashMetrics:l.dashMetrics,mediaPlayerModel:l.mediaPlayerModel,errors:Gt});return y={load:function(E,C,k){const S=function(L,P){C.resolved=!0,C.resolvedContent=L||null,d.trigger(f.default.XLINK_ELEMENT_LOADED,{element:C,resolveObject:k,error:L||P?null:new Bt.default(Gt.XLINK_LOADER_LOADING_FAILURE_ERROR_CODE,Gt.XLINK_LOADER_LOADING_FAILURE_ERROR_MESSAGE+E)})};if(E==="urn:mpeg:dash:resolve-to-zero:2013")S(null,!0);else{const L=new el(E,De.HTTPRequest.XLINK_EXPANSION_TYPE);b.load({request:L,success:function(P){S(P)},error:function(){S(null)}})}},reset:function(){b&&(b.abort(),b=null)}},y}tl.__dashjs_factory_name="XlinkLoader";var Md=o.default.getClassFactory(tl);const Tr="onLoad";function nl(l){l=l||{};let i=this.context,d=(0,T.default)(i).getInstance();const y=Dn(i).getInstance();let b,E,C,k;function S(N,F,q){let H,U,Q={};Q.elements=N,Q.type=F,Q.resolveType=q,Q.elements.length===0&&P(Q);for(let ee=0;ee<Q.elements.length;ee++)H=Q.elements[ee],U=y.isHTTPURL(H.url)?H.url:H.originalContent.BaseURL+H.url,k.load(U,H,Q)}function L(N){let F,q,H="";if(F=N.element,q=N.resolveObject,F.resolvedContent){let U=0;F.resolvedContent.indexOf("<?xml")===0&&(U=F.resolvedContent.indexOf("?>")+2),H=F.resolvedContent.substr(0,U)+"<response>"+F.resolvedContent.substr(U)+"</response>",F.resolvedContent=E.parseXml(H).response}(function(U){let Q,ee;for(Q=0;Q<U.elements.length;Q++)if(ee=U.elements[Q],ee.resolved===!1)return!1;return!0})(q)&&P(q)}function P(N){let F,q,H=[];if((function(U){let Q,ee,ne,le,j,O,D=[];for(le=U.elements.length-1;le>=0;le--){if(Q=U.elements[le],ee=Q.type,Q.resolvedContent){if(Q.resolvedContent)for(j=0;j<Q.resolvedContent[ee].length;j++)ne=Q.resolvedContent[ee][j],D.push(ne)}else delete Q.originalContent["xlink:actuate"],delete Q.originalContent["xlink:href"],D.push(Q.originalContent);for(Q.parentElement[ee].splice(Q.index,1),O=0;O<D.length;O++)Q.parentElement[ee].splice(Q.index+O,0,D[O]);D=[]}U.elements.length>0&&E.getIron().run(C)})(N),N.resolveType==="onActuate"&&d.trigger(f.default.XLINK_READY,{manifest:C}),N.resolveType===Tr)switch(N.type){case fe.default.PERIOD:for(F=0;F<C[fe.default.PERIOD].length;F++)q=C[fe.default.PERIOD][F],q.hasOwnProperty(fe.default.ADAPTATION_SET)&&(H=H.concat(w(q[fe.default.ADAPTATION_SET],q,fe.default.ADAPTATION_SET,Tr))),q.hasOwnProperty(fe.default.EVENT_STREAM)&&(H=H.concat(w(q[fe.default.EVENT_STREAM],q,fe.default.EVENT_STREAM,Tr)));S(H,fe.default.ADAPTATION_SET,Tr);break;case fe.default.ADAPTATION_SET:d.trigger(f.default.XLINK_READY,{manifest:C})}}function w(N,F,q,H){let U,Q,ee,ne=[];for(Q=N.length-1;Q>=0;Q--)U=N[Q],U.hasOwnProperty("xlink:href")&&U["xlink:href"]==="urn:mpeg:dash:resolve-to-zero:2013"&&N.splice(Q,1);for(Q=0;Q<N.length;Q++)U=N[Q],U.hasOwnProperty("xlink:href")&&U.hasOwnProperty("xlink:actuate")&&U["xlink:actuate"]===H&&(ee=R(U["xlink:href"],F,q,Q,H,U),ne.push(ee));return ne}function R(N,F,q,H,U,Q){return{url:N,parentElement:F,type:q,index:H,resolveType:U,originalContent:Q,resolvedContent:null,resolved:!1}}return b={resolveManifestOnLoad:function(N){let F;C=N,C.Period?(F=w(C.Period,C,fe.default.PERIOD,Tr),S(F,fe.default.PERIOD,Tr)):d.trigger(f.default.XLINK_READY,{manifest:C})},setParser:function(N){N&&(E=N)},reset:function(){d.off(f.default.XLINK_ELEMENT_LOADED,L,b),k&&(k.reset(),k=null)}},d.on(f.default.XLINK_ELEMENT_LOADED,L,b),k=Md(i).create({errHandler:l.errHandler,dashMetrics:l.dashMetrics,mediaPlayerModel:l.mediaPlayerModel,settings:l.settings}),b}nl.__dashjs_factory_name="XlinkController";var Pd=o.default.getClassFactory(nl);function al(l){function i(b,E){for(let C in b)E.hasOwnProperty(C)||(E[C]=b[C])}function d(b,E,C){for(let k=0,S=b.length;k<S;++k){const L=b[k];if(E[L.name])if(C[L.name]){if(L.merge){const P=E[L.name],w=C[L.name];typeof P=="object"&&typeof w=="object"?i(P,w):C[L.name]=P+w}}else C[L.name]=E[L.name]}}function y(b,E){for(let C=0,k=b.children.length;C<k;++C){const S=b.children[C],L=E[S.name];if(L)for(let P=0,w=L.length;P<w;++P){const R=L[P];d(b.properties,E,R),y(S,R)}}}return{run:function(b){if(b===null||typeof b!="object")return b;if(b.Period&&"period"in l){const E=l.period,C=b.Period;for(let k=0,S=C.length;k<S;++k){const L=C[k];if(y(E,L),"adaptationset"in l){const P=L.AdaptationSet;if(P){const w=l.adaptationset;for(let R=0,N=P.length;R<N;++R)y(w,P[R])}}}}return b}}}al.__dashjs_factory_name="ObjectIron";var Od=o.default.getClassFactory(al),Si=class{constructor(l,i){this._test=l,this._converter=i}get test(){return this._test}get converter(){return this._converter}};const rl=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?T?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*)S)?/;var zd=class extends Si{constructor(){super(((l,i,d)=>{const y=[fe.default.MIN_BUFFER_TIME,fe.default.MEDIA_PRESENTATION_DURATION,fe.default.MINIMUM_UPDATE_PERIOD,fe.default.TIMESHIFT_BUFFER_DEPTH,fe.default.MAX_SEGMENT_DURATION,fe.default.MAX_SUBSEGMENT_DURATION,fe.default.SUGGESTED_PRESENTATION_DELAY,fe.default.START,c.default.START_TIME,fe.default.DURATION],b=y.length;for(let E=0;E<b;E++)if(i===y[E])return rl.test(d);return!1}),(l=>{const i=rl.exec(l);let d=31536e3*parseFloat(i[3]||0)+2592e3*parseFloat(i[5]||0)+86400*parseFloat(i[7]||0)+3600*parseFloat(i[9]||0)+60*parseFloat(i[11]||0)+parseFloat(i[13]||0);return i[1]!==void 0&&(d=-d),d}))}};const il=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+-])([0-9]{2})(?::?)([0-9]{2}))?/;var Fd=class extends Si{constructor(){super(((l,i,d)=>il.test(d)),(l=>{const i=il.exec(l);let d;if(d=Date.UTC(parseInt(i[1],10),parseInt(i[2],10)-1,parseInt(i[3],10),parseInt(i[4],10),parseInt(i[5],10),i[6]&&parseInt(i[6],10)||0,i[7]&&1e3*parseFloat(i[7])||0),i[9]&&i[10]){const y=60*parseInt(i[9],10)+parseInt(i[10],10);d+=(i[8]==="+"?-1:1)*y*60*1e3}return new Date(d)}))}};const Ud=/^[-+]?[0-9]+[.]?[0-9]*([eE][-+]?[0-9]+)?$/,Bd=[fe.default.ID];var jd=class extends Si{constructor(){super(((l,i,d)=>Ud.test(d)&&Bd.indexOf(i)===-1),(l=>parseFloat(l)))}},qd=class extends Si{constructor(){super(((l,i)=>{const d={[fe.default.ADAPTATION_SET]:[fe.default.LANG],[fe.default.REPRESENTATION]:[fe.default.LANG],[fe.default.CONTENT_COMPONENT]:[fe.default.LANG],[fe.default.LABEL]:[fe.default.LANG],[fe.default.GROUP_LABEL]:[fe.default.LANG]};if(d.hasOwnProperty(l)){let y=d[l];return y!==void 0&&y.indexOf(i)>=0}return!1}),(l=>wi(l)||String(l)))}},Hd=class{constructor(l){var i;this._name=l,this._merge=(i=l)&&i.length&&i.charAt(0)===i.charAt(0).toUpperCase()}get name(){return this._name}get merge(){return this._merge}},vr=class{constructor(l,i,d){this._name=l||"",this._properties=[],this._children=d||[],Array.isArray(i)&&i.forEach((y=>{this._properties.push(new Hd(y))}))}get name(){return this._name}get children(){return this._children}get properties(){return this._properties}},Gd=class extends vr{constructor(){const l=[fe.default.AUDIO_CHANNEL_CONFIGURATION,fe.default.AUDIO_SAMPLING_RATE,fe.default.CODECS,fe.default.CODING_DEPENDENCY,fe.default.CONTENT_PROTECTION,fe.default.FRAMERATE,fe.default.FRAME_PACKING,fe.default.HEIGHT,fe.default.INBAND_EVENT_STREAM,fe.default.MAXIMUM_SAP_PERIOD,fe.default.MAX_PLAYOUT_RATE,fe.default.MIME_TYPE,fe.default.PROFILES,fe.default.SAR,fe.default.SCAN_TYPE,fe.default.SEGMENT_PROFILES,fe.default.SEGMENT_SEQUENCE_PROPERTIES,fe.default.START_WITH_SAP,fe.default.WIDTH];super(fe.default.ADAPTATION_SET,l,[new vr(fe.default.REPRESENTATION,l,[new vr(fe.default.SUB_REPRESENTATION,l)])])}},Yd=class extends vr{constructor(){const l=[fe.default.SEGMENT_BASE,fe.default.SEGMENT_TEMPLATE,fe.default.SEGMENT_LIST];super(fe.default.PERIOD,l,[new vr(fe.default.ADAPTATION_SET,l,[new vr(fe.default.REPRESENTATION,l)])])}};const Kd=[fe.default.ACCESSIBILITY,fe.default.ADAPTATION_SET,fe.default.ADD,fe.default.AUDIO_CHANNEL_CONFIGURATION,fe.default.BASE_URL,fe.default.CONTENT_COMPONENT,fe.default.CONTENT_PROTECTION,fe.default.CONTENT_STEERING,fe.default.ESSENTIAL_PROPERTY,fe.default.EVENT,fe.default.EVENT_STREAM,fe.default.INBAND_EVENT_STREAM,fe.default.LABEL,fe.default.LOCATION,fe.default.METRICS,fe.default.PATCH_LOCATION,fe.default.PERIOD,fe.default.PRESELECTION,fe.default.PRODUCER_REFERENCE_TIME,fe.default.REMOVE,fe.default.REPLACE,fe.default.REPORTING,fe.default.REPRESENTATION,fe.default.ROLE,fe.default.S,fe.default.SEGMENT_SEQUENCE_PROPERTIES,fe.default.SEGMENT_URL,fe.default.SERVICE_DESCRIPTION,fe.default.SUPPLEMENTAL_PROPERTY,fe.default.UTC_TIMING];function sl(l){l=l||{};const i=this.context,d=l.debug;let y,b,E,C;function k(S){try{const L=(function(P){const w=(function(N,F={}){let q=F.pos||0;const H=N.length,U=!!F.keepComments,Q=!!F.keepWhitespace,ee="<",ne=60,le=">",j=62,O=45,D=47,M=63,ce=33,V=39,me=34,ue=91,ge=93,Ie=`\r
	>/= `;function Ee(ae,z="#text"){return{nodeName:z,nodeValue:ae,attributes:{},childNodes:[]}}function B(ae=""){const z=[];for(;N[q];)if(N.charCodeAt(q)==ne){if(N.charCodeAt(q+1)===D){const de=q+2;if(q=N.indexOf(le,q),!N.startsWith(ae,de)){const pe=N.substring(0,q).split(`
`);throw new Error(`Unexpected close tag
Line: `+(pe.length-1)+`
Column: `+(pe[pe.length-1].length+1)+`
Char: `+N[q])}return q+1&&(q+=1),z}if(N.charCodeAt(q+1)===M){q=N.indexOf(le,q),q++;continue}if(N.charCodeAt(q+1)===ce){if(N.charCodeAt(q+2)==O){const de=q;for(;q!==-1&&(N.charCodeAt(q)!==j||N.charCodeAt(q-1)!=O||N.charCodeAt(q-2)!=O||q==-1);)q=N.indexOf(le,q+1);q===-1&&(q=H),U&&z.push(Ee(N.substring(de,q+1),"#comment"))}else{if(N.charCodeAt(q+2)===ue&&N.charCodeAt(q+8)===ue&&N.startsWith("CDATA",q+3)){const de=N.indexOf("]]>",q);de==-1?(z.push(Ee(N.substr(q+9),"#cdata")),q=H):(z.push(Ee(N.substring(q+9,de),"#cdata")),q=de+3);continue}{const de=q+1;q+=2;let pe=!1;for(;(N.charCodeAt(q)!==j||pe===!0)&&N[q];)N.charCodeAt(q)===ue?pe=!0:pe===!0&&N.charCodeAt(q)===ge&&(pe=!1),q++;z.push(Ee(N.substring(de,q),"#doctype"))}}q++;continue}const ie=W();z.push(ie)}else{const ie=K();if(Q)ie.length>0&&z.push(Ee(ie));else{const de=ie.trim();de.length>0&&z.push(Ee(de))}q++}return z}function K(){const ae=q;return q=N.indexOf(ee,q)-1,q===-2&&(q=H),or(N.slice(ae,q+1))}function Z(){const ae=q;for(;Ie.indexOf(N[q])===-1&&N[q];)q++;return N.slice(ae,q)}function W(){q++;const ae=Z();let z=ae,ie=null;const de=ae.indexOf(":");de!==-1&&(ie=ae.slice(0,de),z=ae.slice(de+1));const pe=(function(){const Pe={};for(;N.charCodeAt(q)!==j&&N[q];){const Ke=N.charCodeAt(q);if(Ke>64&&Ke<91||Ke>96&&Ke<123){const et=Z();let ut="",qt=N.charCodeAt(q);for(;qt!==V&&qt!==me;)q++,qt=N.charCodeAt(q);if(qt===V||qt===me){if(ut=X(),q===-1)throw new Error("Missing closing quote")}else q--;Pe[et]=or(ut)}q++}return Pe})();let _e=[];const we=N.charCodeAt(q-1);return q++,we!==D&&(_e=B(ae)),{nodeName:ae,nodeValue:null,attributes:pe,childNodes:_e,prefix:ie,localName:z}}function X(){const ae=N[q],z=q+1;return q=N.indexOf(ae,z),N.slice(z,q)}return{nodeName:"#document",nodeValue:null,childNodes:B(""),attributes:{}}})(P),R=w.childNodes.find((N=>N.nodeName==="MPD"||N.nodeName==="Patch"))||w.childNodes[0];return(function N(F){F.nodeName.indexOf(":")!==-1&&(F.__prefix=F.prefix,F.nodeName=F.localName);const{childNodes:q,attributes:H,nodeName:U}=F;F.tagName=U;for(let ee in H){let ne=H[ee];if(U==="S")ne=parseInt(ne);else for(let le=0,j=E.length;le<j;le++){const O=E[le];if(O.test(U,ee,ne)){ne=O.converter(ne);break}}F[ee]=ne}const Q=q?.length;for(let ee=0;ee<Q;ee++){const ne=q[ee];if(ne.nodeName==="#text"){F.__text=ne.nodeValue;continue}N(ne);const{nodeName:le}=ne;Array.isArray(F[le])?F[le].push(ne):Kd.indexOf(le)!==-1?(F[le]||(F[le]=[]),F[le].push(ne)):F[le]=ne}F.__children=q})(R),R})(S);return{[L.tagName]:L}}catch{return null}}return y={getIron:function(){return C},parseXml:k,parse:function(S){let L;const P=window.performance.now();if(L=k(S),!L)throw new Error("failed to parse the manifest");L.Patch?(L=L.Patch,L.add&&L.add.forEach((R=>C.run(R))),L.replace&&L.replace.forEach((R=>C.run(R)))):(L=L.MPD,C.run(L));const w=window.performance.now();return b.info("Parsing complete: "+(w-P).toPrecision(3)+"ms"),L.protocol="DASH",L}},b=d.getLogger(y),E=[new zd,new Fd,new jd,new qd],C=Od(i).create({adaptationset:new Gd,period:new Yd}),y}sl.__dashjs_factory_name="DashParser";var Vd=o.default.getClassFactory(sl);function ol(l){l=l||{};const i=this.context,d=l.debug,y=l.settings,b=(0,T.default)(i).getInstance(),E=Dn(i).getInstance();let C,k,S,L,P,w=l.mssHandler,R=l.errHandler;function N(F){b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:F.manifest})}return C={load:function(F,q=null,H=null){const U=new Date,Q=new el(F,De.HTTPRequest.MPD_TYPE);q&&(Q.serviceLocation=q),H&&(Q.queryParams=H),Q.startDate||(Q.startDate=U),b.trigger(f.default.MANIFEST_LOADING_STARTED,{request:Q}),S.load({request:Q,success:function(ee,ne,le){if(!L)return;let j,O,D;if(le&&le!==F?(O=E.parseBaseUrl(le),j=le):(E.isRelative(F)&&(F=E.resolve(F,window.location.href)),O=E.parseBaseUrl(F)),ne!="No Content")if(P===null&&(P=(function(M){let ce=null;return M.indexOf("SmoothStreamingMedia")>-1?(w&&(ce=w.createMssParser(),w.createMssFragmentProcessor(),w.registerEvents()),ce):M.indexOf("MPD")>-1||M.indexOf("Patch")>-1?Vd(i).create({debug:d}):ce})(ee)),P!==null){L.setParser(P);try{D=P.parse(ee)}catch{return void b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Bt.default(Gt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Gt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${F}`)})}if(D){if(D.url=j||F,D.originalUrl||(D.originalUrl=D.url),y&&y.get().streaming.enableManifestDurationMismatchFix&&D.mediaPresentationDuration&&D.Period.length>1){const M=D.Period.reduce(((ce,V)=>ce+V.duration),0);!isNaN(M)&&D.mediaPresentationDuration>M&&(k.warn("Media presentation duration greater than duration of all periods. Setting duration to total period duration"),D.mediaPresentationDuration=M)}D.baseUri=O,D.loadedTime=new Date,L.resolveManifestOnLoad(D),b.trigger(f.default.ORIGINAL_MANIFEST_LOADED,{originalManifest:ee})}else b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Bt.default(Gt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Gt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${F}`)})}else b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Bt.default(Gt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE,Gt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_MESSAGE+`${F}`)});else b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null})},error:function(ee,ne,le){b.trigger(f.default.INTERNAL_MANIFEST_LOADED,{manifest:null,error:new Bt.default(Gt.MANIFEST_LOADER_LOADING_FAILURE_ERROR_CODE,Gt.MANIFEST_LOADER_LOADING_FAILURE_ERROR_MESSAGE+`${F}, ${le}`)})}})},reset:function(){b.off(f.default.XLINK_READY,N,C),w&&w.reset(),L&&(L.reset(),L=null),S&&(S.abort(),S=null)}},k=d.getLogger(C),b.on(f.default.XLINK_READY,N,C),S=yr(i).create({errHandler:l.errHandler,dashMetrics:l.dashMetrics,mediaPlayerModel:l.mediaPlayerModel,urlUtils:E,constants:c.default,dashConstants:fe.default,errors:Gt,requestTimeout:l.settings.get().streaming.manifestRequestTimeout}),L=Pd(i).create({errHandler:R,dashMetrics:l.dashMetrics,mediaPlayerModel:l.mediaPlayerModel,settings:l.settings}),P=null,C}ol.__dashjs_factory_name="ManifestLoader";var $d=o.default.getClassFactory(ol);function ll(){let l,i,d=this.context,y=(0,T.default)(d).getInstance();return l={getValue:function(){return i},setValue:function(b){i=b,b&&y.trigger(f.default.MANIFEST_LOADED,{data:b})}},l}ll.__dashjs_factory_name="ManifestModel";var Wd=o.default.getSingletonFactory(ll);function ul(){const l=this.context,i=(0,p.default)(l).getInstance();let d,y,b;return d={select:function(E){if(!E||E.length===0)return null;let C=null;return i.get().streaming.applyContentSteering&&(C=(function(k){const S=b.getCurrentSteeringResponseData();return S&&S.pathwayPriority&&S.pathwayPriority.length>0?(function(L=[],P=[]){let w=0,R=null;for(;w<L.length;){const N=L[w],F=P.findIndex((q=>q.serviceLocation&&q.serviceLocation===N));if(F!==-1&&!y.contains(P[F].serviceLocation)){R=P[F];break}w+=1}return R})(S.pathwayPriority,k):null})(E)),C||(C=(function(k){return k[0]})(E)),C},setConfig:function(E){E.blacklistController&&(y=E.blacklistController),E.contentSteeringController&&(b=E.contentSteeringController)},reset:function(){y.reset()}},y=Qt(l).create({updateEventName:f.default.SERVICE_LOCATION_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:f.default.SERVICE_LOCATION_LOCATION_BLACKLIST_ADD}),b=as(l).getInstance(),d}ul.__dashjs_factory_name="LocationSelector";var Qd=o.default.getClassFactory(ul);function cl(){const l=this.context,i=(0,T.default)(l).getInstance(),d=Dn(l).getInstance();let y,b,E,C,k,S,L,P,w,R,N,F,q,H,U;function Q(){q=NaN,P=!1,S=!0,L=!1,ee()}function ee(){H!==null&&(clearTimeout(H),H=null)}function ne(ue){ee(),L||(isNaN(ue)&&!isNaN(q)&&(ue=1e3*q),isNaN(ue)||(R.debug("Refresh manifest in "+ue+" milliseconds."),H=setTimeout(O,ue)))}function le(ue=!1){P=!0;const ge=F.getValue();let Ie=ge.url;Ie&&(Ie=We.default.removeQueryParameterFromUrl(Ie,c.default.CMCD_QUERY_KEY));let Ee=null;const B=y.getPatchLocation(ge),K=w.select(B);let Z=null;if(K&&!ue)Ie=K.url,Ee=K.serviceLocation,Z=K.queryParams;else{const W=(function(ae){const z=y.getLocation(ae),ie=b.getSynthesizedLocationElements(z);return z.concat(ie)})(ge),X=w.select(W);X&&(Ie=X.url,Ee=X.serviceLocation,Z=X.queryParams)}d.isRelative(Ie)&&(Ie=d.resolve(Ie,ge.url)),N.load(Ie,Ee,Z)}function j(ue){if(ue){if(y.getIsPatch(ue)){let Ee=ue;ue=F.getValue();let B=y.isPatchValid(ue,Ee),K=B;if(B){let Z=y.getPublishTime(ue);y.applyPatchToManifest(ue,Ee);let W=y.getPublishTime(ue);K=Z.getTime()!==W.getTime()}if(!K)return R.debug("Patch provided is invalid, performing full manifest refresh"),void le(!0);ue.loadedTime=new Date}}else(ue=F.getValue()).loadedTime=new Date;if(F.getValue()&&F.getValue().type===fe.default.DYNAMIC&&ue.type===fe.default.STATIC)return i.trigger(f.default.DYNAMIC_TO_STATIC),P=!1,void(L=!0);F.setValue(ue);const ge=new Date,Ie=(ge.getTime()-ue.loadedTime.getTime())/1e3;q=y.getManifestUpdatePeriod(ue,Ie),1e3*q>2147483647&&(q=2147483647e-3),i.trigger(f.default.MANIFEST_UPDATED,{manifest:ue}),R.info("Manifest has been refreshed at "+ge+"["+ge.getTime()/1e3+"] "),S||ne()}function O(){S||(P?ne(U.get().streaming.manifestUpdateRetryInterval):le())}function D(ue){if(ue.error)ue.error.code===Gt.MANIFEST_LOADER_PARSING_FAILURE_ERROR_CODE&&C.error(ue.error);else{const ge=ue.manifest;(function(Ie){(function(Ee){const B=E.getExternalSubtitles();if(!B||B.length===0)return;const K=Ee&&Ee.Period?Ee.Period.length:0;B.forEach((Z=>{if(Z.periodId===null&&K>1)R.warn(`External subtitle with id ${Z.id} has no periodId and the MPD contains more than one period. Unable to add the external subtitle as it is not clear which period shall be used.`);else if(K===1)M(Ee.Period[0],Z);else{const W=Ee.Period.find((X=>X.id===Z.periodId));W?M(W,Z):R.warn(`External subtitle with id ${Z.id} has periodId ${Z.periodId} but the MPD does not contain a period with that id. Unable to add the external subtitle.`)}}))})(Ie)})(ge),j(ge)}}function M(ue,ge){if(!ue||!ue.AdaptationSet)return ue;ue.AdaptationSet.push(ge.serializeToMpdParserFormat())}function ce(){S=!1,ne()}function V(){S=!U.get().streaming.scheduling.scheduleWhilePaused,S&&ee()}function me(){P=!1}return k={getIsUpdating:function(){return P},initialize:function(){Q(),i.on(f.default.STREAMS_COMPOSED,me,this),i.on(v.default.PLAYBACK_STARTED,ce,this),i.on(v.default.PLAYBACK_PAUSED,V,this),i.on(f.default.INTERNAL_MANIFEST_LOADED,D,this)},refreshManifest:le,reset:function(){i.off(v.default.PLAYBACK_STARTED,ce,this),i.off(v.default.PLAYBACK_PAUSED,V,this),i.off(f.default.STREAMS_COMPOSED,me,this),i.off(f.default.INTERNAL_MANIFEST_LOADED,D,this),Q()},setConfig:function(ue){ue&&(ue.manifestModel&&(F=ue.manifestModel),ue.adapter&&(y=ue.adapter),ue.manifestLoader&&(N=ue.manifestLoader),ue.errHandler&&(C=ue.errHandler),ue.locationSelector&&(w=ue.locationSelector),ue.settings&&(U=ue.settings),ue.contentSteeringController&&(b=ue.contentSteeringController),ue.customParametersModel&&(E=ue.customParametersModel))},setManifest:function(ue){j(ue)}},R=(0,u.default)(l).getInstance().getLogger(k),w=Qd(l).create(),E=(0,es.default)(l).getInstance(),k}cl.__dashjs_factory_name="ManifestUpdater";var dl=o.default.getClassFactory(cl);function fs(){const l=this.context,i=(0,T.default)(l).getInstance();let d,y,b,E,C,k,S,L,P,w,R;function N(z){if(!(z&&z.currentRepresentation&&z.currentRepresentation.mediaInfo&&z.currentRepresentation.mediaInfo.type))return;const ie=z.currentRepresentation.mediaInfo.type;S[ie]=z.currentRepresentation}function F(z,ie){return z&&b[ie]&&b[ie][z]?b[ie][z].list:[]}function q(z,ie){return z&&b[ie]&&b[ie][z]?b[ie][z].current:null}function H(z,ie={}){if(!z||!z.streamInfo)return;const de=z.type,pe=z.streamInfo.id,_e=q(de,pe);if(b[pe]&&b[pe][de]&&(b[pe][de].current=z,b[pe][de].current&&(de!==c.default.TEXT&&!ee(z,_e)||de===c.default.TEXT&&z.isFragmented)&&i.trigger(f.default.CURRENT_TRACK_CHANGED,{oldMediaInfo:_e,newMediaInfo:z,switchMode:E.get().streaming.trackSwitchMode[de],options:ie},{streamId:pe}),!ie.hasOwnProperty("noSettingsSave")||!ie.noSettingsSave)){let we=(function(Pe){const Ke={lang:Pe.lang,viewpoint:Pe.viewpoint,roles:Pe.roles,accessibility:Pe.accessibility,audioChannelConfiguration:Pe.audioChannelConfiguration,codec:Pe.codec};return Ke.lang||Ke.viewpoint||Ke.role&&Ke.role.length>0||Ke.accessibility&&Ke.accessibility.length>0||Ke.audioChannelConfiguration&&Ke.audioChannelConfiguration.length>0?Ke:null})(z);if(!we||!b[pe][de].storeLastSettings)return;we.roles&&(we.role=we.roles[0],delete we.roles),we.accessibility&&(we.accessibility=we.accessibility[0]),we.audioChannelConfiguration&&(we.audioChannelConfiguration=we.audioChannelConfiguration[0]),k[de]=we,R.setSavedMediaSettings(de,we)}}function U(z,ie){z&&ie&&(C[z]=ie)}function Q(z){return z?C[z]:null}function ee(z,ie){if(!z&&!ie)return!0;if(!z||!ie||z.isPreselection!==ie.isPreselection)return!1;const de=z.id===ie.id,pe=JSON.stringify(z.viewpoint)===JSON.stringify(ie.viewpoint),_e=z.lang===ie.lang,we=z.codec===ie.codec,Pe=JSON.stringify(z.roles)===JSON.stringify(ie.roles),Ke=JSON.stringify(z.accessibility)===JSON.stringify(ie.accessibility),et=JSON.stringify(z.audioChannelConfiguration)===JSON.stringify(ie.audioChannelConfiguration);return de&&we&&pe&&_e&&Pe&&Ke&&et}function ne(){b={},k={},S={},C={audio:null,video:null,text:null},i.off(v.default.REPRESENTATION_SWITCH,N,d)}function le(z,ie,de){let pe=[];return z.forEach((function(_e){ie(de,_e)&&pe.push(_e)})),pe.length!==0||ie===ce&&E.get().streaming.assumeDefaultRoleAsMain&&ae(de.role,{schemeIdUri:c.default.DASH_ROLE_SCHEME_ID,value:fe.default.MAIN})&&(y.info("no track with Role set to main - assuming main as default and searching again"),pe=le(z,V,null),pe.length!==0)?pe:(y.info("Filter-Function ("+ie.name+") resulted in no tracks; setting ignored"),z)}function j(z,ie){try{return!z.lang||z.lang instanceof RegExp?ie.lang.match(z.lang):ie.lang!==""&&ls(ie.lang,wi(z.lang)).length>0}catch{return!1}}function O(z,ie){return z.index===void 0||z.index===null||ie.index===z.index}function D(z,ie){return z.id===void 0||z.id===null||ie.id===z.id}function M(z,ie){return!z.viewpoint||!!ie.viewpoint.filter((function(de){return ae(de,z.viewpoint)}))[0]}function ce(z,ie,de=!1){return!!ie.roles&&(!z.role||!!ie.roles.filter((function(pe){return ae(pe,z.role)}))[0]||ie.type===c.default.AUDIO&&de)}function V(z,ie){return!ie.roles||ie.roles.length===0}function me(z,ie){let de;return de=z.accessibility?!!ie.accessibility.filter((function(pe){return ae(pe,z.accessibility)}))[0]:!ie.accessibility.length,de}function ue(z,ie){return!z.audioChannelConfiguration||!!ie.audioChannelConfiguration.filter((function(de){return ae(de,z.audioChannelConfiguration)}))[0]}function ge(z,ie){return!z.codec||z.codec===ie.codec}function Ie(z){let ie=0,de=[];return z.forEach((pe=>{isNaN(pe.selectionPriority)||(pe.selectionPriority>ie?(ie=pe.selectionPriority,de=[pe]):pe.selectionPriority===ie&&de.push(pe))})),de}function Ee(z){let ie,de=0,pe=[];return z.forEach((function(_e){ie=Math.max.apply(Math,_e.bitrateList.map((function(we){return we.bandwidth}))),ie>de?(de=ie,pe=[_e]):ie===de&&pe.push(_e)})),pe}function B(z){return z[0]&&z[0].type===c.default.VIDEO?(function(ie){let de,pe=1/0,_e=[];return ie.forEach((function(we){de=we.bitrateList.reduce((function(Ke,et){const ut=Math.max(1,et.width*et.height);return Ke+et.bandwidth/ut}),0)/we.bitrateList.length,de<pe?(pe=de,_e=[we]):de===pe&&_e.push(we)})),_e})(z):z[0]&&z[0].type===c.default.AUDIO?(function(ie){let de=1/0,pe=[];return ie.forEach((function(_e){let we=_e.audioChannelConfiguration.reduce((function(Ke,et){return Ke+(Mo(et)||0)}),0)/_e.audioChannelConfiguration.length;_e.hasOwnProperty("supplementalProperties")&&_e.supplementalProperties.some((Ke=>Ke.schemeIdUri==="tag:dolby.com,2018:dash:EC3_ExtensionType:2018"&&Ke.value==="JOC"))&&(we=16),we||(we=1);let Pe=_e.bitrateList.reduce((function(Ke,et){return Ke+et.bandwidth/we}),0)/_e.bitrateList.length;Pe<de?(de=Pe,pe=[_e]):Pe===de&&pe.push(_e)})),pe})(z):z}function K(z){let ie,de=0,pe=[];return z.forEach((function(_e){ie=_e.representationCount,ie>de?(de=ie,pe=[_e]):ie===de&&pe.push(_e)})),pe}function Z(z,ie){if(z===c.default.TEXT)return(function(_e){if(!_e||_e.length===0)return null;const we=_e.filter((Pe=>!(Pe&&Pe.roles&&Pe.roles.length>0)||Pe.roles.every((Ke=>Ke.schemeIdUri!==c.default.DASH_ROLE_SCHEME_ID||Ke.value!==fe.default.FORCED_SUBTITLE))));return we.length>0?we[0]:_e[0]})(ie);let de;const pe=L.getCustomInitialTrackSelectionFunction();if(de=(function(_e){try{let we;return we=(function(Pe){try{const Ke=Pe.filter((et=>{const ut=et.type;return et.bitrateList.some((qt=>{const dt=P.getAbrBitrateParameter("maxBitrate",ut),jt=P.getAbrBitrateParameter("minBitrate",ut);return!(dt>-1&&qt.bandwidth>1e3*dt||jt>-1&&qt.bandwidth<1e3*jt)}))}));return Ke.length>0?Ke:Pe}catch(Ke){return y.error(Ke),Pe}})(_e),we=(function(Pe){try{if(!E.get().streaming.abr.limitBitrateByPortal)return Pe;const{elementWidth:Ke}=w.getVideoElementSize(),et=Pe.filter((ut=>ut.type!==c.default.VIDEO||ut.bitrateList.some((qt=>qt.width<=Ke))));return et.length>0?et:Pe}catch(Ke){return y.error(Ke),Pe}})(we),we}catch(we){return y.error(we),_e}})(ie),pe&&typeof pe=="function")de=pe(de);else if(S[z])de=(function(_e,we){if(!_e||_e.length===0||!we||!S[we])return _e;const Pe=S[we].bandwidth;if(!Pe||isNaN(Pe))return _e;let Ke={min:NaN,track:null};return _e.forEach((et=>{et.bitrateList.forEach((ut=>{const qt=Math.abs(ut.bandwidth-Pe);(isNaN(Ke.min)||qt<Ke.min)&&(Ke.min=qt,Ke.track=et)}))})),Ke.track?[Ke.track]:_e})(de,z);else if(E.get().streaming.ignoreSelectionPriority||(y.info("Trying to find track with highest selectionPriority"),de=(function(_e){return Ie(_e)})(de)),de.length>1&&E.get().streaming.prioritizeRoleMain&&(y.info("Trying to find a main track"),de=le(de,ce,{role:{schemeIdUri:c.default.DASH_ROLE_SCHEME_ID,value:fe.default.MAIN}})),de.length>1){y.info("Selecting track based on selectionModeForInitialTrack");let _e=E.get().streaming.selectionModeForInitialTrack;switch(_e){case c.default.TRACK_SELECTION_MODE_HIGHEST_BITRATE:de=(function(we){let Pe=Ee(we);return Pe.length>1&&(Pe=K(Pe)),Pe})(de);break;case c.default.TRACK_SELECTION_MODE_FIRST_TRACK:de=W(de);break;case c.default.TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:de=X(de);break;case c.default.TRACK_SELECTION_MODE_WIDEST_RANGE:de=(function(we){let Pe=K(we);return Pe.length>1&&(Pe=Ee(we)),Pe})(de);break;case c.default.TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY:de=(function(we){let Pe=we.filter((Ke=>!(!Ke.segmentSequenceProperties||Ke.segmentSequenceProperties.length===0)&&Ke.segmentSequenceProperties.some((et=>et.cadence===1&&(et.sapType===0||et.sapType===1)))));return X(Pe.length>0?Pe:we)})(de);break;default:y.warn(`Track selection mode ${_e} is not supported. Falling back to TRACK_SELECTION_MODE_FIRST_TRACK`),de=W(de)}}return de.length>0?de[0]:ie[0]}function W(z){return z[0]}function X(z){let ie=B(z);return ie.length>1&&(ie=Ee(ie)),ie}function ae(z,ie){return!(!z||!ie)&&JSON.stringify({schemeIdUri:z.schemeIdUri,value:z.value})===JSON.stringify({schemeIdUri:ie.schemeIdUri,value:ie.value})}return d={addTrack:function(z){if(!z)return;y.info("addTrack with track.codec='"+z.codec+"', track.type='"+z.type+"'");const ie=z.type;if((de=ie)!==c.default.AUDIO&&de!==c.default.VIDEO&&de!==c.default.TEXT&&de!==c.default.IMAGE)return;var de;let pe=z.streamInfo.id;b[pe]||(b[pe]=(function(){const we=E.get().streaming.saveLastMediaSettingsForCurrentStreamingSession;return{audio:{list:[],storeLastSettings:we,current:null},video:{list:[],storeLastSettings:we,current:null},text:{list:[],storeLastSettings:we,current:null},image:{list:[],storeLastSettings:we,current:null}}})());const _e=b[pe][ie].list;for(let we=0,Pe=_e.length;we<Pe;++we)if(ee(_e[we],z))return;_e.push(z)},areTracksEqual:ee,clearDataForStream:function(z){b[z]&&delete b[z]},getCurrentTrackFor:q,getInitialSettings:Q,getTracksFor:F,getTracksWithHighestSelectionPriority:Ie,getTracksWithHighestBitrate:Ee,getTracksWithHighestEfficiency:B,getTracksWithWidestRange:K,initialize:function(){i.on(v.default.REPRESENTATION_SWITCH,N,d)},isCurrentTrack:function(z){if(!z)return!1;const ie=z.type,de=z.streamInfo.id;return b[de]&&b[de][ie]&&ee(b[de][ie].current,z)},matchSettings:function(z,ie,de=!1){try{let pe=!1;if(z.lang){if(z.lang instanceof RegExp)pe=ie.lang.match(z.lang);else if(ie.lang!==""){const ut=wi(z.lang);ut&&(pe=ls(ie.lang,ut).length>0)}}else pe=!0;const _e=z.index===void 0||z.index===null||ie.index===z.index,we=!z.viewpoint||!!ie.viewpoint.filter((function(ut){return ae(ut,z.viewpoint)}))[0],Pe=!z.role||!!ie.roles.filter((function(ut){return ae(ut,z.role)}))[0];let Ke=!z.accessibility||!!ie.accessibility.filter((function(ut){return ae(ut,z.accessibility)}))[0],et=!z.audioChannelConfiguration||!!ie.audioChannelConfiguration.filter((function(ut){return ae(ut,z.audioChannelConfiguration)}))[0];return pe&&_e&&we&&(Pe||ie.type===c.default.AUDIO&&de)&&Ke&&et}catch{return!1}},matchSettingsAccessibility:me,matchSettingsAudioChannelConfig:ue,matchSettingsIndex:O,matchSettingsLang:j,matchSettingsRole:ce,matchSettingsViewPoint:M,reset:ne,saveTextSettingsDisabled:function(){R.setSavedMediaSettings(c.default.TEXT,null)},selectInitialTrack:Z,setConfig:function(z){z&&(z.domStorage&&(R=z.domStorage),z.settings&&(E=z.settings),z.customParametersModel&&(L=z.customParametersModel),z.mediaPlayerModel&&(P=z.mediaPlayerModel),z.videoModel&&(w=z.videoModel))},setInitialMediaSettingsForType:function(z,ie){let de=k[z]||Q(z);const pe=F(z,ie.id);let _e=[];de&&Object.keys(de).length!==0||(de=R.getSavedMediaSettings(z),de&&delete de.codec,U(z,de)),pe&&pe.length!==0&&(_e=E.get().streaming.includePreselectionsForInitialTrackSelection?Array.from(pe):pe.filter((we=>!we.isPreselection)),de&&(y.info("Filtering "+_e.length+" "+z+" tracks based on settings"),_e=le(_e,D,de),_e=le(_e,j,de),_e=le(_e,O,de),_e=le(_e,M,de),z===c.default.AUDIO&&k[z]||(_e=le(_e,ce,de)),_e=le(_e,me,de),_e=le(_e,ue,de),_e=le(_e,ge,de),y.info("Filtering "+z+" tracks ended, found "+_e.length+" matching track(s).")),_e.length>1?H(Z(z,_e)):H(_e[0]))},setInitialSettings:U,setTrack:H},y=(0,u.default)(l).getInstance().getLogger(d),ne(),d}fs.__dashjs_factory_name="MediaController";const fl=o.default.getSingletonFactory(fs);o.default.updateSingletonFactory(fs.__dashjs_factory_name,fl);var Xd=fl;function ml(){let l,i,d,y;const b=this.context,E=(0,p.default)(b).getInstance();function C(w,R){return isNaN(w)?0:w>0?(R&&i.warn("Supplied minimum playback rate is a positive value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):w<-.5?(R&&i.warn("Supplied minimum playback rate is out of range and will be limited to -0.5: -50% playback speed."),-.5):w}function k(w,R){return isNaN(w)?0:w<0?(R&&i.warn("Supplied maximum playback rate is a negative value when it should be negative or 0. The supplied rate will not be applied and set to 0: 100% playback speed."),0):w>1?(R&&i.warn("Supplied maximum playback rate is out of range and will be limited to 1: 200% playback speed."),1):w}function S(){const w=L(),R=d.getLiveDelay();return!isNaN(R)&&R>0?Math.min(w,R):w}function L(){return E.get().streaming.buffer.bufferTimeDefault>0?E.get().streaming.buffer.bufferTimeDefault:P()?20:12}function P(){return E.get().streaming.buffer.fastSwitchEnabled!==null?E.get().streaming.buffer.fastSwitchEnabled:!d.getLowLatencyModeEnabled()}return l={getAbrBitrateParameter:function(w,R){try{const N=E.get().streaming.abr[w][R];if(!isNaN(N)&&N!==-1)return N;const F=y.getServiceDescriptionSettings();return F&&F[w]&&!isNaN(F[w][R])?F[w][R]:-1}catch{return-1}},getBufferTimeDefault:S,getBufferTimeDefaultUnadjusted:L,getCatchupMaxDrift:function(){if(!isNaN(E.get().streaming.liveCatchup.maxDrift)&&E.get().streaming.liveCatchup.maxDrift>=0)return E.get().streaming.liveCatchup.maxDrift;const w=y.getServiceDescriptionSettings();return w&&w.liveCatchup&&!isNaN(w.liveCatchup.maxDrift)&&w.liveCatchup.maxDrift>=0?w.liveCatchup.maxDrift:12},getCatchupModeEnabled:function(){return E.get().streaming.liveCatchup.enabled!==null?E.get().streaming.liveCatchup.enabled:d.getInitialCatchupModeActivated()},getCatchupPlaybackRates:function(w){const R=E.get().streaming.liveCatchup.playbackRate;if(!isNaN(R.min)||!isNaN(R.max))return{min:C(R.min,w),max:k(R.max,w)};const N=y.getServiceDescriptionSettings();if(N&&N.liveCatchup&&(!isNaN(N.liveCatchup.playbackRate.min)||!isNaN(N.liveCatchup.playbackRate.max))){const F=N.liveCatchup.playbackRate;return{min:C(F.min,w),max:k(F.max,w)}}return{min:-.5,max:.5}},getFastSwitchEnabled:P,getInitialBufferLevel:function(){const w=E.get().streaming.buffer.initialBufferLevel;return isNaN(w)||w<0?0:Math.min(S(),w)},getRetryAttemptsForType:function(w){const R=isNaN(E.get().streaming.retryAttempts.lowLatencyMultiplyFactor)?5:E.get().streaming.retryAttempts.lowLatencyMultiplyFactor;return d.getLowLatencyModeEnabled()?E.get().streaming.retryAttempts[w]*R:E.get().streaming.retryAttempts[w]},getRetryIntervalsForType:function(w){const R=isNaN(E.get().streaming.retryIntervals.lowLatencyReductionFactor)?10:E.get().streaming.retryIntervals.lowLatencyReductionFactor;return d.getLowLatencyModeEnabled()?E.get().streaming.retryIntervals[w]/R:E.get().streaming.retryIntervals[w]},getScheduleTimeout:function(){return d.getLowLatencyModeEnabled()?E.get().streaming.scheduling.lowLatencyTimeout:E.get().streaming.scheduling.defaultTimeout},reset:function(){},setConfig:function(w){w.playbackController&&(d=w.playbackController),w.serviceDescriptionController&&(y=w.serviceDescriptionController)}},i=(0,u.default)(b).getInstance().getLogger(l),l}ml.__dashjs_factory_name="MediaPlayerModel";var Jd=o.default.getSingletonFactory(ml);function gl(){const l=this.context,i=(0,T.default)(l).getInstance();let d,y,b,E,C,k,S,L,P,w,R,N,F,q,H,U,Q,ee,ne,le,j,O,D,M;function ce(){ge(),H=!1,w=0,q=0,y=0,F=!1,N=!1,E=!1,Q=NaN,P=NaN,D&&(i.off(f.default.DATA_UPDATE_COMPLETED,we,C),i.off(f.default.MANIFEST_UPDATED,qe,C),i.off(f.default.STREAMS_COMPOSED,st,C),i.off(v.default.PLAYBACK_ENDED,Ft,C),i.off(v.default.STREAM_INITIALIZING,kt,C),i.off(v.default.REPRESENTATION_SWITCH,Me,C),i.off(v.default.BUFFER_LEVEL_STATE_CHANGED,et,C),_e(),D.removeEventListener("canplay",Pe),D.removeEventListener("canplaythrough",Ke),D.removeEventListener("ended",nt),D.removeEventListener("error",un),D.removeEventListener("loadeddata",it),D.removeEventListener("loadedmetadata",Ue),D.removeEventListener("pause",jt),D.removeEventListener("play",ut),D.removeEventListener("playing",dt),D.removeEventListener("progress",nn),D.removeEventListener("ratechange",fn),D.removeEventListener("seeked",En),D.removeEventListener("seeking",Zt),D.removeEventListener("stalled",ct),D.removeEventListener("timeupdate",yn),D.removeEventListener("volumechange",gt),D.removeEventListener("waiting",qt)),M=null,D=null,j=null,S=null}function V(Ge=null){return parseFloat((me(Ge)-K()).toFixed(5))}function me(Ge){const ht=Ge||j;return ht.start+ht.duration}function ue(Ge=!1){j&&D&&D.getElement()?(Ge&&S&&B(K()),D.play()):H=!0}function ge(){j&&D&&D.pause()}function Ie(Ge,ht=!1,Tt=!1,be=!1){j&&D&&D.getElement()&&Ge!==(isNaN(Q)?D.getTime():Q)&&(k=Tt===!0,k||(Q=Ge),R.info("Requesting seek to time: "+Ge+(k?" (internal)":"")),S&&be&&B(Ge),D.setCurrentTime(Ge,ht))}function Ee(){if(!j||!D||!S)return;const Ge=le&&le.hasVideoTrack()?c.default.VIDEO:c.default.AUDIO,ht=b.getCurrentDVRInfo(Ge);return ht&&ht.range?ht.range.end:0}function B(Ge){const ht=new Date(O.getClientReferenceTime()),Tt=d.getRegularPeriods()[0];w=O.calcPresentationTimeFromWallTime(ht,Tt)-Ge}function K(){return j&&D?D.getTime():null}function Z(){return j&&D?D.isPaused():null}function W(){return j&&D?D.isSeeking():null}function X(){return j&&D?D.isStalled():null}function ae(){return j&&D?D.getPlaybackRate():null}function z(){return j&&D?D.getEnded():null}function ie(){return S}function de(Ge=null){if(Z()||!S||D.getReadyState()===0||W()||F)return;Ge||(Ge=le.hasVideoTrack()?c.default.VIDEO:c.default.AUDIO);const ht=K(),Tt=(function(be,$e){const vt=b.getCurrentDVRInfo($e),wt=vt?vt.range:null;let mn;return wt?(mn=be>wt.end?Math.max(wt.end-w,wt.start):be>0&&be+.25<wt.start&&Math.abs(be-wt.start)<31536e4?N?Math.max(wt.end-w,wt.start):wt.start:be,mn):NaN})(ht,Ge);!isNaN(Tt)&&Tt!==ht&&!W()&&(X()||U||D.getReadyState()===1)&&(R.debug(`UpdateCurrentTime: Seek to actual time: ${Tt} from currentTime: ${ht}`),Ie(Tt,!1,!1))}function pe(){M===null&&(M=setInterval((()=>{(function(){if(i.trigger(f.default.WALLCLOCK_TIME_UPDATED,{isDynamic:S,time:new Date}),ie()){const Ge=Date.now();(isNaN(P)||Ge>P+ne.get().streaming.liveUpdateTimeThresholdInMilliseconds)&&(le.addDVRMetric(),Z()?(function(){const ht=Date.now();(!L||ht>L+500)&&(L=ht,yn())})():de(),P=Ge)}})()}),ne.get().streaming.wallclockTimeUpdateInterval))}function _e(){clearInterval(M),M=null}function we(Ge){const ht=Ge.currentRepresentation,Tt=ht?ht.mediaInfo.streamInfo:null;Tt!==null&&j.id===Tt.id&&(j=Tt)}function Pe(){i.trigger(f.default.CAN_PLAY)}function Ke(){i.trigger(f.default.CAN_PLAY_THROUGH)}function et(Ge){Ge.streamId===le.getActiveStreamInfo().id&&(U=Ge.state===r.BUFFER_EMPTY,ne.get().streaming.buffer.setStallState&&D.setStallState(Ge.mediaType,Ge.state===r.BUFFER_EMPTY))}function ut(){R.info("Native video element event: play"),de(),pe(),i.trigger(f.default.PLAYBACK_STARTED,{startTime:K()})}function qt(){R.info("Native video element event: waiting"),i.trigger(f.default.PLAYBACK_WAITING,{playingTime:K()})}function dt(){R.info("Native video element event: playing"),k=!1,i.trigger(f.default.PLAYBACK_PLAYING,{playingTime:K()})}function jt(){R.info("Native video element event: pause"),i.trigger(f.default.PLAYBACK_PAUSED,{ended:z()})}function Zt(){if(k)return;let Ge=K();isNaN(Q)||Q===Ge||(Ge=Q),Q=NaN,R.info("Seeking to: "+Ge),pe(),i.trigger(f.default.PLAYBACK_SEEKING,{seekTime:Ge,streamId:j.id})}function En(){R.info("Native video element event: seeked"),k=!1,i.trigger(f.default.PLAYBACK_SEEKED,{streamId:j.id})}function yn(){j&&i.trigger(f.default.PLAYBACK_TIME_UPDATED,{timeToEnd:V(),time:K(),streamId:j.id})}function nn(){i.trigger(f.default.PLAYBACK_PROGRESS,{streamId:j.id})}function fn(){const Ge=ae();R.info("Native video element event: ratechange: ",Ge),i.trigger(f.default.PLAYBACK_RATE_CHANGED,{playbackRate:Ge})}function Ue(){R.info("Native video element event: loadedmetadata"),i.trigger(f.default.PLAYBACK_METADATA_LOADED),pe()}function it(){R.info("Native video element event: loadeddata"),i.trigger(f.default.PLAYBACK_LOADED_DATA)}function nt(){R.info("Native video element event: ended"),ge(),_e();const Ge=le?le.getActiveStreamInfo():null;Ge&&i.trigger(f.default.PLAYBACK_ENDED,{isLast:Ge.isLast})}function gt(){i.trigger(f.default.PLAYBACK_VOLUME_CHANGED)}function Ft(Ge){if(M&&Ge.isLast){R.info("onPlaybackEnded -- PLAYBACK_ENDED but native video element didn't fire ended");const ht=Ge.seekTime?Ge.seekTime:me();D.setCurrentTime(ht),ge(),_e()}}function un(Ge){const ht=Ge.target||Ge.srcElement;i.trigger(f.default.PLAYBACK_ERROR,{error:ht.error})}function Xe(){S=!1}function ct(Ge){i.trigger(f.default.PLAYBACK_STALLED,{e:Ge})}function kt(Ge){var ht;(ht=Ge.mediaInfo)&&ht.supplementalProperties&&ht.supplementalProperties.find((Tt=>Tt.schemeIdUri===c.default.SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME))&&(R.debug("Low Latency critical SupplementalProperty set: Enabling low Latency"),N=!0)}function Me(Ge){const ht=le.getActiveStreamInfo();Ge&&ht&&Ge.currentRepresentation&&Ge.streamId&&Ge.streamId===ht.id&&Ge.mediaType&&(Ge.mediaType===c.default.VIDEO||Ge.mediaType===c.default.AUDIO)&&(N=Ge.currentRepresentation.availabilityTimeComplete===!1,N&&!E&&(E=!0))}function qe(){F=!0}function st(){F=!1}return C={computeAndSetLiveDelay:function(Ge,ht){let Tt,be,$e;const vt=!isNaN(Ge)&&isFinite(Ge)?Ge:NaN;let wt=d.getSuggestedPresentationDelay();const mn=ee.getServiceDescriptionSettings();return Tt=isNaN(ne.get().streaming.delay.liveDelay)?ne.get().streaming.delay.liveDelayFragmentCount===null||isNaN(ne.get().streaming.delay.liveDelayFragmentCount)||isNaN(vt)?mn&&!isNaN(mn.liveDelay)&&mn.liveDelay>0?mn.liveDelay:ne.get().streaming.delay.useSuggestedPresentationDelay===!0&&wt!==null&&!isNaN(wt)&&wt>0?wt:isNaN(vt)?ht&&!isNaN(ht.minBufferTime)?4*ht.minBufferTime:4*j.manifestInfo.minBufferTime:4*vt:vt*ne.get().streaming.delay.liveDelayFragmentCount:ne.get().streaming.delay.liveDelay,$e=d.getAvailabilityStartTime(),$e!==null&&(y=$e),be=ht&&ht.dvrWindowSize>0?Math.min(Tt,ht.dvrWindowSize):Tt,w=be,q=be,be},getAvailabilityStartTime:function(){return y},getBufferLevel:function(Ge=null){let ht=null;return le.getActiveStreamProcessors().forEach((Tt=>{if(!Ge||Ge.length===0||Ge.indexOf(Tt.getType())===-1){const be=Tt.getBufferLevel();ht=ht===null?be:Math.min(ht,be)}})),ht},getCurrentLiveLatency:function(){if(!S||isNaN(y))return NaN;let Ge=K();if(isNaN(Ge)||Ge===0)return 0;const ht=new Date().getTime()+1e3*O.getClientTimeOffset();return Math.max(((ht-y-1e3*Ge)/1e3).toFixed(3),0)},getEnded:z,getInitialCatchupModeActivated:function(){return E},getIsDynamic:ie,getIsManifestUpdateInProgress:function(){return F},getLiveDelay:function(){return w},getLowLatencyModeEnabled:function(){return N},getOriginalLiveDelay:function(){return q},getPlaybackRate:ae,getPlaybackStalled:function(){return U},getPlayedRanges:function(){return j&&D?D.getPlayedRanges():null},getStreamController:function(){return le},getStreamEndTime:me,getTime:K,getTimeToStreamEnd:V,initialize:function(Ge,ht){j=Ge,ht!==!0&&(D.addEventListener("canplay",Pe),D.addEventListener("canplaythrough",Ke),D.addEventListener("ended",nt),D.addEventListener("error",un),D.addEventListener("loadeddata",it),D.addEventListener("loadedmetadata",Ue),D.addEventListener("pause",jt),D.addEventListener("play",ut),D.addEventListener("playing",dt),D.addEventListener("progress",nn),D.addEventListener("ratechange",fn),D.addEventListener("seeked",En),D.addEventListener("seeking",Zt),D.addEventListener("stalled",ct),D.addEventListener("timeupdate",yn),D.addEventListener("volumechange",gt),D.addEventListener("waiting",qt),S=j.manifestInfo.isDynamic,U=!1,k=!1,i.on(f.default.DATA_UPDATE_COMPLETED,we,C),i.on(f.default.MANIFEST_UPDATED,qe,C),i.on(f.default.STREAMS_COMPOSED,st,C),i.on(v.default.PLAYBACK_ENDED,Ft,C,{priority:T.default.EVENT_PRIORITY_HIGH}),i.on(v.default.STREAM_INITIALIZING,kt,C),i.on(v.default.REPRESENTATION_SWITCH,Me,C),i.on(v.default.BUFFER_LEVEL_STATE_CHANGED,et,C),i.on(v.default.DYNAMIC_TO_STATIC,Xe,C),H&&(H=!1,ue()))},isPaused:Z,isProgressing:function(Ge=500){return new Promise((ht=>{let Tt=-1,be=null;const $e=wt=>{clearTimeout(be),be=null,i.off(v.default.PLAYBACK_TIME_UPDATED,vt,C),ht(wt)},vt=wt=>{Tt<0?Tt=wt.time:wt.time>Tt+.1&&$e(!0)};be=setTimeout((()=>{$e(!1)}),Ge),i.on(v.default.PLAYBACK_TIME_UPDATED,vt,C)}))},isSeeking:W,isStalled:X,pause:ge,play:ue,reset:ce,seek:Ie,seekToCurrentLive:function(Ge=!1,ht=!1,Tt=!1){const be=Ee();be!==0&&Ie(be-w,Ge,ht,Tt)},seekToOriginalLive:function(Ge=!1,ht=!1,Tt=!1){const be=Ee();be!==0&&(w=q,Ie(be-w,Ge,ht,Tt))},setConfig:function(Ge){Ge&&(Ge.streamController&&(le=Ge.streamController),Ge.serviceDescriptionController&&(ee=Ge.serviceDescriptionController),Ge.dashMetrics&&(b=Ge.dashMetrics),Ge.adapter&&(d=Ge.adapter),Ge.videoModel&&(D=Ge.videoModel),Ge.timelineConverter&&(O=Ge.timelineConverter),Ge.settings&&(ne=Ge.settings))},updateCurrentTime:de},R=(0,u.default)(l).getInstance().getLogger(C),ce(),C}gl.__dashjs_factory_name="PlaybackController";var Zd=o.default.getSingletonFactory(gl),hl=class{constructor(){this.availabilityEndTime=NaN,this.availabilityStartTime=NaN,this.duration=NaN,this.index=null,this.indexRange=null,this.isPartialSegment=!1,this.media=null,this.mediaRange=null,this.mediaUrl=null,this.mediaStartTime=NaN,this.presentationStartTime=NaN,this.replacementNumber=NaN,this.replacementTime=null,this.representation=null,this.wallStartTime=NaN}assignAttributes(l){for(let i in l)l.hasOwnProperty(i)&&this.hasOwnProperty(i)&&(this[i]=l[i])}},ms=class extends hl{constructor(){super()}};function pl(){const l=this.context;let i,d,y,b,E,C,k,S,L,P,w,R;function N(U,Q,ee,ne){let le=null;const j=U?R.resolve(U.path):null,O=ne||{init:!0,url:j?j.url:void 0,range:{start:0,end:1500},searching:!1,bytesLoaded:0,bytesToLoad:1500,mediaType:Q,representation:U};d.debug("Start searching for initialization.");const D=H(O);k.load({request:D,success:function(M){if(O.bytesLoaded=O.range.end,le=b.findInitRange(M),!le)return O.range.end=O.bytesLoaded+O.bytesToLoad,N(U,Q,ee,O);U.range=le,ee(U)},error:function(){ee(U)}}),d.debug("Perform init search: "+O.url)}function F(U,Q,ee,ne,le,j){if(ee&&(ee.start===void 0||ee.end===void 0)){const ue=ee?ee.toString().split("-"):null;ee=ue?{start:parseFloat(ue[0]),end:parseFloat(ue[1])}:null}le=le||q;let O=null,D=null;const M=!!ee,ce=U?R.resolve(U.path):null,V={init:!1,url:ce?ce.url:void 0,range:M?ee:{start:0,end:1500},searching:!M,bytesLoaded:j?j.bytesLoaded:0,bytesToLoad:1500,mediaType:Q,representation:U},me=H(V);k.load({request:me,success:function(ue){const ge=V.bytesToLoad,Ie=ue.byteLength;if(V.bytesLoaded=V.range.end-V.range.start,O=b.parse(ue),D=O.getBox("sidx"),D&&D.isComplete){const Ee=D.references;let B,K;if(Ee!=null&&Ee.length>0&&(B=Ee[0].reference_type===1),B){let Z,W,X,ae,z;d.debug("Initiate multiple SIDX load."),V.range.end=V.range.start+D.size;let ie=[],de=0,pe=(D.offset||V.range.start)+D.size;const _e=function(we){we?(ie=ie.concat(we),de++,de>=W&&(ie.sort((function(Pe,Ke){return Pe.startTime-Ke.startTime<0?-1:0})),le(ie,U,ne))):le(null,U,ne)};for(Z=0,W=Ee.length;Z<W;Z++)X=pe,ae=pe+Ee[Z].referenced_size-1,pe+=Ee[Z].referenced_size,z={start:X,end:ae},F(U,Q,z,ne,_e,V)}else d.debug("Parsing segments from SIDX. representation "+Q+" - id: "+U.id+" for range : "+V.range.start+" - "+V.range.end),K=(function(Z,W){const X=Z.references,ae=X.length,z=Z.timescale;let ie=Z.earliest_presentation_time,de=W.range.start+Z.offset+Z.first_offset+Z.size;const pe=[];let _e,we,Pe,Ke;for(let et=0;et<ae;et++)Pe=X[et].subsegment_duration,Ke=X[et].referenced_size,_e=new ms,_e.duration=Pe,_e.startTime=ie,_e.timescale=z,we=de+Ke-1,_e.mediaRange=de+"-"+we,pe.push(_e),ie+=Pe,de+=Ke;return pe})(D,V),le(K,U,ne)}else{if(D)V.range.start=D.offset||V.range.start,V.range.end=V.range.start+(D.size||ge);else{if(Ie<V.bytesLoaded)return void le(null,U,ne);{const Ee=O.getLastBox();Ee&&Ee.size?(V.range.start=Ee.offset+Ee.size,V.range.end=V.range.start+ge):V.range.end+=ge}}F(U,Q,V.range,ne,null,V)}},error:function(){le(null,U,ne)}}),d.debug(`Perform SIDX load for type ${Q} : ${V.url} with range ${V.range.start} - ${V.range.end}`)}function q(U,Q,ee){ee({segments:U,representation:Q,error:U?void 0:new Bt.default(S.SEGMENT_BASE_LOADER_ERROR_CODE,S.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}function H(U){if(!U.url)return;const Q=new J;return Q.setInfo(U),Q}return i={setConfig:function(U){U.baseURLController&&(R=U.baseURLController),U.dashMetrics&&(E=U.dashMetrics),U.mediaPlayerModel&&(C=U.mediaPlayerModel),U.errHandler&&(y=U.errHandler),U.boxParser&&(b=U.boxParser),U.debug&&(d=U.debug.getLogger(i)),U.errors&&(S=U.errors),U.urlUtils&&(w=U.urlUtils),U.constants&&(L=U.constants),U.dashConstants&&(P=U.dashConstants)},initialize:function(){k=yr(l).create({errHandler:y,dashMetrics:E,mediaPlayerModel:C,boxParser:b,errors:S,urlUtils:w,constants:L,dashConstants:P})},loadInitialization:function(U,Q){return new Promise((ee=>{N(U,Q,ee)}))},loadSegments:function(U,Q,ee){return new Promise((ne=>{F(U,Q,ee,ne)}))},reset:function(){k&&(k.abort(),k=null)}},i}pl.__dashjs_factory_name="SegmentBaseLoader";var ef=o.default.getSingletonFactory(pl);function yl(l){let i;l=l||{};let d=new DataView(l.data),y=0;function b(C,k){let S,L,P=!0,w=0;if(k===void 0&&(k=!1),C.tag>16777215?(d.getUint32(y)!==C.tag&&(P=!1),w=4):C.tag>65535?(S=d.getUint16(y),L=d.getUint8(y+2),256*S+L!==C.tag&&(P=!1),w=3):C.tag>255?(d.getUint16(y)!==C.tag&&(P=!1),w=2):(d.getUint8(y)!==C.tag&&(P=!1),w=1),!P&&C.required&&!k)throw new Error("required tag not found");return P&&(y+=w),P}function E(C){let k=1,S=128,L=-1,P=0,w=d.getUint8(y),R=0;for(R=0;R<8;R+=1){if((w&S)===S){P=C===void 0?w&~S:w,L=R;break}S>>=1}for(R=0;R<L;R+=1,k+=1)P=P<<8|255&d.getUint8(y+k);return y+=k,P}return i={getPos:function(){return y},setPos:function(C){y=C},consumeTag:b,consumeTagAndSize:function(C,k){let S=b(C,k);return S&&E(),S},parseTag:function(C){let k;return b(C),k=E(),i[C.parse](k)},skipOverElement:function(C,k){let S,L=b(C,k);return L&&(S=E(),y+=S),L},getMatroskaCodedNum:E,getMatroskaFloat:function(C){let k;switch(C){case 4:k=d.getFloat32(y),y+=4;break;case 8:k=d.getFloat64(y),y+=8}return k},getMatroskaUint:function(C){if(C>4)return(function(S){const L=Math.floor(Number.MAX_SAFE_INTEGER/256);let P=0;for(let w=0;w<S;w+=1){if(P>L)throw new Error("Value exceeds safe integer limit");P*=256;const R=d.getUint8(y+w);if(P>Number.MAX_SAFE_INTEGER-R)throw new Error("Value exceeds safe integer limit");P+=R}return y+=S,P})(C);let k=0;for(let S=0;S<C;S+=1)k<<=8,k|=255&d.getUint8(y+S);return y+=C,k>>>0},moreData:function(){return y<d.byteLength}},i}yl.__dashjs_factory_name="EBMLParser";var bl=o.default.getClassFactory(yl);function El(){const l=this.context;let i,d,y,b,E,C,k,S,L;function P(w){const R=new J;return R.setInfo(w),R}return i={setConfig:function(w){if(!(w.baseURLController&&w.dashMetrics&&w.mediaPlayerModel&&w.errHandler))throw new Error(c.default.MISSING_CONFIG_ERROR);L=w.baseURLController,E=w.dashMetrics,C=w.mediaPlayerModel,b=w.errHandler,S=w.errors,d=w.debug.getLogger(i)},initialize:function(){k=yr(l).create({errHandler:b,dashMetrics:E,mediaPlayerModel:C,errors:S})},loadInitialization:function(w,R){return new Promise((N=>{let F=null,q=w?L.resolve(w.path):null,H=w?w.range.split("-"):null,U={range:{start:H?parseFloat(H[0]):null,end:H?parseFloat(H[1]):null},request:F,url:q?q.url:void 0,init:!0,mediaType:R};d.info("Start loading initialization."),F=P(U),k.load({request:F,success:function(){N(w)},error:function(){N(w)}}),d.debug("Perform init load: "+U.url)}))},loadSegments:function(w,R,N){return new Promise((F=>{let q=null,H=w?L.resolve(w.path):null,U=H?H.url:void 0;q=P({bytesLoaded:0,bytesToLoad:8192,range:{start:0,end:8192},request:q,url:U,init:!1,mediaType:R,representation:w}),d.debug("Parsing ebml header"),k.load({request:q,success:function(Q){(function(ee,ne,le,j){if(!ee||ee.byteLength===0)return void j(null);let O,D,M,ce,V=bl(l).create({data:ee}),me=le?le.split("-"):null,ue=null,ge={url:ne,range:{start:me?parseFloat(me[0]):null,end:me?parseFloat(me[1]):null},request:ue};for(d.debug("Parse EBML header: "+ge.url),V.skipOverElement(y.EBML),V.consumeTag(y.Segment),M=V.getMatroskaCodedNum(),M+=V.getPos(),ce=V.getPos();V.moreData()&&!V.consumeTagAndSize(y.Segment.Info,!0);)if(!(V.skipOverElement(y.Segment.SeekHead,!0)||V.skipOverElement(y.Segment.Tracks,!0)||V.skipOverElement(y.Segment.Cues,!0)||V.skipOverElement(y.Void,!0)))throw new Error("no valid top level element found");for(;O===void 0;){let Ie=V.getMatroskaCodedNum(!0),Ee=V.getMatroskaCodedNum();Ie===y.Segment.Info.Duration.tag?O=V[y.Segment.Info.Duration.parse](Ee):V.setPos(V.getPos()+Ee)}ue=P(ge),k.load({request:ue,success:function(Ie){D=(function(Ee,B,K,Z){let W,X,ae,z,ie,de,pe,_e;for(X=(function(we){let Pe,Ke,et=[],ut=bl(l).create({data:we});for(ut.consumeTagAndSize(y.Segment.Cues);ut.moreData()&&ut.consumeTagAndSize(y.Segment.Cues.CuePoint,!0);){for(Pe={},Pe.CueTime=ut.parseTag(y.Segment.Cues.CuePoint.CueTime),Pe.CueTracks=[];ut.moreData()&&ut.consumeTag(y.Segment.Cues.CuePoint.CueTrackPositions,!0);){const qt=ut.getMatroskaCodedNum(),dt=ut.getPos();if(Ke={},Ke.Track=ut.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueTrack),Ke.Track===0)throw new Error("Cue track cannot be 0");Ke.ClusterPosition=ut.parseTag(y.Segment.Cues.CuePoint.CueTrackPositions.CueClusterPosition),Pe.CueTracks.push(Ke),ut.setPos(dt+qt)}if(Pe.CueTracks.length===0)throw new Error("Mandatory cuetrack not found");et.push(Pe)}if(et.length===0)throw new Error("mandatory cuepoint not found");return et})(Ee),ae=[],ie=0,de=X.length;ie<de;ie+=1)z=new ms,W=0,W=ie<X.length-1?X[ie+1].CueTime-X[ie].CueTime:Z-X[ie].CueTime,z.duration=W,z.startTime=X[ie].CueTime,z.timescale=1e3,pe=X[ie].CueTracks[0].ClusterPosition+B,_e=ie<X.length-1?X[ie+1].CueTracks[0].ClusterPosition+B-1:K-1,z.mediaRange=pe+"-"+_e,ae.push(z);return d.debug("Parsed cues: "+ae.length+" cues."),ae})(Ie,ce,M,O),j(D)},error:function(){d.error("Download Error: Cues "+ge.url),j(null)}}),d.debug("Perform cues load: "+ge.url+" bytes="+ge.range.start+"-"+ge.range.end)})(Q,U,N,(function(ee){F({segments:ee,representation:w,error:ee?void 0:new Bt.default(S.SEGMENT_BASE_LOADER_ERROR_CODE,S.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}))},error:function(){F({representation:w,error:new Bt.default(S.SEGMENT_BASE_LOADER_ERROR_CODE,S.SEGMENT_BASE_LOADER_ERROR_MESSAGE)})}})}))},reset:function(){k&&(k.abort(),k=null)}},y={EBML:{tag:440786851,required:!0},Segment:{tag:408125543,required:!0,SeekHead:{tag:290298740,required:!0},Info:{tag:357149030,required:!0,TimecodeScale:{tag:2807729,required:!0,parse:"getMatroskaUint"},Duration:{tag:17545,required:!0,parse:"getMatroskaFloat"}},Tracks:{tag:374648427,required:!0},Cues:{tag:475249515,required:!0,CuePoint:{tag:187,required:!0,CueTime:{tag:179,required:!0,parse:"getMatroskaUint"},CueTrackPositions:{tag:183,required:!0,CueTrack:{tag:247,required:!0,parse:"getMatroskaUint"},CueClusterPosition:{tag:241,required:!0,parse:"getMatroskaUint"}}}}},Void:{tag:236,required:!0}},i}El.__dashjs_factory_name="WebmSegmentBaseLoader";var tf=o.default.getSingletonFactory(El);function Tl(l){l=l||{};const i=this.context,d=l.eventBus,y=l.events,b=l.dashMetrics,E=l.mediaPlayerModel,C=l.errHandler,k=l.baseURLController,S=l.debug,L=l.boxParser,P=l.errors;let w,R,N;function F(q){return(q?q.split("/")[1]:"").toLowerCase()==="webm"}return w={initialize:function(){R.initialize(),N.initialize()},getSegmentBaseInitSegment:function(q){return F(q.representation.mimeType)?N.loadInitialization(q.representation,q.mediaType):R.loadInitialization(q.representation,q.mediaType)},getSegmentList:function(q){return F(q.mimeType)?N.loadSegments(q.representation,q.mediaType,q.representation?q.representation.indexRange:null):R.loadSegments(q.representation,q.mediaType,q.representation?q.representation.indexRange:null)},reset:function(){R.reset(),N.reset()}},R=ef(i).getInstance(),N=tf(i).getInstance(),R.setConfig({baseURLController:k,dashMetrics:b,mediaPlayerModel:E,errHandler:C,eventBus:d,events:y,errors:P,debug:S,boxParser:L}),N.setConfig({baseURLController:k,dashMetrics:b,mediaPlayerModel:E,errHandler:C,eventBus:d,events:y,errors:P,debug:S}),w}Tl.__dashjs_factory_name="SegmentBaseController";var nf=o.default.getSingletonFactory(Tl);const af=[c.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME],vl="video",wl="audio";function _l(){const l=this.context;let i,d,y,b,E;function C(){d={liveDelay:NaN,liveCatchup:{maxDrift:NaN,playbackRate:{min:NaN,max:NaN}},minBitrate:{},maxBitrate:{},initialBitrate:{},contentSteering:null,clientDataReporting:null},y=[]}function k(S,L,P){try{d[S][L]=P/1e3}catch(w){b.error(w)}}return i={getServiceDescriptionSettings:function(){return d},getProducerReferenceTimeOffsets:function(){return y},calculateProducerReferenceTimeOffsets:function(S){try{let L=[];if(S&&S.length>0){const P=[c.default.VIDEO,c.default.AUDIO,c.default.TEXT],w=E.getAvailabilityStartTime()/1e3;S.forEach((R=>{const N=P.reduce(((F,q)=>F.concat(E.getAllMediaInfoForType(R,q))),[]).reduce(((F,q)=>(E.getProducerReferenceTimes(R,q).forEach((H=>{const U=E.getVoRepresentations(q);if(U&&U.length>0&&U[0].adaptation&&U[0].segmentInfoType===fe.default.SEGMENT_TEMPLATE){const Q=U[0],ee=new Date(H[fe.default.WALL_CLOCK_TIME]).getTime()/1e3-(H[fe.default.PRESENTATION_TIME]/Q[fe.default.TIMESCALE]-Q[fe.default.PRESENTATION_TIME_OFFSET]+R.start),ne=w-ee;F.push({id:H[fe.default.ID],to:ne})}})),F)),[]);L=L.concat(N)}))}y=L}catch(L){b.error(L),y=[]}},applyServiceDescription:function(S){if(!S||!S.serviceDescriptions)return;const L=S.serviceDescriptions.filter((R=>af.includes(R.schemeIdUri))),P=S.serviceDescriptions.filter((R=>R.schemeIdUri==null));let w=L.length>0?L[L.length-1]:P[P.length-1];w&&(w.latency&&w.latency.target>0&&(function(R){let N;if(R.schemeIdUri,c.default.SERVICE_DESCRIPTION_DVB_LL_SCHEME,N=(function(F){return{liveDelay:F.latency.target/1e3,maxDrift:!isNaN(F.latency.max)&&F.latency.max>F.latency.target?(F.latency.max-F.latency.target+500)/1e3:NaN,referenceId:F.latency.referenceId||NaN}})(R),y.length>0){let{to:F,id:q}=(function(H){let U,Q=0,ee=y.filter((ne=>ne.id===H.referenceId));return ee.length===0?(Q=y.length>0?y[0].to:0,U=y[0].id||NaN):(Q=ee[0].to||0,U=ee[0].id||NaN),{to:Q,id:U}})(N);d.liveDelay=N.liveDelay-F,d.liveCatchup.maxDrift=N.maxDrift,b.debug(`
                Found latency properties coming from service description. Applied time offset of ${F} from ProducerReferenceTime element with id ${q}.
                Live Delay: ${N.liveDelay-F}, Live catchup max drift: ${N.maxDrift}
            `)}else d.liveDelay=N.liveDelay,d.liveCatchup.maxDrift=N.maxDrift,b.debug(`Found latency properties coming from service description: Live Delay: ${N.liveDelay}, Live catchup max drift: ${N.maxDrift}`)})(w),w.playbackRate&&(function(R){const N=R.playbackRate.min?Math.round(1e3*(R.playbackRate.min-1))/1e3:NaN,F=R.playbackRate.max?Math.round(1e3*(R.playbackRate.max-1))/1e3:NaN;d.liveCatchup.playbackRate.min=N,d.liveCatchup.playbackRate.max=F,b.debug(`Found latency properties coming from service description: Live catchup min playback rate: ${N}`),b.debug(`Found latency properties coming from service description: Live catchup max playback rate: ${F}`)})(w),w.operatingQuality,w.operatingBandwidth&&(function(R){if(!R||!R.operatingBandwidth||!R.operatingBandwidth.mediaType||R.operatingBandwidth.mediaType==="all")return;const N={};N.minBandwidth=R.operatingBandwidth.min,N.maxBandwidth=R.operatingBandwidth.max,N.targetBandwidth=R.operatingBandwidth.target;const F=[];R.operatingBandwidth.mediaType===vl||R.operatingBandwidth.mediaType===wl?F.push(R.operatingBandwidth.mediaType):R.operatingBandwidth.mediaType==="any"&&(F.push(wl),F.push(vl)),F.forEach((q=>{isNaN(N.minBandwidth)||k("minBitrate",q,N.minBandwidth),isNaN(N.maxBandwidth)||k("maxBitrate",q,N.maxBandwidth),isNaN(N.targetBandwidth)||k("initialBitrate",q,N.targetBandwidth)}))})(w),w.contentSteering&&(function(R){d.contentSteering=R.contentSteering})(w),w.clientDataReporting&&(function(R){d.clientDataReporting=R.clientDataReporting})(w))},reset:function(){C()},setConfig:function(S){S&&S.adapter&&(E=S.adapter)}},b=(0,u.default)(l).getInstance().getLogger(i),C(),i}_l.__dashjs_factory_name="ServiceDescriptionController";var rf=o.default.getSingletonFactory(_l);class sf{constructor(i){this._ranges=[];for(const d of i){const y=this._ranges,b={start:d.start,end:d.end},E=y.length?y[y.length-1]:null;!E||b.start>E.end?y.push(b):E.end=b.end}}get length(){return this._ranges.length}start(i){return this._ranges[i].start}end(i){return this._ranges[i].end}}var Sl=class{constructor(l,i){this.eventBus=i,this.mimeType=l,this.updating=!1,this.chunks=[],this.appendWindowStart=0,this.appendWindowEnd=1/0,this.timestampOffset=0,this.mode="segments"}appendBuffer(l,i,d){if(this.updating)throw new Error("SourceBuffer is currently updating");this.updating=!0,this.eventBus.trigger("externalSourceBufferUpdateStart",{mimeType:this.mimeType,request:"appendBuffer",data:l,start:i,end:d}),Number.isNaN(i)||(this.chunks.push({data:l,start:i,end:d}),this.chunks.sort(((y,b)=>y.start-b.start))),setTimeout((()=>{this.updating=!1,this.eventBus.trigger("externalSourceBufferUpdating",{mimeType:this.mimeType}),this.eventBus.trigger("externalSourceBufferUpdateEnd",{mimeType:this.mimeType})}),10)}abort(){this.updating&&(this.updating=!1,this.eventBus.trigger("externalSourceBufferAbort",{mimeType:this.mimeType}),this.eventBus.trigger("externalSourceBufferUpdateEnd",{mimeType:this.mimeType}))}remove(l,i){if(this.updating)throw new Error("SourceBuffer is currently updating");this.updating=!0,this.eventBus.trigger("externalSourceBufferUpdateStart",{mimeType:this.mimeType,request:"remove",start:l,end:i}),this.chunks=this.chunks.filter((d=>d.end<=l||d.start>=i)),setTimeout((()=>{this.updating=!1,this.eventBus.trigger("externalSourceBufferUpdating",{mimeType:this.mimeType}),this.eventBus.trigger("externalSourceBufferUpdateEnd",{mimeType:this.mimeType})}),10)}get buffered(){return new sf(this.chunks)}},of=class{constructor(l){this.eventBus=l,this.reset()}get duration(){return this._duration}set duration(l){if(this._readyState!=="open")throw new Error("ExternalMediaSource is not open");this._duration=l}get readyState(){return this._readyState}addSourceBuffer(l){if(this._readyState!=="open")throw new Error("ExternalMediaSource is not open");const i=new Sl(l,this.eventBus);return this.sourceBuffers.set(i,l),i}removeSourceBuffer(l){if(!this.sourceBuffers.has(l))throw new Error("ExternalSourceBuffer not found");this.sourceBuffers.delete(l)}open(){this._readyState="open",this.eventBus.trigger("externalMediaSourceOpen",{})}endOfStream(){if(this._readyState!=="open")throw new Error("ExternalMediaSource is not open");this._readyState="ended",this.eventBus.trigger("externalMediaSourceEnded",{})}close(){this._readyState="closed",this.eventBus.trigger("externalMediaSourceClosed",{})}reset(){this.sourceBuffers=new Map,this._duration=NaN,this._readyState="closed"}},lf=class{constructor(){this.streamId=null,this.segmentType=null,this.index=NaN,this.bytes=null,this.start=NaN,this.end=NaN,this.duration=NaN,this.representation=null,this.endFragment=null}},uf=class extends J{constructor(l){super(l),this.checkForExistenceOnly=!0}};function kl(l){l=l||{};const i=this.context,d=l.eventBus,y=l.events,b=l.urlUtils,E=l.errors,C=l.streamId;let k,S;return k={abort:function(){S&&S.abort()},checkForExistence:function(L){const P=function(w){d.trigger(y.CHECK_FOR_EXISTENCE_COMPLETED,{request:L,exists:w})};if(L){let w=new uf(L.url);S.load({request:w,success:function(){P(!0)},error:function(){P(!1)}})}else P(!1)},load:function(L){const P=function(w,R){d.trigger(y.LOADING_COMPLETED,{request:L,response:w||null,error:R||null,sender:k})};L?S.load({request:L,progress:function(w){d.trigger(y.LOADING_PROGRESS,{request:L,stream:w.stream,streamId:C}),w.data&&d.trigger(y.LOADING_DATA_PROGRESS,{request:L,response:w.data||null,error:null,sender:k})},success:function(w){P(w)},error:function(w,R,N){P(void 0,new Bt.default(E.FRAGMENT_LOADER_LOADING_FAILURE_ERROR_CODE,N,R))},abort:function(w){w&&d.trigger(y.LOADING_ABANDONED,{mediaType:w.mediaType,request:w,sender:k})}}):P(void 0,new Bt.default(E.FRAGMENT_LOADER_NULL_REQUEST_ERROR_CODE,E.FRAGMENT_LOADER_NULL_REQUEST_ERROR_MESSAGE))},reset:function(){S&&(S.abort(),S.reset(),S=null)},resetInitialSettings:function(){S&&S.resetInitialSettings()}},S=yr(i).create({errHandler:l.errHandler,errors:E,dashMetrics:l.dashMetrics,mediaPlayerModel:l.mediaPlayerModel,urlUtils:b,constants:c.default,boxParser:l.boxParser,dashConstants:l.dashConstants,requestTimeout:l.settings.get().streaming.fragmentRequestTimeout}),k}kl.__dashjs_factory_name="FragmentLoader";var cf=o.default.getClassFactory(kl);function Il(l){l=l||{};const i=this.context,d=(0,T.default)(i).getInstance(),y=l.errHandler,b=l.mediaPlayerModel,E=l.dashMetrics,C=(0,u.default)(i).getInstance(),k=l.streamInfo;let S,L,P;function w(){return k.id}function R(){for(let F in P)P[F].reset();P={}}function N(F){if(!F.sender)return;const q=F.request,H=F.response,U=q.isInitializationRequest(),Q=q.representation.mediaInfo.streamInfo;if(F.error&&(q.mediaType===c.default.AUDIO||q.mediaType===c.default.VIDEO||q.mediaType===c.default.TEXT&&q.representation.mediaInfo.isFragmented)&&d.trigger(f.default.SERVICE_LOCATION_BASE_URL_BLACKLIST_ADD,{entry:F.request.serviceLocation}),!H||!Q)return void L.warn("No "+q.mediaType+" bytes to push or stream is inactive.");const ee=(function(ne,le,j,O){const D=new lf;return D.streamId=j,D.segmentType=le.type,D.start=le.startTime,D.duration=le.duration,D.end=D.start+D.duration,D.bytes=ne,D.index=le.index,D.representation=le.representation,D.endFragment=O,D})(H,q,k.id,F.type!==f.default.FRAGMENT_LOADING_PROGRESS);d.trigger(U?f.default.INIT_FRAGMENT_LOADED:f.default.MEDIA_FRAGMENT_LOADED,{chunk:ee,request:q},{streamId:Q.id,mediaType:q.mediaType})}return S={getStreamId:w,getModel:function(F){let q=P[F];return q||(q=Oe(i).create({streamInfo:k,type:F,dashMetrics:E,fragmentLoader:cf(i).create({dashMetrics:E,mediaPlayerModel:b,errHandler:y,settings:l.settings,boxParser:l.boxParser,eventBus:d,events:f.default,errors:Gt,dashConstants:l.dashConstants,urlUtils:l.urlUtils,streamId:w()}),debug:C,eventBus:d,events:f.default}),P[F]=q),q},reset:function(){d.off(v.default.FRAGMENT_LOADING_COMPLETED,N,this),d.off(v.default.FRAGMENT_LOADING_PROGRESS,N,this),R()}},L=C.getLogger(S),R(),d.on(v.default.FRAGMENT_LOADING_COMPLETED,N,S),d.on(v.default.FRAGMENT_LOADING_PROGRESS,N,S),S}Il.__dashjs_factory_name="FragmentController";var df=o.default.getClassFactory(Il),ja=class{constructor(l){this.newMediaInfo=l.newMediaInfo,this.previouslySelectedRepresentation=l.previouslySelectedRepresentation,this.newRepresentation=l.newRepresentation}};function Al(l){const i=this.context,d=(0,p.default)(i).getInstance(),y=l.textController,b=l.eventBus;let E,C,k,S,L,P,w=[],R=[],N=!1,F=l.mediaSource,q=null;function H(V){return V.mimeType+';codecs="'+V.codecs+'"'}function U(V){return S=y.getTextSourceBuffer(V),Promise.resolve()}function Q(){if(typeof S.addEventListener=="function")try{S.addEventListener("updateend",D,!1),S.addEventListener("error",M,!1),S.addEventListener("abort",M,!1)}catch{P=setInterval(D,50)}else P=setInterval(D,50)}function ee(){try{typeof S.removeEventListener=="function"&&(S.removeEventListener("updateend",D,!1),S.removeEventListener("error",M,!1),S.removeEventListener("abort",M,!1)),clearInterval(P)}catch(V){k.error(V)}}function ne(V){return new Promise((me=>{S&&d.get().streaming.buffer.useAppendWindow?ce((()=>{try{if(!S)return void me();let ue=F.duration,ge=0;V&&!isNaN(V.start)&&!isNaN(V.duration)&&isFinite(V.duration)&&(ue=V.start+V.duration),V&&!isNaN(V.start)&&(ge=V.start),S.appendWindowEnd===ue&&S.appendWindowStart===ge||(S.appendWindowStart=0,S.appendWindowEnd=ue+.01,S.appendWindowStart=Math.max(ge-.1,0),k.debug(`Updated append window for ${L.type}. Set start to ${S.appendWindowStart} and end to ${S.appendWindowEnd}`)),me()}catch{k.warn("Failed to set append window"),me()}})):me()}))}function le(V){return new Promise((me=>{S?ce((()=>{try{S.timestampOffset===V||isNaN(V)||(S.timestampOffset=V,k.debug(`Set MSE timestamp offset to ${V}`)),me()}catch{me()}})):me()}))}function j(){if(!N&&R.length>0){N=!0;const V=R[0];R.splice(0,1);const me=function(){N=!1,R.length>0&&j.call(this),V&&V.data&&V.data.segmentType&&V.data.segmentType!==De.HTTPRequest.INIT_SEGMENT_TYPE&&delete V.data.bytes,V.promise.resolve({chunk:V.data})};try{if(q=V.request,V.data.bytes.byteLength===0)me.call(this);else{try{k.debug(`Appending ${V.data.segmentType} from period ${V.data.streamId} to buffer. Request URL: ${V.request.url}, Representation: ID: ${V.data.representation.id}, bitrate: ${V.data.representation.bitrateInKbit}`)}catch{}S instanceof Sl?S.appendBuffer(V.data.bytes,V.data.start,V.data.end):S.appendBuffer?S.appendBuffer(V.data.bytes):S.append(V.data.bytes,V.data),ce(me.bind(this))}}catch(ue){k.fatal('SourceBuffer append failed "'+ue+'"'),R.length>0?j():N=!1,delete V.data.bytes,V.promise.reject({chunk:V.data,error:new Bt.default(ue.code,ue.message)})}}}function O(){w.length>0&&!S.updating&&(w.shift()(),O())}function D(){S.updating||O()}function M(V){const me=V.target||{};(function(ue,ge){let Ie=ge||{};b.trigger(ue,Ie,{streamId:L.streamInfo.id,mediaType:C})})(f.default.SOURCE_BUFFER_ERROR,{error:me,lastRequestAppended:q})}function ce(V){try{w.push(V),S&&!S.updating&&O()}catch(me){k.error(me)}}return E={abort:function(){return new Promise((V=>{try{R=[],F.readyState==="open"?ce((()=>{try{S&&S.abort(),V()}catch{V()}})):(S&&S.setTextTrack&&F.readyState==="ended"&&S.abort(),V())}catch{V()}}))},abortBeforeAppend:function(){return new Promise((V=>{ce((()=>{const me=S.appendWindowStart,ue=S.appendWindowEnd;S&&(S.abort(),S.appendWindowStart=me,S.appendWindowEnd=ue),V()}))}))},append:function(V,me=null){return new Promise(((ue,ge)=>{V?(R.push({data:V,promise:{resolve:ue,reject:ge},request:me}),ce(j.bind(this))):ge({chunk:V,error:new Bt.default(Gt.APPEND_ERROR_CODE,Gt.APPEND_ERROR_MESSAGE)})}))},changeType:function(V){const me=H(V);return new Promise((ue=>{ce((()=>{S.changeType&&(k.debug(`Changing SourceBuffer codec to ${me}`),S.changeType(me)),ue()}))}))},getAllBufferRanges:function(){try{return S?.buffered}catch(V){return k.error("getAllBufferRanges exception: "+V.message),null}},getBuffer:function(){return S},getType:function(){return C},initializeForFirstUse:function(V,me){L=V;const ue=V.streamInfo;C=L.type;const ge=me?H(me):V.codec;try{if(ge.match(/application\/mp4;\s*codecs="(stpp|wvtt).*"/i))return U(ue);S=F.addSourceBuffer(ge),Q();const Ie=[];return Ie.push(ne(L.streamInfo)),me&&me.mseTimeOffset!==void 0&&Ie.push(le(me.mseTimeOffset)),Promise.all(Ie)}catch(Ie){return L.type==c.default.TEXT&&!L.isFragmented||ge.indexOf('codecs="stpp')!==-1||ge.indexOf('codecs="vtt')!==-1||ge.indexOf("text/vtt")!==-1?U(ue):Promise.reject(Ie)}},initializeForStreamSwitch:function(V,me,ue){L=V,C=L.type,(function(ge){S=ge.getBuffer()})(ue),Q()},remove:function(V){return new Promise(((me,ue)=>{const ge=V.start,Ie=V.end;ge>=0&&Ie>ge?ce((function(){try{S.remove(ge,Ie),ce((function(){me({from:ge,to:Ie,unintended:!1}),V.resolve&&V.resolve()}))}catch(Ee){ue({from:ge,to:Ie,unintended:!1,error:new Bt.default(Gt.REMOVE_ERROR_CODE,Gt.REMOVE_ERROR_MESSAGE)}),V.reject&&V.reject(Ee)}})):me()}))},removeEventListeners:ee,reset:function(){if(S){try{w=[],ee(),N=!1,R=[],S.getClassName&&S.getClassName()==="TextSourceBuffer"||(k.debug("Removing sourcebuffer from media source"),F.removeSourceBuffer(S))}catch{}S=null}q=null},updateAppendWindow:ne,updateTimestampOffset:le},k=(0,u.default)(i).getInstance().getLogger(E),E}Al.__dashjs_factory_name="SourceBufferSink";var Rl=o.default.getClassFactory(Al);function Cl(l){const i=this.context;let d,y,b,E=[],C=l;function k(S,L){return E=E.filter((P=>!((isNaN(L)||P.start<L)&&(isNaN(S)||P.end>S)))),Promise.resolve()}return d={getAllBufferRanges:function(){let S=[];for(let P=0;P<E.length;P++){let w=E[P];S.length===0||w.start>S[S.length-1].end?S.push({start:w.start,end:w.end}):S[S.length-1].end=w.end}const L={start:function(P){return S[P].start},end:function(P){return S[P].end}};return Object.defineProperty(L,"length",{get:function(){return S.length}}),L},append:function(S){return S.segmentType!=="InitializationSegment"?(E.push(S),E.sort((function(L,P){return L.start-P.start})),b=null):b=S,y.debug("PreBufferSink appended chunk s: "+S.start+"; e: "+S.end),C&&C({chunk:S}),Promise.resolve()},remove:k,abort:function(){return Promise.resolve()},discharge:function(S,L){const P=(function(w,R){return E.filter((N=>(isNaN(R)||N.start<R)&&(isNaN(w)||N.end>w)))})(S,L);return b&&(P.push(b),b=null),k(S,L),P},reset:function(){E=[],b=null,C=null},updateTimestampOffset:function(){return Promise.resolve()},waitForUpdateEnd:function(S){S()},getBuffer:function(){return this}},y=(0,u.default)(i).getInstance().getLogger(d),d}Cl.__dashjs_factory_name="PreBufferSink";var ff=o.default.getClassFactory(Cl);function Nl(){let l={};return{save:function(i){const d=i.streamId,y=i.representation.id;l[d]=l[d]||{},l[d][y]=i},extract:function(i,d){return l&&l[i]&&l[i][d]?l[i][d]:null},reset:function(){l={}}}}Nl.__dashjs_factory_name="InitCache";var gs=o.default.getSingletonFactory(Nl);const hs=.01,xl="BufferController";function Dl(l){const i=(l=l||{}).capabilities,d=this.context,y=(0,T.default)(d).getInstance(),b=l.fragmentModel,E=l.playbackController,C=l.representationController,k=l.settings,S=l.streamInfo,L=l.textController,P=l.type;let w,R,N,F,q,H,U,Q,ee,ne,le,j,O,D,M,ce,V,me,ue,ge,Ie;function Ee(Me,qe=null){return new Promise(((st,Ge)=>{H=Me,ee&&qe&&typeof ee.discharge=="function"?(ne=ee,B(qe).then((()=>{st()})).catch((ht=>{Ge(ht)}))):st()}))}function B(Me,qe=new Map,st){return new Promise(((Ge,ht)=>{me&&Me?H?(le=!1,(function(Tt,be,$e){return new Promise((vt=>{ee=Rl(d).create({mediaSource:H,textController:L,eventBus:y}),(function(wt,mn,Ze){const Lt=C.getCurrentRepresentation();let an=null;return P!==c.default.VIDEO&&P!==c.default.AUDIO||(an=mn.get(P)),an?(function(en,pn,sn,Nn){ee.initializeForStreamSwitch(en,pn,sn);const Un=[];return Un.push(ee.abortBeforeAppend()),Un.push(Ue()),Un.push(ie(pn,Nn)),pn&&pn.mseTimeOffset!==void 0&&Un.push(fn(pn)),Promise.allSettled(Un)})(wt,Lt,an,Ze):(function(en,pn){return ee.initializeForFirstUse(en,pn)})(wt,Lt)})(Tt,be,$e).then((()=>fn(C.getCurrentRepresentation()))).then((()=>{vt(ee)})).catch((wt=>{R.warn("Caught error on create SourceBuffer: "+wt),vt(ee)}))}))})(Me,qe,st).then((Tt=>{Ge(Tt)})).catch((Tt=>{ht(Tt)}))):(le=!0,(function(){return new Promise(((Tt,be)=>{ee=ff(d).create(ae.bind(this)),fn(C.getCurrentRepresentation()).then((()=>{Tt(ee)})).catch((()=>{be()}))}))})().then((Tt=>{Ge(Tt)})).catch((Tt=>{ht(Tt)}))):Ge(null)}))}function K(Me){k.get().streaming.cacheInitSegments&&(R.info("Init fragment finished loading saving to",P+"'s init cache"),me.save(Me.chunk)),R.debug(`Appending init fragment for type ${P}, representationId ${Me.chunk.representation.id} and bandwidth ${Me.chunk.representation.bandwidth}`),W(Me.chunk)}function Z(Me){W(Me.chunk,Me.request)}function W(Me,qe=null){ee&&(ee.append(Me,qe).then((st=>{ae(st)})).catch((st=>{ae(st)})),Me.representation.mediaInfo.type===c.default.VIDEO&&ct(f.default.VIDEO_CHUNK_RECEIVED,{chunk:Me}))}function X(Me){if(Me&&Me.length>0)for(let qe=0,st=Me.length;qe<st;qe++)R.debug("Buffered range: "+Me.start(qe)+" - "+Me.end(qe)+", currentTime = ",E.getTime())}function ae(Me){if(Me.error)return Me.error.code===22&&(function(){if(V=!0,q=.8*Ft(),R.warn("Quota exceeded, Critical Buffer: "+q),q>0){const Ge=Math.max(.2*q,1),ht=q-Ge,Tt=Math.min(k.get().streaming.buffer.bufferTimeAtTopQuality,.9*ht),be=Math.min(k.get().streaming.buffer.bufferTimeAtTopQualityLongForm,.9*ht),$e={streaming:{buffer:{bufferToKeep:parseFloat(Ge.toFixed(5)),bufferTimeAtTopQuality:parseFloat(Tt.toFixed(5)),bufferTimeAtTopQualityLongForm:parseFloat(be.toFixed(5))}}};k.update($e)}})(),void(Me.error.code!==22&&Xe()||(R.warn("Clearing playback buffer to overcome quota exceed situation"),ct(f.default.QUOTA_EXCEEDED,{criticalBufferLevel:q,quotaExceededTime:Me.chunk.start}),En(Zt())));if(!ee||(et(),V=!1,D=Me.chunk,!D||!D.endFragment))return;D&&!isNaN(D.index)&&(U=Math.max(D.index,U),ut());const qe=ee.getAllBufferRanges();D.segmentType===De.HTTPRequest.MEDIA_SEGMENT_TYPE&&(X(qe),_e(),(function(){if(isNaN(Ie)||le)return;if(P!==c.default.AUDIO&&P!==c.default.VIDEO)return void(Ie=NaN);const Ge=E.getTime(),ht=Ke(Ge,0),Tt=Ke(Ie,0);if(ht&&Tt&&ht.start===Tt.start)return void(Ie=NaN);const be=C.getCurrentRepresentation().segmentDuration,$e=Ke(Ie,be);$e&&(k.get().streaming.buffer.enableSeekDecorrelationFix&&Math.abs(Ge-Ie)>be?Ie<=$e.end&&E.seek(Math.max(Ie,$e.start),!1,!0):Ge<$e.start&&E.seek($e.start,!1,!0))})());let st=!1;j&&(j.indexOf(D)>0&&(st=!0),j=null),D&&!st&&ct(f.default.BYTES_APPENDED_END_FRAGMENT,{startTime:D.start,index:D.index,bufferedRanges:qe,segmentType:D.segmentType,mediaType:P,representationId:D.representation.id})}function z(Me,qe){const st=[];return st.push(fn(Me)),st.push(ee?ee.abort():Promise.resolve()),st.push(ie(Me,qe)),Promise.allSettled(st)}function ie(Me,qe){if(!Me||!qe)return R.warn("BufferController._changeCodec() is missing the information about the Representations. Doing nothing"),Promise.resolve();if(Me&&qe&&Me.mimeType===qe.mimeType&&Me.codecFamily===qe.codecFamily)return R.debug(`Switching to new codec ${Me.codecs} without changeType as previous codec ${qe.codecs} is compatible.`),Promise.resolve();if(!k.get().streaming.buffer.useChangeType||!i.supportsChangeType())return R.debug("changeType() not available"),Promise.resolve();R.debug(`Using changeType() to switch from codec ${qe.codecs} to ${Me.codecs}`);const st=Me.dependentRepresentation?Me.dependentRepresentation:Me;return ee.changeType(st)}function de(){return new Promise(((Me,qe)=>{let st=pe();if(!st||st.length===0)return _e(),void Me();En(st).then((()=>{Me()})).catch((Ge=>{qe(Ge)}))}))}function pe(Me){const qe=[],st=ee.getAllBufferRanges();if(!st||st.length===0)return qe;if(!Me&&Me!==0||isNaN(Me))qe.push({start:st.start(0),end:st.end(st.length-1)+.5});else{const Ge=(function(Tt,be){const $e=k.get().streaming.buffer.bufferToKeep,vt=be.start(0);if(Tt-vt>$e){let wt=Math.max(0,Tt-$e);const mn=b.getRequests({state:Oe.FRAGMENT_MODEL_EXECUTED,time:Tt,threshold:hs})[0];if(mn&&(wt=Math.min(mn.startTime,wt)),wt>0)return{start:vt,end:wt}}return null})(Me,st),ht=(function(Tt,be){const $e=be.end(be.length-1)+.5,vt=un(Tt),wt=S.manifestInfo.duration>=k.get().streaming.buffer.longFormContentDurationThreshold?k.get().streaming.buffer.bufferTimeAtTopQualityLongForm:k.get().streaming.buffer.bufferTimeAtTopQuality;let mn=isNaN(vt)?Tt:Math.min(vt,Tt+wt);if(mn>=be.end(be.length-1))return null;const Ze=b.getRequests({state:Oe.FRAGMENT_MODEL_EXECUTED,time:Tt,threshold:hs})[0];if(Ze&&(mn=Math.max(Ze.startTime+Ze.duration,mn)),k.get().streaming.buffer.avoidCurrentTimeRangePruning){for(let Lt=0;Lt<be.length;Lt++)if(be.start(Lt)<=Tt&&Tt<=be.end(Lt)&&be.start(Lt)<=mn&&mn<=be.end(Lt)){let an=mn;mn=Lt+1<be.length?be.start(Lt+1):be.end(Lt)+1,R.debug("Buffered range ["+be.start(Lt)+", "+be.end(Lt)+"] overlaps with targetTime "+Tt+" and range to be pruned ["+an+", "+$e+"], using ["+mn+", "+$e+"] instead"+(mn<$e?"":" (no actual pruning)"));break}}return mn<be.end(be.length-1)?{start:mn,end:$e}:null})(Me,st);Ge&&qe.push(Ge),ht&&qe.push(ht)}return qe}function _e(){(!ge||P===c.default.TEXT&&L.isTextEnabled())&&et()}function we(){qt()}function Pe(){qt(),Ie=NaN}function Ke(Me,qe){if(!ee)return null;const st=ee.getAllBufferRanges();let Ge,ht,Tt=0,be=0,$e=null,vt=null,wt=0;const mn=isNaN(qe)?.15:qe;if(st!=null){for(ht=0,Ge=st.length;ht<Ge;ht++)if(Tt=st.start(ht),be=st.end(ht),$e===null)wt=Math.abs(Tt-Me),(Me>=Tt&&Me<be||wt<=mn)&&($e=Tt,vt=be);else{if(wt=Tt-vt,!(wt<=mn))break;vt=be}if($e!==null)return{start:$e,end:vt}}return null}function et(){if(E){let Me=E.getTime()||0;le&&(Me=isNaN(Ie)?0:Ie);const qe=k.get().streaming.gaps.jumpGaps&&!isNaN(k.get().streaming.gaps.smallGapLimit)?k.get().streaming.gaps.smallGapLimit:NaN;F=Math.max((function(st,Ge){let ht,Tt;return k.get().streaming.gaps.jumpGaps&&(Ge=k.get().streaming.gaps.smallGapLimit),ht=Ke(st,Ge),Tt=ht===null?0:ht.end-st,Tt})(Me,qe),0),ct(f.default.BUFFER_LEVEL_UPDATED,{mediaType:P,bufferLevel:F}),qt()}}function ut(){const Me=U>=Q-1,qe=E.getTimeToStreamEnd(S)-F<1e-5;!Me&&!qe||N||(gt(!0),R.debug(`checkIfBufferingCompleted trigger BUFFERING_COMPLETED for stream id ${S.id} and type ${P}`))}function qt(){if(P!==c.default.AUDIO&&P!==c.default.VIDEO)return;const Me=E.getLowLatencyModeEnabled()?k.get().streaming.buffer.lowLatencyStallThreshold:k.get().streaming.buffer.stallThreshold;F<=Me&&!N?dt(r.BUFFER_EMPTY):(N||F>Me)&&dt(r.BUFFER_LOADED)}function dt(Me){O===Me||Me===r.BUFFER_EMPTY&&E.getTime()===0||P===c.default.TEXT&&!L.isTextEnabled()||(O=Me,ct(f.default.BUFFER_LEVEL_STATE_CHANGED,{state:Me}),ct(Me===r.BUFFER_LOADED?f.default.BUFFER_LOADED:f.default.BUFFER_EMPTY),R.debug(Me===r.BUFFER_LOADED?"Got enough buffer to start":"Waiting for more buffer before starting playback"))}function jt(){ee&&P!==c.default.TEXT&&(N||En(Zt()))}function Zt(){const Me=[],qe=ee.getAllBufferRanges();if(!qe||qe.length===0)return Me;const st=E.getTime();let Ge=Math.max(0,st-k.get().streaming.buffer.bufferToKeep);const ht=b.getRequests({state:Oe.FRAGMENT_MODEL_EXECUTED,time:st,threshold:hs})[0];if(ht)Ge=Math.min(ht.startTime,Ge);else if(st===0&&E.getIsDynamic())return[];if(qe.start(0)<=Ge){const Tt={start:0,end:Ge};for(let be=0;be<qe.length&&qe.end(be)<=Ge;be++)Tt.end=qe.end(be);Tt.start<Tt.end&&Me.push(Tt)}return Me}function En(Me){return new Promise(((qe,st)=>{if(!Me||!ee||Me.length===0)return et(),void qe();const Ge=[];Me.forEach((ht=>{Ge.push((function(Tt){return new Promise(((be,$e)=>{Tt.resolve=be,Tt.reject=$e,ue.push(Tt)}))})(ht))})),ce||yn(),Promise.all(Ge).then((()=>{qe()})).catch((ht=>{st(ht)}))}))}function yn(){try{if(ue.length===0||!ee)return R.debug("Nothing to prune, halt pruning"),ue=[],void(ce=!1);const Me=ee.getBuffer();if(!Me||!Me.buffered||Me.buffered.length===0)return R.debug("SourceBuffer is empty (or does not exist), halt pruning"),ue=[],void(ce=!1);const qe=ue.shift();R.debug(`${P}: Removing buffer from: ${qe.start} to ${qe.end}`),ce=!0,E.getTime()<qe.end&&gt(!1),ee.remove(qe).then((st=>{nn(st)})).catch((st=>{nn(st)}))}catch{ce=!1}}function nn(Me){R.debug("onRemoved buffer from:",Me.from,"to",Me.to),ee&&(X(ee.getAllBufferRanges()),ue.length===0&&(ce=!1,et()),Me.unintended&&(R.warn("Detected unintended removal from:",Me.from,"to",Me.to,"setting streamprocessor time to",Me.from),ct(f.default.SEEK_TARGET,{time:Me.from})),ce?yn():(ge?ge=!1:et(),ct(f.default.BUFFER_CLEARED,{from:Me.from,to:Me.to,unintended:Me.unintended,hasEnoughSpaceToAppend:Xe(),quotaExceeded:V})))}function fn(Me){return new Promise((qe=>{Me&&Me.mseTimeOffset!==void 0&&ee&&ee.updateTimestampOffset?ee.updateTimestampOffset(Me.mseTimeOffset).then((()=>{qe()})).catch((()=>{qe()})):qe()}))}function Ue(){return ee&&!N?ee.updateAppendWindow(S):Promise.resolve()}function it(){M++,M*(k.get().streaming.wallclockTimeUpdateInterval/1e3)>=k.get().streaming.buffer.bufferPruningInterval&&(M=0,jt())}function nt(){qt()}function gt(Me){N=Me,N?ct(f.default.BUFFERING_COMPLETED):Q=Number.POSITIVE_INFINITY}function Ft(){try{const Me=ee.getAllBufferRanges();let qe,st,Ge=0;if(!Me)return Ge;for(st=0,qe=Me.length;st<qe;st++)Ge+=Me.end(st)-Me.start(st);return Ge}catch{return 0}}function un(Me){try{let qe=Me;const st=ee.getAllBufferRanges();if(!st||st.length===0)return NaN;let Ge=0;for(;qe===Me&&Ge<st.length;){const ht=st.start(Ge),Tt=st.end(Ge);qe>=ht&&qe<=Tt&&(qe=Tt),Ge+=1}return qe===Me?NaN:qe}catch{return NaN}}function Xe(){const Me=Ft();return isNaN(Me)||Me<q}function ct(Me,qe){let st=qe||{};y.trigger(Me,st,{streamId:S.id,mediaType:P})}function kt(Me,qe){if(q=Number.POSITIVE_INFINITY,O=void 0,Q=Number.POSITIVE_INFINITY,U=0,D=null,N=!1,ce=!1,V=!1,F=0,M=0,ue=[],Ie=NaN,le=!1,ee){let st=ee;ee=null,Me||(qe?st.removeEventListeners():st.abort().then((()=>{st.reset(qe),st=null})))}ge=!1}return w={appendInitSegmentFromCache:function(Me){const qe=me.extract(S.id,Me);return!!qe&&(R.debug(`Appending init fragment for type ${P}, representationId ${qe.representation.id} and bandwidth ${qe.representation.bandwidth}`),W(qe),!0)},clearBuffers:En,createBufferSink:B,dischargePreBuffer:function(){if(ee&&ne&&typeof ne.discharge=="function"){const Me=ne.getAllBufferRanges();if(Me.length>0){let Ge="Beginning "+P+"PreBuffer discharge, adding buffer for:";for(let ht=0;ht<Me.length;ht++)Ge+=" start: "+Me.start(ht)+", end: "+Me.end(ht)+";";R.debug(Ge)}else R.debug("PreBuffer discharge requested, but there were no media segments in the PreBuffer.");j=[];let qe=ne.discharge(),st=null;for(let Ge=0;Ge<qe.length;Ge++){const ht=qe[Ge];if(ht.segmentType!==De.HTTPRequest.INIT_SEGMENT_TYPE){const Tt=me.extract(ht.streamId,ht.representation.id);Tt&&st!==Tt&&(j.push(Tt),ee.append(Tt),st=Tt)}j.push(ht),ee.append(ht)}ne.reset(),ne=null}},getAllRangesWithSafetyFactor:pe,getBuffer:function(){return ee},getBufferControllerType:function(){return xl},getBufferLevel:function(){return F},getContinuousBufferTimeForTargetTime:un,getIsBufferingCompleted:function(){return N},getIsPruningInProgress:function(){return ce},getMediaSource:function(){return H},getRangeAt:Ke,getStreamId:function(){return S.id},getType:function(){return P},hasBufferAtTime:function(Me){try{const qe=ee.getAllBufferRanges();if(!qe||qe.length===0)return!1;let st=0;for(;st<qe.length;){const Ge=qe.start(st),ht=qe.end(st);if(Me>=Ge&&Me<=ht)return!0;st+=1}return!1}catch(qe){return R.error(qe),!1}},initialize:function(Me){Ee(Me),y.on(f.default.INIT_FRAGMENT_LOADED,K,w),y.on(f.default.MEDIA_FRAGMENT_LOADED,Z,w),y.on(f.default.WALLCLOCK_TIME_UPDATED,it,w),y.on(v.default.PLAYBACK_PLAYING,Pe,w),y.on(v.default.PLAYBACK_PROGRESS,_e,w),y.on(v.default.PLAYBACK_TIME_UPDATED,_e,w),y.on(v.default.PLAYBACK_RATE_CHANGED,nt,w),y.on(v.default.PLAYBACK_STALLED,we,w)},prepareForAbandonQualitySwitch:function(Me,qe){return z(Me,qe)},prepareForDefaultQualitySwitch:function(Me,qe){return z(Me,qe)},prepareForFastQualitySwitch:function(Me,qe){return z(Me,qe)},prepareForForceReplacementQualitySwitch:function(Me,qe){return new Promise((st=>{const Ge=[];Ge.push(ee.abort()),Ge.push(Ue()),Ge.push(de()),Ge.push(fn(Me)),Ge.push(ie(Me,qe)),Promise.allSettled(Ge).then((()=>{gt(!1),st()}))}))},prepareForNonReplacementTrackSwitch:function(Me,qe){return new Promise((st=>{const Ge=[];Ge.push(Ue()),Ge.push(ie(Me,qe)),Promise.allSettled(Ge).then((()=>{st()}))}))},prepareForPlaybackSeek:function(){return N&&gt(!1),ee.abort()},prepareForReplacementTrackSwitch:function(Me,qe){return new Promise((st=>{const Ge=[];Ge.push(ee.abort()),Ge.push(Ue()),Ge.push(ie(Me,qe)),Ge.push(de()),Ge.push(fn(Me)),Promise.allSettled(Ge).then((()=>{gt(!1),st()}))}))},pruneAllSafely:de,pruneBuffer:jt,reset:function(Me,qe){y.off(f.default.INIT_FRAGMENT_LOADED,K,this),y.off(f.default.MEDIA_FRAGMENT_LOADED,Z,this),y.off(f.default.WALLCLOCK_TIME_UPDATED,it,this),y.off(v.default.PLAYBACK_PLAYING,Pe,this),y.off(v.default.PLAYBACK_PROGRESS,_e,this),y.off(v.default.PLAYBACK_TIME_UPDATED,_e,this),y.off(v.default.PLAYBACK_RATE_CHANGED,nt,this),y.off(v.default.PLAYBACK_STALLED,we,this),kt(Me,qe)},segmentRequestingCompleted:function(Me){isNaN(Me)||(Q=Me,ut())},setIsBufferingCompleted:gt,setMediaSource:Ee,setSeekTarget:function(Me){Ie=Me},updateAppendWindow:Ue,updateBufferTimestampOffset:fn},R=(0,u.default)(d).getInstance().getLogger(w),me=gs(d).getInstance(),kt(),w}Dl.__dashjs_factory_name=xl;var mf=o.default.getClassFactory(Dl);const Ll="NotFragmentedTextBufferController";function Ml(l){l=l||{};const i=this.context,d=(0,T.default)(i).getInstance(),y=l.textController,b=l.errHandler,E=l.streamInfo,C=l.type;let k,S,L,P,w,R;function N(H){P=H}function F(H){S!==H&&(S=H,S&&(function(U){let Q={};d.trigger(U,Q,{streamId:E.id,mediaType:C})})(f.default.BUFFERING_COMPLETED))}function q(H){H.chunk.bytes&&!S&&(R.save(H.chunk),w.append(H.chunk),F(!0))}return k={initialize:function(H){N(H)},getStreamId:function(){return E.id},getType:function(){return C},getBufferControllerType:function(){return Ll},createBufferSink:function(H){return new Promise(((U,Q)=>{try{w=Rl(i).create({mediaSource:P,textController:y,eventBus:d}),w.initializeForFirstUse(H),L||(w.getBuffer()&&typeof w.getBuffer().initialize=="function"&&w.getBuffer().initialize(),L=!0),U(w)}catch(ee){b.error(new Bt.default(Gt.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Gt.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+C)),Q(ee)}}))},dischargePreBuffer:function(){},getBuffer:function(){return w},getBufferLevel:function(){return 0},getRangeAt:function(){return null},pruneBuffer:function(){},hasBufferAtTime:function(){return!0},getAllRangesWithSafetyFactor:function(){return[]},getContinuousBufferTimeForTargetTime:function(){return Number.POSITIVE_INFINITY},setMediaSource:N,getMediaSource:function(){return P},appendInitSegmentFromCache:function(H){return R.extract(E.id,H)!==null},getIsBufferingCompleted:function(){return S},setIsBufferingCompleted:F,getIsPruningInProgress:function(){return!1},reset:function(H){d.off(f.default.INIT_FRAGMENT_LOADED,q,k),!H&&w&&(w.abort(),w.reset(),w=null)},clearBuffers:function(){return Promise.resolve()},prepareForPlaybackSeek:function(){return Promise.resolve()},prepareForReplacementTrackSwitch:function(){return S=!1,Promise.resolve()},setSeekTarget:function(){},updateAppendWindow:function(){return Promise.resolve()},pruneAllSafely:function(){return Promise.resolve()},updateBufferTimestampOffset:function(){return Promise.resolve()},segmentRequestingCompleted:function(){}},L=!1,P=null,S=!1,R=gs(i).getInstance(),d.on(f.default.INIT_FRAGMENT_LOADED,q,k),k}Ml.__dashjs_factory_name=Ll;var gf=o.default.getClassFactory(Ml);function Pl(l){l=l||{};const i=this.context,d=(0,T.default)(i).getInstance(),y=l.dashMetrics,b=l.mediaPlayerModel,E=l.fragmentModel,C=l.abrController,k=l.playbackController,S=l.textController,L=l.type,P=l.bufferController,w=l.representationController,R=l.settings;let N,F,q,H,U,Q,ee,ne,le,j,O,D;function M(){ee=(0,u.default)(i).getInstance().getLogger(H),X(),j=l.streamInfo}function ce(){ne=!0}function V(){ne=!1}function me(ae){if(P.getIsBufferingCompleted())return;ue();const z=isNaN(ae)?0:ae;le=setTimeout(ge,z)}function ue(){le&&(clearTimeout(le),le=null)}function ge(){const ae=b.getScheduleTimeout();try{if((function(){try{return L===c.default.TEXT&&!S.isTextEnabled()||k.isPaused()&&(!k.getStreamController().getInitialPlayback()||!k.getStreamController().getAutoPlay())&&!R.get().streaming.scheduling.scheduleWhilePaused}catch{return!1}})())return void ue();(function(){try{return!!ne&&w.getCurrentRepresentation()&&(Q==null||O||(function(){const z=w.getCurrentRepresentation();if(!L||!z)return!0;let ie=z&&z.segmentDuration&&!isNaN(z.segmentDuration)?z.segmentDuration:0;const de=y.getCurrentBufferLevel(L),pe=Ie();return(pe<=ie||k.getLowLatencyModeEnabled()||L===c.default.AUDIO&&F)&&(ie=0),de+ie<pe})())}catch{return!1}})()?(function(){if(C.handlePendingManualQualitySwitch(j.id,L))return;let z=!1;N&&(z=C.checkPlaybackQuality(L,j.id)),z||(function(){const ie=w.getCurrentRepresentation();q||ie.id!==Q||O?(function(de){O?(ee.debug("Switch track for "+L+", representation id = "+de.id),O=!1):ee.debug("Quality has changed, get init request for representationid = "+de.id),d.trigger(f.default.INIT_FRAGMENT_NEEDED,{representationId:de.id,sender:H},{streamId:j.id,mediaType:L}),N=!1,q=!1})(ie):(ee.debug(`Media segment needed for ${L} and stream id ${j.id}`),d.trigger(f.default.MEDIA_FRAGMENT_NEEDED,{},{streamId:j.id,mediaType:L}),N=!0)})()})():me(ae)}catch{me(ae)}}function Ie(){let ae=NaN;const z=w.getCurrentRepresentation();return L&&z&&(ae=L===c.default.TEXT?(function(){try{if(S.isTextEnabled()){const ie=w.getCurrentRepresentation();if(isNaN(ie.fragmentDuration)){const de=y.getCurrentSchedulingInfo(r.SCHEDULING_INFO);return de?de.duration:0}return ie.fragmentDuration}return 0}catch{return 0}})():L===c.default.AUDIO&&F?(function(){try{const ie=y.getCurrentBufferLevel(c.default.VIDEO),de=w.getCurrentRepresentation();return isNaN(de.fragmentDuration)?ie+1:Math.max(ie+1,de.fragmentDuration)}catch{return 0}})():(function(){try{const ie=R.get().streaming.enhancement.enabled?w.getCurrentCompositeRepresentation():w.getCurrentRepresentation(),de=ie.mediaInfo.streamInfo;return C.isPlayingAtTopQuality(ie)?de.manifestInfo.duration>=R.get().streaming.buffer.longFormContentDurationThreshold?R.get().streaming.buffer.bufferTimeAtTopQualityLongForm:R.get().streaming.buffer.bufferTimeAtTopQuality:b.getBufferTimeDefaultUnadjusted()}catch{return b.getBufferTimeDefaultUnadjusted()}})()),ae}function Ee(){B(!0)}function B(ae){if(k&&E){const z=E.getRequests({state:Oe.FRAGMENT_MODEL_EXECUTED,time:k.getTime(),threshold:0})[0];z&&k.getTime()>=z.startTime&&((!U.representation||z.representation.mediaInfo.type===U.representation.mediaInfo.type&&z.representation.mediaInfo.index!==U.representation.mediaInfo.index)&&ae&&(function(ie){ee.debug(`Track change rendered for streamId ${j.id} and type ${L}`),d.trigger(f.default.TRACK_CHANGE_RENDERED,{mediaType:L,oldMediaInfo:U&&U.representation&&U.representation.mediaInfo?U.representation.mediaInfo:null,newMediaInfo:ie.representation.mediaInfo,streamId:j.id})})(z),U.representation&&z.representation.id===U.representation.id||!ae||(function(ie){ee.debug(`Quality change rendered for streamId ${j.id} and type ${L}`),d.trigger(f.default.QUALITY_CHANGE_RENDERED,{mediaType:L,oldRepresentation:U.representation?U.representation:null,newRepresentation:ie.representation,streamId:j.id})})(z),U.representation=z.representation)}}function K(){E.abortRequests(),ue()}function Z(){R.get().streaming.scheduling.scheduleWhilePaused||me()}function W(ae){y.updatePlayListTraceMetrics({playbackspeed:ae.playbackRate.toString()})}function X(){N=!0,D=0,Q=null,U={representation:null},O=!1,q=!1,ne=!0}return H={clearScheduleTimer:ue,getBufferTarget:Ie,getPlaybackController:function(){return k},getStreamId:function(){return j.id},getSwitchTrack:function(){return O},getTimeToLoadDelay:function(){return D},getType:function(){return L},initialize:function(ae){F=ae,d.on(f.default.URL_RESOLUTION_FAILED,K,H),d.on(v.default.PLAYBACK_STARTED,Z,H),d.on(v.default.PLAYBACK_RATE_CHANGED,W,H),d.on(v.default.PLAYBACK_TIME_UPDATED,Ee,H),d.on(v.default.MANAGED_MEDIA_SOURCE_START_STREAMING,ce,H),d.on(v.default.MANAGED_MEDIA_SOURCE_END_STREAMING,V,H)},reset:function(){d.off(f.default.URL_RESOLUTION_FAILED,K,H),d.off(v.default.PLAYBACK_STARTED,Z,H),d.off(v.default.PLAYBACK_RATE_CHANGED,W,H),d.off(v.default.PLAYBACK_TIME_UPDATED,Ee,H),d.off(v.default.MANAGED_MEDIA_SOURCE_START_STREAMING,ce,H),d.off(v.default.MANAGED_MEDIA_SOURCE_END_STREAMING,V,H),ue(),B(!1),X(),j=null},setShouldCheckPlaybackQuality:function(ae){N=ae},setInitSegmentRequired:function(ae){q=ae},setLastInitializedRepresentationId:function(ae){Q=ae},setup:M,setSwitchTrack:function(ae){O=ae},setTimeToLoadDelay:function(ae){D=ae},startScheduleTimer:me},M(),H}Pl.__dashjs_factory_name="ScheduleController";var hf=o.default.getClassFactory(Pl);const pf=/\$(RepresentationID|Number|SubNumber|Bandwidth|Time)?(?:%0([0-9]+)([diouxX]))?\$/g;var yf=class extends hl{constructor(){super(),this.isPartialSegment=!0,this.replacementSubNumber=NaN,this.totalNumberOfPartialSegments=NaN}};function Ol(l){return l?l.totalNumberOfPartialSegments&&!isNaN(l.totalNumberOfPartialSegments)&&l.totalNumberOfPartialSegments>0&&!isNaN(l.subNumberOfPartialSegmentToRequest)?(function(i){const d=(function(y,b){const E=new yf,C=y.segmentDurationInSeconds/y.totalNumberOfPartialSegments,{representation:k,timelineConverter:S,isDynamic:L,index:P,totalNumberOfPartialSegments:w}=y,R=zl({representation:k,segmentDurationInSeconds:C,presentationStartTime:y.presentationStartTime+b*C,presentationEndTime:y.presentationStartTime+(b+1)*C,timelineConverter:S,isDynamic:L,mediaTimeInSeconds:y.mediaTimeInSeconds+b*C,index:P});return E.assignAttributes(R),E.replacementSubNumber=b,E.totalNumberOfPartialSegments=w,E})(i,i.subNumberOfPartialSegmentToRequest);return Fl(d,i),d})(l):(function(i){const d=new ms,y=zl(i);return d.assignAttributes(y),Fl(d,i),d})(l):null}function zl(l){const{representation:i,segmentDurationInSeconds:d,presentationStartTime:y,presentationEndTime:b,mediaTimeInSeconds:E,timelineConverter:C,isDynamic:k,index:S}=l,L={availabilityEndTime:C.calcAvailabilityEndTimeFromPresentationTime(b+d,i,k),availabilityStartTime:C.calcAvailabilityStartTimeFromPresentationTime(b,i,k),duration:d,index:S,mediaStartTime:E,presentationStartTime:y,replacementNumber:i.startNumber+S,representation:i};return L.wallStartTime=C.calcWallTimeForSegment(L,k),L}function Fl(l,i){const{tManifest:d,mediaTime:y,mediaUrl:b,mediaRange:E}=i;l.replacementTime=d||y,l.media=$r(b,l.representation.id,l.replacementNumber,l.replacementSubNumber,l.representation.bandwidth,l.replacementTime),l.mediaRange=E,l.mediaUrl=b}function Ul(l,i,d,y){const b=i.adaptation.period;if(isFinite(b.duration)&&b.start+b.duration<=d.presentationStartTime)return!1;if(y){if(i.availabilityTimeOffset==="INF")return!0;const E=l.getClientReferenceTime();return d.availabilityStartTime.getTime()<=E&&(!isFinite(d.availabilityEndTime)||d.availabilityEndTime.getTime()>=E)}return!0}function $r(l,i,d,y,b,E){return l&&(function(C,k,S,L,P,w){return C.replace(pf,((R,N,F,q)=>{let H,U;switch(N){case void 0:return"$";case"RepresentationID":H=k;break;case"Number":H=S;break;case"SubNumber":H=L;break;case"Bandwidth":H=P;break;case"Time":if(typeof w=="string")return w;H=w&&Math.round(w);break;default:H=null}if(H==null)return R;switch(q){case void 0:case"d":case"i":case"u":U=H.toString();break;case"o":U=H.toString(8);break;case"x":U=H.toString(16);break;case"X":U=H.toString(16).toUpperCase();break;default:U=H.toString()}const Q=parseInt(F,10)||1;return U.padStart(Q,"0")}))})(l,i,d,y,b,E)}function Bl(l){const{index:i,isDynamic:d,mediaRange:y,mediaTime:b,mediaUrl:E,representation:C,subNumberOfPartialSegmentToRequest:k,timelineConverter:S,totalNumberOfPartialSegments:L}=l;let P,w,R;P=C.segmentDuration,isNaN(P)&&(P=C.adaptation.period.duration),w=parseFloat((C.adaptation.period.start+i*P).toFixed(5)),R=parseFloat((w+P).toFixed(5));const N=Ol({index:i,isDynamic:d,mediaRange:y,mediaTime:b,mediaTimeInSeconds:S.calcMediaTimeFromPresentationTime(w,C),mediaUrl:E,presentationEndTime:R,presentationStartTime:w,representation:C,segmentDurationInSeconds:P,subNumberOfPartialSegmentToRequest:k,timelineConverter:S,totalNumberOfPartialSegments:L});return Ul(S,C,N,d)?N:null}function ps(l){const{durationInTimescale:i,fTimescale:d,index:y,subNumberOfPartialSegmentToRequest:b,isDynamic:E,mediaRange:C,mediaTime:k,mediaUrl:S,totalNumberOfPartialSegments:L,representation:P,tManifest:w,timelineConverter:R}=l,N=k/d,F=i/d;let q=R.calcPresentationTimeFromMediaTime(N,P),H=Ol({representation:P,segmentDurationInSeconds:F,presentationStartTime:q,presentationEndTime:q+F,mediaTimeInSeconds:N,timelineConverter:R,isDynamic:E,index:y,totalNumberOfPartialSegments:L,subNumberOfPartialSegmentToRequest:b,mediaUrl:S,mediaRange:C,tManifest:w,mediaTime:k});return Ul(R,P,H,E)?H:null}function ys(l){return l.k}function jl(l){const i=(l=l||{}).eventBus,d=l.events,y=l.abrController,b=l.dashMetrics,E=l.playbackController,C=l.timelineConverter,k=l.type,S=l.streamInfo,L=l.segmentsController,P=l.isDynamic;let w,R,N;function F(){return k}function q(){return N?.mediaInfo.type===k?N:(function(){let j=N?.dependentRepresentation;if(j){if(!j.mediaInfo)throw new Error("dependentRepresentation has no mediaInfo!");if(j.mediaInfo.type===k)return j}return null})()}function H(){N=null,R=[]}function U(j){return new Promise(((O,D)=>{const M=j.hasInitialization(),ce=j.hasSegments(),V=[];V.push(L.updateInitData(j,M)),V.push(L.updateSegmentData(j,ce)),Promise.all(V).then((me=>{var ue;me[0]&&!me[0].error&&(j=(function(ge,Ie){return Ie&&!Ie.error&&Ie.representation?Ie.representation:ge})(j,me[0])),me[1]&&!me[1].error&&(j=(function(ge,Ie){if(!Ie||Ie.error)return;const Ee=Ie.segments,B=[];let K,Z,W,X,ae=0;for(K=0,Z=Ee?Ee.length:0;K<Z;K++)W=Ee[K],X=ps({durationInTimescale:W.duration,fTimescale:W.timescale,index:ae,isDynamic:P,mediaRange:W.mediaRange,mediaTime:W.startTime,mediaUrl:W.media,representation:ge,timelineConverter:C}),X&&(B.push(X),X=null,ae++);return B.length>0&&(ge.segments=B),ge})(j,me[1])),j.fragmentDuration=j.segmentDuration?j.segmentDuration:j.segments&&j.segments.length>0?j.segments[0].duration:NaN,(ue=j).mediaFinishedInformation=L.getMediaFinishedInformation(ue),(function(ge){let Ie,Ee=b.getCurrentManifestUpdate(),B=!1;if(Ee){for(let K=0;K<Ee.representationInfo.length;K++)if(Ie=Ee.representationInfo[K],Ie.index===ge.index&&Ie.mediaType===F()){B=!0;break}B||b.addManifestUpdateRepresentationInfo(ge,F())}})(j),O()})).catch((me=>{D(me)}))}))}function Q(j){if(!R||R.length===0)return null;const O=R.filter((D=>D.id===j));return O.length>0?O[0]:null}function ee(j){i.trigger(d.DATA_UPDATE_COMPLETED,{currentRepresentation:N,error:j},{streamId:S.id,mediaType:k})}function ne(j){N&&N.id===j.id||(function(O){(function(){if(!(y&&b&&E&&C))throw new Error(c.default.MISSING_CONFIG_ERROR)})();const D=new Date,M=1e3*E.getTime();O&&b.addRepresentationSwitch(O.adaptation.type,D,M,O.id),i.trigger(v.default.REPRESENTATION_SWITCH,{mediaType:k,streamId:S.id,currentRepresentation:O},{streamId:S.id,mediaType:k})})(j),N=j}function le(j){if(j.newDuration){const O=q();O&&O.adaptation.period&&(O.adaptation.period.duration=j.newDuration)}}return w={getCurrentCompositeRepresentation:function(){return N},getCurrentRepresentation:q,getRepresentationById:Q,getStreamId:function(){return S.id},getType:F,prepareQualityChange:function(j){const O=R.filter((D=>D.id===j.id));O.length>0&&ne(O[0])},reset:function(){i.off(v.default.MANIFEST_VALIDITY_CHANGED,le,w),H()},updateData:function(j,O,D){return new Promise(((M,ce)=>{if(R=j,ne(Q(D)),k!==c.default.VIDEO&&k!==c.default.ENHANCEMENT&&k!==c.default.AUDIO&&(k!==c.default.TEXT||!O))return ee(),void M();const V=[];for(let me=0,ue=R.length;me<ue;me++){const ge=R[me];V.push(U(ge))}Promise.all(V).then((()=>{(function(){y.setPlaybackQuality(k,S,N);const me=b.getCurrentDVRInfo(k);me&&b.updateManifestUpdateInfo({latency:me.range.end-E.getTime()}),ee()})(),M()})).catch((me=>{ce(me)}))}))}},H(),i.on(v.default.MANIFEST_VALIDITY_CHANGED,le,w),w}jl.__dashjs_factory_name="RepresentationController";var bf=o.default.getClassFactory(jl);function ql(l){const i=(l=l||{}).eventBus,d=l.debug,y=l.urlUtils,b=l.type,E=l.streamInfo,C=l.segmentsController,k=l.timelineConverter,S=l.baseURLController;let L,P,w,R,N;function F(){return b}function q(){w=null}function H(j,O,D){const M=S.resolve(D.path);let ce,V,me={};return M&&O!==M.url&&y.isRelative(O)?(ce=M.url,V=M.serviceLocation,me=M.queryParams,O&&(ce=y.resolve(O,ce))):ce=O,!y.isRelative(ce)&&(j.url=ce,j.serviceLocation=V,j.queryParams=me,!0)}function U(j,O,D){let M=null;if(!O||!O.segmentInfoType)return M;const ce=C.getSegmentByTime(O,D);return ce&&(w=ce,P.debug("Index for time "+D+" is "+ce.index),M=Q(0,ce)),M}function Q(j,O){if(O==null)return null;const D=new J,M=O.representation,ce=M.bandwidth,V=$r(O.media,M.id,O.replacementNumber,O.replacementSubNumber,ce,O.replacementTime);return D.adaptationIndex=M.adaptation.index,D.availabilityEndTime=O.availabilityEndTime,D.availabilityStartTime=O.availabilityStartTime,D.availabilityTimeComplete=M.availabilityTimeComplete,D.bandwidth=M.bandwidth,D.duration=O.duration,D.index=O.index,D.isPartialSegmentRequest=O.isPartialSegment,D.mediaStartTime=O.mediaStartTime,D.mediaType=F(),D.presentationStartTime=O.presentationStartTime,D.range=O.mediaRange,D.representation=M,D.startTime=O.presentationStartTime,D.timescale=M.timescale,D.type=De.HTTPRequest.MEDIA_SEGMENT_TYPE,D.wallStartTime=O.wallStartTime,H(D,V,M)?D:void 0}function ee(j){if(!j)return{indexToRequest:0,subNumberOfPartialSegmentToRequest:NaN};const O=j.isPartialSegment,D=!isNaN(j.replacementSubNumber),M=!isNaN(j.totalNumberOfPartialSegments);if(O&&D&&M){const ce=j.replacementSubNumber+1;return ce<j.totalNumberOfPartialSegments?{indexToRequest:j.index,subNumberOfPartialSegmentToRequest:ce}:{indexToRequest:j.index+1,subNumberOfPartialSegmentToRequest:0}}return{indexToRequest:j.index+1,subNumberOfPartialSegmentToRequest:NaN}}function ne(j,O,D,M){let ce=null;const V=C.getSegmentByIndex(O,D,M,w);if(V)ce=Q(0,V),w=V;else{if(R&&!N)return P.debug(F()+" No segment found at index: "+D+". Wait for next loop"),null;N=!0}return ce}function le(){P.debug("Dynamic stream complete"),N=!0}return L={getCurrentIndex:function(){return w?w.index:-1},getInitRequest:function(j,O){return O?(function(D,M,ce){const V=new J,me=M.adaptation.period,ue=me.start;if(V.mediaType=ce,V.type=De.HTTPRequest.INIT_SEGMENT_TYPE,V.range=M.range,V.availabilityStartTime=k.calcAvailabilityStartTimeFromPresentationTime(ue,M,R),V.availabilityEndTime=k.calcAvailabilityEndTimeFromPresentationTime(ue+me.duration,M,R),V.representation=M,H(V,M.initialization,M))return V.url=$r(V.url,M.id,void 0,void 0,M.bandwidth),V})(0,O,F()):null},getLastSegment:function(){return w},getNextSegmentRequest:function(j,O){if(!O||!O.segmentInfoType)return null;if((function(ce){return ce&&w&&ce.endNumber&&w.replacementNumber&&w.replacementNumber>=ce.endNumber})(O))return N=!0,null;let{indexToRequest:D,subNumberOfPartialSegmentToRequest:M}=ee(w);return ne(0,O,D,M)},getNextSegmentRequestIdempotent:function(j,O){let D=null,{indexToRequest:M,subNumberOfPartialSegmentToRequest:ce}=ee(w);const V=C.getSegmentByIndex(O,M,ce,w);return V?(D=Q(0,V),D):null},getSegmentRequestForTime:U,getStreamId:function(){return E.id},getStreamInfo:function(){return E},getType:F,getValidTimeAheadOfTargetTime:function(j,O,D,M){try{if(isNaN(j)||!O||!D)return NaN;if(j<0&&(j=0),isNaN(M)&&(M=.5),U(0,D,j))return j;if(D.adaptation.period.start+D.adaptation.period.duration<j)return NaN;const ce=isFinite(D.adaptation.period.duration)?D.adaptation.period.start+D.adaptation.period.duration:j+30;let V=Math.min(j+M,ce),me=NaN,ue=null;for(;V<=ce;){let ge=null;if(V<=ce&&(ge=U(0,D,V)),ge){me=V,ue=ge;break}V+=M}if(ue){const ge=ue.startTime+ue.duration;return j>ue.startTime&&ge-j>M?j:!isNaN(ue.startTime)&&j<ue.startTime&&me>ue.startTime?ue.startTime+.001:Math.min(ge-M,me)}return me}catch{return NaN}},initialize:function(j){R=j,N=!1,C.initialize(j)},isLastSegmentRequested:function(j,O){return!j||!w?!1:N?!0:!isFinite(j.adaptation.period.duration)||w.presentationStartTime+w.duration>O?!1:j.mediaFinishedInformation&&!isNaN(j.mediaFinishedInformation.numberOfSegments)&&!isNaN(w.index)&&w.index>=j.mediaFinishedInformation.numberOfSegments-1&&(!R||j.segmentInfoType===fe.default.SEGMENT_TEMPLATE||R&&j.segmentInfoType===fe.default.SEGMENT_LIST&&j.adaptation.period.nextPeriodId)?!0:!!(R&&j.adaptation.period.nextPeriodId&&j.segmentInfoType===fe.default.SEGMENT_TIMELINE&&j.mediaFinishedInformation&&!isNaN(j.mediaFinishedInformation.mediaTimeOfLastSignaledSegment)&&w&&!isNaN(w.mediaStartTime)&&!isNaN(w.duration)&&w.mediaStartTime+w.duration>=j.mediaFinishedInformation.mediaTimeOfLastSignaledSegment-.05)},repeatSegmentRequest:function(j,O){return O&&O.segmentInfoType?ne(0,O,w?w.index:0,w&&w.isPartialSegment&&!isNaN(w.replacementSubNumber)?w.replacementSubNumber:NaN):null},reset:function(){q(),i.off(v.default.DYNAMIC_TO_STATIC,le,L)}},P=d.getLogger(L),q(),i.on(v.default.DYNAMIC_TO_STATIC,le,L),L}ql.__dashjs_factory_name="DashHandler";var Hl=o.default.getClassFactory(ql);function Gl(l,i){const d=(l=l||{}).timelineConverter,y=l.dashMetrics;let b;function E(k,S){if((function(){if(!d)throw new Error(c.default.MISSING_CONFIG_ERROR)})(),!k)return null;S===void 0&&(S=null);let L=null;const P=d.calcMediaTimeFromPresentationTime(S,k);return(function(w,R){const N=(function(ce){return ce.adaptation.period.mpd.manifest.Period[ce.adaptation.period.index].AdaptationSet[ce.adaptation.index].Representation[ce.index].SegmentTemplate||ce.adaptation.period.mpd.manifest.Period[ce.adaptation.period.index].AdaptationSet[ce.adaptation.index].Representation[ce.index].SegmentList})(w),F=N.SegmentTimeline,q=N.SegmentURL;let H,U,Q,ee,ne,le,j=0,O=-1;le=w.timescale,H=F.S;let D=!1;const M=H.length;for(Q=0;Q<M&&!D;Q++)for(U=H[Q],ne=0,U.hasOwnProperty("r")&&(ne=U.r),U.hasOwnProperty("t")&&(j=U.t),ne<0&&(ne=C(w,H[Q+1],U,le,j/le)),ee=0;ee<=ne&&!D;ee++)O++,D=R({mediaTime:j,segmentBase:N,segmentURL:q,currentSElement:U,sElementCounterIncludingRepeats:O,sElementCounter:Q}),D&&(w.segmentDuration=U.d/le),j+=U.d})(k,(function(w){const R=k.timescale;return(function(N,F){const{mediaTime:q,segmentBase:H,segmentURL:U,currentSElement:Q,sElementCounterIncludingRepeats:ee,sElementCounter:ne}=F,le=Q.d,j=k.timescale;return N<q+le&&N>=q&&((function(O){const{segmentBase:D,segmentURL:M,sElementCounter:ce,currentSElement:V,mediaTime:me,durationInTimescale:ue,fTimescale:ge,requiredMediaTimeInTimescaleUnits:Ie,sElementCounterIncludingRepeats:Ee}=O;let B=(function(X,ae,z){let ie=X.media;return ae&&(ie=ae[z].media||""),ie})(D,M,ce),K=(function(X,ae,z){let ie=X.mediaRange;return ae&&(ie=ae[z].mediaRange),ie})(V,M,ce);const Z=ys(V),W=(function(X){if(!X||X.totalNumberOfPartialSegments===void 0||isNaN(X.totalNumberOfPartialSegments)||X.totalNumberOfPartialSegments<1)return;const{durationInTimescale:ae,requiredMediaTimeInTimescaleUnits:z,mediaTime:ie,totalNumberOfPartialSegments:de}=X,pe=ae/de;for(let _e=0;_e<de;_e++){const we=ie+_e*pe;if(z>=we&&z<we+pe)return _e}return NaN})({durationInTimescale:ue,requiredMediaTimeInTimescaleUnits:Ie,mediaTime:me,totalNumberOfPartialSegments:Z});L=ps({timelineConverter:d,isDynamic:i,representation:k,mediaTime:me,durationInTimescale:ue,fTimescale:ge,mediaUrl:B,mediaRange:K,index:Ee,tManifest:V.tManifest,totalNumberOfPartialSegments:Z,subNumberOfPartialSegmentToRequest:W})})({segmentBase:H,segmentURL:U,sElementCounter:ne,currentSElement:Q,mediaTime:q,durationInTimescale:le,fTimescale:j,requiredMediaTimeInTimescaleUnits:N,sElementCounterIncludingRepeats:ee}),!0)})(parseFloat((P*R).toPrecision(15)),w)})),L}function C(k,S,L,P,w){let R;if(S&&S.hasOwnProperty("t"))R=S.t/P;else try{let N=0;if(isNaN(k.adaptation.period.start)||isNaN(k.adaptation.period.duration)||!isFinite(k.adaptation.period.duration)){const F=y.getCurrentDVRInfo();N=isNaN(F.end)?0:F.end}else N=k.adaptation.period.start+k.adaptation.period.duration;R=d.calcMediaTimeFromPresentationTime(N,k),k.segmentDuration=L.d/P}catch{R=0}return Math.max(Math.ceil((R-w)/(L.d/P))-1,0)}return b={getMediaFinishedInformation:function(k){if(!k)return 0;const S=(k.adaptation.period.mpd.manifest.Period[k.adaptation.period.index].AdaptationSet[k.adaptation.index].Representation[k.index].SegmentTemplate||k.adaptation.period.mpd.manifest.Period[k.adaptation.period.index].AdaptationSet[k.adaptation.index].Representation[k.index].SegmentList).SegmentTimeline;let L,P,w,R,N,F,q=0,H=0,U=0;F=k.timescale,L=S.S;const Q=L.length;for(w=0;w<Q;w++)for(P=L[w],N=0,P.hasOwnProperty("r")&&(N=P.r),P.hasOwnProperty("t")&&(q=P.t,H=q/F),N<0&&(N=C(k,L[w+1],P,F,H)),R=0;R<=N;R++)U++,q+=P.d,H=q/F;return{numberOfSegments:U,mediaTimeOfLastSignaledSegment:H}},getSegmentByIndex:function(k,S){return k?E(k,S&&!isNaN(S.presentationStartTime)?S.presentationStartTime+S.duration+.01:0):null},getSegmentByTime:E},b}Gl.__dashjs_factory_name="TimelineSegmentsGetter";var Ef=o.default.getClassFactory(Gl);function Yl(l,i){const d=(l=l||{}).timelineConverter;let y;function b(C,k,S){if(!C)return null;const L=E(C),P=ys(L);P!==void 0&&P>=0&&(S=S!==void 0&&S<P?S:0);const w=Bl({index:k=Math.max(k,0),isDynamic:i,mediaTime:Math.round(k*C.segmentDuration*C.timescale,10),mediaUrl:L.media,representation:C,subNumberOfPartialSegmentToRequest:S,timelineConverter:d,totalNumberOfPartialSegments:P});return w&&C.endNumber&&w.replacementNumber>C.endNumber?null:w}function E(C){return C.adaptation.period.mpd.manifest.Period[C.adaptation.period.index].AdaptationSet[C.adaptation.index].Representation[C.index].SegmentTemplate}return y={getMediaFinishedInformation:function(C){const k={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!C)return k;const S=C.segmentDuration;return isNaN(S)?k.numberOfSegments=1:k.numberOfSegments=Math.ceil(C.adaptation.period.duration/S),k},getSegmentByIndex:b,getSegmentByTime:function(C,k){if(!C)return null;const S=C.segmentDuration;if(isNaN(S))return null;let L=d.calcPeriodRelativeTimeFromMpdRelativeTime(C,k);const P=E(C),w=Math.floor(L/S),R=(function(N){if(!N||N.totalNumberOfPartialSegments===void 0||isNaN(N.totalNumberOfPartialSegments)||N.totalNumberOfPartialSegments<1)return;const{totalNumberOfPartialSegments:F,representation:q,requestedTimeRelativeToPeriodStart:H,indexWithoutStartNumber:U}=N,Q=U*q.segmentDuration,ee=q.segmentDuration/F,ne=H-Q;let le=Math.floor(ne/ee);return le=Math.max(0,Math.min(le,F-1)),le})({totalNumberOfPartialSegments:ys(P),representation:C,requestedTimeRelativeToPeriodStart:L,indexWithoutStartNumber:w});return b(C,w,R)}},y}Yl.__dashjs_factory_name="TemplateSegmentsGetter";var Tf=o.default.getClassFactory(Yl);function Kl(l,i){const d=(l=l||{}).timelineConverter;let y;function b(){if(!d||!d.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(c.default.MISSING_CONFIG_ERROR)}function E(C,k){if(b(),!C)return null;const S=C.adaptation.period.mpd.manifest.Period[C.adaptation.period.index].AdaptationSet[C.adaptation.index].Representation[C.index].SegmentList,L=S.SegmentURL.length,P=C&&!isNaN(C.startNumber)?C.startNumber:1,w=Math.max(P-1,0),R=Math.max(k-w,0);let N=null;if(R<L){const F=S.SegmentURL[R];N=Bl({index:k,isDynamic:i,mediaRange:F.mediaRange,mediaTime:(P+k-1)*C.segmentDuration,representation:C,timelineConverter:d}),N&&(N.media=F.media?F.media:"",N.indexRange=F.indexRange)}return N}return y={getSegmentByIndex:E,getSegmentByTime:function(C,k){if(b(),!C)return null;const S=C.segmentDuration;if(isNaN(S))return null;const L=d.calcPeriodRelativeTimeFromMpdRelativeTime(C,k);return E(C,Math.floor(L/S))},getMediaFinishedInformation:function(C){const k={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};if(!C)return k;const S=C.adaptation.period.mpd.manifest.Period[C.adaptation.period.index].AdaptationSet[C.adaptation.index].Representation[C.index].SegmentList,L=C&&!isNaN(C.startNumber)?C.startNumber:1,P=Math.max(L-1,0);return k.numberOfSegments=P+S.SegmentURL.length,k}},y}Kl.__dashjs_factory_name="ListSegmentsGetter";var vf=o.default.getClassFactory(Kl);function Vl(l){const i=(l=l||{}).timelineConverter;let d;function y(){if(!i||!i.hasOwnProperty("calcPeriodRelativeTimeFromMpdRelativeTime"))throw new Error(c.default.MISSING_CONFIG_ERROR)}function b(E,C){if(y(),!E)return null;const k=E.segments?E.segments.length:-1;let S;if(C<k&&(S=E.segments[C],S&&S.index===C))return S;for(let L=0;L<k;L++)if(S=E.segments[L],S&&S.index===C)return S;return null}return d={getSegmentByIndex:b,getSegmentByTime:function(E,C){y();const k=(function(S,L){if(!S)return-1;const P=S.segments,w=P?P.length:null;let R,N,F,q,H,U=-1;if(P&&w>0){for(H=0;H<w;H++)if(N=P[H],F=N.presentationStartTime,q=N.duration,R=q/2,L+R>=F&&L-R<F+q){U=N.index;break}}return U})(E,C);return b(E,k)},getMediaFinishedInformation:function(E){const C={numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN};return E&&E.segments&&(C.numberOfSegments=E.segments.length),C}},d}Vl.__dashjs_factory_name="SegmentBaseGetter";var wf=o.default.getClassFactory(Vl);function $l(l){l=l||{};const i=this.context,d=l.dashConstants,y=l.type,b=l.segmentBaseController;let E,C;function k(S){return S?S.segments?C[d.SEGMENT_BASE]:C[S.segmentInfoType]:null}return E={initialize:function(S){C[d.SEGMENT_TIMELINE]=Ef(i).create(l,S),C[d.SEGMENT_TEMPLATE]=Tf(i).create(l,S),C[d.SEGMENT_LIST]=vf(i).create(l,S),C[d.SEGMENT_BASE]=wf(i).create(l,S)},updateInitData:function(S,L){return L?Promise.resolve():b.getSegmentBaseInitSegment({representation:S,mediaType:y})},updateSegmentData:function(S,L){return L?Promise.resolve():b.getSegmentList({mimeType:S.mimeType,representation:S,mediaType:y})},getSegmentByIndex:function(S,L,P,w){const R=k(S);return R?S.segmentInfoType?S.segmentInfoType===d.SEGMENT_TIMELINE?R.getSegmentByIndex(S,w):S.segmentInfoType===d.SEGMENT_TEMPLATE?R.getSegmentByIndex(S,L,P):R.getSegmentByIndex(S,L):R.getSegmentByIndex(S,L):null},getSegmentByTime:function(S,L){const P=k(S);return P?P.getSegmentByTime(S,L):null},getMediaFinishedInformation:function(S){const L=k(S);return L?L.getMediaFinishedInformation(S):{numberOfSegments:0,mediaTimeOfLastSignaledSegment:NaN}}},C={},E}$l.__dashjs_factory_name="SegmentsController";var Wl=o.default.getClassFactory($l);function Ql(){let l;return l={ntpToUTC:function(i){const d=new Date(Date.UTC(1900,0,1,0,0,0));return new Date(d.getTime()+i).getTime()}},l}Ql.__dashjs_factory_name="TimeUtils";var _f=o.default.getSingletonFactory(Ql);function Xl(l){l=l||{};let i,d,y,b,E,C,k,S,L,P,w,R,N,F,q,H,U,Q,ee=this.context,ne=(0,T.default)(ee).getInstance(),le=l.abrController,j=l.adapter,O=l.boxParser,D=l.capabilities,M=l.dashMetrics,ce=l.errHandler,V=l.fragmentModel,me=l.manifestModel,ue=l.mediaController,ge=l.mediaPlayerModel,Ie=l.mimeType,Ee=l.playbackController,B=l.segmentBlacklistController,K=l.settings,Z=l.streamInfo,W=l.textController,X=l.timelineConverter,ae=l.type;function z(){return Z.id}function ie(){return ae}function de(){P=[],b=null,d=0,U=!1,H=!1,R=!1,C=null,Q=!1,jt()}function pe(Ze){return!isNaN(Ze)&&!isNaN(Z.duration)&&isFinite(Z.duration)&&Ze>=Z.start+Z.duration}function _e(Ze,Lt=!0){if(Ze.sender){if(Ee.getIsManifestUpdateInProgress())Ke();else if((!b.isText||W.isTextEnabled())&&i&&Ze.representationId&&!i.appendInitSegmentFromCache(Ze.representationId)){const an=N.getCurrentRepresentation();if(an.range===0)return void we();const en=E?E.getInitRequest(b,an):null;en?V.executeRequest(en):Lt&&(F.setInitSegmentRequired(!0),Ke())}}}function we(Ze,Lt=!0){if(Ee.getIsManifestUpdateInProgress()||i.getIsPruningInProgress())return void Ke();let an=(function(){let en;if(isNaN(d)||ie()===c.default.TEXT&&!W.isTextEnabled())return null;if(E){const pn=st();en=U?E.getSegmentRequestForTime(b,pn,d):H?E.repeatSegmentRequest(b,pn):E.getNextSegmentRequest(b,pn)}return en})();an?(U=!1,H=!1,(function(en){isNaN(en.startTime+en.duration)||(d=en.startTime+en.duration),en.delayLoadingTime=new Date().getTime()+F.getTimeToLoadDelay(),F.setTimeToLoadDelay(0),(function(pn){let sn=pn.url;return pn.range&&(sn=sn.concat("_",pn.range)),B.contains(sn)})(en)?(L.warn(`Fragment request url ${en.url} for stream id ${Z.id} and media type ${ae} is on the ignore list and will be skipped`),Ke()):(L.debug(`Next fragment request url for stream id ${Z.id} and media type ${ae} is ${en.url} with request range ${en.range}`),V.executeRequest(en))})(an)):(function(en){const pn=N.getCurrentRepresentation();try{if(K.get().streaming.gaps.enableSeekFix&&(U||Ee.getTime()===0)){let sn;if(S?S&&pn.segmentInfoType===fe.default.SEGMENT_TIMELINE&&(sn=(function(Nn){return E.getValidTimeAheadOfTargetTime(d,b,Nn,K.get().streaming.gaps.threshold)})(pn)):sn=(function(Nn){let Un=E.getValidTimeAheadOfTargetTime(d,b,Nn,K.get().streaming.gaps.threshold);return isNaN(Un)&&d>=Nn.adaptation.period.mpd.mediaPresentationDuration-Nn.segmentDuration&&(Un=d-.1),Un})(pn),!isNaN(sn)&&sn!==d)return void(function(Nn,Un){Ee.isSeeking()||Ee.getTime()===0?(L.warn(`Adjusting playback time ${Nn} because of gap in the manifest. Seeking by ${Nn-d}`),Ee.seek(Nn,!1,!1)):(L.warn(`Adjusting buffering time ${Nn} because of gap in the manifest. Adjusting time by ${Nn-d}`),wt(Nn),Un&&Ke())})(sn,en)}}catch(sn){L.error(sn)}Pe()||en&&Ke()})(Lt)}function Pe(){const Ze=N.getCurrentRepresentation(),Lt=E.isLastSegmentRequested(Ze,d);if(Lt){const an=E.getCurrentIndex();L.debug(`Segment requesting for stream ${Z.id} has finished`),ne.trigger(f.default.STREAM_REQUESTING_COMPLETED,{segmentIndex:an},{streamId:Z.id,mediaType:ae}),i.segmentRequestingCompleted(an),qe()}return Lt}function Ke(){const Ze=ge.getScheduleTimeout();F.startScheduleTimer(Ze)}function et(Ze){M.addBufferState(ae,Ze.state,F.getBufferTarget()),Ze.state!==r.BUFFER_EMPTY||Ee.isSeeking()||(L.info("Buffer is empty! Stalling!"),M.pushPlayListTraceMetrics(new Date,na.REBUFFERING_REASON))}function ut(Ze){V.syncExecutedRequestsWithBufferedRange(i.getBuffer().getAllBufferRanges(),Z.duration),Ze.quotaExceeded&&Ze.from>Ee.getTime()&&wt(Ze.from),Ze.hasEnoughSpaceToAppend&&Ze.quotaExceeded&&F.startScheduleTimer()}function qt(Ze){if(!Ze||!Ze.lastRequestAppended||!Ze.lastRequestAppended.url)return;let Lt=Ze.lastRequestAppended.url;Ze.lastRequestAppended.range&&(Lt=Lt.concat("_",Ze.lastRequestAppended.range)),L.warn(`Blacklisting segment with url ${Lt}`),B.add(Lt)}function dt(Ze){if(L.debug(`Appended bytes for ${Ze.mediaType} and stream id ${Ze.streamId}`),Ze.segmentType===De.HTTPRequest.INIT_SEGMENT_TYPE){const Lt=Ze.representationId;F.setLastInitializedRepresentationId(Lt),L.info("["+ae+"] lastInitializedRepresentationId changed to "+Lt)}w&&w.enabled?it(w.newRepresentation,w.oldRepresentation):Q||F.startScheduleTimer(0)}function jt(){w={newRepresentation:null,oldRepresentation:null,enabled:!1}}function Zt(Ze){return new Promise((Lt=>{if(!N)return Promise.resolve();let an=null;var en;an=Ze.newRepresentation?{selectedRepresentation:(en=Ze).newRepresentation,currentMediaInfo:en.newMediaInfo}:b!==null&&j.areMediaInfosEqual(b,Ze.newMediaInfo)?(function(sn){return{currentMediaInfo:sn.newMediaInfo,selectedRepresentation:N.getCurrentRepresentation()}})(Ze):(function(sn){let Nn=NaN;return Nn=!K.get().streaming.abr.autoSwitchBitrate[sn.newMediaInfo.type]&&sn.previouslySelectedRepresentation?sn.previouslySelectedRepresentation.bitrateInKbit:le.getInitialBitrateFor(ae),{selectedRepresentation:le.getOptimalRepresentationForBitrate(sn.newMediaInfo,Nn,!1),currentMediaInfo:sn.newMediaInfo}})(Ze),En(an.currentMediaInfo),ne.trigger(),(function(sn){C&&sn.selectedRepresentation.dependentRepresentation&&(L.info("["+ae+"] selectMediaInfo : call selectMediaInfo on enhancementStreamProcessor for index = "+sn.selectedRepresentation.absoluteIndex),C.selectMediaInfo(new ja({newMediaInfo:sn.selectedRepresentation.mediaInfo,newRepresentation:sn.selectedRepresentation})))})(an);const pn=le.getPossibleVoRepresentations(b,!1);return N.updateData(pn,b.isFragmented,an.selectedRepresentation.id).then((()=>{(function(){const sn=N.getCurrentCompositeRepresentation();i.getIsBufferingCompleted()||i.updateBufferTimestampOffset(sn)})(),Lt()})).catch((sn=>{L.error(sn),Lt()}))}))}function En(Ze){j.areMediaInfosEqual(b,Ze)||ne.trigger(v.default.NEW_TRACK_SELECTED,{value:Ze}),b=Ze,le.handleNewMediaInfo(b),ne.trigger(f.default.MEDIAINFO_UPDATED,{mediaType:ae,streamId:Z.id,currentMediaInfo:b})}function yn(Ze){const Lt=Ze.newRepresentation,an=Ze.oldRepresentation,en=mn();Lt&&an||L.warn("_handleDifferentSwitchTypes() is missing the target representations"),Ze.reason&&Ze.reason.forceReplace?(function(pn,sn){V.abortRequests(),ne.trigger(f.default.BUFFER_REPLACEMENT_STARTED,{mediaType:ae,streamId:Z.id},{mediaType:ae,streamId:Z.id}),F.setShouldCheckPlaybackQuality(!1),i.prepareForForceReplacementQualitySwitch(pn,sn).then((()=>{nn()})).catch((()=>{nn()}))})(Lt,an):Ze&&Ze.reason&&Ze.reason.forceAbandon?(function(pn,sn){i.prepareForAbandonQualitySwitch(pn,sn).then((()=>{fn()})).catch((()=>{fn()}))})(Lt,an):!ge.getFastSwitchEnabled()||en&&en.isPartialSegment?it(Lt,an):(function(pn,sn){const Nn=Ee.getTime();let Un=1.5*(isNaN(pn.fragmentDuration)?1:pn.fragmentDuration);const Ia=V.getRequests({state:Oe.FRAGMENT_MODEL_EXECUTED,time:Nn+Un,threshold:0})[0];if(Ia&&!b.isText){const Aa=i.getBufferLevel(),Oa=le.getAbandonmentStateFor(Z.id,ae);Ia.bandwidth<pn.bandwidth&&Aa>=Un&&Oa===r.ALLOW_LOAD?i.prepareForFastQualitySwitch(pn,sn).then((()=>{Ue(Nn,Un)})).catch((()=>{Ue(Nn,Un)})):it(pn,sn)}else it(pn,sn)})(Lt,an),M.pushPlayListTraceMetrics(new Date,na.REPRESENTATION_SWITCH_STOP_REASON),M.createPlaylistTraceMetrics(Lt.id,1e3*Ee.getTime(),Ee.getPlaybackRate())}function nn(){be(),jt(),R=!1}function fn(){V.abortRequests(),H=!0,F.setShouldCheckPlaybackQuality(!1),F.startScheduleTimer(),R=!1}function Ue(Ze,Lt){V.abortRequests(),wt(Ze+Lt),F.setShouldCheckPlaybackQuality(!1),F.startScheduleTimer(),R=!1}function it(Ze,Lt){const an=V.getRequests({state:Oe.FRAGMENT_MODEL_LOADING});if(an&&an.length>0)return L.debug("Preparing for default quality switch: Waiting for ongoing segment request to be finished before applying switch."),w.newRepresentation=Ze,w.oldRepresentation=Lt,void(w.enabled=!0);i.prepareForDefaultQualitySwitch(Ze,Lt).then((()=>{nt()})).catch((()=>{nt()}))}function nt(){F.setShouldCheckPlaybackQuality(!1),b.segmentAlignment||b.subSegmentAlignment?F.startScheduleTimer():$e(),jt(),R=!1}function gt(Ze){L.info("onFragmentLoadingAbandoned request: "+Ze.request.url+" has been aborted"),Ee.isSeeking()||F.getSwitchTrack()||R||(L.info("onFragmentLoadingAbandoned request: "+Ze.request.url+" has to be downloaded again, origin is not seeking process or switch track call"),Ze.request&&Ze.request.isInitializationRequest()?F.setInitSegmentRequired(!0):wt(Ze.request.startTime+Ze.request.duration/2),F.startScheduleTimer(0))}function Ft(Ze){L.info("OnFragmentLoadingCompleted for stream id "+Z.id+" and media type "+ae+" - Url:",Ze.request?Ze.request.url:"undefined",Ze.request.range?", Range:"+Ze.request.range:""),b.isText&&F.startScheduleTimer(0),Ze.error&&Ze.request.serviceLocation&&(function(Lt){L.info("Fragment loading completed with an error"),Lt&&Lt.request&&Lt.request.type&&(Lt.request.type===De.HTTPRequest.INIT_SEGMENT_TYPE?_e({representationId:Lt.request.representation.id,sender:{}},!1):Lt.request.type===De.HTTPRequest.MEDIA_SEGMENT_TYPE&&(wt(Lt.request.startTime+Lt.request.duration/2),we(0,!1)))})(Ze)}function un(){wt(Ee.getTime()),Me().startScheduleTimer()}function Xe(Ze){const Lt=Ze.currentTrackInfo;if(!Lt)return;const an=P.find((en=>en.index===Lt.index&&en.lang===Lt.lang));an&&Zt(new ja({newMediaInfo:an})).then((()=>{i.setIsBufferingCompleted(!1),wt(Ee.getTime()),F.setInitSegmentRequired(!0),F.startScheduleTimer()}))}function ct(Ze){wt(Ze.quotaExceededTime),qe()}function kt(){return i?i.getBuffer():null}function Me(){return F}function qe(){F&&F.clearScheduleTimer()}function st(Ze=NaN){let Lt;return isNaN(Ze)?Lt=N?N.getCurrentRepresentation():null:((0,rt.checkInteger)(Ze),Lt=N?N.getRepresentationById(Ze):null),Lt}function Ge(){return!!i&&i.getIsBufferingCompleted()}function ht(Ze){if(!K.get().streaming.enableManifestTimescaleMismatchFix)return;const Lt=Ze.chunk,an=Lt.bytes,en=st(Lt.representation.id);en&&(en.timescale=O.getMediaTimescaleFromMoov(an))}function Tt(Ze){const Lt=Ze.chunk,an=Lt.bytes,en=st(Lt.representation.id);if(en){let pn;if(K.get().streaming.parseInbandPrft&&Ze.request.type===De.HTTPRequest.MEDIA_SEGMENT_TYPE){pn=pn||O.parse(an);const Un=(function(Ia,Aa){const Oa=Ia.getBoxes("prft"),fr=[];return Oa.forEach((Ja=>{fr.push((function(ha,Za){let pa="unknown";switch(ha.flags){case 0:pa=fe.default.PRODUCER_REFERENCE_TIME_TYPE.ENCODER;break;case 16:pa=fe.default.PRODUCER_REFERENCE_TIME_TYPE.APPLICATION;break;case 24:pa=fe.default.PRODUCER_REFERENCE_TIME_TYPE.CAPTURED}let Ra=1e3*ha.ntp_timestamp_sec+ha.ntp_timestamp_frac/2**32*1e3;return Ra=_f(ee).getInstance().ntpToUTC(Ra),{type:pa,ntpTimestamp:Ra,mediaTime:ha.media_time/Za}})(Ja,Aa))})),fr})(pn,en.timescale);Un&&Un.length&&ne.trigger(v.default.INBAND_PRFT,{data:Un},{streamId:Z.id,mediaType:ae})}const sn=j.getEventsFor(en.mediaInfo,null,Z),Nn=j.getEventsFor(en,en,Z);if(sn&&sn.length>0||Nn&&Nn.length>0){const Un=Ze.request;pn=pn||O.parse(an);const Ia=(function(Aa,Oa,fr,Ja){try{const ha={},Za=[],pa=fr.concat(Ja);for(let la=0,Sr=pa.length;la<Sr;la++)ha[pa[la].schemeIdUri+"/"+pa[la].value]=pa[la];const Ra=Aa.getBoxes("emsg");if(!Ra||Ra.length===0)return Za;const ya=Aa.getBox("sidx"),_r=!ya||isNaN(ya.earliest_presentation_time)||isNaN(ya.timescale)?Oa&&!isNaN(Oa.mediaStartTime)?Oa.mediaStartTime:0:ya.earliest_presentation_time/ya.timescale,Ri=Math.max(_r,0),Ci=N.getCurrentRepresentation();for(let la=0,Sr=Ra.length;la<Sr;la++){const mr=j.getEvent(Ra[la],ha,Ri,Ci);mr&&Za.push(mr)}return Za}catch{return[]}})(pn,Un,sn,Nn);ne.trigger(f.default.INBAND_EVENTS,{events:Ia},{streamId:Z.id})}}}function be(){const Ze=Ee.getTime();K.get().streaming.buffer.flushBufferAtTrackSwitch&&Ee.seek(Ze+.001,!1,!0),wt(Ze),i.setSeekTarget(Ze),F.startScheduleTimer()}function $e(){const Ze=Ee.getTime(),Lt=i.getContinuousBufferTimeForTargetTime(Ze);wt(isNaN(Lt)?Ze:Lt),F.startScheduleTimer()}function vt(Ze){Ze&&!isNaN(Ze.time)&&(wt(Ze.time),i.setSeekTarget(Ze.time))}function wt(Ze){d=Ze,U=!0}function mn(){return E.getLastSegment()}return k={checkAndHandleCompletedBuffering:Pe,clearScheduleTimer:qe,createBufferSinks:function(Ze,Lt){const an=kt();return an?Promise.resolve(an):i?i.createBufferSink(b,Ze,Lt):Promise.resolve(null)},dischargePreBuffer:function(){i.dischargePreBuffer()},finalisePlayList:function(Ze,Lt){M.pushPlayListTraceMetrics(Ze,Lt)},getAllMediaInfos:function(){return P},getBuffer:kt,getBufferController:function(){return i},getBufferLevel:function(){return i?i.getBufferLevel():0},getFragmentModel:function(){return V},getLastSegment:mn,getMediaInfo:function(){return b},getMediaSource:function(){return i.getMediaSource()},getRepresentation:st,getRepresentationController:function(){return N},getScheduleController:Me,getStreamId:z,getStreamInfo:function(){return Z},getType:ie,initialize:function(Ze,Lt,an){q=Wl(ee).create({events:f.default,eventBus:ne,streamInfo:Z,timelineConverter:X,dashConstants:fe.default,segmentBaseController:l.segmentBaseController,type:ae}),E=Hl(ee).create({baseURLController:l.baseURLController,boxParser:O,constants:c.default,dashConstants:fe.default,dashMetrics:M,debug:(0,u.default)(ee).getInstance(),errHandler:ce,errors:Gt,eventBus:ne,events:f.default,mediaPlayerModel:ge,segmentsController:q,settings:K,streamInfo:Z,timelineConverter:X,type:ae,urlUtils:Dn(ee).getInstance()}),S=Z.manifestInfo.isDynamic,E.initialize(S),le.registerStreamType(ae,k),N=bf(ee).create({abrController:le,adapter:j,dashConstants:fe.default,dashMetrics:M,errors:Gt,eventBus:ne,events:f.default,isDynamic:S,playbackController:Ee,segmentsController:q,streamInfo:Z,timelineConverter:X,type:ae}),i=(function(en,pn){let sn=null;return en?(sn=en!==c.default.TEXT||pn?mf(ee).create({abrController:le,capabilities:D,errHandler:ce,fragmentModel:V,manifestModel:me,mediaController:ue,mediaPlayerModel:ge,playbackController:Ee,representationController:N,settings:K,streamInfo:Z,textController:W,type:en}):gf(ee).create({errHandler:ce,fragmentModel:V,mimeType:Ie,settings:K,streamInfo:Z,textController:W,type:en}),sn):(ce.error(new Bt.default(Gt.MEDIASOURCE_TYPE_UNSUPPORTED_CODE,Gt.MEDIASOURCE_TYPE_UNSUPPORTED_MESSAGE+"not properly defined")),null)})(ae,an),i&&i.initialize(Ze),F=hf(ee).create({abrController:le,adapter:j,bufferController:i,dashMetrics:M,fragmentModel:V,mediaController:ue,mediaPlayerModel:ge,mimeType:Ie,playbackController:Ee,representationController:N,settings:K,streamInfo:Z,textController:W,type:ae}),y=Lt,F.initialize(Lt),d=0,U=!1,H=!1},isBufferingCompleted:Ge,prepareInnerPeriodPlaybackSeeking:function(Ze){return new Promise((Lt=>{if(i.hasBufferAtTime(Ze.seekTime))return i.pruneBuffer(),pe(i.getContinuousBufferTimeForTargetTime(Ze.seekTime))&&i.setIsBufferingCompleted(!0),void Lt();qe(),V.abortRequests(),i.prepareForPlaybackSeek().then((()=>{const an=i.getAllRangesWithSafetyFactor(Ze.seekTime);return i.clearBuffers(an)})).then((()=>{const an=i.getContinuousBufferTimeForTargetTime(Ze.seekTime);if(pe(an))i.setIsBufferingCompleted(!0),Lt();else{const en=isNaN(an)?Ze.seekTime:an;wt(en),i.setSeekTarget(en);const pn=[];pn.push(i.updateAppendWindow());const sn=st();pn.push(i.updateBufferTimestampOffset(sn)),Promise.all(pn).then((()=>{F.setInitSegmentRequired(!0),F.setShouldCheckPlaybackQuality(!1),F.startScheduleTimer(),Lt()}))}})).catch((an=>{L.error(an)}))}))},prepareOuterPeriodPlaybackSeeking:function(){return new Promise(((Ze,Lt)=>{try{qe(),V.abortRequests(),i.prepareForPlaybackSeek().then((()=>i.pruneAllSafely())).then((()=>{Ze()}))}catch(an){Lt(an)}}))},prepareQualityChange:function(Ze){Ze.newRepresentation&&((function(Lt){if(C)C.prepareQualityChange(Lt);else if(ae===c.default.ENHANCEMENT){const an=Lt.oldRepresentation.mediaInfo.type,en=Lt.newRepresentation.mediaInfo.type;if(an===c.default.ENHANCEMENT&&en===c.default.VIDEO)return L.info("Stop "+ae+" stream processor"),F.reset(),!0;if(an===c.default.VIDEO&&en===c.default.ENHANCEMENT)return L.info("Start "+ae+" stream processor"),Zt(new ja({newMediaInfo:Lt.newRepresentation.mediaInfo,newRepresentation:Lt.newRepresentation})).then((()=>{F.setup(),F.initialize(y),F.startScheduleTimer()})),!0}return!1})(Ze)||(w&&w.enabled&&L.warn(`Canceling queued representation switch to ${w.newRepresentation.id} for ${ae}`),Ze.isAdaptationSetSwitch?(L.debug(`Preparing quality switch to different AdaptationSet for type ${ae} from representation id ${Ze.oldRepresentation.id} to ${Ze.newRepresentation.id}`),(function(Lt){const an=Lt.newRepresentation;R=!0,qe(),F.setSwitchTrack(!0);const en=an.mediaInfo;En(en),Zt(new ja({newMediaInfo:en,newRepresentation:an})).then((()=>{yn(Lt)}))})(Ze)):(L.debug(`Preparing quality within the same AdaptationSet for type ${ae} from representation id ${Ze.oldRepresentation.id} to ${Ze.newRepresentation.id}`),(function(Lt){const an=Lt.newRepresentation;R=!0,qe(),N.prepareQualityChange(an),yn(Lt)})(Ze))))},prepareTrackSwitch:function(Ze,Lt=!1){return new Promise((an=>{L.debug(`Preparing track switch for type ${ae}`);const en=ae===c.default.TEXT||Lt||K.get().streaming.trackSwitchMode[ae]===c.default.TRACK_SWITCH_MODE_ALWAYS_REPLACE&&Ee.getTimeToStreamEnd(Z)>K.get().streaming.buffer.stallThreshold;i.getIsBufferingCompleted()&&!en?(function(pn){return new Promise((sn=>{const Nn=N.getCurrentRepresentation();i.prepareForNonReplacementTrackSwitch(Nn,pn).then((()=>{ne.trigger(f.default.BUFFERING_COMPLETED,{},{streamId:Z.id,mediaType:ae}),sn()})).catch((()=>{ne.trigger(f.default.BUFFERING_COMPLETED,{},{streamId:Z.id,mediaType:ae}),sn()}))}))})(Ze).then((()=>{an()})):(F.setSwitchTrack(!0),en?(function(pn){return new Promise((sn=>{ne.trigger(f.default.BUFFER_REPLACEMENT_STARTED,{mediaType:ae,streamId:Z.id},{mediaType:ae,streamId:Z.id}),V.abortRequests();const Nn=st();i.prepareForReplacementTrackSwitch(Nn,pn).then((()=>{be(),sn()})).catch((()=>{be(),sn()}))}))})(Ze).then((()=>{an()})):(function(pn){return new Promise((sn=>{const Nn=()=>{const Un=V.getRequests({state:Oe.FRAGMENT_MODEL_LOADING});if(Un&&Un.length!==0)ne.once(v.default.FRAGMENT_LOADING_COMPLETED,Nn,k);else{const Ia=st();i.prepareForNonReplacementTrackSwitch(Ia,pn).then((()=>{$e(),sn()})).catch((Aa=>{L.error(Aa),$e(),sn()}))}};Nn()}))})(Ze).then((()=>{an()})))}))},probeNextRequest:function(){const Ze=st();return E.getNextSegmentRequestIdempotent(b,Ze)},reset:function(Ze,Lt){E&&E.reset(),i&&(i.reset(Ze,Lt),i=null),F&&(F.reset(),F=null),N&&(N.reset(),N=null),q&&(q=null),le&&le.unRegisterStreamType(z(),ae),ne.off(f.default.BUFFER_CLEARED,ut,k),ne.off(f.default.BUFFER_LEVEL_STATE_CHANGED,et,k),ne.off(f.default.BYTES_APPENDED_END_FRAGMENT,dt,k),ne.off(f.default.FRAGMENT_LOADING_ABANDONED,gt,k),ne.off(f.default.FRAGMENT_LOADING_COMPLETED,Ft,k),ne.off(f.default.INIT_FRAGMENT_LOADED,ht,k),ne.off(f.default.INIT_FRAGMENT_NEEDED,_e,k),ne.off(f.default.MEDIA_FRAGMENT_LOADED,Tt,k),ne.off(f.default.MEDIA_FRAGMENT_NEEDED,we,k),ne.off(f.default.QUOTA_EXCEEDED,ct,k),ne.off(f.default.SEEK_TARGET,vt,k),ne.off(f.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,un,k),ne.off(f.default.SET_NON_FRAGMENTED_TEXT,Xe,k),ne.off(f.default.SOURCE_BUFFER_ERROR,qt,k),de(),ae=null,Z=null},selectMediaInfo:Zt,setEnhancementStreamProcessor:function(Ze){C=Ze,L.info("enhancementStreamProcessor = "+C)},setExplicitBufferingTime:wt,setMediaInfoArray:function(Ze){P=Ze},setMediaSource:function(Ze){return i.setMediaSource(Ze,b)},setTrackSwitchInProgress:function(Ze){Q=Ze},updateStreamInfo:function(Ze){return Z=Ze,Ge()?Promise.resolve():i.updateAppendWindow()}},L=(0,u.default)(ee).getInstance().getLogger(k),de(),ne.on(f.default.BUFFER_CLEARED,ut,k),ne.on(f.default.BUFFER_LEVEL_STATE_CHANGED,et,k),ne.on(f.default.BYTES_APPENDED_END_FRAGMENT,dt,k),ne.on(f.default.FRAGMENT_LOADING_ABANDONED,gt,k),ne.on(f.default.FRAGMENT_LOADING_COMPLETED,Ft,k),ne.on(f.default.INIT_FRAGMENT_LOADED,ht,k),ne.on(f.default.INIT_FRAGMENT_NEEDED,_e,k),ne.on(f.default.MEDIA_FRAGMENT_LOADED,Tt,k),ne.on(f.default.MEDIA_FRAGMENT_NEEDED,we,k),ne.on(f.default.QUOTA_EXCEEDED,ct,k),ne.on(f.default.SEEK_TARGET,vt,k),ne.on(f.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,un,k),ne.on(f.default.SET_NON_FRAGMENTED_TEXT,Xe,k),ne.on(f.default.SOURCE_BUFFER_ERROR,qt,k),k}Xl.__dashjs_factory_name="StreamProcessor";var Sf=o.default.getClassFactory(Xl),kf=class{constructor(){this.url=null,this.width=null,this.height=null,this.x=null,this.y=null}},If=class{constructor(){this.bitrate=0,this.width=0,this.height=0,this.tilesHor=0,this.tilesVert=0,this.widthPerTile=0,this.heightPerTile=0,this.startNumber=0,this.segmentDuration=0,this.timescale=0,this.templateUrl="",this.id=""}};function Jl(l){const i=this.context,d=l.adapter,y=l.baseURLController,b=l.streamInfo,E=l.timelineConverter,C=l.debug,k=l.eventBus,S=l.events,L=l.dashConstants,P=Dn(i).getInstance();let w,R,N,F,q,H,U,Q,ee;function ne(j,O){const D=new If;D.id=j.id,D.bitrate=j.bandwidth,D.width=j.width,D.height=j.height,D.tilesHor=1,D.tilesVert=1,j.essentialProperties&&j.essentialProperties.forEach((M=>{if(c.default.THUMBNAILS_SCHEME_ID_URIS.indexOf(M.schemeIdUri)>=0&&M.value){const ce=M.value.split("x");ce.length!==2||isNaN(ce[0])||isNaN(ce[1])||(D.tilesHor=parseInt(ce[0],10),D.tilesVert=parseInt(ce[1],10))}})),O?U.updateSegmentData(j).then((M=>{(function(ce,V,me){let ue=[];const ge=(function(Ie,Ee){const B=[];let K,Z,W,X,ae=0;for(K=0,Z=Ie.segments.length;K<Z;K++)W=Ie.segments[K],X=ps({durationInTimescale:W.duration,fTimescale:W.timescale,index:ae,isDynamic:d.getIsDynamic(),mediaRange:W.mediaRange,mediaTime:W.startTime,mediaUrl:W.media,representation:Ee,timelineConverter:E}),X&&(B.push(X),X=null,ae++);return B})(me,V);V.segments=ge,V.fragmentDuration=V.segmentDuration||(V.segments&&V.segments.length>0?V.segments[0].duration:NaN),ce.segmentDuration=V.segments[0].duration,ce.readThumbnail=function(Ie,Ee){let B=null;ue.some((K=>{if(K.start<=Ie&&K.end>Ie)return B=K.url,!0})),B?Ee(B):V.segments.some((K=>{if(K.mediaStartTime<=Ie&&K.mediaStartTime+K.duration>Ie){const Z=y.resolve(V.path),W=new ts({method:"get",url:Z.url,responseType:"arraybuffer",customData:{request:{range:K.mediaRange},onloadend:function(ae){let z=ee.getSamplesInfo(ae.target.response),ie=new Blob([ae.target.response.slice(z.sampleList[0].offset,z.sampleList[0].offset+z.sampleList[0].size)],{type:"image/jpeg"}),de=window.URL.createObjectURL(ie);ue.push({start:K.mediaStartTime,end:K.mediaStartTime+K.duration,url:de}),Ee&&Ee(de)}}}),X=new ns({request:W});return Q.load(W,X),!0}}))}})(D,j,M)})):(D.startNumber=j.startNumber,D.segmentDuration=j.segmentDuration,D.timescale=j.timescale,D.templateUrl=(function(M){const ce=P.isRelative(M.media)?P.resolve(M.media,y.resolve(M.path).url):M.media;return ce?$r(ce,M.id):""})(j)),D.tilesHor>0&&D.tilesVert>0&&(D.widthPerTile=D.width/D.tilesHor,D.heightPerTile=D.height/D.tilesVert,R.push(D))}function le(){R=[],N=[],q=-1,H=null,F&&(F.reset(),F=null)}return w={addTracks:function(){if(!b||!d||(H=d.getMediaInfoForType(b,c.default.IMAGE),!H))return;const j=d.getVoRepresentations(H);j&&j.length>0&&j.forEach((O=>{(O.segmentInfoType===fe.default.SEGMENT_TEMPLATE&&O.segmentDuration>0&&O.media||O.segmentInfoType===fe.default.SEGMENT_TIMELINE)&&ne(O),O.segmentInfoType===fe.default.SEGMENT_BASE&&ne(O,!0),N.push(O)})),R.length>0&&R.sort(((O,D)=>O.bitrate-D.bitrate))},getCurrentTrack:function(){return q<0?null:R[q]},getCurrentTrackIndex:function(){return q},getRepresentations:function(){return N},getThumbnailRequestForTime:function(j){let O;const D=d.getVoRepresentations(H);for(let M=0;M<D.length;M++)if(R[q].id===D[M].id){O=D[M];break}return F.getSegmentRequestForTime(H,O,j)},getTracks:function(){return R},reset:le,setTrackById:function(j){if(!R||R.length===0)return;const O=R.findIndex((D=>D.id===j));O!==-1&&(q=O)},setTrackByIndex:function(j){R&&R.length!==0&&(j>=R.length&&(j=R.length-1),q=j)}},le(),Q=Kt(i).create({}),ee=yi(i).getInstance(),U=Wl(i).create({events:S,eventBus:k,streamInfo:b,timelineConverter:E,dashConstants:L,dashMetrics:l.dashMetrics,segmentBaseController:l.segmentBaseController,type:c.default.IMAGE}),F=Hl(i).create({streamInfo:b,type:c.default.IMAGE,timelineConverter:E,segmentsController:U,baseURLController:y,debug:C,eventBus:k,events:S,dashConstants:L,urlUtils:P}),F.initialize(!!d&&d.getIsDynamic()),w}Jl.__dashjs_factory_name="ThumbnailTracks";var Af=o.default.getClassFactory(Jl);function Zl(l){const i=this.context,d=l.streamInfo;let y,b;function E(k){b.setTrackByIndex(k)}function C(){b&&b.reset()}return y={getCurrentTrack:function(){return b.getCurrentTrack()},getCurrentTrackIndex:function(){return b.getCurrentTrackIndex()},getPossibleVoRepresentations:function(){return b.getRepresentations()},getStreamId:function(){return d.id},initialize:function(){b.addTracks();const k=b.getTracks();k&&k.length>0&&E(0)},provide:function(k,S){if(typeof S!="function")return;const L=b.getCurrentTrack();let P,w;if(!L||L.segmentDuration<=0||k==null)return void S(null);w=b.getThumbnailRequestForTime(k),w&&(L.segmentDuration=w.duration),P=k%L.segmentDuration;const R=Math.floor(P*L.tilesHor*L.tilesVert/L.segmentDuration),N=new kf;if(N.width=Math.floor(L.widthPerTile),N.height=Math.floor(L.heightPerTile),N.x=Math.floor(R%L.tilesHor)*L.widthPerTile,N.y=Math.floor(R/L.tilesHor)*L.heightPerTile,"readThumbnail"in L)return L.readThumbnail(k,(F=>{N.url=F,S(N)}));if(w)N.url=w.url,L.segmentDuration=NaN;else{const F=Math.floor(k/L.segmentDuration);N.url=(function(q,H){const U=H+q.startNumber;return $r(q.templateUrl,void 0,U,void 0,q.bandwidth,(U-1)*q.segmentDuration*q.timescale)})(L,F)}S(N)},reset:C,setTrackByIndex:E,setTrackById:function(k){b.setTrackById(k)}},C(),b=Af(i).create({streamInfo:d,adapter:l.adapter,baseURLController:l.baseURLController,timelineConverter:l.timelineConverter,debug:l.debug,eventBus:l.eventBus,events:l.events,dashConstants:l.dashConstants,dashMetrics:l.dashMetrics,segmentBaseController:l.segmentBaseController}),y}Zl.__dashjs_factory_name="ThumbnailController";var Rf=o.default.getClassFactory(Zl);const Cf=[c.default.VIDEO,c.default.AUDIO,c.default.TEXT,c.default.MUXED,c.default.IMAGE];function eu(l){l=l||{};const i=this.context,d=(0,T.default)(i).getInstance(),y=Dn(i).getInstance(),b=l.manifestModel,E=l.mediaPlayerModel,C=l.dashMetrics,k=l.manifestUpdater,S=l.adapter,L=l.timelineConverter,P=l.capabilities,w=l.errHandler,R=l.abrController,N=l.playbackController,F=l.throughputController,q=l.eventController,H=l.mediaController,U=l.protectionController,Q=l.textController,ee=l.videoModel;let ne=l.streamInfo;const le=l.settings;let j,O,D,M,ce,V,me,ue,ge,Ie,Ee,B,K,Z,W,X;function ae(Xe,ct,kt){return new Promise(((Me,qe)=>{et(),qt();let st=ee.getElement();const Ge=[];Cf.forEach((ht=>{if((ht!==c.default.TEXT||Xe)&&(ht!==c.default.VIDEO||!st||st&&/^VIDEO$/i.test(st.nodeName))){const Tt=kt.find((be=>be.mediaInfo.type===ht));Ge.push(z(ht,Xe,Tt))}})),Promise.all(Ge).then((()=>(function(ht){return new Promise((Tt=>{const be={},$e=Z.map((vt=>{const wt=vt.getRepresentation();return vt.createBufferSinks(ht,wt)}));Promise.all($e).then((vt=>{vt.forEach((wt=>{wt&&(be[wt.getType()]=wt)})),Tt(be)})).catch((()=>{Tt(be)}))}))})(ct))).then((ht=>{if(Z.length===0){const Tt="No streams to play.";w.error(new Bt.default(Gt.MANIFEST_ERROR_ID_NOSTREAMS_CODE,Tt,b.getValue())),Ee.fatal(Tt)}else gt();Xe&&Q.createTracks(ne),Me(ht)})).catch((ht=>{qe(ht)}))}))}function z(Xe,ct,kt){let Me,qe=S.getAllMediaInfoForType(ne,Xe),st=[],Ge=null,ht=-1;if(!qe||qe.length===0)return Ee.info("No "+Xe+" data."),Promise.resolve();Xe===c.default.VIDEO&&(V=!0),Xe===c.default.AUDIO&&(M=!0);for(let be=0,$e=qe.length;be<$e;be++)Ge=qe[be],Xe===c.default.TEXT&&Ge.isEmbedded&&(Q.addEmbeddedTrack(ne,Ge),st.push(Ge)),ie(Ge)&&H.addTrack(Ge),Ge.type===c.default.ENHANCEMENT&&(ht=be);if(st.length>0&&(H.setInitialMediaSettingsForType(Xe,ne),Q.addMediaInfosToBuffer(ne,Xe,st)),qe=qe.filter((be=>!be.isEmbedded)),qe.length===0)return Promise.resolve();if(Xe===c.default.IMAGE)return W=Rf(i).create({streamInfo:ne,adapter:S,baseURLController:l.baseURLController,timelineConverter:l.timelineConverter,debug:O,eventBus:d,events:f.default,dashConstants:fe.default,dashMetrics:l.dashMetrics,segmentBaseController:l.segmentBaseController}),W.initialize(),Promise.resolve();d.trigger(f.default.STREAM_INITIALIZING,{streamInfo:ne,mediaInfo:Ge}),H.setInitialMediaSettingsForType(Xe,ne);let Tt=de(qe,ct,Xe);if(ht>=0){let be=new of(d);be.open(),be.duration=ne.manifestInfo.duration;let $e=de(qe,be,c.default.ENHANCEMENT);$e.selectMediaInfo(new ja({newMediaInfo:qe[ht]})),Tt.setEnhancementStreamProcessor($e)}if(Me=H.getCurrentTrackFor(Xe,ne.id),Me){const be=Xe===c.default.TEXT&&Me.isEmbedded?qe[0]:Me,$e=new ja({newMediaInfo:be,previouslySelectedRepresentation:kt});return Tt.selectMediaInfo($e)}return Promise.resolve()}function ie(Xe){const ct=Xe?Xe.type:null;let kt;return ct===c.default.MUXED?(kt="Multiplexed representations are intentionally not supported, as they are not compliant with the DASH-AVC/264 guidelines",Ee.fatal(kt),w.error(new Bt.default(Gt.MANIFEST_ERROR_ID_MULTIPLEXED_CODE,kt,b.getValue())),!1):!(ct!==c.default.TEXT&&ct!==c.default.IMAGE&&Xe.contentProtection&&Xe.contentProtection.length>0&&!P.supportsEncryptedMedia()&&(w.error(new Bt.default(Gt.CAPABILITY_MEDIAKEYS_ERROR_CODE,Gt.CAPABILITY_MEDIAKEYS_ERROR_MESSAGE)),1))}function de(Xe,ct,kt){const Me=Xe&&Xe.length>0?Xe.filter((be=>be.type===kt))[0]:null;let qe=D.getModel(Me?Me.type:null);const st=Me?Me.type:null,Ge=Me?Me.mimeType:null,ht=Me?Me.isFragmented:null;let Tt=Sf(i).create({abrController:R,adapter:S,baseURLController:l.baseURLController,boxParser:j,capabilities:P,dashMetrics:l.dashMetrics,errHandler:w,fragmentModel:qe,manifestModel:b,mediaController:H,mediaPlayerModel:E,mimeType:Ge,playbackController:N,segmentBaseController:l.segmentBaseController,segmentBlacklistController:K,settings:le,streamInfo:ne,textController:Q,throughputController:F,timelineConverter:L,type:st});return Tt.initialize(ct,V,ht),Z.push(Tt),Tt.setMediaInfoArray(Xe),st===c.default.TEXT&&Q.addMediaInfosToBuffer(ne,st,Xe,qe),Tt}function pe(Xe){let ct=Z?Z.length:0;for(let kt=0;kt<ct;kt++){let Me=Z[kt].getFragmentModel();Me.abortRequests(),Me.resetInitialSettings(),Z[kt].reset(!1,Xe)}Q&&Q.deactivateStream(ne),W&&(W.reset(),W=null),Z=[],ue=!1,ce=!1,Ft(!1),we(!1),d.trigger(f.default.STREAM_DEACTIVATED,{streamInfo:ne})}function _e(Xe){pe(Xe),Ie=!1,V=!1,M=!1,ge=!1,X=[]}function we(Xe){ge=Xe}function Pe(){return ne?ne.start:NaN}function Ke(){return ne?ne.id:null}function et(){if(!ee||!R)throw new Error(c.default.MISSING_CONFIG_ERROR)}function ut(Xe){Xe.error&&(w.error(Xe.error),Ee.fatal(Xe.error.message))}function qt(){if(q){const Xe=S.getEventsFor(ne);Xe&&Xe.length>0&&q.addInlineEvents(Xe,ne.id)}}function dt(Xe){let ct=jt(Xe);return ct?ct.getMediaInfo():null}function jt(Xe){return Xe?Z.find((ct=>ct.getType()===Xe)):null}function Zt(){let Xe=it();const ct=Xe.length;if(ct!==0){for(let kt=0;kt<ct;kt++)if(!Xe[kt].isBufferingCompleted()&&(Xe[kt].getType()===c.default.AUDIO||Xe[kt].getType()===c.default.VIDEO))return void Ee.debug("onBufferingCompleted - One streamProcessor has finished but",Xe[kt].getType(),"one is not buffering completed");Ee.debug("onBufferingCompleted - trigger STREAM_BUFFERING_COMPLETED"),ce=!0,d.trigger(f.default.STREAM_BUFFERING_COMPLETED,{streamInfo:ne},{streamInfo:ne})}else Ee.warn("onBufferingCompleted - can't trigger STREAM_BUFFERING_COMPLETED because no streamProcessor is defined")}function En(Xe){q&&q.addInbandEvents(Xe.events,ne.id)}function yn(){gt()}function nn(){qt()}function fn(Xe){return Xe&&Xe.type?Ue(Xe.type):null}function Ue(Xe){return Xe?it().filter((function(ct){return ct.getType()===Xe}))[0]:null}function it(){let Xe,ct,kt=[];for(let Me=0;Me<Z.length;Me++)ct=Z[Me],Xe=ct.getType(),Xe!==c.default.AUDIO&&Xe!==c.default.VIDEO&&Xe!==c.default.TEXT&&Xe!==c.default.ENHANCEMENT||kt.push(ct);return kt}function nt(){const Xe=Z.length;for(let ct=0;ct<Xe&&Z[ct];ct++)Z[ct].getScheduleController().startScheduleTimer()}function gt(){const Xe=Z.length;if(U){U.clearMediaInfoArray();for(let ct=0;ct<Xe&&Z[ct];ct++){const kt=Z[ct].getType(),Me=Z[ct].getMediaInfo();if(kt===c.default.AUDIO||kt===c.default.VIDEO||kt===c.default.TEXT&&Me&&Me.isFragmented){let qe=Z[ct].getMediaInfo();qe&&U.initializeForMedia(qe)}}U.handleKeySystemFromManifest()}Ie||(Ie=!0,ee.waitForReadyState(c.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(()=>{d.trigger(f.default.STREAM_INITIALIZED,{streamInfo:ne})})))}function Ft(Xe){B=Xe}function un(){return B}return me={activate:function(Xe,ct,kt=[]){return new Promise(((Me,qe)=>{if(!ue)return un()?(ue=!0,d.trigger(f.default.STREAM_ACTIVATED,{streamInfo:ne}),void Me()):void(function(st,Ge,ht=[]){return ae(st,Ge,ht)})(Xe,ct,kt).then((()=>{ue=!0,kt&&kt.length>0&&nt(),d.trigger(f.default.STREAM_ACTIVATED,{streamInfo:ne}),Me()})).catch((st=>{qe(st)}));Me()}))},checkAndHandleCompletedBuffering:function(){ce||Z.forEach((Xe=>{Xe.checkAndHandleCompletedBuffering()}))},deactivate:pe,getAdapter:function(){return S},getCurrentMediaInfoForType:function(Xe){const ct=Ue(Xe);return ct?ct.getMediaInfo():null},getCurrentRepresentationForType:function(Xe){const ct=Ue(Xe);return ct?ct.getRepresentation():null},getDuration:function(){return ne?ne.duration:NaN},getHasAudioTrack:function(){return M},getHasFinishedBuffering:function(){return ce},getHasVideoTrack:function(){return V},getId:Ke,getIsActive:function(){return ue},getIsEndedEventSignaled:function(){return ge},getPreloaded:un,getRepresentationForTypeById:function(Xe,ct){let kt;if(Xe===c.default.IMAGE){if(!W)return null;kt=W.getPossibleVoRepresentations()}else kt=(function(st){let Ge=jt(st);return Ge?Ge.getAllMediaInfos():[]})(Xe).flatMap((st=>R.getPossibleVoRepresentationsFilteredBySettings(st,!0)));if(!kt||kt.length===0)return null;const Me=kt.filter((qe=>qe.id===ct));return Me&&Me.length>0?Me[0]:null},getRepresentationForTypeByIndex:function(Xe,ct){let kt;if(Xe===c.default.IMAGE){if(!W)return null;kt=W.getPossibleVoRepresentations()}else{const Me=dt(Xe);kt=R.getPossibleVoRepresentationsFilteredBySettings(Me,!0)}return kt[ct=Math.max(Math.min(ct,kt.length-1),0)]},getRepresentationsByType:function(Xe){if(et(),Xe===c.default.IMAGE)return W?W.getPossibleVoRepresentations():[];const ct=dt(Xe);return R.getPossibleVoRepresentationsFilteredBySettings(ct,!0)},getStartTime:Pe,getStreamId:function(){return ne?ne.id:null},getStreamInfo:function(){return ne},getStreamProcessors:it,getThumbnailController:function(){return W},initialize:function(){d.on(f.default.BUFFERING_COMPLETED,Zt,me),d.on(f.default.INBAND_EVENTS,En,me),d.on(f.default.DATA_UPDATE_COMPLETED,yn,me),d.on(v.default.PLAYBACK_SEEKED,nn,me),U&&(d.on(f.default.KEY_ERROR,ut,me),d.on(f.default.SERVER_CERTIFICATE_UPDATED,ut,me),d.on(f.default.LICENSE_REQUEST_COMPLETE,ut,me),d.on(f.default.KEY_SYSTEM_SELECTED,ut,me),d.on(f.default.KEY_SESSION_CREATED,ut,me)),Q.initializeForStream(ne),d.trigger(f.default.STREAM_UPDATED,{streamInfo:ne})},initializeForTextWithMediaSource:function(Xe){return new Promise(((ct,kt)=>{z(c.default.TEXT,Xe,null).then((()=>(function(){const Me=Ue(c.default.TEXT);return Me?Me.createBufferSinks():Promise.resolve()})())).then((()=>{Q.createTracks(ne),ct()})).catch((Me=>{kt(Me)}))}))},prepareQualityChange:function(Xe){const ct=Ue(Xe.mediaType);ct&&ct.prepareQualityChange(Xe)},prepareTrackChange:function(Xe){if(!ue||!ne)return;ce=!1;let ct=Xe.newMediaInfo,kt=b.getValue(),Me=fn(ct);if(!Me)return;let qe=N.getTime();if(Ee.info("Stream -  Process track changed at current time "+qe),kt.refreshManifestOnSwitchTrack)X.push(Xe),k.getIsUpdating()||(Ee.debug("Stream -  Refreshing manifest for switch track"),k.refreshManifest());else{Me.clearScheduleTimer(),Me.setTrackSwitchInProgress(!0);const st=Me.getRepresentation();Me.selectMediaInfo(new ja({newMediaInfo:ct})).then((()=>{const Ge=!!(Xe&&Xe.options&&Xe.options.hasOwnProperty("replaceBuffer"))&&Xe.options.replaceBuffer;return Me.prepareTrackSwitch(st,Ge)})).then((()=>{Me.setTrackSwitchInProgress(!1)}))}},reset:function(Xe){D&&(D.reset(),D=null),R&&ne&&R.clearDataForStream(ne.id),K&&(K.reset(),K=null),Q&&ne&&Q.clearDataForStream(ne.id),H&&ne&&H.clearDataForStream(ne.id),_e(Xe),ne=null,d.off(f.default.BUFFERING_COMPLETED,Zt,me),d.off(f.default.INBAND_EVENTS,En,me),d.off(f.default.DATA_UPDATE_COMPLETED,yn,me),d.off(v.default.PLAYBACK_SEEKED,nn,me),U&&(d.off(f.default.KEY_ERROR,ut,me),d.off(f.default.SERVER_CERTIFICATE_UPDATED,ut,me),d.off(f.default.LICENSE_REQUEST_COMPLETE,ut,me),d.off(f.default.KEY_SYSTEM_SELECTED,ut,me),d.off(f.default.KEY_SESSION_CREATED,ut,me))},setIsEndedEventSignaled:we,setMediaSource:function(Xe){return new Promise(((ct,kt)=>{const Me=[];for(let qe=0;qe<Z.length;)ie(Z[qe].getMediaInfo())?(Me.push(Z[qe].setMediaSource(Xe)),qe++):(Z[qe].reset(),Z.splice(qe,1));Promise.all(Me).then((()=>{for(let qe=0;qe<Z.length;qe++)Z[qe].dischargePreBuffer();if(Z.length===0){const qe="No streams to play.";w.error(new Bt.default(Gt.MANIFEST_ERROR_ID_NOSTREAMS_CODE,qe+"nostreams",b.getValue())),Ee.fatal(qe)}ct()})).catch((qe=>{Ee.error(qe),kt(qe)}))}))},startPreloading:function(Xe,ct,kt=[]){return new Promise(((Me,qe)=>{un()?qe():(Ee.info(`[startPreloading] Preloading next stream with id ${Ke()}`),Ft(!0),ae(Xe,ct,kt).then((()=>{for(let st=0;st<Z.length&&Z[st];st++)Z[st].setExplicitBufferingTime(Pe()),Z[st].getScheduleController().startScheduleTimer();Me()})).catch((()=>{Ft(!1),qe()})))}))},startScheduleControllers:nt,triggerProtectionError:function(Xe){ut(Xe)},updateData:function(Xe){return new Promise((ct=>{ne=Xe,q&&qt();let kt,Me=[];for(let qe=0,st=Z.length;qe<st;qe++){let Ge=Z[qe];const ht=Ge.getMediaInfo();Me.push(Ge.updateStreamInfo(ne));let Tt=S.getAllMediaInfoForType(ne,Ge.getType());if(Tt=Tt.filter((be=>!be.isEmbedded)),Ge.setMediaInfoArray(Tt),Tt)for(let be=0;be<Tt.length;be++)S.areMediaInfosEqual(ht,Tt[be])&&Me.push(Ge.selectMediaInfo(new ja({newMediaInfo:Tt[be]})))}Promise.all(Me).then((()=>{let qe=[];for(;X.length>0;){let st=X.pop(),Ge=st.newMediaInfo;if(kt=fn(st.oldMediaInfo),!kt)return;const ht=kt.getRepresentation();kt.setTrackSwitchInProgress(!0),qe.push(kt.prepareTrackSwitch(ht)),qe.push(kt.selectMediaInfo(new ja({newMediaInfo:Ge})))}return Promise.all(qe)})).then((()=>{gt(),kt&&kt.setTrackSwitchInProgress(!1),d.trigger(f.default.STREAM_UPDATED,{streamInfo:ne}),ct()})).catch((qe=>{w.error(qe)}))}))}},(function(){try{O=(0,u.default)(i).getInstance(),Ee=O.getLogger(me),_e(),j=yi(i).getInstance(),K=Qt(i).create({updateEventName:f.default.SEGMENT_LOCATION_BLACKLIST_CHANGED,addBlacklistEventName:f.default.SEGMENT_LOCATION_BLACKLIST_ADD}),D=df(i).create({streamInfo:ne,mediaPlayerModel:E,dashMetrics:C,errHandler:w,settings:le,boxParser:j,dashConstants:fe.default,urlUtils:y})}catch(Xe){throw Xe}})(),me}eu.__dashjs_factory_name="Stream";var Nf=o.default.getClassFactory(eu);function bs(){const l=this.context,i=(0,T.default)(l).getInstance(),d=Dn(l).getInstance();let y,b,E,C,k,S,L,P,w,R,N,F,q,H,U,Q;function ee(){P=[],w=[],R=null,N=null,q=null,F=NaN,E=!1,C=!1,H=k.get().streaming.utcSynchronization.timeBetweenSyncAttempts}function ne(){k.get().streaming.utcSynchronization.enabled&&!E&&!C&&q&&q.value&&q.schemeIdUri&&!isNaN(F)&&!isNaN(k.get().streaming.utcSynchronization.backgroundAttempts)&&(N&&(Date.now()-N)/1e3<30||(P=[],C=!0,le(isNaN(k.get().streaming.utcSynchronization.backgroundAttempts)?2:k.get().streaming.utcSynchronization.backgroundAttempts)))}function le(Z){try{if(Z<=0)return void B();const W=Date.now();S[q.schemeIdUri](q.value,(function(X){const ae=Date.now(),z=O(W,ae,X);P.push(z),le(Z-1)}),(function(){B()}))}catch{B()}}function j(Z=null){let W=Z||0;if(!w||w.length===0||W>=w.length)return void D();let X=w[W];if(X)if(S.hasOwnProperty(X.schemeIdUri)){const ae=new Date().getTime();S[X.schemeIdUri](X.value,(function(z){const ie=new Date().getTime(),de=O(ae,ie,z);q=X,D(de)}),(function(){j(W+1)}))}else j(W+1);else D()}function O(Z,W,X){return X-(W-(W-Z)/2)}function D(Z=NaN){let W=isNaN(Z);W&&k.get().streaming.utcSynchronization.useManifestDateHeaderTimeSource?(function(){let X=L.getLatestMPDRequestHeaderValueByID("Date"),ae=X!==null?new Date(X).getTime():Number.NaN;isNaN(ae)?Ee(!0):Ee(!1,ae-Date.now())})():Ee(W,Z)}function M(Z){let W=Date.parse(Z);return isNaN(W)&&(W=(function(X){let ae,z,ie=/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2})(?::([0-9]*)(\.[0-9]*)?)?(?:([+\-])([0-9]{2})([0-9]{2}))?/.exec(X);return ae=Date.UTC(parseInt(ie[1],10),parseInt(ie[2],10)-1,parseInt(ie[3],10),parseInt(ie[4],10),parseInt(ie[5],10),ie[6]&&(parseInt(ie[6],10)||0),ie[7]&&1e3*parseFloat(ie[7])||0),ie[9]&&ie[10]&&(z=60*parseInt(ie[9],10)+parseInt(ie[10],10),ae+=(ie[8]==="+"?-1:1)*z*60*1e3),new Date(ae).getTime()})(Z)),W}function ce(Z){return Date.parse(Z)}function V(Z){return Date.parse(Z)}function me(Z,W,X){X()}function ue(Z,W,X){let ae=M(Z);isNaN(ae)?X():W(ae)}function ge(Z,W,X,ae,z){let ie,de,pe=!1,_e=new XMLHttpRequest,we=z?De.HTTPRequest.HEAD:De.HTTPRequest.GET,Pe=W.match(/\S+/g);if(W=Pe.shift(),ie=function(){pe||(pe=!0,Pe.length?ge(Z,Pe.join(" "),X,ae,z):ae())},de=function(){let Ke,et;_e.status===200&&(Ke=z?_e.getResponseHeader("Date"):_e.response,et=Z(Ke),isNaN(et)||(X(et),pe=!0))},d.isRelative(W)){const Ke=Q.resolve();Ke&&(W=d.resolve(W,Ke.url))}_e.open(we,W),_e.timeout=5e3,_e.onload=de,_e.onloadend=ie,_e.send()}function Ie(Z,W,X){ge(V,Z,W,X,!0)}function Ee(Z,W){if(isNaN(F)||isNaN(W)||Z||(function(ae){try{const z=K(ae),ie=isNaN(H)?30:H,de=isNaN(k.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor)?2:k.get().streaming.utcSynchronization.timeBetweenSyncAttemptsAdjustmentFactor,pe=isNaN(k.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts)?600:k.get().streaming.utcSynchronization.maximumTimeBetweenSyncAttempts,_e=isNaN(k.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts)?2:k.get().streaming.utcSynchronization.minimumTimeBetweenSyncAttempts;let we;z?(we=Math.min(ie*de,pe),b.debug(`Increasing timeBetweenSyncAttempts to ${we}`)):(we=Math.max(ie/de,_e),b.debug(`Decreasing timeBetweenSyncAttempts to ${we}`)),H=we}catch{}})(W),!Z&&!isNaN(W)){R=Date.now(),E=!1;const ae=isNaN(F);F=W,ae&&ne(),b.debug(`Completed UTC sync. Setting client - server offset to ${W}`)}Z&&(q=null,E=!1,U.error(new Bt.default(Gt.TIME_SYNC_FAILED_ERROR_CODE,Gt.TIME_SYNC_FAILED_ERROR_MESSAGE)));const X=k.get().streaming.utcSynchronization.artificialTimeOffsetToApply;i.trigger(f.default.UPDATE_TIME_SYNC_OFFSET,{offset:W+X}),i.trigger(f.default.TIME_SYNCHRONIZATION_COMPLETED)}function B(){if(!P||P.length===0)return;const Z=P.reduce(((W,X)=>W+X),0)/P.length;K(Z)?b.debug("Completed background UTC sync. Offset is within allowed threshold and is not adjusted."):(b.debug(`Completed background UTC sync. Setting client - server offset to ${Z}`),F=Z,i.trigger(f.default.UPDATE_TIME_SYNC_OFFSET,{offset:F})),C=!1,N=Date.now()}function K(Z){try{if(isNaN(F))return!0;const W=k.get().streaming.utcSynchronization.maximumAllowedDrift&&!isNaN(k.get().streaming.utcSynchronization.maximumAllowedDrift)?k.get().streaming.utcSynchronization.maximumAllowedDrift:100;return Z>=F-W&&Z<=F+W}catch{return!0}}return y={initialize:function(){ee(),S={"urn:mpeg:dash:utc:http-head:2014":Ie,"urn:mpeg:dash:utc:http-xsdate:2014":ge.bind(null,M),"urn:mpeg:dash:utc:http-iso:2014":ge.bind(null,ce),"urn:mpeg:dash:utc:direct:2014":ue,"urn:mpeg:dash:utc:http-head:2012":Ie,"urn:mpeg:dash:utc:http-xsdate:2012":ge.bind(null,M),"urn:mpeg:dash:utc:http-iso:2012":ge.bind(null,ce),"urn:mpeg:dash:utc:direct:2012":ue,"urn:mpeg:dash:utc:http-ntp:2014":me,"urn:mpeg:dash:utc:ntp:2014":me,"urn:mpeg:dash:utc:sntp:2014":me}},attemptSync:function(Z,W){w=Z,E||((function(X){try{if(!X||!k.get().streaming.utcSynchronization.enabled)return!1;const ae=isNaN(H)?30:H;return!(R&&ae&&!isNaN(ae))||(Date.now()-R)/1e3>=ae}catch{return!0}})(W)?(E=!0,j()):i.trigger(f.default.TIME_SYNCHRONIZATION_COMPLETED))},setConfig:function(Z){Z&&(Z.dashMetrics&&(L=Z.dashMetrics),Z.baseURLController&&(Q=Z.baseURLController),Z.errHandler&&(U=Z.errHandler),Z.settings&&(k=Z.settings))},reset:function(){ee(),i.off(f.default.ATTEMPT_BACKGROUND_SYNC,ne,y)}},b=(0,u.default)(l).getInstance().getLogger(y),i.on(f.default.ATTEMPT_BACKGROUND_SYNC,ne,y),y}bs.__dashjs_factory_name="TimeSyncController";const Es=o.default.getSingletonFactory(bs);Es.HTTP_TIMEOUT_MS=5e3,o.default.updateSingletonFactory(bs.__dashjs_factory_name,Es);var xf=Es;function tu(){let l,i,d,y,b;const E=this.context,C=(0,T.default)(E).getInstance();return l={attachMediaSource:function(k){let S=window.URL.createObjectURL(i);return k.setSource(S),y==="managedMediaSource"&&(k.setDisableRemotePlayback(!0),i.addEventListener("startstreaming",(()=>{C.trigger(v.default.MANAGED_MEDIA_SOURCE_START_STREAMING)})),i.addEventListener("endstreaming",(()=>{C.trigger(v.default.MANAGED_MEDIA_SOURCE_END_STREAMING)}))),S},createMediaSource:function(){let k="WebKitMediaSource"in window,S="MediaSource"in window;return"ManagedMediaSource"in window?(i=new ManagedMediaSource,y="managedMediaSource",b.info("Created ManagedMediaSource")):S?(i=new MediaSource,y="mediaSource",b.info("Created MediaSource")):k&&(i=new WebKitMediaSource,b.info("Created WebkitMediaSource")),i},detachMediaSource:function(k){k.setSource(null)},setConfig:function(k){k&&k.settings&&(d=k.settings)},setDuration:function k(S){i&&i.readyState==="open"&&(S===null&&isNaN(S)||i.duration!==S&&(S!==1/0||d.get().streaming.buffer.mediaSourceDurationInfinity||(S=Math.pow(2,32)),(function(L){let P=L.sourceBuffers;for(let w=0;w<P.length;w++)if(P[w].updating)return!0;return!1})(i)?setTimeout(k.bind(null,S),50):(b.info("Set MediaSource duration:"+S),i.duration=S)))},setSeekable:function(k,S){i&&typeof i.setLiveSeekableRange=="function"&&typeof i.clearLiveSeekableRange=="function"&&i.readyState==="open"&&k>=0&&k<S&&(i.clearLiveSeekableRange(),i.setLiveSeekableRange(k,S))},signalEndOfStream:function(k){if(!k||k.readyState!=="open")return;let S=k.sourceBuffers;for(let L=0;L<S.length;L++)if(S[L].updating||S[L].buffered.length===0)return;b.info("call to mediaSource endOfStream"),k.endOfStream()}},b=(0,u.default)(E).getInstance().getLogger(l),l}tu.__dashjs_factory_name="MediaSourceController";var Df=o.default.getSingletonFactory(tu);function nu(){const l="urn:mpeg:dash:event:2012",d="urn:mpeg:dash:event:callback:2015",E="discarded",C="updated",k="added",S=this.context,L=(0,T.default)(S).getInstance();let P,w,R,N,F,q,H,U,Q,ee,ne;function le(){if(!H||!U)throw new Error("setConfig function has to be called previously")}function j(){ne=!1,R={},N={},F=null,ee=!1,q=Date.now()/1e3}function O(){try{if(!ee){ee=!0;const Ee=U.getTime();let B=Ee-q;B=q>0?Math.max(0,B):0,D(N,B,Ee),D(R,B,Ee),M(N),M(R),q=Ee,ee=!1}}catch(Ee){ee=!1,w.error(Ee)}}function D(Ee,B,K){try{ue(Ee,function(W){if(W!==void 0){const X=isNaN(W.duration)?0:W.duration;W.calculatedPresentationTime<=K&&W.calculatedPresentationTime+B+X>=K?Ie(W,v.default.EVENT_MODE_ON_START):(ge(K,X+B,W.calculatedPresentationTime)||(function(ae){try{const z=ae.eventStream.period.start+ae.eventStream.period.duration;return ae.calculatedPresentationTime>z}catch(z){return w.error(z),!1}})(W))&&(w.debug(`Removing event ${W.id} from period ${W.eventStream.period.id} as it is expired or invalid`),(function(ae,z){try{const ie=z.eventStream.schemeIdUri,de=z.eventStream.period.id,pe=z.eventStream.value,_e=z.id;ae[de][ie]=ae[de][ie].filter((we=>pe&&we.eventStream.value&&we.eventStream.value!==pe||we.id!==_e)),ae[de][ie].length===0&&delete ae[de][ie]}catch(ie){w.error(ie)}})(Ee,W))}})}catch(Z){w.error(Z)}}function M(Ee){try{for(const B in Ee)Ee.hasOwnProperty(B)&&Object.keys(Ee[B]).length===0&&delete Ee[B]}catch(B){w.error(B)}}function ce(Ee,B,K=!1){const Z=Ee.eventStream.schemeIdUri,W=Ee.eventStream.value,X=Ee.id;let ae=E;B[Z]||(B[Z]=[]);const z=B[Z].findIndex((ie=>(!W||ie.eventStream.value&&ie.eventStream.value===W)&&ie.id===X));if(z===-1)B[Z].push(Ee),Ee.triggeredReceivedEvent=!1,Ee.triggeredStartEvent=!1,ae=k;else if(K){const ie=B[Z][z];Ee.triggeredReceivedEvent=ie.triggeredReceivedEvent,Ee.triggeredStartEvent=ie.triggeredStartEvent,B[Z][z]=Ee,ae=C}return ae}function V(Ee){try{if(Ee.eventStream.value==1){const B=Ee.calculatedPresentationTime;let K;K=Ee.calculatedPresentationTime==4294967295?NaN:Ee.calculatedPresentationTime+Ee.duration,L.trigger(v.default.MANIFEST_VALIDITY_CHANGED,{id:Ee.id,validUntil:B,newDuration:K,newManifestValidAfter:NaN},{mode:v.default.EVENT_MODE_ON_START})}}catch(B){w.error(B)}}function me(Ee){try{const B=U.getTime();ue(Ee,(function(K){const Z=K.eventStream&&K.eventStream.period&&!isNaN(K.eventStream.period.duration)?K.eventStream.period.duration:NaN,W=K.eventStream&&K.eventStream.period&&!isNaN(K.eventStream.period.start)?K.eventStream.period.start:NaN;if(isNaN(Z)||isNaN(W))return;const X=K.calculatedPresentationTime;Math.abs(X-B)<300&&Ie(K,v.default.EVENT_MODE_ON_START)}))}catch(B){w.error(B)}}function ue(Ee,B){try{if(Ee){const K=Object.keys(Ee);for(let Z=0;Z<K.length;Z++){const W=Ee[K[Z]],X=Object.keys(W);for(let ae=0;ae<X.length;ae++)W[X[ae]].forEach((z=>{z!==void 0&&B(z)}))}}}catch(K){w.error(K)}}function ge(Ee,B,K){try{return Ee-B>K}catch(Z){return w.error(Z),!1}}function Ie(Ee,B){try{const K=U.getTime(),Z=Ee.id;if(B===v.default.EVENT_MODE_ON_RECEIVE&&!Ee.triggeredReceivedEvent)return w.debug(`Received event ${Z}`),Ee.triggeredReceivedEvent=!0,void L.trigger(Ee.eventStream.schemeIdUri,{event:Ee},{mode:B});Ee.triggeredStartEvent||(Ee.eventStream.schemeIdUri===l&&Ee.eventStream.value==1?Ee.duration===0&&Ee.presentationTimeDelta===0||(w.debug(`Starting manifest refresh event ${Z} at ${K}`),(function(){try{le(),H.refreshManifest()}catch(W){w.error(W)}})()):Ee.eventStream.schemeIdUri===d&&Ee.eventStream.value==1?(w.debug(`Starting callback event ${Z} at ${K}`),(function(W){try{let X=Kt(S).create({});const ae=new ts({method:"get",url:W,responseType:"arraybuffer",customData:{}}),z=new ns({request:ae});X.load(ae,z)}catch(X){w.error(X)}})(Ee.messageData instanceof Uint8Array?We.default.uint8ArrayToString(Ee.messageData):Ee.messageData)):(w.debug(`Starting event ${Z} from period ${Ee.eventStream.period.id} at ${K}`),L.trigger(Ee.eventStream.schemeIdUri,{event:Ee},{mode:B}),Q.get().streaming.events.deleteEventMessageDataTimeout>-1&&setTimeout((()=>{delete Ee.messageData,delete Ee.parsedMessageData}),Q.get().streaming.events.deleteEventMessageDataTimeout)),Ee.triggeredStartEvent=!0)}catch(K){w.error(K)}}return P={addInlineEvents:function(Ee,B){try{if(le(),R[B]||(R[B]={}),Ee)for(let K=0;K<Ee.length;K++){let Z=Ee[K];if(!ge(U.getTime(),isNaN(Z.duration)?0:Z.duration,Z.calculatedPresentationTime)){let W=ce(Z,R[B],!0);W===k?(w.debug(`Added inline event with id ${Z.id} from period ${B}`),Ie(Z,v.default.EVENT_MODE_ON_RECEIVE)):W===C&&w.debug(`Updated inline event with id ${Z.id} from period ${B}`)}}}catch(K){throw K}},addInbandEvents:function(Ee,B){try{le(),N[B]||(N[B]={});for(let K=0;K<Ee.length;K++){let Z=Ee[K];ge(U.getTime(),isNaN(Z.duration)?0:Z.duration,Z.calculatedPresentationTime)||(ce(Z,N[B],!1)===k?(Z.eventStream.schemeIdUri===l&&V(Z),w.debug(`Added inband event with id ${Z.id} from period ${B}`),Ie(Z,v.default.EVENT_MODE_ON_RECEIVE)):w.debug(`Inband event with scheme_id_uri ${Z.eventStream.schemeIdUri}, value ${Z.eventStream.value}, period id ${B} and event id ${Z.id} was ignored because it has been added before.`))}O()}catch(K){throw K}},getInbandEvents:function(){return N},getInlineEvents:function(){return R},start:function(){try{le(),w.debug("Start Event Controller");const Ee=Q.get().streaming.events.eventControllerRefreshDelay;ne||isNaN(Ee)||(ne=!0,F=setInterval(O,Ee))}catch(Ee){throw Ee}},setConfig:function(Ee){try{if(!Ee)return;Ee.manifestUpdater&&(H=Ee.manifestUpdater),Ee.playbackController&&(U=Ee.playbackController),Ee.settings&&(Q=Ee.settings)}catch(B){throw B}},reset:function(){(function(){try{F!==null&&ne&&(clearInterval(F),F=null,ne=!1,(function(){try{me(N),me(R)}catch(Ee){w.error(Ee)}})())}catch(Ee){throw Ee}})(),j()}},w=(0,u.default)(S).getInstance().getLogger(P),j(),P}nu.__dashjs_factory_name="EventController";var Lf=o.default.getSingletonFactory(nu),wr={LEVELS:{WARNING:"Warning",ERROR:"Error"},EVENTS:{NO_UTC_TIMING_ELEMENT:{key:"NO_UTC_TIMING_ELEMENT",message:"No UTCTiming element is present in the manifest. You may experience playback failures. For a detailed validation use https://conformance.dashif.org/"},NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE:{key:"NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE",message:'SMPTE 2052-1:2013 defines the attribute name as "imageType" and does not define "imagetype"'},INVALID_DVR_WINDOW:{key:"INVALID_DVR_WINDOW",message:"No valid segment found when applying a specification compliant DVR window calculation. Using SegmentTimeline entries as a fallback."}}},au=t(445),ru=t(1923);function iu(){const l=this.context,i=(0,T.default)(l).getInstance();let d,y,b,E,C,k,S,L,P,w,R,N,F,q,H,U,Q,ee,ne,le,j,O,D,M,ce,V,me,ue,ge,Ie,Ee,B,K,Z,W,X,ae,z,ie,de,pe,_e,we,Pe,Ke,et,ut,qt;function dt(){if(!(k&&k.hasOwnProperty("load")&&O&&O.hasOwnProperty("initialize")&&O.hasOwnProperty("reset")&&O.hasOwnProperty("getClientTimeOffset")&&S&&j&&P&&W))throw new Error(c.default.MISSING_CONFIG_ERROR)}function jt(){(function(){try{const He=L.getStreamsInfo();if(!M&&He.length===0)throw new Error("There are no periods in the MPD");M&&He.length>0&&P.updateManifestUpdateInfo({currentTime:W.getTime(),buffered:Z.getBufferRange(),presentationStartTime:He[0].start,clientTimeOffset:O.getClientTimeOffset()}),D.length>0&&(function(Wt){Wt.length!==0?D=D.filter((Jt=>{const bn=Wt.filter((vn=>vn.id===Jt.getId())).length>0||Jt.getId()===M.getId();return bn||(y.debug(`Removing stream ${Jt.getId()}`),Jt.reset(!0),Jt=null),bn})):y.warn("No periods included in the current manifest. Skipping the filtering of outdated stream objects.")})(He);const pt=[];for(let Wt=0,Jt=He.length;Wt<Jt;Wt++){const bn=He[Wt];pt.push(En(bn)),P.addManifestUpdateStreamInfo(bn)}Promise.all(pt).then((()=>new Promise(((Wt,Jt)=>{M?Wt():yn(He,Wt,Jt)})))).then((()=>{i.trigger(f.default.STREAMS_COMPOSED),mn()})).catch((Wt=>{throw Wt}))}catch(He){j.error(new Bt.default(Gt.MANIFEST_ERROR_ID_NOSTREAMS_CODE,He.message+" nostreamscomposed",S.getValue())),B=!0,la()}})()}function Zt(){Ke=!0}function En(He){let pt=_r(He.id);return pt?pt.updateData(He):(pt=Nf(l).create({manifestModel:S,mediaPlayerModel:ae,dashMetrics:P,manifestUpdater:C,adapter:L,timelineConverter:O,capabilities:b,capabilitiesFilter:E,errHandler:j,baseURLController:F,segmentBaseController:q,textController:V,abrController:U,playbackController:W,throughputController:Q,eventController:ne,mediaController:ee,protectionController:ce,videoModel:Z,streamInfo:He,settings:Pe}),D.push(pt),pt.initialize(),Promise.resolve())}function yn(He,pt,Wt){try{st();const Jt=P.getCurrentDVRInfo().range;if(Jt.end<Jt.start)return void(function(vn,zn,Ca,ba){et&&clearTimeout(et);const kr=Math.min(1e3*(-1*(vn.end-vn.start)+2),2147483647);y.debug(`Waiting for ${kr} ms before playback can start`),i.trigger(f.default.AST_IN_FUTURE,{delay:kr}),et=setTimeout((()=>{yn(zn,Ca,ba)}),kr)})(Jt,He,pt,Wt);Pe.get().streaming.applyProducerReferenceTime&&X.calculateProducerReferenceTimeOffsets(He);const bn=He[0].manifestInfo;if(Pe.get().streaming.applyServiceDescription&&X.applyServiceDescription(bn),L.getIsDynamic()){const vn=Un(0,bn);W.computeAndSetLiveDelay(vn,bn)}(Pe.get().streaming.applyContentSteering&&N.shouldQueryBeforeStart()?N.loadSteeringData():Promise.resolve()).then((()=>{const vn=S.getValue();vn&&F.update(vn),nn(),pt()})).catch((vn=>{y.error(vn),nn(),pt()}))}catch(Jt){Wt(Jt)}}function nn(){const He=(function(){let Jt;return Jt=L.getIsDynamic()?(function(){let bn;const vn=P.getCurrentDVRInfo();bn=(vn&&vn.range?vn.range.end:0)-W.getOriginalLiveDelay();const zn=vn?vn.range:null;if(zn){if(isNaN(ut)&&ut.toString().indexOf("posix:")===-1){const ba=pn(!0);isNaN(ba)||(y.info(`Start time from URI parameters: ${ba}`),bn=Math.min(bn,ba))}else{y.info(`Start time provided by the app: ${ut}`);const ba=sn(!0,ut);isNaN(ba)||(bn=Math.min(bn,ba))}const Ca=Pe.get().streaming.timeShiftBuffer.calcFromSegmentTimeline?.1:0;bn=Math.max(bn,zn.start+Ca)}return bn})():(function(){let bn=mr()[0].getStreamInfo().start;if(isNaN(ut)){const vn=pn(!1);isNaN(vn)||(y.info(`Start time from URI parameters: ${vn}`),bn=Math.max(bn,vn))}else{y.info(`Start time provided by the app: ${ut}`);const vn=sn(!1,ut);isNaN(vn)||(bn=Math.max(bn,vn))}return bn})(),Jt})();let pt=qe(He);const Wt=pt!==null?pt:D[0];i.trigger(f.default.INITIAL_STREAM_SWITCH,{startTime:He}),fn(Wt,null,He),_e||(_e=setInterval((function(){!Ie&&W.getTimeToStreamEnd()<=0&&!W.isSeeking()&&i.trigger(f.default.PLAYBACK_ENDED,{isLast:ya().isLast})}),200))}function fn(He,pt,Wt){try{if(Ie||!He||pt===He&&He.getIsActive())return;Ie=!0,i.trigger(f.default.PERIOD_SWITCH_STARTED,{fromStreamInfo:pt?pt.getStreamInfo():null,toStreamInfo:He.getStreamInfo()});let Jt=!1,bn=[],vn=gt(pt);M=He,pt&&(Jt=kt(He,pt),bn=nt(pt),pt.deactivate(Jt)),Wt=isNaN(Wt)?!Jt&&pt?He.getStreamInfo().start:NaN:Wt,y.info(`Switch to stream ${He.getId()}. Seektime is ${Wt}, current playback time is ${W.getTime()}. Seamless period switch is set to ${Jt}`),we=we.filter((zn=>zn.getId()!==M.getId())),W.initialize(ya(),!!pt),Z.getElement()?Ue({seekTime:Wt,keepBuffers:Jt,sourceBufferSinksFromPreviousPeriod:vn,streamActivated:!1,representationsFromPreviousPeriod:bn}):it({seekTime:Wt,keepBuffers:Jt,sourceBufferSinksFromPreviousPeriod:vn})}catch{Ie=!1}}function Ue(He){let pt;function Wt(){if(!K||K.readyState!=="open")return;y.debug("MediaSource is open!"),window.URL.revokeObjectURL(pt),K.removeEventListener("sourceopen",Wt),K.removeEventListener("webkitsourceopen",Wt),en();const bn=P.getCurrentDVRInfo();w.setSeekable(bn.range.start,bn.range.end),He.streamActivated?(isNaN(He.seekTime)||W.seek(He.seekTime,!0,!0),M.setMediaSource(K).then((()=>{M.initializeForTextWithMediaSource(K)}))):it(He)}function Jt(){K.addEventListener("sourceopen",Wt,!1),K.addEventListener("webkitsourceopen",Wt,!1),pt=w.attachMediaSource(Z),y.debug("MediaSource attached to element.  Waiting on open...")}K?He.keepBuffers?it(He):(w.detachMediaSource(Z),Jt()):(K=w.createMediaSource(),Jt())}function it(He){const pt=He.representationsFromPreviousPeriod||[];M.activate(K,He.sourceBufferSinksFromPreviousPeriod,pt).then((()=>{isNaN(He.seekTime)||(i.trigger(f.default.SEEK_TARGET,{time:He.seekTime},{streamId:M.getId()}),W.seek(He.seekTime,!1,!0),M.startScheduleControllers()),Ie=!1,i.trigger(f.default.PERIOD_SWITCH_COMPLETED,{toStreamInfo:ya()})}))}function nt(He){return(He?He.getStreamProcessors():[]).map((pt=>pt.getRepresentation()))}function gt(He){const pt=new Map;return He&&(He?He.getStreamProcessors():[]).forEach((Wt=>{const Jt=Wt.getBuffer();Jt&&pt.set(Jt.getType(),Jt)})),pt}function Ft(He){const pt=qe(He.seekTime);pt&&pt!==M?pt&&pt!==M&&(un(pt),(function(Wt,Jt){const bn=Wt&&!isNaN(Wt.seekTime)?Wt.seekTime:NaN,vn=M.getStreamProcessors().map((zn=>zn.prepareOuterPeriodPlaybackSeeking(Wt)));Promise.all(vn).then((()=>{fn(Jt,M,bn)})).catch((zn=>{j.error(zn)}))})(He,pt)):(un(),(function(Wt){M.getStreamProcessors().forEach((Jt=>Jt.prepareInnerPeriodPlaybackSeeking(Wt))),Ja(na.USER_REQUEST_STOP_REASON)})(He)),ha(Xa.SEEK_START_REASON)}function un(He=null){Xe()}function Xe(){we&&we.length>0&&(we.forEach((He=>{He.deactivate(!0)})),we=[])}function ct(He){if(He.newMediaInfo.streamInfo.id===M.getId()){if(Xe(),Pe.get().streaming.buffer.resetSourceBuffersForTrackSwitch&&He.oldMediaInfo&&He.oldMediaInfo.codec!==He.newMediaInfo.codec){const pt=W.getTime();return M.deactivate(!1),void Ue({seekTime:pt,keepBuffers:!1,streamActivated:!1})}M.prepareTrackChange(He)}}function kt(He,pt){try{return Pe.get().streaming.buffer.reuseExistingSourceBuffers&&(b.isProtectionCompatible(pt.getStreamInfo(),He.getStreamInfo())||Ke)&&b.supportsChangeType()&&Pe.get().streaming.buffer.useChangeType}catch{return!1}}function Me(He,pt=null){if(!K||He.getPreloaded()||!kt(He,pt))return;const Wt=nt(pt),Jt=gt(pt);He.startPreloading(K,Jt,Wt).then((()=>{we.push(He)}))}function qe(He){if(isNaN(He))return null;const pt=D.length;for(let Wt=0;Wt<pt;Wt++){const Jt=D[Wt];if(He<parseFloat((Jt.getStartTime()+Jt.getDuration()).toFixed(5)))return Jt}return null}function st(){try{const He=L.getIsDynamic(),pt=L.getStreamsInfo()[0].manifestInfo,Wt=W.getTime(),Jt=O.calcTimeShiftBufferWindow(D,He),bn=Lt();if(Jt.start===void 0||Jt.end===void 0)return;bn&&bn.length!==0?bn.forEach((vn=>{P.addDVRInfo(vn.getType(),Wt,pt,Jt)})):P.addDVRInfo(c.default.VIDEO,Wt,pt,Jt)}catch{}}function Ge(He){if(de&&ge){const pt=ae.getInitialBufferLevel(),Wt=[c.default.TEXT];(isNaN(pt)||pt<=W.getBufferLevel(Wt)||L.getIsDynamic()&&pt>W.getLiveDelay())&&(de=!1,ha(Xa.INITIAL_PLAYOUT_START_REASON),W.play())}He&&He.mediaType&&P.addBufferLevel(He.mediaType,new Date,1e3*He.bufferLevel)}function ht(He){He.streamInfo.id===M.getId()&&Xe(),_r(He.streamInfo.id).prepareQualityChange(He)}function Tt(){if(L.getIsDynamic()&&W.getOriginalLiveDelay()!==0&&M){const He=L.getStreamsInfo();if(He.length>0){const pt=He[0].manifestInfo,Wt=Un(0,pt);W.computeAndSetLiveDelay(Wt,pt)}}}function be(){if(Oa()){const He=Z.getPlaybackQuality();He&&P.addDroppedFrames(He)}}function $e(){y.debug("[onPlaybackStarted]"),!de&&ie&&ha(Xa.RESUME_FROM_PAUSE_START_REASON),de&&(de=!1),pe&&(pe=!1,Pe.get().streaming.applyContentSteering&&!N.shouldQueryBeforeStart()&&N.loadSteeringData()),ie=!1}function vt(He){y.debug("[onPlaybackPaused]"),He.ended||(ie=!0,Ja(na.USER_REQUEST_STOP_REASON))}function wt(He){y.debug(`Stream with id ${He.streamInfo.id} finished buffering`);const pt=He.streamInfo.isLast;K&&pt?(y.info("[onStreamBufferingCompleted] calls signalEndOfStream of mediaSourceController."),w.signalEndOfStream(K)):mn()}function mn(){if(!M)return;if(!M.getHasFinishedBuffering())return void M.checkAndHandleCompletedBuffering();const He=(function(Wt=null){try{const Jt=Wt||M||null;if(Jt){const bn=Jt.getStreamInfo();return D.filter((function(vn){const zn=vn.getStreamInfo();return zn.start>bn.start&&bn.id!==zn.id}))}}catch{return[]}})(M);let pt=0;for(;pt<He.length;){const Wt=He[pt],Jt=pt===0?M:He[pt-1];!Wt.getPreloaded()&&Jt.getHasFinishedBuffering()&&Me(Wt,Jt),pt+=1}}function Ze(){_e&&(clearInterval(_e),_e=null)}function Lt(){return M?M.getStreamProcessors():[]}function an(He){if(M&&!M.getIsEndedEventSignaled()){M.setIsEndedEventSignaled(!0);const pt=(function(Wt=null){const Jt=Wt||M||null;if(!Jt)return null;const bn=Jt.getStreamInfo(),vn=bn.start;let zn=0,Ca=-1,ba=NaN;for(;zn<D.length;){const kr=D[zn].getStreamInfo(),_s=kr.start-vn;_s>0&&(isNaN(ba)||_s<ba)&&bn.id!==kr.id&&(ba=_s,Ca=zn),zn+=1}return Ca>=0?D[Ca]:null})();pt?(y.debug(`StreamController onEnded, found next stream with id ${pt.getStreamInfo().id}. Switching from ${M.getStreamInfo().id} to ${pt.getStreamInfo().id}`),fn(pt,M,NaN)):(y.debug("StreamController no next stream found"),M.setIsEndedEventSignaled(!1)),Ja(pt?na.END_OF_PERIOD_STOP_REASON:na.END_OF_CONTENT_STOP_REASON)}He&&He.isLast&&(Ze(),N.stopSteeringRequestTimer())}function en(He){const pt=He||ya().manifestInfo.duration;w.setDuration(pt)}function pn(He){const pt=H.getURIFragmentData();if(!pt||!pt.t)return NaN;const Wt=mr()[0].getStreamInfo().start;return pt.t=pt.t.split(",")[0],Nn(He,pt.t,Wt)}function sn(He,pt){let Wt=0;return He||(Wt=mr()[0].getStreamInfo().start),Nn(He,pt,Wt)}function Nn(He,pt,Wt){const Jt=L.getRegularPeriods()[0],bn=pt.toString(),vn=bn.indexOf("posix:")!==-1?bn.substring(6)==="now"?Date.now()/1e3:parseFloat(bn.substring(6)):NaN;return He&&!isNaN(vn)?O.calcPresentationTimeFromWallTime(new Date(1e3*vn),Jt):parseFloat(bn)+Wt}function Un(He,pt){try{let Wt=NaN;return pt&&!isNaN(pt.maxFragmentDuration)&&isFinite(pt.maxFragmentDuration)?pt.maxFragmentDuration:isFinite(Wt)?Wt:NaN}catch{return NaN}}function Ia(){const He=S.getValue();F.initialize(He)}function Aa(He){if(He.error)B=!0,la();else{y.info("Manifest updated... updating data system wide.");const pt=He.manifest;L.updatePeriods(pt),E.filterUnsupportedFeatures(pt).then((()=>{F.initialize(pt);let Wt=L.getUTCTimingSources();!L.getIsDynamic()||Wt&&Wt.length!==0||i.trigger(v.default.CONFORMANCE_VIOLATION,{level:wr.LEVELS.WARNING,event:wr.EVENTS.NO_UTC_TIMING_ELEMENT});let Jt=L.getIsDynamic()?Wt.concat(z.getUTCTimingSources()):Wt;R.attemptSync(Jt,L.getIsDynamic()),ue.createFinalQueryStrings(pt)}))}}function Oa(){return!!M&&M.getHasVideoTrack()}function fr(){return!!M&&M.getHasAudioTrack()}function Ja(He,pt){pt=pt||new Date,Lt().forEach((Wt=>{Wt.finalisePlayList(pt,He)})),P.addPlayList()}function ha(He){P.createPlaylistMetrics(1e3*W.getTime(),He)}function Za(He){ce.updateKeyStatusesMap(He),(function(){const pt=Lt();let Wt=!1;pt.forEach((Jt=>{const bn=Jt.getMediaInfo();!bn||b.areKeyIdsUsable(bn)?bn&&b.areKeyIdsExpired(bn)&&(function(vn){const zn=_r(vn.getStreamId());zn&&zn.triggerProtectionError({error:new Bt.default(ru.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE,ru.default.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE)})})(Jt):(Wt=!0,(function(vn){const zn=vn.getAllMediaInfos().filter((Ca=>b.areKeyIdsUsable(Ca)));if(zn&&zn.length!==0)ee.setTrack(zn[0],{replaceBuffer:!0});else{const Ca=vn.getType();j.error(new Bt.default(Gt.NO_SUPPORTED_KEY_IDS,`Type: ${Ca}: ${Gt.NO_SUPPORTED_KEY_IDS_MESSAGE}`))}})(Jt))})),Wt&&(W.getTime()===0?i.once(v.default.FRAGMENT_LOADING_COMPLETED,(()=>{pa()}),d):W.isProgressing(500).then((Jt=>{Jt||pa()})))})()}function pa(){const He=W.getTime();W.seek(He+.01,!1,!1)}function Ra(He){if(!He.error)return;let pt;switch(He.error.code){case 1:pt="MEDIA_ERR_ABORTED";break;case 2:pt="MEDIA_ERR_NETWORK";break;case 3:pt="MEDIA_ERR_DECODE",qt.counts.mediaErrorDecode+=1;break;case 4:pt="MEDIA_ERR_SRC_NOT_SUPPORTED";break;case 5:pt="MEDIA_ERR_ENCRYPTED";break;default:pt="UNKNOWN"}pt==="MEDIA_ERR_DECODE"&&Pe.get().errors.recoverAttempts.mediaErrorDecode>=qt.counts.mediaErrorDecode?(function(){y.error("A MEDIA_ERR_DECODE occured: Resetting the MediaSource");const Wt=W.getTime();M.deactivate(!1),y.info(`MediaSource has been resetted. Resuming playback from time ${Wt}`),Ue({seekTime:Wt,keepBuffers:!1,streamActivated:!1})})():(Ee=!0,He.error.message&&(pt+=" ("+He.error.message+")"),He.error.msExtendedCode&&(pt+=" (0x"+(He.error.msExtendedCode>>>0).toString(16).toUpperCase()+")"),y.fatal("Video Element Error: "+pt),He.error&&y.fatal(He.error),j.error(new Bt.default(He.error.code,pt)),la())}function ya(){return M?M.getStreamInfo():null}function _r(He){for(let pt=0,Wt=D.length;pt<Wt;pt++)if(D[pt].getId()===He)return D[pt];return null}function Ri(He){isNaN(He.newDuration)||en(He.newDuration)}function Ci(){D=[],ut=NaN,ce=null,Ie=!1,M=null,Ee=!1,B=!1,de=!0,pe=!0,ie=!1,ge=!0,_e=null,Ke=!1,we=[],et=null,qt={counts:{mediaErrorDecode:0}}}function la(){dt(),R.reset(),Ja(Ee||B?na.FAILURE_STOP_REASON:na.USER_REQUEST_STOP_REASON);for(let He=0,pt=D?D.length:0;He<pt;He++)D[He].reset(Ee);i.off(v.default.PLAYBACK_TIME_UPDATED,be,d),i.off(v.default.PLAYBACK_SEEKING,Ft,d),i.off(v.default.PLAYBACK_ERROR,Ra,d),i.off(v.default.PLAYBACK_STARTED,$e,d),i.off(v.default.PLAYBACK_PAUSED,vt,d),i.off(v.default.PLAYBACK_ENDED,an,d),i.off(v.default.METRIC_ADDED,Sr,d),i.off(v.default.MANIFEST_VALIDITY_CHANGED,Ri,d),i.off(v.default.BUFFER_LEVEL_UPDATED,Ge,d),i.off(v.default.QUALITY_CHANGE_REQUESTED,ht,d),i.off(v.default.CONTENT_STEERING_REQUEST_COMPLETED,Ia,d),f.default.KEY_SESSION_UPDATED&&i.off(f.default.KEY_SESSION_UPDATED,Zt,d),i.off(f.default.MANIFEST_UPDATED,Aa,d),i.off(f.default.STREAM_BUFFERING_COMPLETED,wt,d),i.off(f.default.TIME_SYNCHRONIZATION_COMPLETED,jt,d),i.off(f.default.CURRENT_TRACK_CHANGED,ct,d),i.off(f.default.SETTING_UPDATED_LIVE_DELAY,Tt,d),i.off(f.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Tt,d),i.off(au.default.INTERNAL_KEY_STATUSES_CHANGED,Za,d),F.reset(),C.reset(),ne.reset(),P.clearAllCurrentMetrics(),S.setValue(null),k.reset(),O.reset(),le.reset(),K&&(w.detachMediaSource(Z),K=null),Z=null,ce&&(ce=null,me=null,S.getValue()&&i.trigger(f.default.PROTECTION_DESTROYED,{data:S.getValue().url})),Ze(),i.trigger(f.default.STREAM_TEARDOWN_COMPLETE),Ci()}function Sr(He){if(He.metric===r.DVR_INFO){const pt=fr()?c.default.AUDIO:c.default.VIDEO;He.mediaType===pt&&w.setSeekable(He.value.range.start,He.value.range.end)}}function mr(){return D}return d={addDVRMetric:st,getActiveStream:function(){return M},getActiveStreamInfo:ya,getActiveStreamProcessors:Lt,getAutoPlay:function(){return ge},getHasMediaOrInitialisationError:function(){return Ee||B},getInitialPlayback:function(){return de},getIsStreamSwitchInProgress:function(){return Ie},getStreamById:_r,getStreamForTime:qe,getStreams:mr,getTimeRelativeToStreamId:function(He,pt){let Wt=null,Jt=0,bn=0,vn=null;for(let zn=0;zn<D.length;zn++){if(Wt=D[zn],bn=Wt.getStartTime(),vn=Wt.getDuration(),Number.isFinite(bn)&&(Jt=bn),Wt.getId()===pt)return He-Jt;Number.isFinite(vn)&&(Jt+=vn)}return null},hasAudioTrack:fr,hasVideoTrack:Oa,initialize:function(He,pt){dt(),ge=He,me=pt,O.initialize(),C=dl(l).create(),C.setConfig({manifestModel:S,adapter:L,manifestLoader:k,errHandler:j,settings:Pe,contentSteeringController:N}),C.initialize(),ne=Lf(l).getInstance(),ne.setConfig({manifestUpdater:C,playbackController:W,settings:Pe}),ne.start(),ue=vo(l).getInstance(),R.setConfig({dashMetrics:P,baseURLController:F,errHandler:j,settings:Pe}),R.initialize(),w.setConfig({settings:Pe}),ce&&(i.trigger(f.default.PROTECTION_CREATED,{controller:ce}),ce.setMediaElement(Z.getElement()),me&&ce.setProtectionData(me)),i.on(v.default.PLAYBACK_TIME_UPDATED,be,d),i.on(v.default.PLAYBACK_SEEKING,Ft,d),i.on(v.default.PLAYBACK_ERROR,Ra,d),i.on(v.default.PLAYBACK_STARTED,$e,d),i.on(v.default.PLAYBACK_PAUSED,vt,d),i.on(v.default.PLAYBACK_ENDED,an,d),i.on(v.default.METRIC_ADDED,Sr,d),i.on(v.default.MANIFEST_VALIDITY_CHANGED,Ri,d),i.on(v.default.BUFFER_LEVEL_UPDATED,Ge,d),i.on(v.default.QUALITY_CHANGE_REQUESTED,ht,d),i.on(v.default.CONTENT_STEERING_REQUEST_COMPLETED,Ia,d),f.default.KEY_SESSION_UPDATED&&i.on(f.default.KEY_SESSION_UPDATED,Zt,d),i.on(f.default.MANIFEST_UPDATED,Aa,d),i.on(f.default.STREAM_BUFFERING_COMPLETED,wt,d),i.on(f.default.TIME_SYNCHRONIZATION_COMPLETED,jt,d),i.on(f.default.CURRENT_TRACK_CHANGED,ct,d),i.on(f.default.SETTING_UPDATED_LIVE_DELAY,Tt,d),i.on(f.default.SETTING_UPDATED_LIVE_DELAY_FRAGMENT_COUNT,Tt,d),i.on(au.default.INTERNAL_KEY_STATUSES_CHANGED,Za,d)},load:function(He,pt=NaN){dt(),ut=pt,k.load(He)},loadWithManifest:function(He,pt=NaN){(function(){if(!C||!C.hasOwnProperty("setManifest"))throw new Error("initialize function has to be called previously")})(),ut=pt,C.setManifest(He)},refreshManifest:function(){C.getIsUpdating()||C.refreshManifest()},reset:la,setConfig:function(He){He&&(He.capabilities&&(b=He.capabilities),He.capabilitiesFilter&&(E=He.capabilitiesFilter),He.manifestLoader&&(k=He.manifestLoader),He.manifestModel&&(S=He.manifestModel),He.mediaPlayerModel&&(ae=He.mediaPlayerModel),He.customParametersModel&&(z=He.customParametersModel),He.protectionController&&(ce=He.protectionController),He.adapter&&(L=He.adapter),He.dashMetrics&&(P=He.dashMetrics),He.errHandler&&(j=He.errHandler),He.timelineConverter&&(O=He.timelineConverter),He.videoModel&&(Z=He.videoModel),He.playbackController&&(W=He.playbackController),He.throughputController&&(Q=He.throughputController),He.serviceDescriptionController&&(X=He.serviceDescriptionController),He.contentSteeringController&&(N=He.contentSteeringController),He.textController&&(V=He.textController),He.abrController&&(U=He.abrController),He.mediaController&&(ee=He.mediaController),He.settings&&(Pe=He.settings),He.baseURLController&&(F=He.baseURLController),He.uriFragmentModel&&(H=He.uriFragmentModel),He.segmentBaseController&&(q=He.segmentBaseController),He.manifestUpdater&&(C=He.manifestUpdater))},setProtectionData:function(He){me=He,ce&&ce.setProtectionData(me)},switchToVideoElement:function(He){M&&(W.initialize(ya()),Ue({seekTime:He,keepBuffers:!1,streamActivated:!0}))}},y=(0,u.default)(l).getInstance().getLogger(d),R=xf(l).getInstance(),w=Df(l).getInstance(),le=gs(l).getInstance(),Ci(),d}iu.__dashjs_factory_name="StreamController";var su=o.default.getSingletonFactory(iu),Mf=class extends bi{constructor(){super(),this.captionData=null,this.label=null,this.defaultTrack=!1,this.kind=null,this.isFragmented=!1,this.isEmbedded=!1,this.isTTML=null}},Pf=t(7377);function ou(){let l,i=0;function d(S){let L="";for(let P=0;P<S.length;++P)L+=S[P].uchar;return L.length-L.replace(/^\s+/,"").length}function y(S){return"left: "+3.125*S.x+"%; top: "+6.66*S.y1+"%; width: "+(100-3.125*S.x)+"%; height: "+6.66*Math.max(S.y2-1-S.y1,1)+"%; align-items: flex-start; overflow: visible; -webkit-writing-mode: horizontal-tb;"}function b(S){return S==="red"?"rgb(255, 0, 0)":S==="green"?"rgb(0, 255, 0)":S==="blue"?"rgb(0, 0, 255)":S==="cyan"?"rgb(0, 255, 255)":S==="magenta"?"rgb(255, 0, 255)":S==="yellow"?"rgb(255, 255, 0)":S==="white"?"rgb(255, 255, 255)":S==="black"?"rgb(0, 0, 0)":S}function E(S,L){const P=S.videoHeight/15;return L?"font-size: "+P+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; color: "+(L.foreground?b(L.foreground):"rgb(255, 255, 255)")+"; font-style: "+(L.italics?"italic":"normal")+"; text-decoration: "+(L.underline?"underline":"none")+"; white-space: pre; background-color: "+(L.background?b(L.background):"transparent")+";":"font-size: "+P+"px; font-family: Menlo, Consolas, 'Cutive Mono', monospace; justify-content: flex-start; text-align: left; color: rgb(255, 255, 255); font-style: normal; white-space: pre; line-height: normal; font-weight: normal; text-decoration: none; width: 100%; display: flex;"}function C(S){return S.replace(/^\s+/g,"")}function k(S){return S.replace(/\s+$/g,"")}return l={createHTMLCaptionsFromScreen:function(S,L,P,w){let R=null,N=null,F=!1,q=-1,H={start:L,end:P,spans:[]},U="style_cea608_white_black";const Q={},ee={},ne=[];let le,j;for(le=0;le<15;++le){const D=w.rows[le];let M="",ce=null;if(D.isEmpty()===!1){const V=d(D.chars);R===null&&(R={x:V,y1:le,y2:le+1,p:[]}),V!==q&&F&&(R.p.push(H),H={start:L,end:P,spans:[]},R.y2=le,R.name="region_"+R.x+"_"+R.y1+"_"+R.y2,Q.hasOwnProperty(R.name)===!1?(ne.push(R),Q[R.name]=R):(N=Q[R.name],N.p.contat(R.p)),R={x:V,y1:le,y2:le+1,p:[]});for(let me=0;me<D.chars.length;++me){const ue=D.chars[me],ge=ue.penState;if(ce===null||!ge.equals(ce)){M.trim().length>0&&(H.spans.push({name:U,line:M,row:le}),M="");let Ie="style_cea608_"+ge.foreground+"_"+ge.background;ge.underline&&(Ie+="_underline"),ge.italics&&(Ie+="_italics"),ee.hasOwnProperty(Ie)||(ee[Ie]=JSON.parse(JSON.stringify(ge))),ce=ge,U=Ie}M+=ue.uchar}M.trim().length>0&&H.spans.push({name:U,line:M,row:le}),F=!0,q=V}else F=!1,q=-1,R&&(R.p.push(H),H={start:L,end:P,spans:[]},R.y2=le,R.name="region_"+R.x+"_"+R.y1+"_"+R.y2,Q.hasOwnProperty(R.name)===!1?(ne.push(R),Q[R.name]=R):(N=Q[R.name],N.p.contat(R.p)),R=null)}R&&(R.p.push(H),R.y2=le+1,R.name="region_"+R.x+"_"+R.y1+"_"+R.y2,Q.hasOwnProperty(R.name)===!1?(ne.push(R),Q[R.name]=R):(N=Q[R.name],N.p.contat(R.p)),R=null);const O=[];for(le=0;le<ne.length;++le){const D=ne[le],M="sub_cea608_"+i++,ce=document.createElement("div");ce.id=M;const V=y(D);ce.style.cssText="position: absolute; margin: 0; display: flex; box-sizing: border-box; pointer-events: none;"+V;const me=document.createElement("div");me.className="paragraph bodyStyle",me.style.cssText=E(S);const ue=document.createElement("div");ue.className="cueUniWrapper",ue.style.cssText="unicode-bidi: normal; direction: ltr;";for(let Ie=0;Ie<D.p.length;++Ie){const Ee=D.p[Ie];let B=0;for(j=0;j<Ee.spans.length;++j){let K=Ee.spans[j];if(K.line.length>0){if(j!==0&&B!=K.row){const ae=document.createElement("br");ae.className="lineBreak",ue.appendChild(ae)}let Z=!1;B===K.row&&(Z=!0),B=K.row;const W=ee[K.name],X=document.createElement("span");X.className="spanPadding "+K.name+" customSpanColor",X.style.cssText=E(S,W),j!==0&&Z?j===Ee.spans.length-1?X.textContent=k(K.line):X.textContent=K.line:Ee.spans.length>1&&j<Ee.spans.length-1&&K.row===Ee.spans[j+1].row?X.textContent=C(K.line):X.textContent=K.line.trim(),ue.appendChild(X)}}}me.appendChild(ue),ce.appendChild(me);const ge={bodyStyle:["%",90]};for(const Ie in ee)ee.hasOwnProperty(Ie)&&(ge[Ie]=["%",90]);O.push({type:"html",start:L,end:P,cueHTMLElement:ce,cueID:M,cellResolution:[32,15],isFromCEA608:!0,fontSize:ge,lineHeight:{},linePadding:{}})}return O}},l}ou.__dashjs_factory_name="EmbeddedTextHtmlRender";var Of=o.default.getSingletonFactory(ou),ki=class{constructor(){this.time=null,this.verboseLevel=0}log(l,i){if(this.verboseLevel>=l){const d=typeof i=="function"?i():i;console.log(`${this.time} [${l}] ${d}`)}}},lu=class{constructor(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}reset(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1}setStyles(l){for(const i of["foreground","underline","italics","background","flash"])Object.prototype.hasOwnProperty.call(l,i)&&(this[i]=l[i])}isDefault(){return this.foreground==="white"&&!this.underline&&!this.italics&&this.background==="black"&&!this.flash}equals(l){return this.foreground===l.foreground&&this.underline===l.underline&&this.italics===l.italics&&this.background===l.background&&this.flash===l.flash}copy(l){this.foreground=l.foreground,this.underline=l.underline,this.italics=l.italics,this.background=l.background,this.flash=l.flash}},zf=class{constructor(){this.uchar=" ",this.penState=new lu}reset(){this.uchar=" ",this.penState.reset()}setChar(l,i){this.uchar=l,this.penState.copy(i)}setPenState(l){this.penState.copy(l)}equals(l){return this.uchar===l.uchar&&this.penState.equals(l.penState)}copy(l){this.uchar=l.uchar,this.penState.copy(l.penState)}isEmpty(){return this.uchar===" "&&this.penState.isDefault()}};const qa=100,Ff={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499};function uu(l){return String.fromCharCode(Ff[l]||l)}var Uf=class{constructor(l=new ki){this.chars=[],this.cueStartTime=null,this.pos=0,this.currPenState=new lu;for(let i=0;i<qa;i++)this.chars.push(new zf);this.logger=l}equals(l){for(let i=0;i<qa;i++)if(!this.chars[i].equals(l.chars[i]))return!1;return!0}copy(l){for(let i=0;i<qa;i++)this.chars[i].copy(l.chars[i])}isEmpty(){let l=!0;for(let i=0;i<qa;i++)if(!this.chars[i].isEmpty()){l=!1;break}return l}setCursor(l){this.pos!==l&&(this.pos=l),this.pos<0?(this.logger.log(3,"Negative cursor position "+this.pos),this.pos=0):this.pos>qa&&(this.logger.log(3,"Too large cursor position "+this.pos),this.pos=qa)}moveCursor(l){const i=this.pos+l;if(l>1)for(let d=this.pos+1;d<i+1;d++)this.chars[d].setPenState(this.currPenState);this.setCursor(i)}backSpace(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)}insertChar(l){l>=144&&this.backSpace();const i=uu(l);this.pos>=qa?this.logger.log(0,(()=>"Cannot insert "+l.toString(16)+" ("+i+") at position "+this.pos+". Skipping it!")):(this.chars[this.pos].setChar(i,this.currPenState),this.moveCursor(1))}clearFromPos(l){let i;for(i=l;i<qa;i++)this.chars[i].reset()}clear(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()}clearToEndOfRow(){this.clearFromPos(this.pos)}getTextString(){const l=[];let i=!0;for(let d=0;d<qa;d++){const y=this.chars[d].uchar;y!==" "&&(i=!1),l.push(y)}return i?"":l.join("")}setPenStyles(l){this.currPenState.setStyles(l),this.chars[this.pos].setPenState(this.currPenState)}};const cr=15;var Ts=class{constructor(l=new ki){this.rows=[],this.currRow=14,this.nrRollUpRows=null,this.lastOutputScreen=null;for(let i=0;i<cr;i++)this.rows.push(new Uf(l));this.logger=l}reset(){for(let l=0;l<cr;l++)this.rows[l].clear();this.currRow=14}equals(l){let i=!0;for(let d=0;d<cr;d++)if(!this.rows[d].equals(l.rows[d])){i=!1;break}return i}copy(l){for(let i=0;i<cr;i++)this.rows[i].copy(l.rows[i])}isEmpty(){let l=!0;for(let i=0;i<cr;i++)if(!this.rows[i].isEmpty()){l=!1;break}return l}backSpace(){this.rows[this.currRow].backSpace()}clearToEndOfRow(){this.rows[this.currRow].clearToEndOfRow()}insertChar(l){this.rows[this.currRow].insertChar(l)}setPen(l){this.rows[this.currRow].setPenStyles(l)}moveCursor(l){this.rows[this.currRow].moveCursor(l)}setCursor(l){this.logger.log(2,"setCursor: "+l),this.rows[this.currRow].setCursor(l)}setPAC(l){this.logger.log(2,(()=>"pacData = "+JSON.stringify(l)));let i=l.row-1;if(this.nrRollUpRows&&i<this.nrRollUpRows-1&&(i=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==i){for(let C=0;C<cr;C++)this.rows[C].clear();const b=this.currRow+1-this.nrRollUpRows,E=this.lastOutputScreen;if(E){const C=E.rows[b].cueStartTime,k=this.logger.time;if(C!==null&&k!==null&&C<k)for(let S=0;S<this.nrRollUpRows;S++)this.rows[i-this.nrRollUpRows+S+1].copy(E.rows[b+S])}}this.currRow=i;const d=this.rows[this.currRow];if(l.indent!==null){const b=l.indent,E=Math.max(b-1,0);d.setCursor(l.indent),l.color=d.chars[E].penState.foreground}const y={foreground:l.color,underline:l.underline,italics:l.italics,background:"black",flash:!1};this.setPen(y)}setBkgData(l){this.logger.log(2,(()=>"bkgData = "+JSON.stringify(l))),this.backSpace(),this.setPen(l),this.insertChar(32)}setRollUpRows(l){this.nrRollUpRows=l}rollUp(){if(this.nrRollUpRows===null)return void this.logger.log(3,"roll_up but nrRollUpRows not set yet");this.logger.log(1,(()=>this.getDisplayText()));const l=this.currRow+1-this.nrRollUpRows,i=this.rows.splice(l,1)[0];i.clear(),this.rows.splice(this.currRow,0,i),this.logger.log(2,"Rolling up")}getDisplayText(l){l=l||!1;const i=[];let d="",y=-1;for(let b=0;b<cr;b++){const E=this.rows[b].getTextString();E&&(y=b+1,l?i.push("Row "+y+": '"+E+"'"):i.push(E.trim()))}return i.length>0&&(d=l?"["+i.join(" | ")+"]":i.join(`
`)),d}getTextAndFormat(){return this.rows}},cu=class{constructor(l,i,d=new ki){this.chNr=l,this.outputFilter=i,this.mode=null,this.displayedMemory=new Ts(d),this.nonDisplayedMemory=new Ts(d),this.lastOutputScreen=new Ts(d),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.logger=d,this.logger.log(2,"new Cea608Channel("+this.chNr+")")}reset(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.outputFilter?.reset?.(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}getHandler(){return this.outputFilter}setHandler(l){this.outputFilter=l}setPAC(l){this.writeScreen.setPAC(l)}setBkgData(l){this.writeScreen.setBkgData(l)}setMode(l){l!==this.mode&&(this.mode=l,this.logger.log(2,(()=>"MODE="+l)),this.mode==="MODE_POP-ON"?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),this.mode!=="MODE_ROLL-UP"&&(this.displayedMemory.setRollUpRows(null),this.nonDisplayedMemory.setRollUpRows(null)),this.mode=l)}insertChars(l){for(const d of l)this.writeScreen.insertChar(d);const i=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";this.logger.log(2,(()=>i+": "+this.writeScreen.getDisplayText(!0))),this.mode!=="MODE_PAINT-ON"&&this.mode!=="MODE_ROLL-UP"||(this.logger.log(1,(()=>"DISPLAYED: "+this.displayedMemory.getDisplayText(!0))),this.outputDataUpdate())}ccRCL(){this.logger.log(2,"RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")}ccBS(){this.logger.log(2,"BS - BackSpace"),this.mode!=="MODE_TEXT"&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())}ccAOF(){}ccAON(){}ccDER(){this.logger.log(2,"DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()}ccRU(l){this.logger.log(2,"RU("+l+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(l)}ccFON(){this.logger.log(2,"FON - Flash On"),this.writeScreen.setPen({flash:!0})}ccRDC(){this.logger.log(2,"RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")}ccTR(){this.logger.log(2,"TR"),this.setMode("MODE_TEXT")}ccRTD(){this.logger.log(2,"RTD"),this.setMode("MODE_TEXT")}ccEDM(){this.logger.log(2,"EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)}ccCR(){this.logger.log(2,"CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)}ccENM(){this.logger.log(2,"ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()}ccEOC(){if(this.logger.log(2,"EOC - End Of Caption"),this.mode==="MODE_POP-ON"){const l=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=l,this.writeScreen=this.nonDisplayedMemory,this.logger.log(1,(()=>"DISP: "+this.displayedMemory.getDisplayText()))}this.outputDataUpdate(!0)}ccTO(l){this.logger.log(2,"TO("+l+") - Tab Offset"),this.writeScreen.moveCursor(l)}ccMIDROW(l){const i={flash:!1};i.underline=l%2==1,i.italics=l>=46,i.italics?i.foreground="white":i.foreground=["white","green","blue","cyan","red","yellow","magenta"][Math.floor(l/2)-16],this.logger.log(2,"MIDROW: "+JSON.stringify(i)),this.writeScreen.setPen(i)}outputDataUpdate(l=!1){const i=this.logger.time;i!==null&&this.outputFilter&&(this.cueStartTime!==null||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,i,this.lastOutputScreen),l&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:i):this.cueStartTime=i,this.lastOutputScreen.copy(this.displayedMemory))}cueSplitAtTime(l){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,l,this.displayedMemory),this.cueStartTime=l))}};const Bf=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];function jf(l,i,d){return d.a===l&&d.b===i}function dr(l){const i=[];for(const d of l)i.push(d.toString(16));return i}const qf={17:2,18:4,21:6,22:8,23:10,19:13,20:15},Hf={25:2,26:4,29:6,30:8,31:10,27:13,28:15},Gf={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},Yf={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14};function Ii(l,i,d){d.a=l,d.b=i}var du=class{constructor(l,i,d){this.currentChannel=0,this.cmdHistory={a:null,b:null},this.lastTime=null;const y=this.logger=new ki;this.channels=[null,new cu(l,i,y),new cu(l+1,d,y)]}addData(l,i){this.lastTime=l,this.logger.time=l;for(let d=0;d<i.length;d+=2){const y=127&i[d],b=127&i[d+1];let E=!1,C=null;if(this.lastTime!==null&&(l=this.lastTime+.5*d*1001/3e4,this.logger.time=l),y===0&&b===0)continue;this.logger.log(3,(()=>"["+dr([i[d],i[d+1]])+"] -> ("+dr([y,b])+")"));const k=this.cmdHistory;if(y>=16&&y<=31){if(jf(y,b,k)){Ii(null,null,k),this.logger.log(3,(()=>"Repeated command ("+dr([y,b])+") is dropped"));continue}Ii(y,b,this.cmdHistory),E=this.parseCmd(y,b),E||(E=this.parseMidrow(y,b)),E||(E=this.parsePAC(y,b)),E||(E=this.parseBackgroundAttributes(y,b))}else Ii(null,null,k);if(!E&&(C=this.parseChars(y,b),C.length)){const S=this.currentChannel;S&&S>0?this.channels[S].insertChars(C):this.logger.log(2,"No channel found yet. TEXT-MODE?")}E||C||this.logger.log(2,(()=>"Couldn't parse cleaned data "+dr([y,b])+" orig: "+dr([i[d],i[d+1]])))}}parseCmd(l,i){if(!((l===20||l===28||l===21||l===29)&&i>=32&&i<=47||(l===23||l===31)&&i>=33&&i<=35))return!1;const d=l===20||l===21||l===23?1:2,y=this.channels[d];return l===20||l===21||l===28||l===29?i===32?y.ccRCL():i===33?y.ccBS():i===34?y.ccAOF():i===35?y.ccAON():i===36?y.ccDER():i===37?y.ccRU(2):i===38?y.ccRU(3):i===39?y.ccRU(4):i===40?y.ccFON():i===41?y.ccRDC():i===42?y.ccTR():i===43?y.ccRTD():i===44?y.ccEDM():i===45?y.ccCR():i===46?y.ccENM():i===47&&y.ccEOC():y.ccTO(i-32),this.currentChannel=d,!0}parseMidrow(l,i){let d=0;if((l===17||l===25)&&i>=32&&i<=47){if(d=l===17?1:2,d!==this.currentChannel)return this.logger.log(0,"Mismatch channel in midrow parsing"),!1;const y=this.channels[d];return!!y&&(y.ccMIDROW(i),this.logger.log(3,(()=>"MIDROW ("+dr([l,i])+")")),!0)}return!1}parsePAC(l,i){let d;if(!((l>=17&&l<=23||l>=25&&l<=31)&&i>=64&&i<=127||(l===16||l===24)&&i>=64&&i<=95))return!1;const y=l<=23?1:2;d=i>=64&&i<=95?y===1?Gf[l]:Yf[l]:y===1?qf[l]:Hf[l];const b=this.channels[y];return!!b&&(b.setPAC(this.interpretPAC(d,i)),this.currentChannel=y,!0)}interpretPAC(l,i){let d;const y={color:null,italics:!1,indent:null,underline:!1,row:l};return d=i>95?i-96:i-64,y.underline=!(1&~d),d<=13?y.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(d/2)]:d<=15?(y.italics=!0,y.color="white"):y.indent=4*Math.floor((d-16)/2),y}parseChars(l,i){let d,y=[],b=null;if(l>=25?(d=2,b=l-8):(d=1,b=l),b>=17&&b<=19){let E;E=b===17?i+80:b===18?i+112:i+144,this.logger.log(2,(()=>"Special char '"+uu(E)+"' in channel "+d)),y=[E]}else l>=32&&l<=127&&(y=i===0?[l]:[l,i]);return y&&this.logger.log(3,(()=>"Char codes =  "+dr(y).join(","))),y}parseBackgroundAttributes(l,i){if(!((l===16||l===24)&&i>=32&&i<=47||(l===23||l===31)&&i>=45&&i<=47))return!1;let d;const y={};l===16||l===24?(d=Math.floor((i-32)/2),y.background=Bf[d],i%2==1&&(y.background=y.background+"_semi")):i===45?y.background="transparent":(y.foreground="black",i===47&&(y.underline=!0));const b=l<=23?1:2;return this.channels[b].setBkgData(y),!0}reset(){for(let l=0;l<Object.keys(this.channels).length;l++){const i=this.channels[l];i&&i.reset()}Ii(null,null,this.cmdHistory)}cueSplitAtTime(l){for(const i of this.channels)i&&i.cueSplitAtTime(l)}};function Kf(l,i,d){const y=[];for(let b=i;b<d;b++)b+2<d&&l.getUint8(b)===0&&l.getUint8(b+1)===0&&l.getUint8(b+2)===3?(y.push(0),y.push(0),b+=2):y.push(l.getUint8(b));return new DataView(new Uint8Array(y).buffer)}function Vf(l,i,d,y){return!(l!==4||i<8)&&d.getUint8(y)===181&&d.getUint16(y+1)===49&&d.getUint32(y+3)===1195456820&&d.getUint8(y+7)===3}function $f(l,i){return(127&l)>0||(127&i)>0}function Wf(l,i){let d=0;for(;d<l.byteLength;){let b,E=0,C=0;do E+=b=l.getUint8(d++);while(b===255);do C+=b=l.getUint8(d++);while(b===255);if(Vf(E,C,l,d)){const k=d+10,S=k+3*(31&l.getUint8(k-2));for(let L=k;L<S;L+=3){const P=l.getUint8(L);if(4&P){const w=3&P;if((y=w)===0||y===1){const R=l.getUint8(L+1),N=l.getUint8(L+2);$f(R,N)&&i[w].push(R,N)}}}}d+=C}var y}function Qf(l,i,d){let y=0,b=0;const E=[[],[]];for(let C=i;C<i+d-5&&(y=l.getUint32(C),b=31&l.getUint8(C+4),!(C+5+y>i+d));C++)b===6&&C+5+y<=l.byteLength&&Wf(Kf(l,C+5,C+5+y),E),C+=y+3;return E}function fu(l){const i=l.errHandler,d=l.manifestModel,y=l.mediaController,b=l.videoModel,E=l.textTracks,C=l.vttParser,k=l.vttCustomRenderingParser,S=l.ttmlParser,L=l.streamInfo,P=l.settings,w=this.context,R=(0,T.default)(w).getInstance();let N,F,q,H,U,Q,ee,ne,le,j,O,D,M,ce,V,me,ue,ge=!1;function Ie(){Q=null,ne=NaN,le=[],j=null,ee=!1,U=[],H=null}function Ee(de){const pe={};pe[fe.default.SUBTITLE]="subtitles",pe[fe.default.CAPTION]="captions",pe[fe.default.FORCED_SUBTITLE]="subtitles";const _e=new Mf;for(let we in de)_e[we]=de[we];_e.defaultTrack=(function(we){let Pe=!1;return D.length>1&&we.isEmbedded?Pe=we.id&&we.id===c.default.CC1:D.length===1?we.id&&typeof we.id=="string"&&we.id.substring(0,2)==="CC"&&(Pe=!0):D.length===0&&(Pe=we.index===U[0].index),Pe})(de),_e.isTTML=(function(we){return we.codec&&we.codec.search(c.default.STPP)>=0||we.mimeType&&we.mimeType.search(c.default.TTML)>=0})(de),_e.kind=(function(we,Pe){let Ke=we.roles&&we.roles.length>0?Pe[we.roles[0].value]:Pe.caption;return Ke=Object.values(Pe).includes(Ke)?Ke:Pe.caption,Ke})(de,pe),E.addTextTrackInfo(_e)}function B(de){const pe=de.chunk;pe.representation.mediaInfo.embeddedCaptions&&Z(pe.bytes,pe)}function K(de){O=de}function Z(de,pe){const _e=pe.representation.mediaInfo,we=_e.type,Pe=_e.mimeType,Ke=_e.codec||Pe;Ke?_e.codec.indexOf("application/mp4")!==-1?(function(et,ut,qt){let dt,jt;if(ut.segmentType==="InitializationSegment")ee=!0,ne=q.getMediaTimescaleFromMoov(et);else{if(!ee)return;jt=q.getSamplesInfo(et),dt=jt.sampleList,dt.length>0&&(j=dt[0].cts-ut.start*ne),qt.search(c.default.STPP)>=0?(function(Zt,En,yn){let nn,fn;for(H=H!==null?H:ae(yn),nn=0;nn<En.length;nn++){const Ue=En[nn],it=Ue.cts,nt=X(),gt=nt+it/ne,Ft=gt+Ue.duration/ne;N.buffered.add(gt,Ft);const un=new DataView(Zt,Ue.offset,Ue.subSizes[0]);let Xe=Kr.Utils.dataViewToString(un,c.default.UTF8);const ct=[];let kt=Ue.offset+Ue.subSizes[0];for(fn=1;fn<Ue.subSizes.length;fn++){const Me=new Uint8Array(Zt,kt,Ue.subSizes[fn]),qe=String.fromCharCode.apply(null,Me);ct.push(qe),kt+=Ue.subSizes[fn]}try{const Me=d.getValue().ttmlTimeIsRelative?it/ne:0,qe=H.parse(Xe,Me,it/ne,(it+Ue.duration)/ne,ct);E.addCaptions(O,nt,qe)}catch(Me){Q.removeExecutedRequestsBeforeTime(),z(),F.error("TTML parser error: "+Me)}}})(et,dt,qt):(function(Zt,En){let yn,nn,fn;const Ue=[];for(yn=0;yn<En.length;yn++){const it=En[yn];it.cts-=j;const nt=X()+it.cts/ne,gt=nt+it.duration/ne;N.buffered.add(nt,gt);const Ft=Zt.slice(it.offset,it.offset+it.size),un=Kr.parseBuffer(Ft);for(nn=0;nn<un.boxes.length;nn++){const Xe=un.boxes[nn];if(F.debug("VTT box1: "+Xe.type),Xe.type!=="vtte"&&Xe.type==="vttc"){F.debug("VTT vttc boxes.length = "+Xe.boxes.length);let ct={styles:{}};for(fn=0;fn<Xe.boxes.length;fn++){const kt=Xe.boxes[fn];if(F.debug("VTT box2: "+kt.type),kt.type==="payl")ct.start=it.cts/ne,ct.end=(it.cts+it.duration)/ne,ct.data=kt.cue_text;else if(kt.type==="sttg"&&kt.settings&&kt.settings!=="")try{const Me=kt.settings.split(" ");ct.styles=C.getCaptionStyles(Me)}catch{}}ct&&ct.data&&(Ue.push(ct),F.debug(`VTT  ${ct.start} - ${ct.end} :  ${ct.data}`))}}}Ue.length>0&&E.addCaptions(O,0,Ue)})(et,dt)}})(de,pe,Ke):we===c.default.VIDEO?(function(et,ut){let qt,dt;if(ut.segmentType===De.HTTPRequest.INIT_SEGMENT_TYPE)M===0&&(M=q.getMediaTimescaleFromMoov(et));else if(ut.segmentType===De.HTTPRequest.MEDIA_SEGMENT_TYPE){if(M===0)return void F.warn("CEA-608: No timescale for embeddedTextTrack yet");dt=q.getSamplesInfo(et);const jt=dt.lastSequenceNumber,Zt=Math.trunc(ut.start),En=Math.trunc(ut.end);if(me[0]||me[1]||(function(){let yn;for(let nn=0;nn<D.length;nn++){if(yn=E.getTrackIdxForId(D[nn].id),yn===-1)return void F.warn("CEA-608: data before track is ready.");const fn=W(yn);me[nn]=new du(nn+1,{newCue:fn},null)}})(),M){if((function(nn,fn,Ue,it,nt){return nn!==null&&fn!==null&&it!==null&&nt!==null&&(fn===nn?it!==nt:fn!==nn+Ue)})(ce,jt,dt.numSequences,V,Zt))for(qt=0;qt<me.length;qt++)me[qt]&&me[qt].reset();const yn=(function(nn,fn){if(fn.length===0)return null;const Ue={splits:[],fields:[[],[]]},it=new DataView(nn);for(let nt=0;nt<fn.length;nt++){const gt=fn[nt],Ft=Qf(it,gt.offset,gt.size);let un=null,Xe=0;for(let ct=0;ct<2;ct++)if(Ft[ct].length>0){gt.cts!==un?Xe=0:Xe+=1;const kt=X();Ue.fields[ct].push([gt.cts+kt*M,Ft[ct],Xe]),un=gt.cts}}return Ue.fields.forEach((function(nt){nt.sort((function(gt,Ft){return gt[0]===Ft[0]?gt[2]-Ft[2]:gt[0]-Ft[0]}))})),Ue})(et,dt.sampleList);for(let nn=0;nn<me.length;nn++){const fn=yn.fields[nn],Ue=me[nn];if(Ue)for(qt=0;qt<fn.length;qt++)Ue.addData(fn[qt][0]/M,fn[qt][1])}ce=jt,V=En}}})(de,pe):(function(et,ut,qt){let dt,jt;const Zt=new DataView(et,0,et.byteLength);jt=Kr.Utils.dataViewToString(Zt,c.default.UTF8);try{dt=ae(qt).parse(jt,0),E.addCaptions(E.getCurrentTrackIdx(),0,dt),N.buffered&&N.buffered.add(ut.start,ut.end)}catch(En){i.error(new Bt.default(Gt.TIMED_TEXT_ERROR_ID_PARSE_CODE,Gt.TIMED_TEXT_ERROR_MESSAGE_PARSE+En.message,jt))}})(de,pe,Ke):F.error("No text type defined")}function W(de){return function(pe,_e,we){let Pe;Pe=b.getTTMLRenderingDiv()?ue.createHTMLCaptionsFromScreen(b.getElement(),pe,_e,we):[{start:pe,end:_e,data:we.getDisplayText(),styles:{}}],Pe&&E.addCaptions(de,0,Pe)}}function X(){return isNaN(N.timestampOffset)?0:N.timestampOffset}function ae(de){let pe;return de.search(c.default.VTT)>=0?pe=P.get().streaming.text.webvtt.customRenderingEnabled&&k?k:C:(de.search(c.default.TTML)>=0||de.search(c.default.STPP)>=0)&&(pe=S),pe}function z(de,pe){de===void 0&&de===pe&&(de=N.buffered.start(0),pe=N.buffered.end(N.buffered.length-1)),N.buffered.remove(de,pe),E.deleteCuesFromTrackIdx(O,de,pe)}function ie(de){D.forEach((function(pe){const _e=E.getTrackIdxForId(pe.id);_e>=0&&E.deleteCuesFromTrackIdx(_e,de.from,de.to)}))}return N={initialize:function(){ge||(D=[],O=null,M=0,me=[],ce=null,V=null,ge=!0,ue=Of(w).getInstance(),R.on(f.default.VIDEO_CHUNK_RECEIVED,B,N),R.on(f.default.BUFFER_CLEARED,ie,N))},addMediaInfos:function(de,pe,_e){if(U=U.concat(pe),de===c.default.TEXT&&pe[0].isFragmented&&!pe[0].isEmbedded){Q=_e,N.buffered=(0,Pf.default)(w).create(),le=y.getTracksFor(c.default.TEXT,L.id).filter((Pe=>Pe.isFragmented));const we=y.getCurrentTrackFor(c.default.TEXT,L.id);for(let Pe=0;Pe<le.length;Pe++)if(le[Pe]===we){K(Pe);break}}for(let we=0;we<pe.length;we++)Ee(pe[we])},resetMediaInfos:function(){U=[]},getStreamId:function(){return L.id},append:Z,abort:function(){},addEmbeddedTrack:function(de){if(ge&&de)if(de.id===c.default.CC1||de.id===c.default.CC3){for(let pe=0;pe<D.length;pe++)if(D[pe].id===de.id)return;D.push(de)}else F.warn("Embedded track "+de.id+" not supported!")},resetEmbedded:function(){R.off(f.default.VIDEO_CHUNK_RECEIVED,B,N),R.off(f.default.BUFFER_CLEARED,ie,N),E&&E.deleteAllTextTracks(),ge=!1,D=[],me=[null,null],ce=null,V=null},getConfig:function(){return{fragmentModel:Q,fragmentedTracks:le,videoModel:b}},setCurrentFragmentedTrackIdx:K,remove:z,reset:function(){Ie(),U=[],q=null}},F=(0,u.default)(w).getInstance().getLogger(N),q=yi(w).getInstance(),Ie(),N}fu.__dashjs_factory_name="TextSourceBuffer";var Xf=o.default.getClassFactory(fu);class Jf{constructor(){this.root=null,this.size=0}addCue(i){const d={start:i.startTime,end:i.endTime,cue:i,maxEnd:i.endTime,left:null,right:null,height:1},[y,b]=this._insert(d,this.root);this.root=y,b&&this.size++}removeCue(i){const[d,y]=this._remove(i,this.root);return this.root=d,y&&this.size--,y}findCuesInRange(i,d){const y=[];return this._searchRange(this.root,i,d,y),y}findCuesAtTime(i){return this.findCuesInRange(i,i)}getAllCues(){const i=[];return this._inorderTraversal(this.root,i),i}getSize(){return this.size}clear(){this.root=null,this.size=0}_compareCues(i,d){return i.startTime!==d.startTime?i.startTime-d.startTime:i.endTime!==d.endTime?i.endTime-d.endTime:typeof VTTCue<"u"&&i instanceof VTTCue&&d instanceof VTTCue||i.text&&d.text?i.text.localeCompare(d.text):0}_compareIntervals(i,d){return this._compareCues(i.cue,d.cue)}_insert(i,d){if(!d)return[i,!0];const y=this._compareIntervals(i,d);if(y<0){const[E]=this._insert(i,d.left);d.left=E}else{if(!(y>0))return[d,!1];{const[E]=this._insert(i,d.right);d.right=E}}d.height=1+Math.max(this._getHeight(d.left),this._getHeight(d.right)),d.maxEnd=Math.max(d.maxEnd,i.maxEnd);const b=this._getBalance(d);return b>1?(this._compareIntervals(i,d.left)<0||(d.left=this._leftRotate(d.left)),[this._rightRotate(d),!0]):b<-1?(this._compareIntervals(i,d.right)>0||(d.right=this._rightRotate(d.right)),[this._leftRotate(d),!0]):[d,!0]}_searchRange(i,d,y,b){i&&(this._overlaps(i,d,y)&&b.push(i.cue),i.left&&i.left.maxEnd>=d&&this._searchRange(i.left,d,y,b),i.right&&i.start<=y&&this._searchRange(i.right,d,y,b))}_inorderTraversal(i,d){i&&(this._inorderTraversal(i.left,d),d.push(i.cue),this._inorderTraversal(i.right,d))}_overlaps(i,d,y){if(y===d){const b=d;return i.start<=b&&b<i.end}return i.start<y&&d<i.end}_getHeight(i){return i?i.height:0}_getBalance(i){return i?this._getHeight(i.left)-this._getHeight(i.right):0}_leftRotate(i){const d=i.right,y=d.left;return d.left=i,i.right=y,i.height=1+Math.max(this._getHeight(i.left),this._getHeight(i.right)),d.height=1+Math.max(this._getHeight(d.left),this._getHeight(d.right)),i.maxEnd=Math.max(i.end,i.left?i.left.maxEnd:0,i.right?i.right.maxEnd:0),d.maxEnd=Math.max(d.end,d.left?d.left.maxEnd:0,d.right?d.right.maxEnd:0),d}_rightRotate(i){const d=i.left,y=d.right;return d.right=i,i.left=y,i.height=1+Math.max(this._getHeight(i.left),this._getHeight(i.right)),d.height=1+Math.max(this._getHeight(d.left),this._getHeight(d.right)),i.maxEnd=Math.max(i.end,i.left?i.left.maxEnd:0,i.right?i.right.maxEnd:0),d.maxEnd=Math.max(d.end,d.left?d.left.maxEnd:0,d.right?d.right.maxEnd:0),d}_remove(i,d){if(!d)return[null,!1];const y=this._compareCues(i,d.cue);if(y<0){const[b,E]=this._remove(i,d.left);return d.left=b,E&&this._updateNode(d),[d,E]}if(y>0){const[b,E]=this._remove(i,d.right);return d.right=b,E&&this._updateNode(d),[d,E]}if(d.left||d.right){if(d.left){if(d.right){const b=this._findMin(d.right);d.cue=b.cue,d.start=b.start,d.end=b.end;const[E]=this._remove(b.cue,d.right);return d.right=E,this._updateNode(d),[d,!0]}return[d.left,!0]}return[d.right,!0]}return[null,!0]}_findMin(i){for(;i.left;)i=i.left;return i}_updateNode(i){i.height=1+Math.max(this._getHeight(i.left),this._getHeight(i.right)),i.maxEnd=Math.max(i.end,i.left?i.left.maxEnd:0,i.right?i.right.maxEnd:0)}}var vs=t(7640);const mu=["text","align","fontSize","id","isd","line","lineAlign","lineHeight","linePadding","position","positionAlign","region","size","snapToLines","vertical"];function gu(l){const i=this.context,d=(0,T.default)(i).getInstance(),y=l.videoModel,b=l.streamInfo,E=l.settings;let C,k,S,L,P,w,R,N,F,q,H,U,Q,ee,ne,le,j,O,D,M;const ce=new Map;function V(Ue){const it=Ue.kind,nt=Ue.id!==void 0?Ue.id:Ue.lang,gt=Ue.lang,Ft=Ue.isTTML,un=Ue.isEmbedded;return y.addTextTrack(it,nt,gt,Ft,un)}function me(Ue,it,nt,gt,Ft,un){let Xe=0,ct=0;Ue/it>nt/gt?(ct=it,Xe=ct/gt*nt):(Xe=Ue,ct=Xe/nt*gt);let kt=0,Me=0,qe=0,st=0;return Xe/ct>Ft?(st=ct,qe=ct*Ft):(qe=Xe,st=Xe/Ft),kt=(Ue-qe)/2,Me=(it-st)/2,un?{x:kt+.1*qe,y:Me+.1*st,w:.8*qe,h:.8*st}:{x:kt,y:Me,w:qe,h:st}}function ue(Ue,it){const nt=y.getClientWidth(),gt=y.getClientHeight(),Ft=y.getVideoWidth(),un=y.getVideoHeight(),Xe=y.getVideoRelativeOffsetTop(),ct=y.getVideoRelativeOffsetLeft();if(Ft!==0&&un!==0){let kt=Ft/un,Me=!1;Ue.isFromCEA608&&(kt=3.5/3,Me=!0);const qe=me.call(this,nt,gt,Ft,un,kt,Me),st=qe.w,Ge=qe.h,ht=qe.x,Tt=qe.y;if(st!=F||Ge!=q||ht!=R||Tt!=N||it){if(R=ht+ct,N=Tt+Xe,F=st,q=Ge,H){const $e=H.style;$e&&($e.left=R+"px",$e.top=N+"px",$e.width=F+"px",$e.height=q+"px",$e.zIndex=ee&&document[ee]||ne?j:null,d.trigger(v.default.CAPTION_CONTAINER_RESIZE))}const be=Ue.activeCues;if(be){const $e=be.length;for(let vt=0;vt<$e;++vt){const wt=be[vt];wt.scaleCue(wt)}}}}}function ge(Ue){const it=F,nt=q;let gt,Ft,un,Xe,ct;if(Ue.cellResolution){const kt=[it/Ue.cellResolution[0],nt/Ue.cellResolution[1]];if(Ue.linePadding){for(gt in Ue.linePadding)if(Ue.linePadding.hasOwnProperty(gt)){Ft=(Ue.linePadding[gt]*kt[0]).toString();const Me=document.getElementsByClassName("spanPadding");for(let qe=0;qe<Me.length;qe++)Me[qe].style.cssText=Me[qe].style.cssText.replace(/(padding-left\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ft),Me[qe].style.cssText=Me[qe].style.cssText.replace(/(padding-right\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ft)}}if(Ue.fontSize){for(gt in Ue.fontSize)if(Ue.fontSize.hasOwnProperty(gt)){Ue.fontSize[gt][0]==="%"?un=Ue.fontSize[gt][1]/100:Ue.fontSize[gt][0]==="c"&&(un=Ue.fontSize[gt][1]),Ft=(un*kt[1]).toString(),ct=gt!=="defaultFontSize"?document.getElementsByClassName(gt):document.getElementsByClassName("paragraph");for(let Me=0;Me<ct.length;Me++)ct[Me].style.cssText=ct[Me].style.cssText.replace(/(font-size\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ft)}if(Ue.lineHeight){for(gt in Ue.lineHeight)if(Ue.lineHeight.hasOwnProperty(gt)){Ue.lineHeight[gt][0]==="%"?Xe=Ue.lineHeight[gt][1]/100:Ue.fontSize[gt][0]==="c"&&(Xe=Ue.lineHeight[gt][1]),Ft=(Xe*kt[1]).toString(),ct=document.getElementsByClassName(gt);for(let Me=0;Me<ct.length;Me++)ct[Me].style.cssText=ct[Me].style.cssText.replace(/(line-height\s*:\s*)[\d.,]+(?=\s*px)/gi,"$1"+Ft)}}}}if(Ue.isd){let kt=document.getElementById(Ue.cueID);kt&&H.removeChild(kt),Ee(Ue)}}function Ie(Ue,it){const nt=/^(urn:)(mpeg:[a-z0-9][a-z0-9-]{0,31}:)(subs:)([0-9]+)$/,gt=/^#(.*)$/;if(nt.test(it)){const Ft=nt.exec(it),un=parseInt(Ft[4],10)-1;return"data:image/png;base64,"+btoa(Ue.images[un])}if(gt.test(it)){const Ft=gt.exec(it)[1];return"data:image/png;base64,"+Ue.embeddedImages[Ft]}return it}function Ee(Ue){if(H){nn.call(this);const it=document.createElement("div");H.appendChild(it),le=(0,vs.renderHTML)(Ue.isd,it,(function(nt){return Ie(Ue,nt)}),H.clientHeight,H.clientWidth,E.get().streaming.text.imsc.displayForcedOnlyMode,(function(nt){k.info("renderCaption :",nt)}),le,E.get().streaming.text.imsc.enableRollUp),it.id=Ue.cueID,d.trigger(v.default.CAPTION_RENDERED,{captionDiv:it,currentTrackIdx:w})}}function B(Ue,it){const nt=it.findCuesInRange(Ue.startTime-.1,Ue.endTime+.1);for(const gt of nt)if(K(Ue,gt)&&Z(Ue,gt,mu)||K(gt,Ue)&&Z(Ue,gt,mu))return gt;return null}function K(Ue,it){return!!it&&it.endTime>=Ue.startTime}function Z(Ue,it,nt){for(let gt=0;gt<nt.length;gt++){const Ft=nt[gt];if(JSON.stringify(Ue[Ft])!==JSON.stringify(it[Ft]))return!1}return!0}function W(Ue,it){it&&it.forEach((nt=>{nt.kind&&nt.kind==="image"&&(nt.src=Ie(Ue,nt.src)),W(Ue,nt.contents)}))}function X(Ue,it,nt){const gt=et(Ue),Ft=ce.get(gt),un=E.get().streaming.text.dispatchForManualRendering;if(gt&&Ft&&Array.isArray(nt)&&nt.length!==0){for(let kt=0;kt<nt.length;kt++){let Me=null;const qe=nt[kt];if(gt.cellResolution=qe.cellResolution,gt.isFromCEA608=qe.isFromCEA608,isNaN(qe.start)||isNaN(qe.end)||(un?Me=ae(qe,it):_e(qe)&&H?Me=de(qe,it,gt):qe.data&&(Me=pe(qe,it,gt))),Me){if(E.get().streaming.text.extendSegmentedCues){const st=B(Me,Ft.allCues);st&&(Ft.allCues.removeCue(st),ct=Me,(Xe=st).startTime=Math.min(Xe.startTime,ct.startTime),Xe.endTime=Math.max(Xe.endTime,ct.endTime),Me=Xe)}Ft.allCues.addCue(Me)}else k.error("Impossible to display subtitles. You might have missed setting a TTML rendering div via player.attachTTMLRenderingDiv(TTMLRenderingDiv)")}var Xe,ct;Zt()}}function ae(Ue,it){let nt=we(Ue,it);return nt.onenter=function(){_e(Ue)&&M&&M.cueID!==nt.cueID&&ie(M),delete nt.type,M=nt,z(nt)},nt.onexit=function(){ie(nt),M=null},nt}function z(Ue){d.trigger(v.default.CUE_ENTER,Ue)}function ie(Ue){d.trigger(v.default.CUE_EXIT,{cueID:Ue.cueID})}function de(Ue,it,nt){const gt=this;let Ft=we(Ue,it);return H.style.left=R+"px",H.style.top=N+"px",H.style.width=F+"px",H.style.height=q+"px",Ft.onenter=function(){nt.mode===c.default.TEXT_SHOWING&&(this.isd?(D?requestAnimationFrame((()=>Ee(this))):Ee(this),k.debug("Cue enter id:"+this.cueID)):(H.appendChild(this.cueHTMLElement),ge.call(gt,this),d.trigger(v.default.CAPTION_RENDERED,{captionDiv:this.cueHTMLElement,currentTrackIdx:w})))},Ft.onexit=function(){if(H){const un=H.childNodes;for(let Xe=0;Xe<un.length;++Xe)un[Xe].id===this.cueID&&(k.debug("Cue exit id:"+un[Xe].id),H.removeChild(un[Xe]),--Xe)}},Ft}function pe(Ue,it,nt){let gt=we(Ue,it);if(Ue.styles)try{Ue.styles.align!==void 0&&"align"in gt&&(gt.align=Ue.styles.align),Ue.styles.line!==void 0&&"line"in gt&&(gt.line=Ue.styles.line),Ue.styles.lineAlign!==void 0&&(gt.lineAlign=Ue.styles.lineAlign),Ue.styles.snapToLines!==void 0&&"snapToLines"in gt&&(gt.snapToLines=Ue.styles.snapToLines),Ue.styles.position!==void 0&&"position"in gt&&(gt.position=Ue.styles.position),Ue.styles.positionAlign!==void 0&&(gt.positionAlign=Ue.styles.positionAlign),Ue.styles.size!==void 0&&"size"in gt&&(gt.size=Ue.styles.size)}catch(Ft){k.error(Ft)}return gt.onenter=function(){nt.mode===c.default.TEXT_SHOWING&&d.trigger(v.default.CAPTION_RENDERED,{currentTrackIdx:w})},gt}function _e(Ue){return Ue.type==="html"}function we(Ue,it){return _e(Ue)?(function(nt,gt){let Ft=new S(nt.start+gt,nt.end+gt,"");return Ft.cueHTMLElement=nt.cueHTMLElement,Ft.isd=nt.isd,Ft.images=nt.images,Ft.embeddedImages=nt.embeddedImages,Ft.cueID=nt.cueID,Ft.scaleCue=ge.bind(self),Ft.cellResolution=nt.cellResolution,Ft.lineHeight=nt.lineHeight,Ft.linePadding=nt.linePadding,Ft.fontSize=nt.fontSize,Ft.isd&&W(Ft,Ft.isd.contents),Ft})(Ue,it):(function(nt,gt){let Ft=new S(nt.start-gt,nt.end-gt,nt.data);return Ft.cueID=We.default.generateUuid(),Ft})(Ue,it)}function Pe(Ue){if(U){const it=U.childNodes;for(let nt=0;nt<it.length;++nt)it[nt].id===Ue.cueID&&(U.removeChild(it[nt]),--nt)}}function Ke(){const Ue=y.getTextTracks(),it=[];for(const nt of Ue)nt.manualMode===c.default.TEXT_SHOWING&&it.push(nt);return it}function et(Ue){return Ue>=0&&L[Ue]?y.getTextTrack(L[Ue].kind,L[Ue].id,L[Ue].lang,L[Ue].isTTML,L[Ue].isEmbedded):null}function ut(Ue){if(Ue===w)return;w=Ue;const it=et(w);qt.call(this,it),Q&&(clearInterval(Q),Q=null),it&&it.renderingType==="html"&&(ue.call(this,it,!0),window.ResizeObserver?(O=new window.ResizeObserver((()=>{ue.call(this,it,!0)})),O.observe(y.getElement())):Q=setInterval(ue.bind(this,it),500))}function qt(Ue){nn.call(this),Ue&&Ue.renderingType==="html"?En.call(this):yn.call(this)}function dt(Ue,it,nt,gt=!0){return!!Ue&&(isNaN(it)||(gt?Ue.startTime:Ue.endTime)>=it)&&(isNaN(nt)||(gt?Ue.endTime:Ue.startTime)<=nt)}function jt(Ue,it,nt,gt=!0){if(!Ue)return;if(Ue.cues&&Ue.cues.length>0)for(let un=Ue.cues.length-1;un>=0;un--)dt(Ue.cues[un],it,nt,gt)&&(Ue.cues[un].onexit&&Ue.cues[un].onexit(),Ue.removeCue(Ue.cues[un]));const Ft=ce.get(Ue);if(Ft){const un=Ft.activeCues,Xe=un.filter((ct=>ct.startTime>=it&&ct.endTime<=nt));Xe.forEach((ct=>{E.get().streaming.text.dispatchForManualRendering?ie(ct):Pe(ct)})),Ft.activeCues=un.filter((ct=>!Xe.includes(ct)))}}function Zt(){for(const Ue of ce.values())Ue.lastCueWindowUpdate=-1/0}function En(){let Ue=document.getElementById("native-cue-style");if(Ue)return;Ue=document.createElement("style"),Ue.id="native-cue-style",document.head.appendChild(Ue);const it=Ue.sheet,nt=y.getElement();try{nt&&(nt.id?it.insertRule("#"+nt.id+"::cue {background: transparent}",0):nt.classList.length!==0?it.insertRule("."+nt.className+"::cue {background: transparent}",0):it.insertRule("video::cue {background: transparent}",0))}catch(gt){k.info(""+gt.message)}}function yn(){const Ue=document.getElementById("native-cue-style");Ue&&document.head.removeChild(Ue)}function nn(){if(H)for(;H.firstChild;)H.removeChild(H.firstChild)}function fn(){return L}return C={addCaptions:X,addTextTrackInfo:function(Ue){L.push(Ue)},createTracks:function(){L.sort((function(it,nt){return it.index-nt.index})),H=y.getTTMLRenderingDiv(),U=y.getVttRenderingDiv();let Ue=-1;for(let it=0;it<L.length;it++){const nt=V(L[it]);P.push(nt),L[it].defaultTrack&&(nt.default=!0,Ue=it);const gt=et(it);gt&&(gt.mode=c.default.TEXT_SHOWING,H&&(L[it].isTTML||L[it].isEmbedded)?gt.renderingType="html":gt.renderingType="default",ce.set(gt,{allCues:new Jf,lastCueWindowUpdate:-1/0,activeCues:[]})),X(it,0,L[it].captionData),d.trigger(v.default.TEXT_TRACK_ADDED)}if(ut.call(this,Ue),Ue>=0){let it=function(){const nt=et(Ue);nt&&nt.renderingType==="html"&&ue.call(this,nt,!0),d.off(v.default.PLAYBACK_METADATA_LOADED,it,this)};d.on(v.default.PLAYBACK_METADATA_LOADED,it,this);for(let nt=0;nt<L.length;nt++){const gt=et(nt);if(gt){const Ft=E.get().streaming.text.dispatchForManualRendering;gt.mode=nt!==Ue||Ft?c.default.TEXT_HIDDEN:c.default.TEXT_SHOWING,gt.manualMode=nt===Ue?c.default.TEXT_SHOWING:c.default.TEXT_HIDDEN}}}d.trigger(f.default.TEXT_TRACKS_QUEUE_INITIALIZED,{index:w,tracks:L,streamId:b.id})},deleteAllTextTracks:function(){const Ue=P?P.length:0;for(let it=0;it<Ue;it++){const nt=et(it);nt&&jt.call(this,nt,b.start,b.start+b.duration,!1)}P=[],L=[],Q&&(clearInterval(Q),Q=null),O&&y&&(O.unobserve(y.getElement()),O=null),w=-1,nn.call(this),ce.clear()},deleteCuesFromTrackIdx:function(Ue,it,nt){const gt=et(Ue);gt&&jt(gt,it,nt)},disableManualTracks:function(){const Ue=Ke();if(Ue&&Ue.length>0){const it=Ue[0],nt=ce.get(it);if(!nt)return;nt.activeCues.forEach((gt=>{E.get().streaming.text.dispatchForManualRendering?ie(gt):Pe(gt)})),nt.activeCues=[]}},getCurrentTrackIdx:function(){return w},getCurrentTextTrackInfo:function(){return L[w]},getStreamId:function(){return b.id},getTextTrackInfos:fn,getTrackIdxForId:function(Ue){let it=-1;for(let nt=0;nt<L.length;nt++)if(L[nt].id===Ue){it=nt;break}return it},initialize:function(){typeof window<"u"&&typeof navigator<"u"&&(S=window.VTTCue||window.TextTrackCue,L=[],P=[],w=-1,R=0,N=0,F=0,q=0,H=null,U=null,Q=null,ne=!1,j=2147483647,le=null,D="requestAnimationFrame"in window,ce.clear(),document.fullscreenElement!==void 0?ee="fullscreenElement":document.webkitIsFullScreen!==void 0?ee="webkitIsFullScreen":document.msFullscreenElement?ee="msFullscreenElement":document.mozFullScreen&&(ee="mozFullScreen"))},manualCueProcessing:function(Ue){const it=Ke();if(it&&it.length>0){const nt=it[0],gt=ce.get(nt);if(!gt)return;const Ft=gt.activeCues,un=gt.allCues.findCuesAtTime(Ue),Xe=Ft.filter((kt=>!un.includes(kt))),ct=un.filter((kt=>!Ft.includes(kt)));Xe.forEach((kt=>{E.get().streaming.text.dispatchForManualRendering?ie(kt):Pe(kt)})),ct.forEach((kt=>{E.get().streaming.text.dispatchForManualRendering?z(kt):WebVTT.processCues(window,[kt],U,kt.cueID)})),gt.activeCues=un}},setCurrentTrackIdx:ut,setModeForTrackIdx:function(Ue,it){const nt=et(Ue);nt&&nt.mode!==it&&(nt.mode=it),nt&&nt.manualMode!==it&&(nt.manualMode=it)},updateTextTrackWindow:function(Ue,it=!1){const nt=fn(),gt=E.get().streaming.text.webvtt.customRenderingEnabled;for(let Ft=0;Ft<nt.length;Ft++){const un=nt[Ft],Xe=et(Ft),ct=ce.get(Xe);if(!Xe||!ct||!un.isEmbedded&&gt)continue;const{bufferToKeep:kt,bufferPruningInterval:Me}=E.get().streaming.buffer,qe=Date.now();if((qe-ct.lastCueWindowUpdate)/1e3<Me&&!it)continue;const st=y.getPlaybackRate()||1,Ge=Math.max(0,Ue-kt/st),ht=Ue+2*Me/st;if(Xe.cues)for(;Xe.cues.length>0;)Xe.removeCue(Xe.cues[0]);Xe.mode!==c.default.TEXT_DISABLED&&ct.allCues.findCuesInRange(Ge,ht).forEach((Tt=>{Xe.addCue(Tt)})),ct.lastCueWindowUpdate=qe}},invalidateCueWindow:Zt},k=(0,u.default)(i).getInstance().getLogger(C),C}gu.__dashjs_factory_name="TextTracks";var Zf=o.default.getClassFactory(gu);function hu(){const l=this.context;let i,d,y,b,E,C;function k(w){const R=w.split(":"),N=R.length-1;return w=60*parseInt(R[N-1],10)+parseFloat(R[N]),N===2&&(w+=3600*parseInt(R[0],10)),w}function S(w){const R=w.split(b),N=R[1].split(C);return N.shift(),R[1]=N[0],N.shift(),{cuePoints:R,styles:L(N)}}function L(w){const R={};return w.forEach((function(N){const F=N.split(":");if(F.length>1){const[q,H]=F;switch(q){case"align":case"A":R.align=H;break;case"line":case"L":const[U,Q]=H.split(","),ee=U.endsWith("%");R.line=U==="auto"?U:parseInt(U,10),ee&&(R.snapToLines=!1),Q&&(R.lineAlign=Q);break;case"position":case"P":const[ne,le]=H.split(",");R.position=parseInt(ne,10),le&&(R.positionAlign=le);break;case"size":case"S":R.size=parseInt(H,10)}}})),R}function P(w,R){let N,F=R,q="",H="";for(;w[F]!==""&&F<w.length;)F++;if(N=F-R,N>1)for(let U=0;U<N;U++){if(H=w[R+U],H.match(b)){q="";break}q+=H,U!==N-1&&(q+=`
`)}else H=w[R],H.match(b)||(q=H);return q}return i={parse:function(w){const R=[];let N,F;if(!w)return R;N=(w=w.split(y)).length,F=-1;for(let q=0;q<N;q++){let H=w[q];if(H.length>0&&H!=="WEBVTT"&&H.match(b)){const U=S(H),Q=U.cuePoints,ee=U.styles,ne=P(w,q+1),le=k(Q[0].replace(E,"")),j=k(Q[1].replace(E,""));!isNaN(le)&&!isNaN(j)&&le>=F&&j>le?ne!==""?(F=le,R.push({start:le,end:j,data:ne,styles:ee})):d.error("Skipping cue due to empty/malformed cue text"):d.error("Skipping cue due to incorrect cue timing")}}return R},getCaptionStyles:L},d=(0,u.default)(l).getInstance().getLogger(i),y=/(?:\r\n|\r|\n)/gm,b=/-->/,E=/(^[\s]+|[\s]+$)/g,C=/\s\b/g,i}hu.__dashjs_factory_name="VTTParser";var em=o.default.getSingletonFactory(hu);function pu(){let l,i;return l={parse:function(d){let y=[];return i.oncue=function(b){b.start=b.startTime,b.end=b.endTime,b.data=b.text,b.styles={align:b.align,line:b.line,position:b.position,size:b.size},y.push(b)},i.parse(d),y}},(function(){try{window&&window.WebVTT&&window.WebVTT.Parser&&(i=new window.WebVTT.Parser(window,window.vttjs,window.WebVTT.StringDecoder()))}catch{}})(),l}pu.__dashjs_factory_name="VttCustomRenderingParser";var tm=o.default.getSingletonFactory(pu);function yu(){const l=this.context,i=(0,T.default)(l).getInstance();let d,y,b=0;function E(){const C="cue_TTML_"+b;return b++,C}return d={parse:function(C,k,S,L,P){let w="";const R=[];let N,F,q;const H={},U={};let Q="",ee="",ne={onOpenTag:function(O,D,M){if(M[" imagetype"]&&!M[" imageType"]&&(i.trigger(v.default.CONFORMANCE_VIOLATION,{level:wr.LEVELS.ERROR,event:wr.EVENTS.NON_COMPLIANT_SMPTE_IMAGE_ATTRIBUTE}),M[" imageType"]=M[" imagetype"]),D==="image"&&(O==="http://www.smpte-ra.org/schemas/2052-1/2010/smpte-tt"||O==="http://www.smpte-ra.org/schemas/2052-1/2013/smpte-tt")){if(!M[" imageType"]||M[" imageType"].value!=="PNG")return void y.warn("smpte-tt imageType != PNG. Discarded");Q=M["http://www.w3.org/XML/1998/namespace id"].value}},onCloseTag:function(){Q&&(U[Q]=ee.trim()),ee="",Q=""},onText:function(O){Q&&(ee+=O)}};if(!C)throw w="no ttml data to parse",new Error(w);H.data=C,i.trigger(f.default.TTML_TO_PARSE,H);let le=(0,vs.fromXML)(H.data,(function(O){w=O}),ne);i.trigger(f.default.TTML_PARSED,{ttmlString:H.data,ttmlDoc:le});const j=le.getMediaTimeEvents();for(q=0;q<j.length;q++){let O=(0,vs.generateISD)(le,j[q],(function(D){w=D}));O.contents.some((D=>D.contents.length))&&(N=j[q]+k,F=j[q+1]+k,N<F&&R.push({start:N,end:F,type:"html",cueID:E(),isd:O,images:P,embeddedImages:U}))}if(w!=="")throw y.error(w),new Error(w);return R}},y=(0,u.default)(l).getInstance().getLogger(d),d}yu.__dashjs_factory_name="TTMLParser";var nm=o.default.getSingletonFactory(yu);function bu(l){let i=this.context;const d=(0,T.default)(i).getInstance(),y=Dn(i).getInstance(),b=l.adapter,E=l.baseURLController,C="error",k="loaded",S="unloaded";let L,P,w;function R(q,H){let U,Q,ee=!1;if(E.resolve()){const j=b.getVoRepresentations(q);j&&j.length>0&&(U=E.resolve(j[0].path).url)}const ne=q.essentialProperties.filter((j=>j.schemeIdUri&&j.schemeIdUri===c.default.FONT_DOWNLOAD_DVB_SCHEME)),le=q.supplementalProperties.filter((j=>j.schemeIdUri&&j.schemeIdUri===c.default.FONT_DOWNLOAD_DVB_SCHEME));ne.length>0?(ee=!0,Q=ne):Q=le,Q.forEach((j=>{if((function(M){return!(!(M.value&&parseInt(M.value)===1&&M.dvbUrl&&M.dvbUrl.length>0&&M.dvbFontFamily&&M.dvbFontFamily.length>0&&M.dvbMimeType)||M.dvbMimeType!==c.default.OFF_MIMETYPE&&M.dvbMimeType!==c.default.WOFF_MIMETYPE)})(j)){let M=(O=j.dvbUrl,D=U,y.isPathAbsolute(O)?O:y.isRelative(O)?D?y.resolve(O,D):y.resolve(O):O);w.push({fontFamily:j.dvbFontFamily,url:M,mimeType:j.dvbMimeType,trackId:q.id,streamId:H,isEssential:ee,status:S,fontFace:new FontFace(j.dvbFontFamily,`url(${M})`,{display:"swap"})})}var O,D}))}function N(q,H){const U=w[q];w[q]={...U,status:H}}function F(){w=[]}return L={addFontsFromTracks:function(q,H){if(q&&Array.isArray(q)&&H)for(let U=0;U<q.length;U++)R(q[U],H)},downloadFonts:function(){for(let q=0;q<w.length;q++){let H=w[q];document.fonts.add(H.fontFace),d.trigger(v.default.DVB_FONT_DOWNLOAD_ADDED,H),H.fontFace.load().then((()=>{N(q,k),d.trigger(v.default.DVB_FONT_DOWNLOAD_COMPLETE,H)}),(U=>{N(q,C),P.debug("Font download error: ",U),d.trigger(v.default.DVB_FONT_DOWNLOAD_FAILED,H)}))}},getFonts:function(){return w},getFontsForTrackId:function(q){return w.filter((H=>H.trackId&&H.trackId===q))},reset:function(){(function(){for(const q of w){let H=document.fonts.delete(q.fontFace);P.debug(`Removal of fontFamily: ${q.fontFamily} was ${H?"successful":"unsuccessful"}`)}})(),F()}},P=(0,u.default)(i).getInstance().getLogger(L),F(),L}bu.__dashjs_factory_name="DVBFonts";var am=o.default.getClassFactory(bu);function Eu(l){let i=this.context;const d=l.adapter,y=l.errHandler,b=l.manifestModel,E=l.mediaController,C=l.baseURLController,k=l.videoModel,S=l.settings;let L,P,w,R,N,F,q,H,U,Q,ee,ne,le,j;function O(W){if(j.error(`Could not download ${W.isEssential?"an essential":"a"} font - fontFamily: ${W.fontFamily}, url: ${W.url}`),W.isEssential){let X=R[W.streamId].getTrackIdxForId(W.trackId);R[W.streamId].setModeForTrackIdx(X,c.default.TEXT_DISABLED)}}function D(W){if(j.debug(`Successfully downloaded ${W.isEssential?"an essential":"a"} font - fontFamily: ${W.fontFamily}, url: ${W.url}`),W.isEssential){let X=R[W.streamId].getTrackIdxForId(W.trackId);X===R[W.streamId].getCurrentTrackIdx()?R[W.streamId].setModeForTrackIdx(X,c.default.TEXT_SHOWING):R[W.streamId].setModeForTrackIdx(X,c.default.TEXT_HIDDEN)}}function M(W){let X=W.tracks,ae=W.index;const z=W.streamId;if(S.get().streaming.text.defaultEnabled===!1&&!ge()||ne)Ie(z,-1);else{const ie=E.getCurrentTrackFor(c.default.TEXT,z);if(ie){const de={lang:ie.lang,role:ie.roles[0],index:ie.index,codec:ie.codec,accessibility:ie.accessibility[0]};X.some(((pe,_e)=>{if(E.matchSettings(de,pe))return Ie(z,_e),ae=_e,!0}))}U=!1}P[z].lastEnabledIndex=ae,H.trigger(v.default.TEXT_TRACKS_ADDED,{enabled:ge(),index:ae,tracks:X,streamId:z}),ee=!0,le.addFontsFromTracks(X,z),le.getFonts().forEach((ie=>{if(ie.isEssential){let de=R[ie.streamId].getTrackIdxForId(ie.trackId);R[ie.streamId].setModeForTrackIdx(de,c.default.TEXT_DISABLED)}})),le.downloadFonts()}function ce(W){try{const X=W.streamId,ae=R[X];if(!ae||isNaN(W.time))return;ae.updateTextTrackWindow(W.time),S.get().streaming.text.webvtt.customRenderingEnabled&&ae.manualCueProcessing(W.time)}catch{}}function V(W){try{const X=W.streamId;if(!R[X])return;R[X].disableManualTracks()}catch{}}function me(W){try{const X=R[W.streamId];if(!X)return;const ae=k.getTime()||0;X.updateTextTrackWindow(ae,!0)}catch(X){j.error(X)}}function ue(W){try{if(!W||!W.mediaType||W.mediaType!==c.default.AUDIO||!W.currentMediaInfo)return;const X=R[W.streamId].getCurrentTextTrackInfo();let ae=NaN;U?ae=Ee(W.streamId):B(X)&&W.currentMediaInfo.lang&&W.currentMediaInfo.lang!==X.lang&&(ae=Ee(W.streamId),isNaN(ae)&&(ae=-1)),isNaN(ae)||Ie(W.streamId,ae)}catch(X){j.error(X)}}function ge(){let W=!0;return U&&!Q&&(W=!1),W}function Ie(W,X){U=X===-1,U&&E&&E.saveTextSettingsDisabled();let ae=K(W);if(ae===X||!R[W])return;R[W].disableManualTracks(),R[W].invalidateCueWindow();let z=R[W].getCurrentTextTrackInfo(),ie=z?k.getTextTrack(z.kind,z.id,z.lang,z.isTTML,z.isEmbedded):null;ie&&ie.mode!==c.default.TEXT_DISABLED&&R[W].setModeForTrackIdx(ae,c.default.TEXT_HIDDEN),R[W].setCurrentTrackIdx(X),z=R[W].getCurrentTextTrackInfo();const de=S.get().streaming.text.dispatchForManualRendering;if(z&&!de&&z.mode!==c.default.TEXT_DISABLED&&R[W].setModeForTrackIdx(X,c.default.TEXT_SHOWING),z&&z.isFragmented&&!z.isEmbedded)(function(pe,_e,we){if(!w[pe])return;let Pe=w[pe].getConfig().fragmentedTracks;for(let Ke=0;Ke<Pe.length;Ke++){let et=Pe[Ke];if(_e.lang===et.lang&&(et.id?_e.id===et.id:_e.index===et.index)){let ut=E.getCurrentTrackFor(c.default.TEXT,pe);(et.id?ut.id!==et.id:ut.index!==et.index)?(R[pe].deleteCuesFromTrackIdx(we),w[pe].setCurrentFragmentedTrackIdx(Ke)):we===-1&&H.trigger(f.default.SET_FRAGMENTED_TEXT_AFTER_DISABLED,{},{streamId:pe,mediaType:c.default.TEXT})}}})(W,z,ae);else if(z&&!z.isFragmented)(function(pe,_e){H.trigger(f.default.SET_NON_FRAGMENTED_TEXT,{currentTrackInfo:_e},{streamId:pe,mediaType:c.default.TEXT})})(W,z);else if(!z&&U){const pe=Ee(W);return void(isNaN(pe)||Ie(W,pe))}E.setTrack(z)}function Ee(W){const X=(function(ie){return R[ie].getTextTrackInfos().filter(((de,pe)=>(de._indexToSelect=pe,!!(de&&de.roles&&de.roles.length>0)&&B(de))))})(W);if(!X||X.length<=0)return NaN;const ae=E.getCurrentTrackFor(c.default.AUDIO,W);if(!ae)return NaN;const z=X.find((ie=>ae.lang===ie.lang));return z?z._indexToSelect:NaN}function B(W){return!(!W||!W.roles||W.roles.length===0)&&W.roles.some((X=>X.schemeIdUri===c.default.DASH_ROLE_SCHEME_ID&&X.value===fe.default.FORCED_SUBTITLE))}function K(W){return R[W].getCurrentTrackIdx()}function Z(){w={},R={},P={},U=!0,ee=!1,ne=!1}return L={addEmbeddedTrack:function(W,X){const ae=W.id;w[ae]&&w[ae].addEmbeddedTrack(X)},addMediaInfosToBuffer:function(W,X,ae,z=null){const ie=W.id;w[ie]&&w[ie].addMediaInfos(X,ae,z)},createTracks:function(W){const X=W.id;R[X]&&R[X].createTracks()},deactivateStream:function(W){if(!W)return;const X=W.id;w[X]&&w[X].resetMediaInfos(),R[X]&&R[X].deleteAllTextTracks()},enableForcedTextStreaming:function(W){return(0,rt.checkParameterType)(W,"boolean"),Q=W,!0},enableText:function(W,X){return(0,rt.checkParameterType)(X,"boolean"),ge()!==X&&(X&&Ie(W,P[W].lastEnabledIndex),X||(P[W].lastEnabledIndex=K(W),ee?Ie(W,-1):ne=!0)),!0},getAllTracksAreDisabled:function(){return U},getCurrentTrackIdx:K,getTextSourceBuffer:function(W){const X=W.id;if(w&&w[X])return w[X]},initialize:function(){le=am(i).create({adapter:d,baseURLController:C}),H.on(f.default.TEXT_TRACKS_QUEUE_INITIALIZED,M,L),H.on(f.default.DVB_FONT_DOWNLOAD_FAILED,O,L),H.on(f.default.DVB_FONT_DOWNLOAD_COMPLETE,D,L),H.on(f.default.MEDIAINFO_UPDATED,ue,L),H.on(f.default.PLAYBACK_TIME_UPDATED,ce,L),S.get().streaming.text.webvtt.customRenderingEnabled&&H.on(f.default.PLAYBACK_SEEKING,V,L),H.on(f.default.PLAYBACK_SEEKED,me,L)},initializeForStream:function(W){const X=W.id,ae=Zf(i).create({videoModel:k,settings:S,streamInfo:W});ae.initialize(),R[X]=ae;const z=Xf(i).create({errHandler:y,adapter:d,dvbFonts:le,manifestModel:b,mediaController:E,videoModel:k,textTracks:ae,vttParser:N,vttCustomRenderingParser:F,ttmlParser:q,streamInfo:W,settings:S});z.initialize(),w[X]=z,P[X]={},P[X].lastEnabledIndex=-1},isTextEnabled:ge,reset:function(){Object.keys(w).forEach((W=>{w[W].resetEmbedded(),w[W].reset()})),le.reset(),Z(),H.off(f.default.TEXT_TRACKS_QUEUE_INITIALIZED,M,L),H.off(f.default.DVB_FONT_DOWNLOAD_FAILED,O,L),H.off(f.default.DVB_FONT_DOWNLOAD_COMPLETE,D,L),H.off(f.default.MEDIAINFO_UPDATED,ue,L),H.off(f.default.PLAYBACK_TIME_UPDATED,ce,L),S.get().streaming.text.webvtt.customRenderingEnabled&&H.off(f.default.PLAYBACK_SEEKING,V,L),H.off(f.default.PLAYBACK_SEEKED,me,L)},setTextTrack:Ie,clearDataForStream:function(W){w[W]&&(w[W].resetEmbedded(),w[W].reset(),delete w[W]),R[W]&&(R[W].deleteAllTextTracks(),delete R[W]),P[W]&&delete P[W]}},Q=!1,ee=!1,ne=!1,N=em(i).getInstance(),F=tm(i).getInstance(),q=nm(i).getInstance(),H=(0,T.default)(i).getInstance(),j=(0,u.default)(i).getInstance().getLogger(L),Z(),L}Eu.__dashjs_factory_name="TextController";var rm=o.default.getClassFactory(Eu);function Tu(l){l=l||{};const i=this.context,d=(0,u.default)(i).getInstance(),y=l.settings,b=(0,T.default)(i).getInstance();let E,C,k,S,L,P;function w(){return navigator&&navigator.connection&&!isNaN(navigator.connection.downlink)&&navigator.connection.downlink>0?1e3*navigator.connection.downlink:NaN}function R(q,H,U,Q){const ee=Math.pow(.5,U/Q.fast);q.fastEstimate=(1-ee)*H+ee*q.fastEstimate;const ne=Math.pow(.5,U/Q.slow);q.slowEstimate=(1-ne)*H+ne*q.slowEstimate,q.totalWeight+=U}function N(){E={},C={},k={},S={}}const F={addEntry:function(q,H){try{if(!(q&&H&&H.trace&&H.trace.length))return;(function(ee){E[ee]=E[ee]||[],C[ee]=C[ee]||[],k[ee]=k[ee]||{fastEstimate:0,slowEstimate:0,totalWeight:0},S[ee]=S[ee]||{fastEstimate:0,slowEstimate:0,totalWeight:0}})(q);const U=H.tresponse.getTime()-H.trequest.getTime()||1;let Q=(function(ee,ne){return ee._fileLoaderType&&ee._fileLoaderType===c.default.FILE_LOADER_TYPES.FETCH?(function(le){const j=le.trace.reduce(((M,ce)=>M+ce.b[0]),0),O=le.trace.reduce(((M,ce)=>M+ce.d),0);let D=NaN;return y.get().streaming.abr.throughput.useNetworkInformationApi.fetch&&(D=w()),isNaN(D)&&(D=Math.round(8*j/O)),{downloadedBytes:j,value:D,downloadTimeInMs:O}})(ee):(function(le,j){let O=NaN,D=NaN,M=!1;if(y.get().streaming.abr.throughput.useResourceTimingApi&&le._resourceTimingValues)O=le._resourceTimingValues.transferSize,D=le._resourceTimingValues.responseEnd-le._resourceTimingValues.responseStart,M=!0;else{if(le.trace.length<=1)return{throughput:NaN,downloadTimeInMs:NaN};O=le.trace.reduce(((V,me)=>V+me.b[0]),0)-le.trace[0].b[0],D=Math.max(le.trace.reduce(((V,me)=>V+me.d),0)-le.trace[0].d,1)}let ce=NaN;if(!M&&y.get().streaming.abr.throughput.useNetworkInformationApi.xhr&&(ce=w()),isNaN(ce)){const V=y.get().streaming.abr.throughput.useDeadTimeLatency?D:D+j;ce=Math.round(8*O/V)}return{downloadedBytes:O,value:ce,downloadTimeInMs:D}})(ee,ne)})(H,U);if(Q.latencyInMs=U,isNaN(Q.value)||!isFinite(Q.value))return;if(H.cmsd){const ee=H.cmsd.dynamic&&H.cmsd.dynamic.etp?H.cmsd.dynamic.etp:null;if(ee){const ne=y.get().streaming.cmsd.abr.etpWeightRatio;ne>0&&ne<=1&&(Q.value=Q.value*(1-ne)+ee*ne)}}if((function(ee,ne,le){return y.get().streaming.abr.throughput.useResourceTimingApi&&le._resourceTimingValues?le._resourceTimingValues.transferSize===0&&le._resourceTimingValues.decodedBodySize>0:!isNaN(ne)&&(ee===c.default.VIDEO?ne<y.get().streaming.cacheLoadThresholds[c.default.VIDEO]:ee===c.default.AUDIO?ne<y.get().streaming.cacheLoadThresholds[c.default.AUDIO]:void 0)})(q,H._tfinish.getTime()-H.trequest.getTime(),H))return void P.debug(`${q} Assuming segment ${H.url} came from cache, ignoring it for throughput calculation`);P.debug(`Added throughput entry for ${q}: ${Q.value} kbit/s`),Q.serviceLocation=H._serviceLocation,E[q].push(Q),C[q].push({value:U}),(function(ee){E[ee].length>y.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&E[ee].shift(),C[ee].length>y.get().streaming.abr.throughput.sampleSettings.maxMeasurementsToKeep&&C[ee].shift()})(q),b.trigger(v.default.THROUGHPUT_MEASUREMENT_STORED,{throughputValues:Q}),H.type!==De.HTTPRequest.MPD_TYPE&&(R(k[q],Q.value,y.get().streaming.abr.throughput.ewma.weightDownloadTimeMultiplicationFactor*Q.downloadTimeInMs,L.bandwidthHalfLife),R(S[q],U,1,L.latencyHalfLife))}catch(U){P.error(U)}},getThroughputDict:function(q){return q?E[q]:E},getEwmaThroughputDict:function(q){return q?k[q]:k},getEwmaLatencyDict:function(q){return q?S[q]:S},getEwmaHalfLife:function(){return L},getLatencyDict:function(q){return q?C[q]:C},reset:N};return P=d.getLogger(F),L={bandwidthHalfLife:{fast:y.get().streaming.abr.throughput.ewma.throughputFastHalfLifeSeconds,slow:y.get().streaming.abr.throughput.ewma.throughputSlowHalfLifeSeconds},latencyHalfLife:{fast:y.get().streaming.abr.throughput.ewma.latencyFastHalfLifeCount,slow:y.get().streaming.abr.throughput.ewma.latencySlowHalfLifeCount}},N(),F}Tu.__dashjs_factory_name="ThroughputModel";var im=o.default.getClassFactory(Tu);function vu(){const l=this.context,i=(0,T.default)(l).getInstance();let d,y,b;function E(){performance.clearResourceTimings()}function C(ee){ee.metric!==r.HTTP_REQUEST||!ee.value||ee.value.type!==De.HTTPRequest.MPD_TYPE&&(ee.value.type!==De.HTTPRequest.MEDIA_SEGMENT_TYPE||ee.mediaType!==c.default.AUDIO&&ee.mediaType!==c.default.VIDEO)||d.addEntry(ee.mediaType,ee.value)}function k(ee,ne,le=null,j=NaN){let O,D=null,M=d.getEwmaHalfLife(),ce=null,V=!0;switch(le||(le=b.get().streaming.abr.throughput.averageCalculationMode),ee){case c.default.THROUGHPUT_TYPES.BANDWIDTH:D=le===c.default.THROUGHPUT_CALCULATION_MODES.EWMA?d.getEwmaThroughputDict(ne):d.getThroughputDict(ne),ce=M.bandwidthHalfLife,V=!0,j=isNaN(j)?y.getIsDynamic()?b.get().streaming.abr.throughput.sampleSettings.live:b.get().streaming.abr.throughput.sampleSettings.vod:j;break;case c.default.THROUGHPUT_TYPES.LATENCY:D=le===c.default.THROUGHPUT_CALCULATION_MODES.EWMA?d.getEwmaLatencyDict(ne):d.getLatencyDict(ne),ce=M.latencyHalfLife,V=!1,j=isNaN(j)?b.get().streaming.abr.throughput.sampleSettings.averageLatencySampleAmount:j}if(!D||D.length===0)return NaN;switch(le){case c.default.THROUGHPUT_CALCULATION_MODES.ARITHMETIC_MEAN:return O=S(D,j,ee),L(D,O);case c.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:return O=S(D,j,ee),P(D,O);case c.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_ARITHMETIC_MEAN:return O=S(D,j,ee),w(D,O);case c.default.THROUGHPUT_CALCULATION_MODES.HARMONIC_MEAN:return O=S(D,j,ee),R(D,O);case c.default.THROUGHPUT_CALCULATION_MODES.BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:return O=S(D,j,ee),N(D,O);case c.default.THROUGHPUT_CALCULATION_MODES.DATE_WEIGHTED_HARMONIC_MEAN:return O=S(D,j,ee),F(D,O);case c.default.THROUGHPUT_CALCULATION_MODES.EWMA:return q(D,ce,V);case c.default.THROUGHPUT_CALCULATION_MODES.ZLEMA:return O=S(D,j,ee),H(D,O)}}function S(ee,ne,le){if(ee){if(ne>=ee.length)ne=ee.length;else if(le===c.default.THROUGHPUT_TYPES.BANDWIDTH&&b.get().streaming.abr.throughput.sampleSettings.enableSampleSizeAdjustment)for(let j=1;j<ne;++j){const O=ee[ee.length-j].value/ee[ee.length-j-1].value;if((O>=b.get().streaming.abr.throughput.sampleSettings.increaseScale||O<=b.get().streaming.abr.throughput.sampleSettings.decreaseScale)&&(ne+=1)===ee.length)break}}else ne=0;return ne}function L(ee,ne){let le=ee;return ne!==0&&le&&le.length!==0?(le=le.slice(-ne),le.reduce(((j,O)=>j+O.value),0)/le.length):NaN}function P(ee,ne){let le=ee;if(ne===0||!le||le.length===0)return NaN;le=le.slice(-ne);let j=0;return le.reduce(((O,D)=>{let M=Math.sqrt(D.downloadedBytes);return j+=M,O+D.value*M}),0)/j}function w(ee,ne){let le=ee;if(ne===0||!le||le.length===0)return NaN;le=le.slice(-ne);let j=0;return le.reduce(((O,D,M)=>{let ce=M+1;return j+=ce,O+D.value*ce}),0)/j}function R(ee,ne){let le=ee;if(ne===0||!le||le.length===0)return NaN;le=le.slice(-ne);const j=le.reduce(((O,D)=>O+1/D.value),0);return le.length/j}function N(ee,ne){let le=ee;if(ne===0||!le||le.length===0)return NaN;le=le.slice(-ne);let j=0;const O=le.reduce(((D,M)=>{let ce=Math.sqrt(M.downloadedBytes);return j+=ce,D+1/M.value*ce}),0);return j/O}function F(ee,ne){let le=ee;if(ne===0||!le||le.length===0)return NaN;le=le.slice(-ne);let j=0;const O=le.reduce(((D,M,ce)=>{let V=ce+1;return j+=V,D+1/M.value*V}),0);return j/O}function q(ee,ne,le=!0){if(!ee||ee.totalWeight<=0)return NaN;const j=ee.fastEstimate/(1-Math.pow(.5,ee.totalWeight/ne.fast)),O=ee.slowEstimate/(1-Math.pow(.5,ee.totalWeight/ne.slow));return le?Math.min(j,O):Math.max(j,O)}function H(ee,ne){if(ne===0||!ee||ee.length===0)return NaN;let le=ee.slice(-ne).map((M=>M.value)),j=2/(le.length+1),O=le[le.length-1],D=le[le.length-1];for(let M=0;M<le.length;M++)O=j*le[M]+(1-j)*O,D=j*O+(1-j)*D;return D}function U(ee,ne=null,le=NaN){const j=k(c.default.THROUGHPUT_TYPES.BANDWIDTH,ee,ne,le);return Math.round(j)}const Q={getArithmeticMean:L,getAverageLatency:function(ee,ne=null,le=NaN){const j=k(c.default.THROUGHPUT_TYPES.LATENCY,ee,ne,le);return Math.round(j)},getAverageThroughput:U,getByteSizeWeightedArithmeticMean:P,getByteSizeWeightedHarmonicMean:N,getDateWeightedArithmeticMean:w,getDateWeightedHarmonicMean:F,getEwma:q,getHarmonicMean:R,getRawThroughputData:function(ee){return ee?d.getThroughputDict(ee):[]},getSafeAverageThroughput:function(ee,ne=null,le=NaN){let j=U(ee,ne,le);return isNaN(j)||(j*=b.get().streaming.abr.throughput.bandwidthSafetyFactor),j},getZlema:H,initialize:function(){d=im(l).create({settings:b}),i.on(v.default.METRIC_ADDED,C,Q),window.performance?.addEventListener?.("resourcetimingbufferfull",E)},reset:function(){d.reset(),i.off(v.default.METRIC_ADDED,C,Q),window.performance?.removeEventListener?.("resourcetimingbufferfull",E)},setConfig:function(ee){ee.settings&&(b=ee.settings),ee.playbackController&&(y=ee.playbackController)}};return Q}vu.__dashjs_factory_name="ThroughputController";var sm=o.default.getSingletonFactory(vu);function wu(){const l=this.context,i=(0,T.default)(l).getInstance(),d=(0,p.default)(l).getInstance();let y,b,E,C;function k(U){C=U}function S(U,Q,ee,ne){let le,j=Q.adaptation.period.mpd;const O=j.availabilityStartTime;if(ne)le=ee&&j.timeShiftBufferDepth!==Number.POSITIVE_INFINITY?new Date(O.getTime()+1e3*(U+j.timeShiftBufferDepth)):j.availabilityEndTime;else if(ee){const D=Q.availabilityTimeOffset;le=new Date(O.getTime()+1e3*(U-D))}else le=O;return le}function L(U,Q){return(U.getTime()-Q.mpd.availabilityStartTime.getTime()+1e3*C)/1e3}function P(U,Q){return U+(Q.adaptation.period.start-Q.presentationTimeOffset)}function w(U){const Q={start:NaN,end:NaN},ee=U[0].getAdapter().getRegularPeriods()[0],ne=L(new Date,ee);if(!U||U.length===0)return{range:Q,now:ne};U.forEach((j=>{let O=j.getCurrentRepresentationForType(c.default.VIDEO);if(O||(O=j.getCurrentRepresentationForType(c.default.AUDIO)),!O){const M=j.getAdapter(),ce=M.getMediaInfoForType(j.getStreamInfo(),c.default.VIDEO)||M.getMediaInfoForType(j.getStreamInfo(),c.default.AUDIO);O=M.getVoRepresentations(ce)[0]}let D={start:NaN,end:NaN};if(O)if(O.segmentInfoType===fe.default.SEGMENT_TIMELINE)D=(function(M){const ce=M.adaptation.period.mpd.manifest.Period[M.adaptation.period.index].AdaptationSet[M.adaptation.index],V=b.getRepresentationFor(M.index,ce),me=V.SegmentTemplate||V.SegmentList,ue=me.SegmentTimeline,ge=me.timescale,Ie=ue.S,Ee={start:0,end:0},B=Ie[0].t,K=!isNaN(B),Z=K?B:0;let W,X,ae,z,ie=0;for(K&&(Ee.start=P(Z/ge,M)),ae=0,z=Ie.length;ae<z;ae++)W=Ie[ae],X=0,W.hasOwnProperty("r")&&(X=W.r),ie+=W.d*(1+X);return Ee.end=P((Z+ie)/ge,M),Ee})(O);else{const M=O.adaptation.period;D.start=M.start,D.end=Math.max(ne,M.start+M.duration)}!isNaN(D.start)&&(isNaN(Q.start)||Q.start>D.start)&&(Q.start=D.start),!isNaN(D.end)&&(isNaN(Q.end)||Q.end<D.end)&&(Q.end=D.end)})),Q.end=Math.min(ne,Q.end);const le=N(U,Q.end,!0);return Q.end=isNaN(le)?Q.end:le,Q.start=ee&&ee.mpd&&ee.mpd.timeShiftBufferDepth&&!isNaN(ee.mpd.timeShiftBufferDepth)&&!isNaN(Q.end)?Math.max(Q.end-ee.mpd.timeShiftBufferDepth,Q.start):Q.start,Q.start=N(U,Q.start),{range:Q,now:ne}}function R(U,Q){E=U-Q.end}function N(U,Q,ee=!1){try{let ne=0,le=!1,j=NaN;for(;!le&&ne<U.length;){const O=U[ne].getStreamInfo();O.start<=Q&&(!isFinite(O.duration)||O.start+O.duration>=Q)?(j=Q,le=!0):!ee&&O.start>Q&&(isNaN(j)||O.start<j)?j=O.start:ee&&O.start+O.duration<Q&&(isNaN(j)||O.start+O.duration>j)&&(j=O.start+O.duration),ne+=1}return j}catch{return Q}}function F(U){U.offset===void 0||isNaN(U.offset)||k(U.offset/1e3)}function q(){C=0,E=0}function H(){i.off(f.default.UPDATE_TIME_SYNC_OFFSET,F,this),q()}return y={calcAvailabilityEndTimeFromPresentationTime:function(U,Q,ee){return S(U,Q,ee,!0)},calcAvailabilityStartTimeFromPresentationTime:function(U,Q,ee){return S(U,Q,ee)},calcMediaTimeFromPresentationTime:function(U,Q){return U-Q.adaptation.period.start+Q.presentationTimeOffset},calcPeriodRelativeTimeFromMpdRelativeTime:function(U,Q){return Q-U.adaptation.period.start},calcPresentationTimeFromMediaTime:P,calcPresentationTimeFromWallTime:L,calcTimeShiftBufferWindow:function(U,Q){if(!Q)return(function(ee){const ne={start:NaN,end:NaN};let le=0,j=NaN;return ee.forEach((O=>{const D=O.getStreamInfo();le+=D.duration,(isNaN(j)||D.start<j)&&(j=D.start)})),ne.start=j,ne.end=j+le,ne})(U);if(d.get().streaming.timeShiftBuffer.calcFromSegmentTimeline){const ee=w(U);return R(ee.now,ee.range),ee.range}return(function(ee){const ne={start:NaN,end:NaN};if(!ee||ee.length===0)return ne;const le=ee[0].getAdapter().getRegularPeriods()[0],j=L(new Date,le),O=le.mpd.timeShiftBufferDepth,D=isNaN(O)?0:j-O;if(ne.start=N(ee,D),ne.end=!isNaN(ne.start)&&j<ne.start?j:N(ee,j,!0),!isNaN(O)&&ne.end<j-O&&(ne.end=NaN),d.get().streaming.timeShiftBuffer.fallbackToSegmentTimeline){const M=w(ee);if(M.range.end<ne.start)return i.trigger(v.default.CONFORMANCE_VIOLATION,{level:wr.LEVELS.WARNING,event:wr.EVENTS.INVALID_DVR_WINDOW}),R(M.now,M.range),M.range}return ne})(U)},calcWallTimeForSegment:function(U,Q){let ee,ne,le;return Q&&(ee=U.representation.adaptation.period.mpd.suggestedPresentationDelay,ne=U.presentationStartTime+ee,le=new Date(U.availabilityStartTime.getTime()+1e3*ne)),le},getClientReferenceTime:function(){return Date.now()-1e3*E+1e3*C},getClientTimeOffset:function(){return C},initialize:function(){q(),i.on(f.default.UPDATE_TIME_SYNC_OFFSET,F,this)},reset:H,setClientTimeOffset:k,setConfig:function(U){U&&U.dashManifestModel&&(b=U.dashManifestModel)}},b=In(l).getInstance(),H(),y}wu.__dashjs_factory_name="TimelineConverter";var om=o.default.getSingletonFactory(wu),lm=class{constructor(){this.t=null,this.xywh=null,this.track=null,this.id=null,this.s=null,this.r=null}};function _u(){let l,i;return l={initialize:function(d){if(i=new lm,!d)return null;const y=d.indexOf("#");if(y!==-1){const b=d.substr(y+1).split("&");for(let E=0,C=b.length;E<C;++E){const k=b[E],S=k.indexOf("=");if(S!==-1){const L=k.substring(0,S);i.hasOwnProperty(L)&&(i[L]=k.substr(S+1))}}}},getURIFragmentData:function(){return i}},l}_u.__dashjs_factory_name="URIFragmentModel";var um=o.default.getSingletonFactory(_u);const cm=new Map([[c.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,"loadedmetadata"],[c.default.VIDEO_ELEMENT_READY_STATES.HAVE_CURRENT_DATA,"loadeddata"],[c.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,"canplay"],[c.default.VIDEO_ELEMENT_READY_STATES.HAVE_ENOUGH_DATA,"canplaythrough"]]);function Su(){let l,i,d,y,b,E,C,k,S,L,P,w;const R=this.context,N=(0,T.default)(R).getInstance(),F=[];function q(V,me=!1){d&&(me?d.playbackRate=V:ce(c.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,(()=>{d.playbackRate=V})))}function H(){return F.length>0}function U(V){let me=F.indexOf(V);if(V!==null&&(me!==-1&&F.splice(me,1),L.get().streaming.buffer.syntheticStallEvents.enabled&&d&&!H())){const ue=()=>{if(q(E||1,L.get().streaming.buffer.syntheticStallEvents.ignoreReadyState),!d.paused){const ge=document.createEvent("Event");ge.initEvent("playing",!0,!1),d.dispatchEvent(ge)}};L.get().streaming.buffer.syntheticStallEvents.ignoreReadyState?ue():(k&&k.func&&k.event&&ne(k.event,k.func),k=ce(c.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA,ue))}}function Q(){if(d&&H()&&d.playbackRate===0){const V=document.createEvent("Event");V.initEvent("waiting",!0,!1),d.dispatchEvent(V)}}function ee(V,me){d&&d.addEventListener(V,me)}function ne(V,me){d&&d.removeEventListener(V,me)}function le(){return d?d.readyState:NaN}function j(){return d?d.buffered:null}function O(){return d?d.clientWidth:NaN}function D(){return d?d.clientHeight:NaN}function M(V,me,ue,ge,Ie){if(d){for(let Ee=0;Ee<d.textTracks.length;Ee++)if(d.textTracks[Ee].kind===V&&(!me||d.textTracks[Ee].label==me)&&d.textTracks[Ee].language===ue&&d.textTracks[Ee].isTTML===ge&&d.textTracks[Ee].isEmbedded===Ie)return d.textTracks[Ee]}return null}function ce(V,me){return V===c.default.VIDEO_ELEMENT_READY_STATES.HAVE_NOTHING||le()>=V?(me(),null):(function(ue,ge){const Ie=()=>{ne(ue,Ie),ge(ue)};return ee(ue,Ie),{func:Ie,event:ue}})(cm.get(V),me)}return y={addEventListener:ee,addTextTrack:function(V,me,ue,ge,Ie){if(!d)return null;let Ee=M(V,me,ue,ge,Ie);return Ee||(Ee=d.addTextTrack(V,me,ue),Ee.isEmbedded=Ie,Ee.isTTML=ge),Ee},appendChild:function(V){d&&(d.appendChild(V),V.isTTML!==void 0&&(d.textTracks[d.textTracks.length-1].isTTML=V.isTTML,d.textTracks[d.textTracks.length-1].isEmbedded=V.isEmbedded))},getBufferRange:j,getClientHeight:D,getClientWidth:O,getElement:function(){return d},getEnded:function(){return d?d.ended:null},getPlaybackQuality:function(){if(!d)return null;let V="webkitDroppedFrameCount"in d&&"webkitDecodedFrameCount"in d,me=null;return"getVideoPlaybackQuality"in d?me=d.getVideoPlaybackQuality():V&&(me={droppedVideoFrames:d.webkitDroppedFrameCount,totalVideoFrames:d.webkitDroppedFrameCount+d.webkitDecodedFrameCount,creationTime:new Date}),me},getPlaybackRate:function(){return d?d.playbackRate:null},getPlayedRanges:function(){return d?d.played:null},getReadyState:le,getSource:function(){return d?d.src:null},getTTMLRenderingDiv:function(){return l},getTextTrack:M,getTextTracks:function(){return d?d.textTracks:[]},getTime:function(){return d?isNaN(i)?d.currentTime:i:null},getVideoElementSize:function(){const V=L.get().streaming.abr.usePixelRatioInLimitBitrateByPortal&&window.hasOwnProperty("devicePixelRatio")?window.devicePixelRatio:1;return{elementWidth:O()*V,elementHeight:D()*V}},getVideoHeight:function(){return d?d.videoHeight:NaN},getVideoRelativeOffsetLeft:function(){if(d){const V=d.parentNode.host||d.parentNode;return V?d.getBoundingClientRect().left-V.getBoundingClientRect().left:NaN}return NaN},getVideoRelativeOffsetTop:function(){if(d){const V=d.parentNode.host||d.parentNode;return V?d.getBoundingClientRect().top-V.getBoundingClientRect().top:NaN}return NaN},getVideoWidth:function(){return d?d.videoWidth:NaN},getVttRenderingDiv:function(){return w},initialize:function(){N.on(f.default.PLAYBACK_PLAYING,Q,this)},isPaused:function(){return d?d.paused:null},isSeeking:function(){return d?d.seeking||!isNaN(i):null},isStalled:H,pause:function(){d&&(d.pause(),d.autoplay=!1)},play:function(){if(d){d.autoplay=!0;const V=d.play();V&&V.catch&&typeof Promise<"u"&&V.catch((me=>{me.name==="NotAllowedError"&&N.trigger(f.default.PLAYBACK_NOT_ALLOWED),b.warn(`Caught pending play exception - continuing (${me})`)}))}},removeChild:function(V){d&&d.removeChild(V)},removeEventListener:ne,reset:function(){clearTimeout(P),N.off(f.default.PLAYBACK_PLAYING,Q,this),F.length=0,(function(){try{C&&d&&(C.unobserve(d),C.disconnect(),C=null)}catch{}})()},setConfig:function(V){V&&V.settings&&(L=V.settings)},setCurrentTime:function(V,me){d&&(S&&S.func&&S.event&&ne(S.event,S.func),i=V,S=ce(c.default.VIDEO_ELEMENT_READY_STATES.HAVE_METADATA,(()=>{if(d)if(d.currentTime!==i)try{i=me?(function(ue){const ge=j();let Ie=ue,Ee=9999999999;if(ge)for(let B=0;B<ge.length;B++){const K=ge.start(B),Z=ge.end(B),W=Math.abs(K-ue),X=Math.abs(Z-ue);if(ue>=K&&ue<=Z)return ue;W<Ee&&(Ee=W,Ie=K),X<Ee&&(Ee=X,Ie=Z)}return Ie})(i):i,isNaN(i)||(d.currentTime=i),i=NaN}catch(ue){d.readyState===0&&ue.code===ue.INVALID_STATE_ERR&&(P=setTimeout((function(){d.currentTime=i,i=NaN}),400))}else i=NaN})))},setDisableRemotePlayback:function(V){d&&(d.disableRemotePlayback=V)},setElement:function(V){if(!(V==null||V&&/^(VIDEO|AUDIO)$/i.test(V.nodeName)))throw"element is not video or audio DOM type!";d=V,(function(me){try{if(!C||!me)return;C.observe(me)}catch{}})(d)},setPlaybackRate:q,setSource:function(V){d&&(V?d.src=V:(d.removeAttribute("src"),d.load()))},setStallState:function(V,me){(function(ue,ge){ge?(function(Ie){if(Ie!==null&&d&&!d.seeking&&F.indexOf(Ie)===-1&&(F.push(Ie),L.get().streaming.buffer.syntheticStallEvents.enabled&&d&&F.length===1&&(L.get().streaming.buffer.syntheticStallEvents.ignoreReadyState||le()>=c.default.VIDEO_ELEMENT_READY_STATES.HAVE_FUTURE_DATA))){E=d.playbackRate,q(0,!0);const Ee=document.createEvent("Event");Ee.initEvent("waiting",!0,!1),d.dispatchEvent(Ee)}})(ue):U(ue)})(V,me)},setTTMLRenderingDiv:function(V){l=V,l.style.position="absolute",l.style.display="flex",l.style.overflow="hidden",l.style.pointerEvents="none",l.style.top=0,l.style.left=0},setVttRenderingDiv:function(V){w=V},waitForReadyState:ce},b=(0,u.default)(R).getInstance().getLogger(y),L=(0,p.default)(R).getInstance(),i=NaN,(function(){try{C=new ResizeObserver((()=>{N.trigger(f.default.VIDEO_ELEMENT_RESIZED)}))}catch{}})(),y}Su.__dashjs_factory_name="VideoModel";var dm=o.default.getSingletonFactory(Su),fm=t(8986);function ws(){const l="You must first call initialize() and set a source before calling this method",i="You must first call initialize() and set a valid source and view before calling this method",d="You must first call attachView() to set the video element before calling this method",y="You must first call attachSource() with a valid source before calling this method",b="MediaPlayer not initialized!",E=this.context,C=(0,T.default)(E).getInstance();let k=(0,p.default)(E).getInstance();const S=(0,u.default)(E).getInstance({settings:k});let L,P,w,R,N,F,q,H,U,Q,ee,ne,le,j,O,D,M,ce,V,me,ue,ge,Ie,Ee,B,K,Z,W,X,ae,z,ie,de,pe,_e,we,Pe,Ke,et,ut,qt;function dt(){ct(null),un(null),R=null,O&&(O.reset(),O=null),D&&(D.reset(),D=null),ue&&ue.reset(),k.reset(),ce&&(ce.reset(),ce=null)}function jt(){return!!w&&!!Pe.getElement()}function Zt(){return(0,fm.getVersionString)()}function En(){if(!q)throw i;return X.isPaused()}function yn(){if(!q)throw i;return X.getIsDynamic()}function nn(be){const $e=K&&K.hasVideoTrack()?c.default.VIDEO:c.default.AUDIO;let vt=de.getCurrentDVRInfo($e);return vt?fn(vt.range.start+be,vt):0}function fn(be,$e){let vt=X.getOriginalLiveDelay();return be>$e.range.end-vt&&(be=$e.range.end-vt),be}function Ue(be=""){if(!q)throw i;let $e=Ft().currentTime;return be!==""&&($e=K.getTimeRelativeToStreamId($e,be)),$e}function it(be){(0,rt.checkParameterType)(be,"boolean"),H=be}function nt(){ue.restoreDefaultUTCTimingSources()}function gt(){return de}function Ft(){if(!Pe.getElement())throw d;return Pe.getElement()}function un(be){if(!N)throw b;Pe.setElement(be),be&&(Ge(),(function(){if(D||typeof dashjs>"u")return;let $e=dashjs.MetricsReporting;typeof $e=="function"&&(D=$e(E).create().createMetricsReporting({debug:S,eventBus:C,mediaElement:Ft(),adapter:V,dashMetrics:de,mediaPlayerModel:me,events:f.default,constants:c.default,metricsConstants:r}))})(),(function(){if(M||typeof dashjs>"u")return;let $e=dashjs.MssHandler;typeof $e=="function"&&(Gt.extend($e.errors),M=$e(E).create({eventBus:C,mediaPlayerModel:me,dashMetrics:de,manifestModel:pe,playbackController:X,streamController:K,protectionController:O,baseURLController:Ie,errHandler:ge,events:f.default,constants:c.default,debug:S,initSegmentType:De.HTTPRequest.INIT_SEGMENT_TYPE,BASE64:at,ISOBoxer:Kr,settings:k}))})(),K&&K.switchToVideoElement(U)),q&&(Me(),qe()),Tt(U)}function Xe(be){if(!F)throw l;let $e=K.getActiveStreamInfo();return $e?j.getTracksFor(be,$e.id).filter((vt=>!O||O.areKeyIdsUsable(vt.normalizedKeyIds))):[]}function ct(be,$e=NaN){if(!N)throw b;typeof be=="string"&&Ke.initialize(be),$e==null&&($e=NaN),isNaN($e)||($e=Math.max(0,$e)),U=$e,w=be,(F||q)&&(Me(),qe()),jt()&&Tt(U)}function kt(){if(!F)throw l;let be=K.getActiveStreamInfo();return be?K.getStreamById(be.id):null}function Me(){q=!1,F=!1,V.reset(),K.reset(),W.reset(),ie.reset(),X.reset(),ae.reset(),z.reset(),Q.reset(),ee.reset(),j.reset(),ut.reset(),O&&(k.get().streaming.protection.keepProtectionMediaKeys?O.stop():(O.reset(),O=null,Ge())),Z.reset(),_e.reset(),we.reset()}function qe(){ue.resetPlaybackSessionSpecificSettings()}function st(){return $d(E).create({debug:S,errHandler:ge,dashMetrics:de,mediaPlayerModel:me,mssHandler:M,settings:k})}function Ge(){if(O)return O;if(typeof dashjs>"u")return null;let be=dashjs.Protection;if(typeof be=="function"){let $e=be(E).create();return f.default.extend(be.events),v.default.extend(be.events,{publicOnly:!0}),Gt.extend(be.errors),O=$e.createProtectionSystem({debug:S,errHandler:ge,videoModel:Pe,customParametersModel:ue,capabilities:Ee,eventBus:C,events:f.default,BASE64:at,constants:c.default,cmcdModel:_e,settings:k}),Ee||(Ee=(0,Do.default)(E).getInstance()),Ee.setProtectionController(O),O}return null}function ht(){if(!N)throw b;if(ce)return ce;if(typeof dashjs>"u")return null;let be=dashjs.OfflineController;if(typeof be=="function"){f.default.extend(be.events),v.default.extend(be.events,{publicOnly:!0}),Gt.extend(be.errors);const $e=st(),vt=dl(E).create();return vt.setConfig({manifestModel:pe,adapter:V,manifestLoader:$e,errHandler:ge,contentSteeringController:z}),ce=be(E).create({debug:S,manifestUpdater:vt,baseURLController:Ie,manifestLoader:$e,manifestModel:pe,mediaPlayerModel:me,abrController:Q,playbackController:X,adapter:V,errHandler:ge,dashMetrics:de,timelineConverter:le,segmentBaseController:ut,schemeLoaderFactory:ne,eventBus:C,events:f.default,errors:Gt,constants:c.default,settings:k,dashConstants:fe.default,urlUtils:Dn(E).getInstance()}),ce}return null}function Tt(be=NaN){ce&&ce.resetRecords(),!F&&w&&(F=!0,P.info("Streaming Initialized"),(function(){const $e=st();K||(K=su(E).getInstance()),Z||(Z=rm(E).create({errHandler:ge,manifestModel:pe,adapter:V,mediaController:j,baseURLController:Ie,videoModel:Pe,settings:k})),B.setConfig({capabilities:Ee,customParametersModel:ue,adapter:V,settings:k,protectionController:O,manifestModel:pe,errHandler:ge}),K.setConfig({capabilities:Ee,capabilitiesFilter:B,manifestLoader:$e,manifestModel:pe,mediaPlayerModel:me,customParametersModel:ue,protectionController:O,textController:Z,adapter:V,dashMetrics:de,errHandler:ge,timelineConverter:le,videoModel:Pe,playbackController:X,serviceDescriptionController:ae,contentSteeringController:z,abrController:Q,throughputController:ee,mediaController:j,settings:k,baseURLController:Ie,uriFragmentModel:Ke,segmentBaseController:ut}),W.setConfig({settings:k,playbackController:X,streamController:K,videoModel:Pe,timelineConverter:le,adapter:V}),X.setConfig({streamController:K,serviceDescriptionController:ae,dashMetrics:de,adapter:V,videoModel:Pe,timelineConverter:le,settings:k}),ie.setConfig({streamController:K,playbackController:X,mediaPlayerModel:me,videoModel:Pe,settings:k}),ee.setConfig({settings:k,playbackController:X}),Q.setConfig({streamController:K,capabilities:Ee,domStorage:et,mediaPlayerModel:me,customParametersModel:ue,throughputController:ee,cmsdModel:we,dashMetrics:de,adapter:V,videoModel:Pe,settings:k}),_e.setConfig({abrController:Q,dashMetrics:de,playbackController:X,serviceDescriptionController:ae,throughputController:ee}),qt.setConfig({serviceDescriptionController:ae}),we.setConfig({}),j.initialize(),ee.initialize(),Q.initialize(),K.initialize(H,R),Z.initialize(),W.initialize(),ie.initialize(),_e.initialize(H),we.initialize(),z.initialize(),ut.initialize()})(),typeof w=="string"?K.load(w,be):K.loadWithManifest(w,be)),!q&&jt()&&(q=!0,C.trigger(v.default.PLAYBACK_INITIALIZED),P.info("Playback Initialized"))}return L={addABRCustomRule:function(be,$e,vt){ue.addAbrCustomRule(be,$e,vt)},addExternalSubtitle:function(be){be instanceof Dd.default||P.error("Invalid external subtitle object. Must be an instance of dashjs.ExternalSubtitle"),ue.addExternalSubtitle(be)},addRequestInterceptor:function(be){ue.addRequestInterceptor(be)},addResponseInterceptor:function(be){ue.addResponseInterceptor(be)},addUTCTimingSource:function(be,$e){ue.addUTCTimingSource(be,$e)},attachProtectionController:function(be){O=be},attachSource:ct,attachTTMLRenderingDiv:function(be){if(!Pe.getElement())throw d;Pe.setTTMLRenderingDiv(be)},attachView:un,attachVttRenderingDiv:function(be){if(!Pe.getElement())throw d;Pe.setVttRenderingDiv(be)},clearDefaultUTCTimingSources:function(){ue.clearDefaultUTCTimingSources()},convertToTimeCode:function(be){be=Math.max(be,0);let $e=Math.floor(be/3600),vt=Math.floor(be%3600/60),wt=Math.floor(be%3600%60);return($e===0?"":$e<10?"0"+$e.toString()+":":$e.toString()+":")+(vt<10?"0"+vt.toString():vt.toString())+":"+(wt<10?"0"+wt.toString():wt.toString())},destroy:function(){dt(),o.default.deleteSingletonInstances(E)},duration:function(){if(!q)throw i;let be=Ft().duration;if(X.getIsDynamic()){const $e=K&&K.hasVideoTrack()?c.default.VIDEO:c.default.AUDIO;let vt=de.getCurrentDVRInfo($e);be=vt?vt.range.end-vt.range.start:0}return be},enableForcedTextStreaming:function(be){return!(!K.getActiveStreamInfo()||!Z)&&Z.enableForcedTextStreaming(be)},enableText:function(be){const $e=K.getActiveStreamInfo();return!(!$e||!Z)&&Z.enableText($e.id,be)},extend:function(be,$e,vt){o.default.extend(be,$e,vt,E)},formatUTC:function(be,$e,vt,wt=!1){const mn=new Date(1e3*be),Ze=mn.toLocaleDateString($e),Lt=mn.toLocaleTimeString($e,{hour12:vt});return wt?Lt+" "+Ze:Lt},getABRCustomRules:function(){return ue.getAbrCustomRules()},getActiveStream:kt,getAutoPlay:function(){return H},getAvailableBaseUrls:function(){const be=pe.getValue();return be?Ie.getBaseUrls(be):[]},getAvailableLocations:function(){const be=pe.getValue();if(!be)return[];const $e=V.getLocation(be),vt=z.getSynthesizedLocationElements($e);return $e.concat(vt)},getAverageLatency:function(be=c.default.VIDEO,$e=null,vt=NaN){return ee?ee.getAverageLatency(be,$e,vt):0},getAverageThroughput:function(be=c.default.VIDEO,$e=null,vt=NaN){return ee?ee.getAverageThroughput(be,$e,vt):0},getBufferLength:function(be){const $e=[c.default.VIDEO,c.default.AUDIO,c.default.TEXT];if(be)return $e.indexOf(be)!==-1?gt().getCurrentBufferLevel(be)||NaN:(P.warn("getBufferLength requested for invalid type"),NaN);{const vt=$e.map((wt=>Xe(wt).length>0?gt().getCurrentBufferLevel(wt):Number.MAX_VALUE)).reduce(((wt,mn)=>Math.min(wt,mn)));return vt===Number.MAX_VALUE?NaN:vt}},getCurrentLiveLatency:function(){if(!N)throw b;return q?X.getCurrentLiveLatency():NaN},getCurrentRepresentationForType:function(be){if(!F)throw l;if(be!==c.default.IMAGE&&be!==c.default.VIDEO&&be!==c.default.AUDIO)return null;const $e=kt();if(!$e)return null;if(be===c.default.IMAGE){const vt=$e.getThumbnailController();return vt?vt.getCurrentTrack():-1}return $e.getCurrentRepresentationForType(be)},getCurrentSteeringResponseData:function(){if(z)return z.getCurrentSteeringResponseData()},getCurrentTextTrackIndex:function(){let be=NaN;const $e=K.getActiveStreamInfo();if($e&&Z)return be=Z.getCurrentTrackIdx($e.id),be},getCurrentTrackFor:function(be){if(!F)throw l;let $e=K.getActiveStreamInfo();return $e?j.getCurrentTrackFor(be,$e.id):null},getDashAdapter:function(){return V},getDashMetrics:gt,getDebug:function(){return S},getDvrSeekOffset:nn,getDvrWindow:function(){if(!q)throw i;const be=K&&K.hasVideoTrack()?c.default.VIDEO:c.default.AUDIO;let $e=de.getCurrentDVRInfo(be);if(!$e)return{};let vt=0;const wt=X.getIsDynamic();return wt&&(vt=$e.manifestInfo.availableFrom.getTime()/1e3),{start:$e.range.start,end:$e.range.end,startAsUtc:wt?vt+$e.range.start:NaN,endAsUtc:wt?vt+$e.range.end:NaN,size:$e.range.end-$e.range.start}},getExternalSubtitles:function(){ue.getExternalSubtitles()},getInitialMediaSettingsFor:function(be){if(!N)throw b;return j.getInitialSettings(be)},getLowLatencyModeEnabled:function(){if(!q)throw i;return X.getLowLatencyModeEnabled()},getManifest:function(){return pe.getValue()},getOfflineController:function(){return ht()},getPlaybackRate:function(){return Ft().playbackRate},getProtectionController:function(){return Ge()},getRawThroughputData:function(be=c.default.VIDEO){return ee?ee.getRawThroughputData(be):[]},getRepresentationsByType:function(be,$e=null){if(!F)throw l;let vt=$e?K.getStreamById($e):kt();return vt?vt.getRepresentationsByType(be):[]},getSafeAverageThroughput:function(be=c.default.VIDEO,$e=null,vt=NaN){return ee?ee.getSafeAverageThroughput(be,$e,vt):0},getSettings:function(){return k.get()},getSource:function(){if(!w)throw y;return w},getStreamsFromManifest:function(be){if(!F)throw l;return V.getStreamsInfo(be)},getTTMLRenderingDiv:function(){return Pe?Pe.getTTMLRenderingDiv():null},getTargetLiveDelay:function(){if(!q)throw i;return X.getOriginalLiveDelay()},getTracksFor:Xe,getTracksForTypeFromManifest:function(be,$e,vt){if(!F)throw l;return(vt=vt||V.getStreamsInfo($e,1)[0])?V.getAllMediaInfoForType(vt,be,$e):[]},getVersion:Zt,getVideoElement:Ft,getVolume:function(){return Ft().volume},getXHRWithCredentialsForType:function(be){return ue.getXHRWithCredentialsForType(be)},initialize:function(be,$e,vt,wt=NaN){Ee||(Ee=(0,Do.default)(E).getInstance(),Ee.setConfig({settings:k,protectionController:O})),ge||(ge=xd(E).getInstance()),Ee.supportsMediaSource()?(N||(N=!0,le=om(E).getInstance(),ee||(ee=sm(E).getInstance()),Q||(Q=Wn(E).getInstance()),ne||(ne=So(E).getInstance()),X||(X=Zd(E).getInstance()),j||(j=Xd(E).getInstance()),K||(K=su(E).getInstance()),W||(W=Ld(E).getInstance()),ie||(ie=Zc(E).getInstance()),ae||(ae=rf(E).getInstance()),z||(z=as(E).getInstance()),B||(B=Jc(E).getInstance()),V=pd(E).getInstance(),pe=Wd(E).getInstance(),_e=mo(E).getInstance(),we=po(E).getInstance(),qt=Eo(E).getInstance(),de=Nd(E).getInstance({settings:k}),et=td(E).getInstance({settings:k}),V.setConfig({constants:c.default,cea608parser:new du,errHandler:ge,BASE64:at}),Ie||(Ie=Wc(E).create()),Ie.setConfig({adapter:V,contentSteeringController:z}),ae.setConfig({adapter:V}),ut||(ut=nf(E).getInstance({dashMetrics:de,mediaPlayerModel:me,errHandler:ge,baseURLController:Ie,events:f.default,eventBus:C,debug:S,boxParser:yi(E).getInstance(),errors:Gt})),j.setConfig({domStorage:et,settings:k,mediaPlayerModel:me,customParametersModel:ue,videoModel:Pe}),me.setConfig({playbackController:X,serviceDescriptionController:ae}),z.setConfig({adapter:V,errHandler:ge,dashMetrics:de,mediaPlayerModel:me,manifestModel:pe,serviceDescriptionController:ae,throughputController:ee,eventBus:C}),nt(),it(vt===void 0||vt),ht()),be&&un(be),$e&&ct($e,wt),P.info("[dash.js "+Zt()+"] MediaPlayer has been initialized")):ge.error(new Bt.default(Gt.CAPABILITY_MEDIASOURCE_ERROR_CODE,Gt.CAPABILITY_MEDIASOURCE_ERROR_MESSAGE))},isDynamic:yn,isMuted:function(){return Ft().muted},isPaused:En,isReady:jt,isSeeking:function(){if(!q)throw i;return X.isSeeking()},isTextEnabled:function(){const be=K.getActiveStreamInfo();return!(!be||!Z)&&Z.isTextEnabled(be)},off:function(be,$e,vt){C.off(be,$e,vt)},on:function(be,$e,vt,wt){C.on(be,$e,vt,wt)},pause:function(){if(!q)throw i;X.pause()},play:function(){if(!q)throw i;(!H||En()&&q)&&X.play(!0)},preload:function(){if(!Pe.getElement()&&!F){if(!w)throw y;Tt(U)}},provideThumbnail:function(be,$e){if(typeof $e!="function")return;if(be<0)return void $e(null);const vt=X.getIsDynamic()?nn(be):be,wt=K.getStreamForTime(vt);if(wt===null)return void $e(null);const mn=wt.getThumbnailController();if(mn)return mn.provide(vt,$e);$e(null)},refreshManifest:function(be){if(!N)throw b;if(!jt())return be(null,y);let $e=this;if(typeof be=="function"){const vt=function(wt){C.off(f.default.INTERNAL_MANIFEST_LOADED,vt,$e),wt.error?be(null,wt.error):be(wt.manifest)};C.on(f.default.INTERNAL_MANIFEST_LOADED,vt,$e)}K.refreshManifest()},registerCustomCapabilitiesFilter:function(be){ue.registerCustomCapabilitiesFilter(be)},registerLicenseRequestFilter:function(be){ue.registerLicenseRequestFilter(be)},registerLicenseResponseFilter:function(be){ue.registerLicenseResponseFilter(be)},removeABRCustomRule:function(be){ue.removeAbrCustomRule(be)},removeAllABRCustomRule:function(){ue.removeAllAbrCustomRule()},removeExternalSubtitleById:function(be){ue.removeExternalSubtitleById(be)},removeExternalSubtitleByUrl:function(be){ue.removeExternalSubtitleByUrl(be)},removeRequestInterceptor:function(be){ue.removeRequestInterceptor(be)},removeResponseInterceptor:function(be){ue.removeResponseInterceptor(be)},removeUTCTimingSource:function(be,$e){ue.removeUTCTimingSource(be,$e)},reset:dt,resetCustomInitialTrackSelectionFunction:function(){ue.resetCustomInitialTrackSelectionFunction(null)},resetSettings:function(){k.reset()},restoreDefaultUTCTimingSources:nt,retrieveManifest:function(be,$e){let vt=st(),wt=this;const mn=function(Ze){Ze.error?$e(null,Ze.error):$e(Ze.manifest),C.off(f.default.INTERNAL_MANIFEST_LOADED,mn,wt),vt.reset()};C.on(f.default.INTERNAL_MANIFEST_LOADED,mn,wt),Ke.initialize(be),vt.load(be)},seek:function(be){if(!q)throw i;if((0,rt.checkParameterType)(be,"number"),isNaN(be))throw c.default.BAD_ARGUMENT_ERROR;be<0&&(be=0);let $e=X.getIsDynamic()?nn(be):be;const vt=Ft();!X.getIsDynamic()&&vt.duration&&($e=Math.min(vt.duration,$e)),X.seek($e,!1,!1,!0)},seekToOriginalLive:function(){q&&yn()&&X.seekToOriginalLive()},seekToPresentationTime:function(be){if(!q)throw i;if((0,rt.checkParameterType)(be,"number"),isNaN(be))throw c.default.BAD_ARGUMENT_ERROR;be<0&&(be=0);const $e=Ft();if(!X.getIsDynamic()&&$e.duration&&(be=Math.min($e.duration,be)),X.getIsDynamic()){const vt=K&&K.hasVideoTrack()?c.default.VIDEO:c.default.AUDIO;let wt=de.getCurrentDVRInfo(vt);if(!wt)return;(be=fn(be,wt))<wt.range.start&&(be=wt.range.start)}X.seek(be,!1,!1,!0)},setAutoPlay:it,setConfig:function(be){be&&(be.capabilities&&(Ee=be.capabilities),be.capabilitiesFilter&&(B=be.capabilitiesFilter),be.streamController&&(K=be.streamController),be.textController&&(Z=be.textController),be.gapController&&(W=be.gapController),be.throughputController&&(ee=be.throughputController),be.playbackController&&(X=be.playbackController),be.serviceDescriptionController&&(ae=be.serviceDescriptionController),be.contentSteeringController&&(z=be.contentSteeringController),be.clientDataReportingController&&(qt=be.clientDataReportingController),be.catchupController&&(ie=be.catchupController),be.mediaPlayerModel&&(me=be.mediaPlayerModel),be.customParametersModel&&(ue=be.customParametersModel),be.abrController&&(Q=be.abrController),be.schemeLoaderFactory&&(ne=be.schemeLoaderFactory),be.mediaController&&(j=be.mediaController),be.settings&&(k=be.settings),be.dashMetrics&&(de=be.dashMetrics))},setCurrentTrack:function(be,$e=!1){if(!F)throw l;!O||O.areKeyIdsUsable(be.normalizedKeyIds)?j.setTrack(be,{noSettingsSave:$e}):P.error(`Can not switch to track with index ${be.index} because key is not usable`)},setCustomInitialTrackSelectionFunction:function(be){ue.setCustomInitialTrackSelectionFunction(be)},setInitialMediaSettingsFor:function(be,$e){if(!N)throw b;let vt=(function(wt){const mn=k.get().streaming.defaultSchemeIdUri;let Ze={};function Lt(an,en,pn){let sn={};if(en){if(en instanceof Array)throw"Array type not supported for settings!";return en instanceof Object?(sn.schemeIdUri=en.schemeIdUri?en.schemeIdUri:"",sn.value=en.value?en.value:""):(sn.schemeIdUri=pn,sn.value=en,P.warn("No schemeIdUri provided for "+an+', using default "'+pn+'"')),sn}return null}return wt.id!==void 0&&(Ze.id=wt.id),wt.lang!==void 0&&(Ze.lang=wt.lang),isNaN(wt.index)||(Ze.index=wt.index),wt.viewpoint!==void 0&&(Ze.viewpoint=Lt("viewpoint",wt.viewpoint,mn.viewpoint)),wt.audioChannelConfiguration!==void 0&&(Ze.audioChannelConfiguration=Lt("audioChannelConfiguration",wt.audioChannelConfiguration,mn.audioChannelConfiguration)),wt.role!==void 0&&wt.role!==null&&(Ze.role=Lt("role",wt.role,mn.role),Ze.role.schemeIdUri===c.default.DASH_ROLE_SCHEME_ID&&Ze.role.value==="Main"&&(Ze.role.value=fe.default.MAIN)),wt.accessibility!==void 0&&(Ze.accessibility=Lt("accessibility",wt.accessibility,mn.accessibility)),Ze})($e);j.setInitialSettings(be,vt)},setMute:function(be){(0,rt.checkParameterType)(be,"boolean"),Ft().muted=be},setPlaybackRate:function(be){Ft().playbackRate=be},setProtectionData:function(be){R=be,K&&K.setProtectionData(R)},setRepresentationForTypeById:function(be,$e,vt=!1){if(be!==c.default.IMAGE&&be!==c.default.VIDEO&&be!==c.default.AUDIO)return;if(!F)throw l;const wt=kt();if(wt)if(be===c.default.IMAGE){const mn=wt.getThumbnailController();mn&&mn.setTrackById($e)}else{const mn=wt.getRepresentationForTypeById(be,$e);mn&&Q.manuallySetPlaybackQuality(be,K.getActiveStreamInfo(),mn,{forceReplace:vt})}},setRepresentationForTypeByIndex:function(be,$e,vt=!1){if(be!==c.default.IMAGE&&be!==c.default.VIDEO&&be!==c.default.AUDIO)return;if(!F)throw l;const wt=kt();if(wt)if(be===c.default.IMAGE){const mn=wt.getThumbnailController();mn&&mn.setTrackByIndex($e)}else{const mn=wt.getRepresentationForTypeByIndex(be,$e);mn&&Q.manuallySetPlaybackQuality(be,K.getActiveStreamInfo(),mn,{forceReplace:vt})}},setTextTrack:function(be){if(!q)throw i;const $e=K.getActiveStreamInfo();$e&&Z&&Z.setTextTrack($e.id,be)},setVolume:function(be){if(typeof be!="number"||isNaN(be)||be<0||be>1)throw c.default.BAD_ARGUMENT_ERROR;Ft().volume=be},setXHRWithCredentialsForType:function(be,$e){ue.setXHRWithCredentialsForType(be,$e)},time:Ue,timeAsUTC:function(){if(!q)throw i;if(!X.getIsDynamic()||Ue()<0)return NaN;const be=K&&K.hasVideoTrack()?c.default.VIDEO:c.default.AUDIO;let $e,vt,wt=de.getCurrentDVRInfo(be);return wt?($e=wt.manifestInfo.availableFrom.getTime()/1e3,vt=$e+Ue(),vt):0},timeInDvrWindow:function(){if(!q)throw i;if(!X.getIsDynamic())return Ue();let be=Ft().currentTime;const $e=K&&K.hasVideoTrack()?c.default.VIDEO:c.default.AUDIO;let vt=de.getCurrentDVRInfo($e);return be=vt===null||be===0?0:Math.max(0,be-vt.range.start),be},trigger:function(be,$e,vt){C.trigger(be,$e,vt)},triggerSteeringRequest:function(){if(z)return z.loadSteeringData()},unregisterCustomCapabilitiesFilter:function(be){ue.unregisterCustomCapabilitiesFilter(be)},unregisterLicenseRequestFilter:function(be){ue.unregisterLicenseRequestFilter(be)},unregisterLicenseResponseFilter:function(be){ue.unregisterLicenseResponseFilter(be)},updateSettings:function(be){k.update(be)},updateSource:function(be){w=be,K.load(w)}},P=S.getLogger(L),N=!1,q=!1,F=!1,H=!0,U=NaN,O=null,ce=null,R=null,V=null,ut=null,f.default.extend(v.default),me=Jd(E).getInstance(),ue=(0,es.default)(E).getInstance(),Pe=dm(E).getInstance(),Ke=um(E).getInstance(),L}ws.__dashjs_factory_name="MediaPlayer";const Ai=o.default.getClassFactory(ws);Ai.events=v.default,Ai.errors=Gt,o.default.updateClassFactory(ws.__dashjs_factory_name,Ai);var mm=Ai},1191:function(h,e,t){t.r(e);var o=t(7252);class n extends o.default{constructor(){super(),this.AST_IN_FUTURE="astInFuture",this.BASE_URLS_UPDATED="baseUrlsUpdated",this.BUFFER_EMPTY="bufferStalled",this.BUFFER_LOADED="bufferLoaded",this.BUFFER_LEVEL_STATE_CHANGED="bufferStateChanged",this.BUFFER_LEVEL_UPDATED="bufferLevelUpdated",this.DVB_FONT_DOWNLOAD_ADDED="dvbFontDownloadAdded",this.DVB_FONT_DOWNLOAD_COMPLETE="dvbFontDownloadComplete",this.DVB_FONT_DOWNLOAD_FAILED="dvbFontDownloadFailed",this.DYNAMIC_TO_STATIC="dynamicToStatic",this.ERROR="error",this.FRAGMENT_LOADING_COMPLETED="fragmentLoadingCompleted",this.FRAGMENT_LOADING_PROGRESS="fragmentLoadingProgress",this.FRAGMENT_LOADING_STARTED="fragmentLoadingStarted",this.FRAGMENT_LOADING_ABANDONED="fragmentLoadingAbandoned",this.LOG="log",this.MANIFEST_LOADING_STARTED="manifestLoadingStarted",this.MANIFEST_LOADING_FINISHED="manifestLoadingFinished",this.MANIFEST_LOADED="manifestLoaded",this.METRICS_CHANGED="metricsChanged",this.METRIC_CHANGED="metricChanged",this.METRIC_ADDED="metricAdded",this.METRIC_UPDATED="metricUpdated",this.PERIOD_SWITCH_STARTED="periodSwitchStarted",this.PERIOD_SWITCH_COMPLETED="periodSwitchCompleted",this.QUALITY_CHANGE_REQUESTED="qualityChangeRequested",this.QUALITY_CHANGE_RENDERED="qualityChangeRendered",this.NEW_TRACK_SELECTED="newTrackSelected",this.TRACK_CHANGE_RENDERED="trackChangeRendered",this.STREAM_INITIALIZING="streamInitializing",this.STREAM_UPDATED="streamUpdated",this.STREAM_ACTIVATED="streamActivated",this.STREAM_DEACTIVATED="streamDeactivated",this.STREAM_INITIALIZED="streamInitialized",this.STREAM_TEARDOWN_COMPLETE="streamTeardownComplete",this.TEXT_TRACKS_ADDED="allTextTracksAdded",this.TEXT_TRACK_ADDED="textTrackAdded",this.CUE_ENTER="cueEnter",this.CUE_EXIT="cueExit",this.THROUGHPUT_MEASUREMENT_STORED="throughputMeasurementStored",this.TTML_PARSED="ttmlParsed",this.TTML_TO_PARSE="ttmlToParse",this.CAPTION_RENDERED="captionRendered",this.CAPTION_CONTAINER_RESIZE="captionContainerResize",this.CAN_PLAY="canPlay",this.CAN_PLAY_THROUGH="canPlayThrough",this.PLAYBACK_ENDED="playbackEnded",this.PLAYBACK_ERROR="playbackError",this.PLAYBACK_INITIALIZED="playbackInitialized",this.PLAYBACK_NOT_ALLOWED="playbackNotAllowed",this.PLAYBACK_METADATA_LOADED="playbackMetaDataLoaded",this.PLAYBACK_LOADED_DATA="playbackLoadedData",this.PLAYBACK_PAUSED="playbackPaused",this.PLAYBACK_PLAYING="playbackPlaying",this.PLAYBACK_PROGRESS="playbackProgress",this.PLAYBACK_RATE_CHANGED="playbackRateChanged",this.PLAYBACK_SEEKED="playbackSeeked",this.PLAYBACK_SEEKING="playbackSeeking",this.PLAYBACK_STALLED="playbackStalled",this.PLAYBACK_STARTED="playbackStarted",this.PLAYBACK_TIME_UPDATED="playbackTimeUpdated",this.PLAYBACK_VOLUME_CHANGED="playbackVolumeChanged",this.PLAYBACK_WAITING="playbackWaiting",this.MANIFEST_VALIDITY_CHANGED="manifestValidityChanged",this.EVENT_MODE_ON_START="eventModeOnStart",this.EVENT_MODE_ON_RECEIVE="eventModeOnReceive",this.CONFORMANCE_VIOLATION="conformanceViolation",this.REPRESENTATION_SWITCH="representationSwitch",this.ADAPTATION_SET_REMOVED_NO_CAPABILITIES="adaptationSetRemovedNoCapabilities",this.CONTENT_STEERING_REQUEST_COMPLETED="contentSteeringRequestCompleted",this.INBAND_PRFT="inbandPrft",this.MANAGED_MEDIA_SOURCE_START_STREAMING="managedMediaSourceStartStreaming",this.MANAGED_MEDIA_SOURCE_END_STREAMING="managedMediaSourceEndStreaming"}}let r=new n;e.default=r},5212:function(h,e,t){t.r(e),e.default={STREAM:"stream",VIDEO:"video",ENHANCEMENT:"enhancement",AUDIO:"audio",TEXT:"text",MUXED:"muxed",IMAGE:"image",STPP:"stpp",TTML:"ttml",VTT:"vtt",WVTT:"wvtt",CONTENT_STEERING:"contentSteering",LIVE_CATCHUP_MODE_DEFAULT:"liveCatchupModeDefault",LIVE_CATCHUP_MODE_LOLP:"liveCatchupModeLoLP",MOVING_AVERAGE_SLIDING_WINDOW:"slidingWindow",MOVING_AVERAGE_EWMA:"ewma",BAD_ARGUMENT_ERROR:"Invalid Arguments",MISSING_CONFIG_ERROR:"Missing config parameter(s)",TRACK_SWITCH_MODE_ALWAYS_REPLACE:"alwaysReplace",TRACK_SWITCH_MODE_NEVER_REPLACE:"neverReplace",TRACK_SELECTION_MODE_FIRST_TRACK:"firstTrack",TRACK_SELECTION_MODE_HIGHEST_BITRATE:"highestBitrate",TRACK_SELECTION_MODE_HIGHEST_EFFICIENCY:"highestEfficiency",TRACK_SELECTION_MODE_LOWEST_STARTUP_DELAY:"lowestStartupDelay",TRACK_SELECTION_MODE_WIDEST_RANGE:"widestRange",CMCD_QUERY_KEY:"CMCD",CMCD_MODE_QUERY:"query",CMCD_MODE_HEADER:"header",CMCD_AVAILABLE_KEYS:["br","d","ot","tb","bl","dl","mtp","nor","nrr","su","bs","rtp","cid","pr","sf","sid","st","v"],CMCD_V2_AVAILABLE_KEYS:["msd","ltc"],CMCD_AVAILABLE_REQUESTS:["segment","mpd","xlink","steering","other"],INITIALIZE:"initialize",TEXT_SHOWING:"showing",TEXT_HIDDEN:"hidden",TEXT_DISABLED:"disabled",ACCESSIBILITY_CEA608_SCHEME:"urn:scte:dash:cc:cea-608:2015",CC1:"CC1",CC3:"CC3",UTF8:"utf-8",SCHEME_ID_URI:"schemeIdUri",START_TIME:"starttime",SERVICE_DESCRIPTION_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:scope:2019",SUPPLEMENTAL_PROPERTY_DVB_LL_SCHEME:"urn:dvb:dash:lowlatency:critical:2019",CTA_5004_2023_SCHEME:"urn:mpeg:dash:cta-5004:2023",THUMBNAILS_SCHEME_ID_URIS:["http://dashif.org/thumbnail_tile","http://dashif.org/guidelines/thumbnail_tile"],FONT_DOWNLOAD_DVB_SCHEME:"urn:dvb:dash:fontdownload:2014",COLOUR_PRIMARIES_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:ColourPrimaries",URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2014",EXT_URL_QUERY_INFO_SCHEME:"urn:mpeg:dash:urlparam:2016",MATRIX_COEFFICIENTS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:MatrixCoefficients",TRANSFER_CHARACTERISTICS_SCHEME_ID_URI:"urn:mpeg:mpegB:cicp:TransferCharacteristics",SEGMENT_SEQUENCE_REPRESENTATION_SCHEME_ID_URI:"urn:mpeg:dash:ssr:2023",HDR_METADATA_FORMAT_SCHEME_ID_URI:"urn:dvb:dash:hdr-dmi",HDR_METADATA_FORMAT_VALUES:{ST2094_10:"ST2094-10",SL_HDR2:"SL-HDR2",ST2094_40:"ST2094-40"},MEDIA_CAPABILITIES_API:{COLORGAMUT:{SRGB:"srgb",P3:"p3",REC2020:"rec2020"},TRANSFERFUNCTION:{SRGB:"srgb",PQ:"pq",HLG:"hlg"},HDR_METADATATYPE:{SMPTE_ST_2094_10:"smpteSt2094-10",SLHDR2:"slhdr2",SMPTE_ST_2094_40:"smpteSt2094-40"}},XML:"XML",ARRAY_BUFFER:"ArrayBuffer",DVB_REPORTING_URL:"dvb:reportingUrl",DVB_PROBABILITY:"dvb:probability",OFF_MIMETYPE:"application/font-sfnt",WOFF_MIMETYPE:"application/font-woff",VIDEO_ELEMENT_READY_STATES:{HAVE_NOTHING:0,HAVE_METADATA:1,HAVE_CURRENT_DATA:2,HAVE_FUTURE_DATA:3,HAVE_ENOUGH_DATA:4},FILE_LOADER_TYPES:{FETCH:"fetch_loader",XHR:"xhr_loader"},THROUGHPUT_TYPES:{LATENCY:"throughput_type_latency",BANDWIDTH:"throughput_type_bandwidth"},THROUGHPUT_CALCULATION_MODES:{EWMA:"throughputCalculationModeEwma",ZLEMA:"throughputCalculationModeZlema",ARITHMETIC_MEAN:"throughputCalculationModeArithmeticMean",BYTE_SIZE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeByteSizeWeightedArithmeticMean",DATE_WEIGHTED_ARITHMETIC_MEAN:"throughputCalculationModeDateWeightedArithmeticMean",HARMONIC_MEAN:"throughputCalculationModeHarmonicMean",BYTE_SIZE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeByteSizeWeightedHarmonicMean",DATE_WEIGHTED_HARMONIC_MEAN:"throughputCalculationModeDateWeightedHarmonicMean"},LOW_LATENCY_DOWNLOAD_TIME_CALCULATION_MODE:{MOOF_PARSING:"lowLatencyDownloadTimeCalculationModeMoofParsing",DOWNLOADED_DATA:"lowLatencyDownloadTimeCalculationModeDownloadedData",AAST:"lowLatencyDownloadTimeCalculationModeAast"},RULES_TYPES:{QUALITY_SWITCH_RULES:"qualitySwitchRules",ABANDON_FRAGMENT_RULES:"abandonFragmentRules"},QUALITY_SWITCH_RULES:{BOLA_RULE:"BolaRule",THROUGHPUT_RULE:"ThroughputRule",INSUFFICIENT_BUFFER_RULE:"InsufficientBufferRule",SWITCH_HISTORY_RULE:"SwitchHistoryRule",DROPPED_FRAMES_RULE:"DroppedFramesRule",LEARN_TO_ADAPT_RULE:"L2ARule",LOL_PLUS_RULE:"LoLPRule"},ABANDON_FRAGMENT_RULES:{ABANDON_REQUEST_RULE:"AbandonRequestsRule"},ID3_SCHEME_ID_URI:"https://aomedia.org/emsg/ID3",COMMON_ACCESS_TOKEN_HEADER:"common-access-token",DASH_ROLE_SCHEME_ID:"urn:mpeg:dash:role:2011",CODEC_FAMILIES:{MP3:"mp3",AAC:"aac",AC3:"ac3",EC3:"ec3",DTSX:"dtsx",DTSC:"dtsc",AVC:"avc",HEVC:"hevc"}}},2861:function(h,e,t){t.r(e),e.default={CLEARKEY_KEYSTEM_STRING:"org.w3.clearkey",WIDEVINE_KEYSTEM_STRING:"com.widevine.alpha",PLAYREADY_KEYSTEM_STRING:"com.microsoft.playready",PLAYREADY_RECOMMENDATION_KEYSTEM_STRING:"com.microsoft.playready.recommendation",WIDEVINE_UUID:"edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",PLAYREADY_UUID:"9a04f079-9840-4286-ab92-e65be0885f95",CLEARKEY_UUID:"e2719d58-a985-b3c9-781a-b030af78d30e",W3C_CLEARKEY_UUID:"1077efec-c0b2-4d02-ace3-3c1e52e2fb4b",INITIALIZATION_DATA_TYPE_CENC:"cenc",INITIALIZATION_DATA_TYPE_KEYIDS:"keyids",INITIALIZATION_DATA_TYPE_WEBM:"webm",ENCRYPTION_SCHEME_CENC:"cenc",ENCRYPTION_SCHEME_CBCS:"cbcs",MEDIA_KEY_MESSAGE_TYPES:{LICENSE_REQUEST:"license-request",LICENSE_RENEWAL:"license-renewal",LICENSE_RELEASE:"license-release",INDIVIDUALIZATION_REQUEST:"individualization-request"},ROBUSTNESS_STRINGS:{WIDEVINE:{SW_SECURE_CRYPTO:"SW_SECURE_CRYPTO",SW_SECURE_DECODE:"SW_SECURE_DECODE",HW_SECURE_CRYPTO:"HW_SECURE_CRYPTO",HW_SECURE_DECODE:"HW_SECURE_DECODE",HW_SECURE_ALL:"HW_SECURE_ALL"}},MEDIA_KEY_STATUSES:{USABLE:"usable",EXPIRED:"expired",RELEASED:"released",OUTPUT_RESTRICTED:"output-restricted",OUTPUT_DOWNSCALED:"output-downscaled",STATUS_PENDING:"status-pending",INTERNAL_ERROR:"internal-error"}}},4469:function(h,e,t){t.r(e),t.d(e,{default:function(){return I}});class o{constructor(){this.mpdurl=null,this.errorcode=null,this.terror=null,this.url=null,this.ipaddress=null,this.servicelocation=null}}o.SSL_CONNECTION_FAILED_PREFIX="SSL",o.DNS_RESOLUTION_FAILED="C00",o.HOST_UNREACHABLE="C01",o.CONNECTION_REFUSED="C02",o.CONNECTION_ERROR="C03",o.CORRUPT_MEDIA_ISOBMFF="M00",o.CORRUPT_MEDIA_OTHER="M01",o.BASE_URL_CHANGED="F00",o.BECAME_REPORTER="S00";var n=o,r=t(913),u=t(138);function p(J){let G,Ae;const Ye=(J=J||{}).eventBus,ze=J.dashMetrics,je=J.metricsConstants,Oe=J.events;function Ve(Ut){let It=new n;if(Ae){for(const gn in Ut)Ut.hasOwnProperty(gn)&&(It[gn]=Ut[gn]);It.mpdurl||(It.mpdurl=Ae.originalUrl||Ae.url),It.terror||(It.terror=new Date),ze.addDVBErrors(It)}}function tt(Ut){Ut.error||(Ae=Ut.manifest)}function Je(Ut){Ve({errorcode:n.BASE_URL_CHANGED,servicelocation:Ut.entry})}function mt(){Ve({errorcode:n.BECAME_REPORTER})}function Vt(Ut){var It;Ut.metric===je.HTTP_REQUEST&&((It=Ut.value).responsecode===0||It.responsecode==null||It.responsecode>=400||It.responsecode<100||It.responsecode>=600)&&Ve({errorcode:It.responsecode||n.CONNECTION_ERROR,url:It.url,terror:It.tresponse,servicelocation:It._serviceLocation})}function Dt(Ut){let It;switch(Ut.error?Ut.error.code:0){case MediaError.MEDIA_ERR_NETWORK:It=n.CONNECTION_ERROR;break;case MediaError.MEDIA_ERR_DECODE:It=n.CORRUPT_MEDIA_OTHER;break;default:return}Ve({errorcode:It})}return G={initialize:function(){Ye.on(Oe.MANIFEST_UPDATED,tt,G),Ye.on(Oe.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Je,G),Ye.on(Oe.METRIC_ADDED,Vt,G),Ye.on(Oe.METRIC_UPDATED,Vt,G),Ye.on(Oe.PLAYBACK_ERROR,Dt,G),Ye.on(r.default.BECAME_REPORTING_PLAYER,mt,G)},reset:function(){Ye.off(Oe.MANIFEST_UPDATED,tt,G),Ye.off(Oe.SERVICE_LOCATION_BASE_URL_BLACKLIST_CHANGED,Je,G),Ye.off(Oe.METRIC_ADDED,Vt,G),Ye.off(Oe.METRIC_UPDATED,Vt,G),Ye.off(Oe.PLAYBACK_ERROR,Dt,G),Ye.off(r.default.BECAME_REPORTING_PLAYER,mt,G)}},G}p.__dashjs_factory_name="DVBErrorsTranslator";var m=u.default.getSingletonFactory(p),g=t(7377);function T(J){J=J||{};let G,Ae,Ye=!1,ze=this.context,je=J.mediaElement;return G={initialize:function(Oe){Oe&&Oe.length&&(Oe.forEach((Ve=>{let tt=Ve.starttime,Je=tt+Ve.duration;Ae.add(tt,Je)})),Ye=!!Oe[0]._useWallClockTime)},reset:function(){Ae.clear()},isEnabled:function(){let Oe,Ve=Ae.length;if(!Ve)return!0;Oe=Ye?new Date().getTime()/1e3:je.currentTime;for(let tt=0;tt<Ve;tt+=1){let Je=Ae.start(tt),mt=Ae.end(tt);if(Je<=Oe&&Oe<mt)return!0}return!1}},Ae=(0,g.default)(ze).create(),G}T.__dashjs_factory_name="RangeController";var f=u.default.getClassFactory(T);function c(){return{serialise:function J(G){let Ae,Ye,ze=[],je=[];for(Ae in G)if(G.hasOwnProperty(Ae)&&Ae.indexOf("_")!==0){if(Ye=G[Ae],Ye==null&&(Ye=""),Array.isArray(Ye)){if(!Ye.length)continue;je=[],Ye.forEach((function(Oe){let Ve=Object.prototype.toString.call(Oe).slice(8,-1)!=="Object";je.push(Ve?Oe:J(Oe))})),Ye=je.map(encodeURIComponent).join(",")}else typeof Ye=="string"?Ye=encodeURIComponent(Ye):Ye instanceof Date?Ye=Ye.toISOString():typeof Ye=="number"&&(Ye=Math.round(Ye));ze.push(Ae+"="+Ye)}return ze.join("&")}}}c.__dashjs_factory_name="MetricSerialiser";var v=u.default.getSingletonFactory(c);function _(){let J,G,Ae,Ye=window.crypto||window.msCrypto,ze=Uint32Array,je=Math.pow(2,8*ze.BYTES_PER_ELEMENT)-1;function Oe(){Ye&&(J||(J=new ze(10)),Ye.getRandomValues(J),G=0)}return Ae={random:function(Ve,tt){let Je;return Ve||(Ve=0),tt||(tt=1),Ye?(G===J.length&&Oe(),Je=J[G]/je,G+=1):Je=Math.random(),Je*(tt-Ve)+Ve}},Oe(),Ae}_.__dashjs_factory_name="RNG";var x=u.default.getSingletonFactory(_),te=t(1926);function oe(J){let G;J=J||{};let Ae,Ye,ze,je,Oe,Ve,tt,Je=this.context,mt=[];const Vt=J.metricsConstants;function Dt(){je=!1,Oe=!1,Ve=null,tt=null}return G={report:function(Ut,It){Array.isArray(It)||(It=[It]),Oe&&tt.isEnabled()&&It.forEach((function(gn){let Rn=Ae.serialise(gn);Ut!==Vt.DVB_ERRORS&&(Rn=`metricname=${Ut}&${Rn}`),Rn=`${Ve}?${Rn}`,(function(jn,Zn,ra){let Wn=new XMLHttpRequest;Wn.withCredentials=Ye.getXHRWithCredentialsForType(Vt.HTTP_REQUEST_DVB_REPORTING_TYPE);const Nt=function(){let At=mt.indexOf(Wn);At!==-1&&(mt.splice(At,1),!(Wn.status>=200&&Wn.status<300)&&ra&&ra())};mt.push(Wn);try{Wn.open("GET",jn),Wn.onloadend=Nt,Wn.onerror=Nt,Wn.send()}catch{Wn.onerror()}})(Rn,0,(function(){Oe=!1}))}))},initialize:function(Ut,It){let gn;if(tt=It,Ve=Ut.dvbReportingUrl,!Ve)throw new Error("required parameter missing (dvb:reportingUrl)");je||(gn=Ut.dvbProbability,gn&&(gn===1e3||gn/1e3>=ze.random())&&(Oe=!0),je=!0)},reset:function(){Dt()}},Ae=v(Je).getInstance(),ze=x(Je).getInstance(),Ye=(0,te.default)(Je).getInstance(),Dt(),G}oe.__dashjs_factory_name="DVBReporting";var Te=u.default.getClassFactory(oe);function Se(J){J=J||{};const G={"urn:dvb:dash:reporting:2014":Te},Ae=this.context;let Ye;const ze=J.debug?J.debug.getLogger(Ye):{},je=J.metricsConstants,Oe=J.mediaPlayerModel||{};return Ye={create:function(Ve,tt){let Je;try{Je=G[Ve.schemeIdUri](Ae).create({metricsConstants:je,mediaPlayerModel:Oe}),Je.initialize(Ve,tt)}catch(mt){Je=null,ze.error(`ReportingFactory: could not create Reporting with schemeIdUri ${Ve.schemeIdUri} (${mt.message})`)}return Je},register:function(Ve,tt){G[Ve]=tt},unregister:function(Ve){delete G[Ve]}},Ye}Se.__dashjs_factory_name="ReportingFactory";var Re=u.default.getSingletonFactory(Se);function Be(J){let G,Ae=[];const Ye=Re(this.context).getInstance(J);return G={initialize:function(ze,je){ze.some((Oe=>{let Ve=Ye.create(Oe,je);if(Ve)return Ae.push(Ve),!0}))},reset:function(){Ae.forEach((ze=>ze.reset())),Ae=[]},report:function(ze,je){Ae.forEach((Oe=>Oe.report(ze,je)))}},G}Be.__dashjs_factory_name="ReportingController";var De=u.default.getClassFactory(Be);function re(){return{reconstructFullMetricName:function(J,G,Ae){let Ye=J;return G&&(Ye+="("+G,Ae&&Ae.length&&(Ye+=","+Ae),Ye+=")"),Ye},validateN:function(J){if(!J)throw new Error("missing n");if(isNaN(J))throw new Error("n is NaN");if(J<0)throw new Error("n must be positive");return J}}}re.__dashjs_factory_name="HandlerHelpers";var se=u.default.getSingletonFactory(re);function he(J){let G,Ae,Ye,ze,je,Oe;J=J||{};let Ve=this.context,tt=se(Ve).getInstance(),Je=[];const mt=J.metricsConstants;function Vt(){let Dt=(function(){try{return Object.keys(Je).map((Ut=>Je[Ut])).reduce(((Ut,It)=>Ut.level<It.level?Ut:It))}catch{return}})();Dt&&Oe!==Dt.t&&(Oe=Dt.t,Ae.report(ze,Dt))}return G={initialize:function(Dt,Ut,It){Ut&&(Ye=tt.validateN(It),Ae=Ut,ze=tt.reconstructFullMetricName(Dt,It),je=setInterval(Vt,Ye))},reset:function(){clearInterval(je),je=null,Ye=0,Ae=null,Oe=null},handleNewMetric:function(Dt,Ut,It){Dt===mt.BUFFER_LEVEL&&(Je[It]=Ut)}},G}he.__dashjs_factory_name="BufferLevelHandler";var ve=u.default.getClassFactory(he),ke=u.default.getClassFactory((function(J){let G,Ae,Ye=(J=J||{}).eventBus;const ze=J.metricsConstants;function je(){Ye.off(r.default.METRICS_INITIALISATION_COMPLETE,je,this),Ye.trigger(r.default.BECAME_REPORTING_PLAYER)}return G={initialize:function(Oe,Ve){Ve&&(Ae=Ve,Ye.on(r.default.METRICS_INITIALISATION_COMPLETE,je,this))},reset:function(){Ae=null},handleNewMetric:function(Oe,Ve){Oe===ze.DVB_ERRORS&&Ae&&Ae.report(Oe,Ve)}},G}));function Fe(J){let G,Ae,Ye,ze,je,Oe;J=J||{};let Ve=[],tt=se(this.context).getInstance();const Je=J.metricsConstants;function mt(){var Vt=Ve;Vt.length&&Ae&&Ae.report(je,Vt),Ve=[]}return G={initialize:function(Vt,Dt,Ut,It){Dt&&(Ye=tt.validateN(Ut),Ae=Dt,It&&It.length&&(ze=It),je=tt.reconstructFullMetricName(Vt,Ut,It),Oe=setInterval(mt,Ye))},reset:function(){clearInterval(Oe),Oe=null,Ye=null,ze=null,Ve=[],Ae=null},handleNewMetric:function(Vt,Dt){Vt===Je.HTTP_REQUEST&&(ze&&ze!==Dt.type||Ve.push(Dt))}},G}Fe.__dashjs_factory_name="HttpListHandler";var ye=u.default.getClassFactory(Fe);function Qe(){let J,G,Ae;return J={initialize:function(Ye,ze){G=Ye,Ae=ze},reset:function(){Ae=null,G=void 0},handleNewMetric:function(Ye,ze){Ye===G&&Ae&&Ae.report(G,ze)}},J}Qe.__dashjs_factory_name="GenericMetricHandler";var xe=u.default.getClassFactory(Qe);function Le(J){let G;const Ae=(J=J||{}).debug?J.debug.getLogger(G):{};let Ye=/([a-zA-Z]*)(\(([0-9]*)(\,\s*([a-zA-Z]*))?\))?/;const ze=this.context;let je={BufferLevel:ve,DVBErrors:ke,HttpList:ye,PlayList:xe,RepSwitchList:xe,TcpList:xe};return G={create:function(Oe,Ve){var tt,Je=Oe.match(Ye);if(Je){try{(tt=je[Je[1]](ze).create({eventBus:J.eventBus,metricsConstants:J.metricsConstants})).initialize(Je[1],Ve,Je[3],Je[5])}catch(mt){tt=null,Ae.error(`MetricsHandlerFactory: Could not create handler for type ${Je[1]} with args ${Je[3]}, ${Je[5]} (${mt.message})`)}return tt}},register:function(Oe,Ve){je[Oe]=Ve},unregister:function(Oe){delete je[Oe]}},G}Le.__dashjs_factory_name="MetricsHandlerFactory";var ot=u.default.getSingletonFactory(Le);function Ht(J){J=J||{};let G,Ae=[];const Ye=this.context,ze=J.eventBus,je=J.events;let Oe=ot(Ye).getInstance({debug:J.debug,eventBus:J.eventBus,metricsConstants:J.metricsConstants});function Ve(tt){Ae.forEach((Je=>{Je.handleNewMetric(tt.metric,tt.value,tt.mediaType)}))}return G={initialize:function(tt,Je){tt.split(",").forEach(((mt,Vt,Dt)=>{let Ut;if(mt.indexOf("(")!==-1&&mt.indexOf(")")===-1){let It=Dt[Vt+1];It&&It.indexOf("(")===-1&&It.indexOf(")")!==-1&&(mt+=","+It,delete Dt[Vt+1])}Ut=Oe.create(mt,Je),Ut&&Ae.push(Ut)})),ze.on(je.METRIC_ADDED,Ve,G),ze.on(je.METRIC_UPDATED,Ve,G)},reset:function(){ze.off(je.METRIC_ADDED,Ve,G),ze.off(je.METRIC_UPDATED,Ve,G),Ae.forEach((tt=>tt.reset())),Ae=[]}},G}Ht.__dashjs_factory_name="MetricsHandlersController";var Et=u.default.getClassFactory(Ht);function zt(J){let G,Ae,Ye,ze;J=J||{};let je=this.context;function Oe(){G&&G.reset(),Ae&&Ae.reset(),Ye&&Ye.reset()}return ze={initialize:function(Ve){try{Ye=f(je).create({mediaElement:J.mediaElement}),Ye.initialize(Ve.Range),Ae=De(je).create({debug:J.debug,metricsConstants:J.metricsConstants,mediaPlayerModel:J.mediaPlayerModel}),Ae.initialize(Ve.Reporting,Ye),G=Et(je).create({debug:J.debug,eventBus:J.eventBus,metricsConstants:J.metricsConstants,events:J.events}),G.initialize(Ve.metrics,Ae)}catch(tt){throw Oe(),tt}},reset:Oe},ze}zt.__dashjs_factory_name="MetricsController";var Rt=u.default.getClassFactory(zt),Xt=class{constructor(){this.metrics="",this.Range=[],this.Reporting=[]}},tn=class{constructor(){this.starttime=0,this.duration=1/0,this._useWallClockTime=!1}},cn=class{constructor(){this.schemeIdUri="",this.value="",this.dvbReportingUrl="",this.dvbProbability=1e3}};function Ne(J){let G,Ae=(J=J||{}).adapter;const Ye=J.constants;return G={getMetrics:function(ze){let je=[];return ze&&ze.Metrics&&ze.Metrics.forEach((Oe=>{var Ve=new Xt,tt=Ae.getIsDynamic(ze);Oe.hasOwnProperty("metrics")&&(Ve.metrics=Oe.metrics,Oe.Range&&Oe.Range.forEach((Je=>{var mt=new tn;mt.starttime=(function(Vt,Dt,Ut){let It,gn,Rn=0;return Dt?Rn=Ae.getAvailabilityStartTime(Vt)/1e3:(It=Ae.getRegularPeriods(Vt),It.length&&(Rn=It[0].start)),gn=Rn,Ut&&Ut.hasOwnProperty(Ye.START_TIME)&&(gn+=Ut.starttime),gn})(ze,tt,Je),Je.hasOwnProperty("duration")?mt.duration=Je.duration:mt.duration=Ae.getDuration(ze),mt._useWallClockTime=tt,Ve.Range.push(mt)})),Oe.Reporting&&(Oe.Reporting.forEach((Je=>{var mt=new cn;Je.hasOwnProperty(Ye.SCHEME_ID_URI)&&(mt.schemeIdUri=Je.schemeIdUri,Je.hasOwnProperty("value")&&(mt.value=Je.value),Je.hasOwnProperty(Ye.DVB_REPORTING_URL)&&(mt.dvbReportingUrl=Je[Ye.DVB_REPORTING_URL]),Je.hasOwnProperty(Ye.DVB_PROBABILITY)&&(mt.dvbProbability=Je[Ye.DVB_PROBABILITY]),Ve.Reporting.push(mt))})),je.push(Ve)))})),je}},G}Ne.__dashjs_factory_name="ManifestParsing";var Ce=u.default.getSingletonFactory(Ne);function lt(J){let G;J=J||{};let Ae={},Ye=this.context,ze=J.eventBus;const je=J.events;function Oe(tt){if(tt.error)return;let Je=Object.keys(Ae);Ce(Ye).getInstance({adapter:J.adapter,constants:J.constants}).getMetrics(tt.manifest).forEach((mt=>{const Vt=JSON.stringify(mt);if(Ae.hasOwnProperty(Vt))Je.splice(Vt,1);else try{let Dt=Rt(Ye).create(J);Dt.initialize(mt),Ae[Vt]=Dt}catch{}})),Je.forEach((mt=>{Ae[mt].reset(),delete Ae[mt]})),ze.trigger(r.default.METRICS_INITIALISATION_COMPLETE)}function Ve(){Object.keys(Ae).forEach((tt=>{Ae[tt].reset()})),Ae={}}return G={reset:function(){ze.off(je.MANIFEST_UPDATED,Oe,G),ze.off(je.STREAM_TEARDOWN_COMPLETE,Ve,G)}},ze.on(je.MANIFEST_UPDATED,Oe,G),ze.on(je.STREAM_TEARDOWN_COMPLETE,Ve,G),G}lt.__dashjs_factory_name="MetricsCollectionController";var $=u.default.getClassFactory(lt);function Y(){let J,G,Ae=this.context;return J={createMetricsReporting:function(Ye){return G=m(Ae).getInstance({eventBus:Ye.eventBus,dashMetrics:Ye.dashMetrics,metricsConstants:Ye.metricsConstants,events:Ye.events}),G.initialize(),$(Ae).create(Ye)},getReportingFactory:function(){return Re(Ae).getInstance()},getMetricsHandlerFactory:function(){return ot(Ae).getInstance()}},J}Y.__dashjs_factory_name="MetricsReporting";const A=u.default.getClassFactory(Y);A.events=r.default,u.default.updateClassFactory(Y.__dashjs_factory_name,A);var I=A},913:function(h,e,t){t.r(e);var o=t(7252);class n extends o.default{constructor(){super(),this.METRICS_INITIALISATION_COMPLETE="internal_metricsReportingInitialized",this.BECAME_REPORTING_PLAYER="internal_becameReportingPlayer",this.CMCD_DATA_GENERATED="cmcdDataGenerated"}}let r=new n;e.default=r},1926:function(h,e,t){t.r(e);var o=t(5717),n=t(138),r=t(8261),u=t(656),p=t(5212),m=t(5560);function g(){let T,f,c,v,_,x,te,oe,Te,Se,Re;const Be=this.context,De=(0,r.default)(Be).getInstance();function re(){v=[],_=[],x=[],te=[],oe=[],Re=[],Te=null,f=[],Se=new Set}function se(ye,Qe){let xe=-1;ye.some(((Le,ot)=>{if(Le===Qe)return xe=ot,!0})),xe<0||ye.splice(xe,1)}function he(ye){let Qe;for(Qe=0;Qe<Re.length;Qe++)if(Re[Qe].rulename===ye)return Qe;return-1}function ve(ye,Qe){let xe=!1;return Se.forEach((Le=>{Le[ye]===Qe&&(xe=!0)})),xe}function ke(ye,Qe){Fe(ye,Qe);let xe=new o.default;xe.schemeIdUri=ye,xe.value=Qe,f.push(xe)}function Fe(ye,Qe){(0,u.checkParameterType)(ye,"string"),(0,u.checkParameterType)(Qe,"string"),f.forEach((function(xe,Le){xe.schemeIdUri===ye&&xe.value===Qe&&f.splice(Le,1)}))}return T={addAbrCustomRule:function(ye,Qe,xe){if(typeof ye!="string"||ye!==p.default.RULES_TYPES.ABANDON_FRAGMENT_RULES&&ye!==p.default.RULES_TYPES.QUALITY_SWITCH_RULES||typeof Qe!="string")throw p.default.BAD_ARGUMENT_ERROR;let Le=he(Qe);Le===-1?Re.push({type:ye,rulename:Qe,rule:xe}):(Re[Le].type=ye,Re[Le].rule=xe)},addExternalSubtitle:function(ye){if(!(ye&&ye.id!==void 0&&ye.url&&ye.language&&ye.mimeType&&ye.bandwidth!==void 0))return;const Qe=new m.default(ye);ve("url",Qe.url)||ve("id",Qe.id)||Se.add(Qe)},addRequestInterceptor:function(ye){v.push(ye)},addResponseInterceptor:function(ye){_.push(ye)},addUTCTimingSource:ke,clearDefaultUTCTimingSources:function(){f=[]},getAbrCustomRules:function(){return Re},getCustomCapabilitiesFilters:function(){return oe},getCustomInitialTrackSelectionFunction:function(){return Te},getExternalSubtitles:function(){return Se},getLicenseRequestFilters:function(){return x},getLicenseResponseFilters:function(){return te},getRequestInterceptors:function(){return v},getResponseInterceptors:function(){return _},getUTCTimingSources:function(){return f},getXHRWithCredentialsForType:function(ye){const Qe=c[ye];return Qe===void 0?c.default:Qe},registerCustomCapabilitiesFilter:function(ye){oe.push(ye)},registerLicenseRequestFilter:function(ye){x.push(ye)},registerLicenseResponseFilter:function(ye){te.push(ye)},removeAbrCustomRule:function(ye){if(ye){let Qe=he(ye);Qe!==-1&&Re.splice(Qe,1)}else Re=[]},removeAllAbrCustomRule:function(){Re=[]},removeExternalSubtitleById:function(ye){Se.forEach((Qe=>{Qe.id===ye&&Se.delete(Qe)}))},removeExternalSubtitleByUrl:function(ye){Se.forEach((Qe=>{Qe.url===ye&&Se.delete(Qe)}))},removeRequestInterceptor:function(ye){se(v,ye)},removeResponseInterceptor:function(ye){se(_,ye)},removeUTCTimingSource:Fe,reset:function(){re()},resetCustomInitialTrackSelectionFunction:function(){Te=null},resetPlaybackSessionSpecificSettings:function(){Se=new Set},restoreDefaultUTCTimingSources:function(){let ye=De.get().streaming.utcSynchronization.defaultTimingSource;ke(ye.scheme,ye.value)},setConfig:function(){},setCustomInitialTrackSelectionFunction:function(ye){Te=ye},setXHRWithCredentialsForType:function ye(Qe,xe){Qe?c[Qe]=!!xe:Object.keys(c).forEach((Le=>{ye(Le,xe)}))},unregisterCustomCapabilitiesFilter:function(ye){se(oe,ye)},unregisterLicenseRequestFilter:function(ye){se(x,ye)},unregisterLicenseResponseFilter:function(ye){se(te,ye)}},c={default:!1},re(),T}g.__dashjs_factory_name="CustomParametersModel",e.default=n.default.getSingletonFactory(g)},3888:function(h,e,t){t.r(e),t.d(e,{default:function(){return Wn}});var o=t(8854),n=t(2861);const r={prefixes:["clearkey","dashif","ck"]};class u{static findMp4ProtectionElement(At){let ft=null;for(let at=0;at<At.length;++at){let xt=At[at];xt.schemeIdUri&&xt.schemeIdUri.toLowerCase()===o.default.MP4_PROTECTION_SCHEME&&xt.value&&(xt.value.toLowerCase()===n.default.ENCRYPTION_SCHEME_CENC||xt.value.toLowerCase()===n.default.ENCRYPTION_SCHEME_CBCS)&&(ft=xt)}return ft}static getPSSHData(At){let ft=8,at=new DataView(At),xt=at.getUint8(ft);return ft+=20,xt>0&&(ft+=4+16*at.getUint32(ft)),ft+=4,At.slice(ft)}static getPSSHForKeySystem(At,ft){let at=u.parsePSSHList(ft);return At&&at.hasOwnProperty(At.uuid.toLowerCase())?at[At.uuid.toLowerCase()]:null}static parseInitDataFromContentProtection(At,ft){return"pssh"in At&&At.pssh?(At.pssh.__text=At.pssh.__text.replace(/\r?\n|\r/g,"").replace(/\s+/g,""),ft.decodeArray(At.pssh.__text).buffer):null}static parsePSSHList(At){if(At==null)return[];let ft=new DataView(At.buffer||At),at={},xt=0;for(;;){let Ct,Pt,Yt,yt,bt,Ot,Gt=xt;if(xt>=ft.buffer.byteLength)break;if(Ct=ft.getUint32(xt),Pt=xt+Ct,xt+=4,ft.getUint32(xt)===1886614376)if(xt+=4,Yt=ft.getUint8(xt),Yt===0||Yt===1){for(xt++,xt+=3,yt="",bt=0;bt<4;bt++)Ot=ft.getUint8(xt+bt).toString(16),yt+=Ot.length===1?"0"+Ot:Ot;for(xt+=4,yt+="-",bt=0;bt<2;bt++)Ot=ft.getUint8(xt+bt).toString(16),yt+=Ot.length===1?"0"+Ot:Ot;for(xt+=2,yt+="-",bt=0;bt<2;bt++)Ot=ft.getUint8(xt+bt).toString(16),yt+=Ot.length===1?"0"+Ot:Ot;for(xt+=2,yt+="-",bt=0;bt<2;bt++)Ot=ft.getUint8(xt+bt).toString(16),yt+=Ot.length===1?"0"+Ot:Ot;for(xt+=2,yt+="-",bt=0;bt<6;bt++)Ot=ft.getUint8(xt+bt).toString(16),yt+=Ot.length===1?"0"+Ot:Ot;xt+=6,yt=yt.toLowerCase(),xt+=4,at[yt]=ft.buffer.slice(Gt,Pt),xt=Pt}else xt=Pt;else xt=Pt}return at}static getLicenseServerUrlFromMediaInfo(At,ft){try{if(!At||At.length===0)return null;let at=0,xt=null;for(;at<At.length&&!xt;){const Ct=At[at];if(Ct&&Ct.contentProtection&&Ct.contentProtection.length>0){const Pt=Ct.contentProtection.filter((Yt=>Yt.schemeIdUri&&Yt.schemeIdUri===ft));if(Pt&&Pt.length>0){let Yt=0;for(;Yt<Pt.length&&!xt;){const yt=Pt[Yt];yt.laUrl&&yt.laUrl.__prefix&&r.prefixes.includes(yt.laUrl.__prefix)&&yt.laUrl.__text&&(xt=yt.laUrl.__text),Yt+=1}}}at+=1}return xt}catch{return null}}static hexKidToBufferSource(At){const ft=At.replace(/-/g,"");return new Uint8Array(ft.match(/[\da-f]{2}/gi).map((function(at){return parseInt(at,16)}))).buffer}}var p=u,m=class{constructor(Nt,At){this.contentType=Nt,this.robustness=At}},g=class{constructor(Nt,At,ft,at,xt,Ct){this.initDataTypes=Ct&&Ct.length>0?Ct:[n.default.INITIALIZATION_DATA_TYPE_CENC],Nt&&Nt.length&&(this.audioCapabilities=Nt),At&&At.length&&(this.videoCapabilities=At),this.distinctiveIdentifier=ft,this.persistentState=at,this.sessionTypes=xt}},T=t(1923),f=t(1944),c=class{constructor(Nt,At,ft,at,xt,Ct,Pt,Yt){this.url=Nt,this.method=At,this.responseType=ft,this.headers=at,this.withCredentials=xt,this.messageType=Ct,this.sessionId=Pt,this.data=Yt}},v=class{constructor(Nt,At,ft){this.url=Nt,this.headers=At,this.data=ft}},_=t(7568),x=t(7263),te=t(5212),oe=t(138);function Te(Nt){const At=(Nt=Nt||{}).BASE64,ft=Nt.cmcdModel,at=Nt.constants,xt=Nt.customParametersModel,Ct=Nt.debug,Pt=Nt.eventBus,Yt=Nt.events,yt=Nt.protectionKeyController,bt=Nt.settings;let Ot,Gt,_t,Qt,hn,rn,on,Sn,Bt,rt,We,Mt,Kt=Nt.protectionModel,dn=[];function kn(){if(!(Pt&&Pt.hasOwnProperty("on")&&yt&&yt.hasOwnProperty("getSupportedKeySystemMetadataFromContentProtection")))throw new Error("Missing config parameter(s)")}function xn(St,$t){We||Qt?We&&Kn():(function(ln,_n){if(Qt)return;var wn;Qt=!0;const Dn=(function(Cn){const An=[];for(let In=0;In<Cn.length;In++){const Mn=Ln(Cn[In]);An.push({ks:Cn[In].ks,configs:[Mn],protData:Cn[In].protData})}return An})(ln=(wn=ln).sort(((Cn,An)=>(Ot&&Ot[Cn.ks.systemString]&&Ot[Cn.ks.systemString].priority>=0?Ot[Cn.ks.systemString].priority:wn.length)-(Ot&&Ot[An.ks.systemString]&&Ot[An.ks.systemString].priority>=0?Ot[An.ks.systemString].priority:wn.length))));let Fn;Kt.requestKeySystemAccess(Dn).then((Cn=>(Fn=Cn.data,(function(An){let In=An&&An.selectedSystemString?An.selectedSystemString:An.keySystem.systemString;return on.info("DRM: KeySystem Access Granted for system string ("+In+")!  Selecting key system..."),Kt.selectKeySystem(An)})(Fn)))).then((Cn=>{(function(An,In){try{We=An,Qt=!1,Pt.trigger(Yt.KEY_SYSTEM_SELECTED,{data:In});const Mn=Vn(We);Mn&&Mn.serverCertificate&&Mn.serverCertificate.length>0&&Kt.setServerCertificate(At.decodeArray(Mn.serverCertificate).buffer),Kn()}catch(Mn){on.error(Mn)}})(Cn,Fn)})).catch((Cn=>{(function(An,In){We=null,Qt=!1,In||Pt.trigger(Yt.KEY_SYSTEM_SELECTED,{data:null,error:new f.default(T.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE,T.default.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE+"Error selecting key system! -- "+An.error)})})(Cn,_n)}))})(St,$t)}function Kn(){let St;for(let ln=0;ln<Bt.length;ln++)for(St=0;St<Bt[ln].length;St++)if(We===Bt[ln][St].ks){$t=Bt[ln][St],yt.isClearKey(We)&&(function(_n){if(_n.protData&&_n.protData.hasOwnProperty("clearkeys")&&Object.keys(_n.protData.clearkeys).length!==0){const wn={kids:Object.keys(_n.protData.clearkeys)};_n.initData=new TextEncoder().encode(JSON.stringify(wn))}})($t),$t.sessionId?qn($t):$t.initData!==null&&fe($t);break}var $t;Bt=[]}function Ln(St){const $t=St.protData,ln=[],_n=[],wn=$t&&$t.initDataTypes&&$t.initDataTypes.length>0?$t.initDataTypes:[n.default.INITIALIZATION_DATA_TYPE_CENC],Dn=$t&&$t.audioRobustness&&$t.audioRobustness.length>0?$t.audioRobustness:rt,Fn=$t&&$t.videoRobustness&&$t.videoRobustness.length>0?$t.videoRobustness:rt,Cn=St.sessionType,An=$t&&$t.distinctiveIdentifier?$t.distinctiveIdentifier:"optional",In=$t&&$t.persistentState?$t.persistentState:Cn==="temporary"?"optional":"required";return Sn.forEach((Mn=>{Mn.type===at.AUDIO?ln.push(new m(Mn.codec,Dn)):Mn.type===at.VIDEO&&_n.push(new m(Mn.codec,Fn))})),new g(ln,_n,An,In,[Cn],wn)}function qn(St){kn(),Kt.loadKeySession(St)}function fe(St){if(St&&(function(ln){if(!ln)return!1;try{const _n=Kt.getSessionTokens();for(let wn=0;wn<_n.length;wn++)if(_n[wn].getKeyId()===ln)return!0;return!1}catch{return!1}})(St.keyId))return;(function(){if(!bt)return;const ln=bt.get().streaming.protection.keepProtectionMediaKeys,_n=bt.get().streaming.protection.keepProtectionMediaKeysMaximumOpenSessions;if(typeof _n!="number"||_n<=0)return;if(!ln)return void on.warn("DRM: keepProtectionMediaKeysMaximumOpenSessions is set to "+_n+", but keepProtectionMediaKeys is not enabled. Therefore, keepProtectionMediaKeysMaximumOpenSessions will be ignored.");if(!Kt||typeof Kt.getSessionTokens!="function")return;const wn=Kt.getSessionTokens()||[];if(wn.length<_n)return;const Dn=wn[0];Dn&&(on.info("DRM: Maximum number of open MediaKeySessions reached ("+_n+"), closing oldest session."),Fa(Dn))})();const $t=p.getPSSHForKeySystem(We,St?St.initData:null);if($t){if(ma($t))return;try{St.initData=$t,Kt.createKeySession(St)}catch(ln){Pt.trigger(Yt.KEY_SESSION_CREATED,{data:null,error:new f.default(T.default.KEY_SESSION_CREATED_ERROR_CODE,T.default.KEY_SESSION_CREATED_ERROR_MESSAGE+ln.message)})}}else St&&St.initData?Kt.createKeySession(St):Pt.trigger(Yt.KEY_SESSION_CREATED,{data:null,error:new f.default(T.default.KEY_SESSION_CREATED_ERROR_CODE,T.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Selected key system is "+(We?We.systemString:null)+".  needkey/encrypted event contains no initData corresponding to that key system!")})}function Vn(St){if(St){const $t=St.systemString;if(Ot)return $t in Ot?Ot[$t]:null}return null}function ma(St){if(!St)return!1;try{const $t=Kt.getAllInitData();for(let ln=0;ln<$t.length;ln++)if(yt.initDataEquals(St,$t[ln]))return on.debug("DRM: Ignoring initData because we have already seen it!"),!0;return!1}catch{return!1}}function Fa(St){kn(),Kt.closeKeySession(St)}function ea(St){kn(),St?(Kt.setMediaElement(St),Pt.on(Yt.NEED_KEY,Ya,Gt)):St===null&&(Kt.setMediaElement(St),Pt.off(Yt.NEED_KEY,Ya,Gt))}function sr(St){on.debug("DRM: onKeyMessage");const $t=St.data;Pt.trigger(Yt.KEY_MESSAGE,{data:$t});const ln=$t.messageType?$t.messageType:n.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,_n=$t.message,wn=$t.sessionToken,Dn=Vn(We),Fn=yt.getLicenseServerModelInstance(We,Dn,ln),Cn={sessionToken:wn,messageType:ln};if(_n&&_n.byteLength!==0){if(!Fn)return on.debug("DRM: License server request not required for this message (type = "+St.data.messageType+").  Session ID = "+wn.getSessionId()),void ta(Cn);if(yt.isClearKey(We)){const An=yt.processClearKeyLicenseRequest(We,Dn,_n);if(An&&An.keyPairs&&An.keyPairs.length>0)return on.debug("DRM: ClearKey license request handled by application!"),ta(Cn),void Kt.updateKeySession(wn,An)}(function(An,In,Mn){const va=An.sessionToken,wa=An.messageType?An.messageType:n.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST,_a={sessionToken:va,messageType:wa},Ua=We?We.systemString:null;let oi=(function(On,Va,lr,ga,di){let sa=null;const fi=ga.message;if(On&&On.serverURL){const Sa=On.serverURL;typeof Sa=="string"&&Sa!==""?sa=Sa:typeof Sa=="object"&&Sa.hasOwnProperty(Va)&&(sa=Sa[Va])}else if(On&&On.laURL&&On.laURL!=="")sa=On.laURL;else if(sa=p.getLicenseServerUrlFromMediaInfo(Sn,We.schemeIdURI),!sa&&!yt.isClearKey(We)){const Sa=p.getPSSHData(lr.initData);sa=We.getLicenseServerURLFromInitData(Sa),sa||(sa=ga.laURL)}return sa=di.getServerURLFromMessage(sa,fi,Va),sa})(Mn,wa,va,An,In);if(!oi)return void ta(_a,new f.default(T.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE));const or={};let ia=!1;Mn&&Fr(or,Mn.httpRequestHeaders);const Ka=An.message;Fr(or,We.getRequestHeadersFromMessage(Ka)),Object.keys(or).forEach((On=>{On.toLowerCase()==="authorization"&&(ia=!0)})),Mn&&typeof Mn.withCredentials=="boolean"&&(ia=Mn.withCredentials);const Qn=function(On){if(Kt)if(On.status>=200&&On.status<=299){const Va=x.default.parseHttpHeaders(On.getAllResponseHeaders?On.getAllResponseHeaders():null);let lr=new v(On.responseURL,Va,On.response);Ur(xt.getLicenseResponseFilters(),lr).then((()=>{const ga=In.getLicenseMessage(lr.data,Ua,wa);ga!==null?(ta(_a),Kt.updateKeySession(va,ga)):ii(On,_a,Ua,wa,In)}))}else ii(On,_a,Ua,wa,In)},li=function(On){ta(_a,new f.default(T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Ua+' update, XHR aborted. status is "'+On.statusText+'" ('+On.status+"), readyState is "+On.readyState))},Pn=function(On){ta(_a,new f.default(T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+Ua+' update, XHR error. status is "'+On.statusText+'" ('+On.status+"), readyState is "+On.readyState))},Br=We.getLicenseRequestFromMessage(Ka),jr=In.getHTTPMethod(wa),qr=In.getResponseType(Ua,wa),Hr=Mn&&!isNaN(Mn.httpTimeout)?Mn.httpTimeout:8e3,ui=va.getSessionId()||null;let Gr=new c(oi,jr,qr,or,ia,wa,ui,Br);const ci=isNaN(bt.get().streaming.retryAttempts[_.HTTPRequest.LICENSE])?3:bt.get().streaming.retryAttempts[_.HTTPRequest.LICENSE];Ur(xt.getLicenseRequestFilters(),Gr).then((()=>{zr(Gr,ci,Hr,Qn,li,Pn)}))})($t,Fn,Dn)}else ta(Cn,new f.default(T.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE))}function ta(St,$t=null){Pt.trigger(Yt.LICENSE_REQUEST_COMPLETE,{data:St,error:$t})}function zr(St,$t,ln,_n,wn,Dn){const Fn=new XMLHttpRequest,Cn=ft.getCmcdParametersFromManifest();if(ft.isCmcdEnabled()&&(Cn.mode?Cn.mode:bt.get().streaming.cmcd.mode)===te.default.CMCD_MODE_QUERY){const In=ft.getQueryParameter({url:St.url,type:_.HTTPRequest.LICENSE});In&&(St.url=x.default.addAdditionalQueryParameterToUrl(St.url,[In]))}Fn.open(St.method,St.url,!0),Fn.responseType=St.responseType,Fn.withCredentials=St.withCredentials,ln>0&&(Fn.timeout=ln);for(const In in St.headers)Fn.setRequestHeader(In,St.headers[In]);if(ft.isCmcdEnabled()&&(Cn.mode?Cn.mode:bt.get().streaming.cmcd.mode)===te.default.CMCD_MODE_HEADER){const In=ft.getHeaderParameters({url:St.url,type:_.HTTPRequest.LICENSE});if(In)for(const Mn in In){let va=In[Mn];va&&Fn.setRequestHeader(Mn,va)}}const An=function(){$t--;const In=isNaN(bt.get().streaming.retryIntervals[_.HTTPRequest.LICENSE])?1e3:bt.get().streaming.retryIntervals[_.HTTPRequest.LICENSE];hn=setTimeout((function(){zr(St,$t,ln,_n,wn,Dn)}),In)};Fn.onload=function(){rn=null,this.status>=200&&this.status<=299||$t<=0?_n(this):(on.warn("License request failed ("+this.status+"). Retrying it... Pending retries: "+$t),An())},Fn.ontimeout=Fn.onerror=function(){rn=null,$t<=0?Dn(this):(on.warn("License request network request failed . Retrying it... Pending retries: "+$t),An())},Fn.onabort=function(){wn(this)},Pt.trigger(Yt.LICENSE_REQUEST_SENDING,{url:St.url,headers:St.headers,payload:St.data,sessionId:St.sessionId}),rn=Fn,Fn.send(St.data)}function ri(){rn&&(rn.onloadend=rn.onerror=rn.onprogress=void 0,rn.abort(),rn=null),hn&&(clearTimeout(hn),hn=null)}function Fr(St,$t){if($t)for(const ln in $t)St[ln]=$t[ln]}function ii(St,$t,ln,_n,wn){let Dn="NONE",Fn=null;St.response&&(Dn=wn.getErrorResponse(St.response,ln,_n),Fn={serverResponse:St.response||null,responseCode:St.status||null,responseText:St.statusText||null}),ta($t,new f.default(T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE+ln+' update, XHR complete. status is "'+St.statusText+'" ('+St.status+"), readyState is "+St.readyState+".  Response is "+Dn,Fn))}function Ur(St,$t){return St?St.reduce(((ln,_n)=>ln.then((()=>_n($t)))),Promise.resolve()):Promise.resolve()}function Ya(St,$t){if(bt.get().streaming.protection.ignoreEmeEncryptedEvent)return;if(on.debug("DRM: onNeedKey"),St.key.initDataType!==n.default.INITIALIZATION_DATA_TYPE_CENC)return void on.warn("DRM:  Only 'cenc' initData is supported!  Ignoring initData of type: "+St.key.initDataType);if(Sn.length===0&&(on.warn("DRM: onNeedKey called before initializeForMedia, wait until initialized"),($t=$t===void 0?1:$t+1)<5))return void dn.push(setTimeout((()=>{Ya(St,$t)}),500));let ln=St.key.initData;if(ArrayBuffer.isView(ln)&&(ln=ln.buffer),We){const wn=p.getPSSHForKeySystem(We,ln);if(wn&&ma(wn))return}on.debug("DRM: initData:",String.fromCharCode.apply(null,new Uint8Array(ln)));const _n=yt.getSupportedKeySystemMetadataFromSegmentPssh(ln,Ot,Mt);_n.length!==0?(function(wn){Bt.push(wn),xn(wn,!1)})(_n):on.debug("DRM: Received needkey event with initData, but we don't support any of the key systems!")}function si(St,$t){if(St.size<=0)return!1;if($t.size>0&&[...St].every((_n=>{const wn=$t.get(_n);return wn!==void 0&&wn!==""})))return!0;const ln=Kt.getSessionTokens();if(ln&&ln.length>0){const _n=ln.filter((wn=>[...St].includes(wn.normalizedKeyId)));if(_n.some((wn=>!wn.hasTriggeredKeyStatusMapUpdate))||_n.length===0)return!1}return!bt.get().streaming.protection.ignoreKeyStatuses&&St&&St.size>0&&$t&&$t.size>0}return Gt={areKeyIdsExpired:function(St){try{return!!si(St,_t)&&[...St].every(($t=>_t.get($t)===n.default.MEDIA_KEY_STATUSES.EXPIRED))}catch($t){return on.error($t),!1}},areKeyIdsUsable:function(St){try{return!si(St,_t)||[...St].some(($t=>{const ln=_t.get($t);return ln&&ln!==n.default.MEDIA_KEY_STATUSES.INTERNAL_ERROR&&ln!==n.default.MEDIA_KEY_STATUSES.OUTPUT_RESTRICTED}))}catch($t){return on.error($t),!0}},clearMediaInfoArray:function(){Sn=[]},closeKeySession:Fa,createKeySession:fe,getKeySystems:function(){return yt?yt.getKeySystems():[]},getSupportedKeySystemMetadataFromContentProtection:function(St){return kn(),yt.getSupportedKeySystemMetadataFromContentProtection(St,Ot,Mt)},handleKeySystemFromManifest:function(){if(!Sn||Sn.length===0)return;let St=[];Sn.forEach(($t=>{const ln=yt.getSupportedKeySystemMetadataFromContentProtection($t.contentProtection,Ot,Mt);ln.length>0&&(St.length===0&&(St=ln),Bt.push(ln))})),St&&St.length>0&&xn(St,!0)},initializeForMedia:function(St){if(!St)throw new Error("mediaInfo can not be null or undefined");kn(),Sn.push(St)},loadKeySession:qn,removeKeySession:function(St){kn(),Kt.removeKeySession(St)},reset:function(){Pt.off(Yt.INTERNAL_KEY_MESSAGE,sr,Gt),kn(),ri(),ea(null),We=null,Qt=!1,_t=new Map,Kt&&(Kt.reset(),Kt=null),dn.forEach((St=>clearTimeout(St))),dn=[],Sn=[],Bt=[]},setKeySystems:function(St){yt&&yt.setKeySystems(St)},setMediaElement:ea,setProtectionData:function(St){Ot=St,yt.setProtectionData(St)},setRobustnessLevel:function(St){rt=St},setServerCertificate:function(St){return kn(),Kt.setServerCertificate(St)},setSessionType:function(St){Mt=St},stop:function(){ri(),Kt&&Kt.stop()},updateKeyStatusesMap:function(St){try{if(!St||!St.sessionToken||!St.parsedKeyStatuses)return;St.sessionToken.hasTriggeredKeyStatusMapUpdate=!0;const $t=St.parsedKeyStatuses,ln=x.default.parseUserAgent(),_n=ln&&ln.browser&&ln.browser.name&&ln.browser.name.toLowerCase()==="edge";$t.forEach((wn=>{_n&&We.uuid===n.default.PLAYREADY_UUID&&wn.keyId&&wn.keyId.byteLength===16&&(function(Fn){const Cn=x.default.bufferSourceToDataView(Fn),An=Cn.getUint32(0,!0),In=Cn.getUint16(4,!0),Mn=Cn.getUint16(6,!0);Cn.setUint32(0,An,!1),Cn.setUint16(4,In,!1),Cn.setUint16(6,Mn,!1)})(wn.keyId);const Dn=x.default.bufferSourceToHex(wn.keyId).slice(0,32);Dn&&Dn!==""&&_t.set(Dn,wn.status)})),Pt.trigger(Yt.KEY_STATUSES_MAP_UPDATED,{keyStatusMap:_t})}catch($t){on.error($t)}}},on=Ct.getLogger(Gt),Bt=[],Sn=[],Mt="temporary",rt="",rn=null,hn=null,_t=new Map,Pt.on(Yt.INTERNAL_KEY_MESSAGE,sr,Gt),Gt}Te.__dashjs_factory_name="ProtectionController";var Se=oe.default.getClassFactory(Te),Re=class{constructor(Nt,At){this.keyID=Nt,this.key=At}},Be=class{constructor(Nt,At){if(At&&At!=="persistent"&&At!=="temporary")throw new Error("Invalid ClearKey key set type!  Must be one of 'persistent' or 'temporary'");this.keyPairs=Nt,this.type=At}toJWK(){let Nt,At=this.keyPairs.length,ft={keys:[]};for(Nt=0;Nt<At;Nt++){let Yt={kty:"oct",alg:"A128KW",kid:this.keyPairs[Nt].keyID,k:this.keyPairs[Nt].key};ft.keys.push(Yt)}this.type&&(ft.type=this.type);let at=JSON.stringify(ft);const xt=at.length;let Ct=new ArrayBuffer(xt),Pt=new Uint8Array(Ct);for(Nt=0;Nt<xt;Nt++)Pt[Nt]=at.charCodeAt(Nt);return Ct}};const De=n.default.CLEARKEY_UUID,re=n.default.CLEARKEY_KEYSTEM_STRING,se="urn:uuid:"+De;function he(Nt){let At;const ft=(Nt=Nt||{}).BASE64;return At={uuid:De,schemeIdURI:se,systemString:re,getInitData:function(at,xt){try{let Ct=p.parseInitDataFromContentProtection(at,ft);if(!Ct&&xt){const Pt={kids:[(function(Yt){try{let yt=Yt.replace(/-/g,"");return yt=btoa(yt.match(/\w{2}/g).map((bt=>String.fromCharCode(parseInt(bt,16)))).join("")),yt.replace(/=/g,"").replace(/\//g,"_").replace(/\+/g,"-")}catch{return null}})(xt.cencDefaultKid)]};Ct=new TextEncoder().encode(JSON.stringify(Pt))}return Ct}catch{return null}},getRequestHeadersFromMessage:function(){return{"Content-Type":"application/json"}},getLicenseRequestFromMessage:function(at){return JSON.stringify(JSON.parse(String.fromCharCode.apply(null,new Uint8Array(at))))},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(at,xt){let Ct=null;if(at){const Pt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(xt))),Yt=[];for(let yt=0;yt<Pt.kids.length;yt++){const bt=Pt.kids[yt],Ot=at.clearkeys&&at.clearkeys.hasOwnProperty(bt)?at.clearkeys[bt]:null;if(!Ot)throw new Error("DRM: ClearKey keyID ("+bt+") is not known!");Yt.push(new Re(bt,Ot))}Ct=new Be(Yt)}return Ct}},At}he.__dashjs_factory_name="KeySystemClearKey";var ve=oe.default.getSingletonFactory(he);const ke=n.default.W3C_CLEARKEY_UUID,Fe=n.default.CLEARKEY_KEYSTEM_STRING,ye="urn:uuid:"+ke;function Qe(Nt){let At;const ft=Nt.BASE64,at=Nt.debug.getLogger(At);return At={uuid:ke,schemeIdURI:ye,systemString:Fe,getInitData:function(xt){return p.parseInitDataFromContentProtection(xt,ft)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(xt){return new Uint8Array(xt)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null},getClearKeysFromProtectionData:function(xt,Ct){let Pt=null;if(xt){const Yt=JSON.parse(String.fromCharCode.apply(null,new Uint8Array(Ct))),yt=[];for(let bt=0;bt<Yt.kids.length;bt++){const Ot=Yt.kids[bt],Gt=xt.clearkeys&&xt.clearkeys.hasOwnProperty(Ot)?xt.clearkeys[Ot]:null;if(!Gt)throw new Error("DRM: ClearKey keyID ("+Ot+") is not known!");yt.push(new Re(Ot,Gt))}Pt=new Be(yt),at.warn("ClearKey schemeIdURI is using W3C Common PSSH systemID (1077efec-c0b2-4d02-ace3-3c1e52e2fb4b) in Content Protection. See DASH-IF IOP v4.1 section 7.6.2.4")}return Pt}},At}Qe.__dashjs_factory_name="KeySystemW3CClearKey";var xe=oe.default.getSingletonFactory(Qe);const Le=n.default.WIDEVINE_UUID,ot=n.default.WIDEVINE_KEYSTEM_STRING,Ht="urn:uuid:"+Le;function Et(Nt){let At;const ft=(Nt=Nt||{}).BASE64;return At={uuid:Le,schemeIdURI:Ht,systemString:ot,getInitData:function(at){return p.parseInitDataFromContentProtection(at,ft)},getRequestHeadersFromMessage:function(){return null},getLicenseRequestFromMessage:function(at){return new Uint8Array(at)},getLicenseServerURLFromInitData:function(){return null},getCDMData:function(){return null}},At}Et.__dashjs_factory_name="KeySystemWidevine";var zt=oe.default.getSingletonFactory(Et);const Rt=n.default.PLAYREADY_UUID,Xt=n.default.PLAYREADY_KEYSTEM_STRING,tn="urn:uuid:"+Rt;function cn(Nt){let At,ft="utf-16";const at=(Nt=Nt||{}).BASE64,xt=Nt.settings;function Ct(){if(!at||!at.hasOwnProperty("decodeArray")||!at.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")}return At={uuid:Rt,schemeIdURI:tn,systemString:Xt,getInitData:function(Pt){const Yt=new Uint8Array([112,115,115,104,0,0,0,0]),yt=new Uint8Array([154,4,240,121,152,64,66,134,171,146,230,91,224,136,95,149]);let bt,Ot,Gt,_t,Qt,hn=0,rn=null;if(Ct(),!Pt)return null;if("pssh"in Pt&&Pt.pssh)return p.parseInitDataFromContentProtection(Pt,at);if("pro"in Pt&&Pt.pro)rn=at.decodeArray(Pt.pro.__text);else{if(!("prheader"in Pt)||!Pt.prheader)return null;rn=at.decodeArray(Pt.prheader.__text)}return bt=rn.length,Ot=4+Yt.length+yt.length+4+bt,Gt=new ArrayBuffer(Ot),_t=new Uint8Array(Gt),Qt=new DataView(Gt),Qt.setUint32(hn,Ot),hn+=4,_t.set(Yt,hn),hn+=Yt.length,_t.set(yt,hn),hn+=yt.length,Qt.setUint32(hn,bt),hn+=4,_t.set(rn,hn),hn+=bt,_t.buffer},getRequestHeadersFromMessage:function(Pt){let Yt,yt;const bt={},Ot=new DOMParser;if(xt&&xt.get().streaming.protection.detectPlayreadyMessageFormat&&ft==="utf-16"&&Pt&&Pt.byteLength%2==1)return bt["Content-Type"]="text/xml; charset=utf-8",bt;const Gt=ft==="utf-16"?new Uint16Array(Pt):new Uint8Array(Pt);Yt=String.fromCharCode.apply(null,Gt),yt=Ot.parseFromString(Yt,"application/xml");const _t=yt.getElementsByTagName("name"),Qt=yt.getElementsByTagName("value");for(let hn=0;hn<_t.length;hn++)bt[_t[hn].childNodes[0].nodeValue]=Qt[hn].childNodes[0].nodeValue;return bt.hasOwnProperty("Content")&&(bt["Content-Type"]=bt.Content,delete bt.Content),bt.hasOwnProperty("Content-Type")||(bt["Content-Type"]="text/xml; charset=utf-8"),bt},getLicenseRequestFromMessage:function(Pt){let Yt=null;const yt=new DOMParser;if(xt&&xt.get().streaming.protection.detectPlayreadyMessageFormat&&ft==="utf-16"&&Pt&&Pt.byteLength%2==1)return Pt;const bt=ft==="utf-16"?new Uint16Array(Pt):new Uint8Array(Pt);Ct();const Ot=String.fromCharCode.apply(null,bt),Gt=yt.parseFromString(Ot,"application/xml");if(!Gt.getElementsByTagName("PlayReadyKeyMessage")[0])return Pt;{const _t=Gt.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;_t&&(Yt=at.decode(_t))}return Yt},getLicenseServerURLFromInitData:function(Pt){if(Pt){const Yt=new DataView(Pt),yt=Yt.getUint16(4,!0);let bt=6;const Ot=new DOMParser;for(let Gt=0;Gt<yt;Gt++){const _t=Yt.getUint16(bt,!0);bt+=2;const Qt=Yt.getUint16(bt,!0);if(bt+=2,_t!==1){bt+=Qt;continue}const hn=Pt.slice(bt,bt+Qt),rn=String.fromCharCode.apply(null,new Uint16Array(hn)),on=Ot.parseFromString(rn,"application/xml");if(on.getElementsByTagName("LA_URL")[0]){const Sn=on.getElementsByTagName("LA_URL")[0].childNodes[0].nodeValue;if(Sn)return Sn}if(on.getElementsByTagName("LUI_URL")[0]){const Sn=on.getElementsByTagName("LUI_URL")[0].childNodes[0].nodeValue;if(Sn)return Sn}}}return null},getCDMData:function(Pt){let Yt,yt,bt,Ot;if(Ct(),!Pt)return null;for(Yt=[],Ot=0;Ot<Pt.length;++Ot)Yt.push(Pt.charCodeAt(Ot)),Yt.push(0);for(Yt=String.fromCharCode.apply(null,Yt),Yt=at.encode(Yt),yt='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="false"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>'.replace("%CUSTOMDATA%",Yt),bt=[],Ot=0;Ot<yt.length;++Ot)bt.push(yt.charCodeAt(Ot)),bt.push(0);return new Uint8Array(bt).buffer},setPlayReadyMessageFormat:function(Pt){if(Pt!=="utf-8"&&Pt!=="utf-16")throw new Error('Specified message format is not one of "utf-8" or "utf-16"');ft=Pt}},At}cn.__dashjs_factory_name="KeySystemPlayReady";var Ne=oe.default.getSingletonFactory(cn);function Ce(Nt){const At=(Nt=Nt||{}).BASE64,ft={};let at;return ft[n.default.WIDEVINE_KEYSTEM_STRING]={responseType:"json",getLicenseMessage:function(xt){return At.decodeArray(xt.license)},getErrorResponse:function(xt){return xt}},ft[n.default.PLAYREADY_KEYSTEM_STRING]={responseType:"arraybuffer",getLicenseMessage:function(xt){return xt},getErrorResponse:function(xt){return String.fromCharCode.apply(null,new Uint8Array(xt))}},at={getServerURLFromMessage:function(xt){return xt},getHTTPMethod:function(){return"POST"},getResponseType:function(xt){return ft[xt].responseType},getLicenseMessage:function(xt,Ct){return(function(){if(!At||!At.hasOwnProperty("decodeArray"))throw new Error("Missing config parameter(s)")})(),ft[Ct].getLicenseMessage(xt)},getErrorResponse:function(xt,Ct){return ft[Ct].getErrorResponse(xt)}},at}Ce.__dashjs_factory_name="DRMToday";var lt=oe.default.getSingletonFactory(Ce);function $(){let Nt;const At="http://schemas.xmlsoap.org/soap/envelope/";function ft(Ct){const Pt=String.fromCharCode.apply(null,new Uint8Array(Ct));return decodeURIComponent(escape(Pt))}function at(Ct){if(window.DOMParser){const Pt=ft(Ct),Yt=new window.DOMParser().parseFromString(Pt,"text/xml"),yt=Yt?Yt.getElementsByTagNameNS(At,"Envelope")[0]:null,bt=yt?yt.getElementsByTagNameNS(At,"Body")[0]:null;if(bt&&bt.getElementsByTagNameNS(At,"Fault")[0])return null}return Ct}function xt(Ct){let Pt="",Yt="",yt="",bt=-1,Ot=-1;if(window.DOMParser){const _t=ft(Ct),Qt=new window.DOMParser().parseFromString(_t,"text/xml"),hn=Qt?Qt.getElementsByTagNameNS(At,"Envelope")[0]:null,rn=hn?hn.getElementsByTagNameNS(At,"Body")[0]:null,on=rn?rn.getElementsByTagNameNS(At,"Fault")[0]:null,Sn=on?on.getElementsByTagName("detail")[0]:null,Bt=Sn?Sn.getElementsByTagName("Exception")[0]:null;let rt=null;if(on===null)return _t;rt=on.getElementsByTagName("faultstring")[0].firstChild,Pt=rt?rt.nodeValue:null,Bt!==null&&(rt=Bt.getElementsByTagName("StatusCode")[0],Yt=rt?rt.firstChild.nodeValue:null,rt=Bt.getElementsByTagName("Message")[0],yt=rt?rt.firstChild.nodeValue:null,bt=yt?yt.lastIndexOf("[")+1:-1,Ot=yt?yt.indexOf("]"):-1,yt=yt?yt.substring(bt,Ot):"")}let Gt=`code: ${Yt}, name: ${Pt}`;return yt&&(Gt+=`, message: ${yt}`),Gt}return Nt={getServerURLFromMessage:function(Ct){return Ct},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(Ct){return at.call(this,Ct)},getErrorResponse:function(Ct){return xt.call(this,Ct)}},Nt}$.__dashjs_factory_name="PlayReady";var Y=oe.default.getSingletonFactory($);function A(){let Nt;return Nt={getServerURLFromMessage:function(At){return At},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"arraybuffer"},getLicenseMessage:function(At){return At},getErrorResponse:function(At){return String.fromCharCode.apply(null,new Uint8Array(At))}},Nt}A.__dashjs_factory_name="Widevine";var I=oe.default.getSingletonFactory(A);function J(){let Nt;return Nt={getServerURLFromMessage:function(At){return At},getHTTPMethod:function(){return"POST"},getResponseType:function(){return"json"},getLicenseMessage:function(At){if(!At.hasOwnProperty("keys"))return null;let ft=[];for(let at=0;at<At.keys.length;at++){let xt=At.keys[at],Ct=xt.kid.replace(/=/g,""),Pt=xt.k.replace(/=/g,"");ft.push(new Re(Ct,Pt))}return new Be(ft)},getErrorResponse:function(At){return String.fromCharCode.apply(null,new Uint8Array(At))}},Nt}J.__dashjs_factory_name="ClearKey";var G=oe.default.getSingletonFactory(J),Ae=class{constructor(Nt){this.ks=Nt.ks,this.keyId=Nt.keyId,this.initData=Nt.initData,this.protData=Nt.protData,this.cdmData=Nt.cdmData,this.sessionId=Nt.sessionId,this.sessionType=Nt.sessionType}};function Ye(){let Nt,At,ft,at,xt,Ct,Pt,Yt,yt=this.context;function bt(_t,Qt){return Qt&&_t in Qt?Qt[_t]:null}function Ot(_t,Qt){return _t&&_t.sessionId?_t.sessionId:Qt&&Qt.sessionId?Qt.sessionId:null}function Gt(_t,Qt){return _t&&_t.sessionType?_t.sessionType:Qt}return Nt={getKeySystemBySystemString:function(_t){for(let Qt=0;Qt<at.length;Qt++)if(at[Qt].systemString===_t)return at[Qt];return null},getKeySystems:function(){return at},getLicenseServerModelInstance:function(_t,Qt,hn){if(hn===n.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_RELEASE||hn===n.default.MEDIA_KEY_MESSAGE_TYPES.INDIVIDUALIZATION_REQUEST)return null;let rn=null;return Qt&&Qt.hasOwnProperty("drmtoday")?rn=lt(yt).getInstance({BASE64:xt}):_t.systemString===n.default.WIDEVINE_KEYSTEM_STRING?rn=I(yt).getInstance():_t.systemString===n.default.PLAYREADY_KEYSTEM_STRING?rn=Y(yt).getInstance():_t.systemString===n.default.CLEARKEY_KEYSTEM_STRING&&(rn=G(yt).getInstance()),rn},getSupportedKeySystemMetadataFromContentProtection:function(_t,Qt,hn){let rn,on,Sn,Bt,rt=[];if(!_t||!_t.length)return rt;const We=p.findMp4ProtectionElement(_t);for(Sn=0;Sn<at.length;Sn++){on=at[Sn];const Mt=bt(on.systemString,Qt);for(Bt=0;Bt<_t.length;Bt++)if(rn=_t[Bt],rn.schemeIdUri.toLowerCase()===on.schemeIdURI){let Kt=on.getInitData(rn,We);const dn=new Ae({ks:at[Sn],keyId:rn.keyId,initData:Kt,protData:Mt,cdmData:on.getCDMData(Mt?Mt.cdmData:null),sessionId:Ot(Mt,rn),sessionType:Gt(Mt,hn)});Mt?rt.unshift(dn):rt.push(dn)}}return rt},getSupportedKeySystemMetadataFromSegmentPssh:function(_t,Qt,hn){let rn,on,Sn=[],Bt=p.parsePSSHList(_t);for(let rt=0;rt<at.length;++rt){rn=at[rt],on=rn.systemString;const We=bt(on,Qt);rn.uuid in Bt&&Sn.push({ks:rn,initData:Bt[rn.uuid],protData:We,cdmData:rn.getCDMData(We?We.cdmData:null),sessionId:Ot(We),sessionType:Gt(We,hn)})}return Sn},initDataEquals:function(_t,Qt){if(_t.byteLength===Qt.byteLength){let hn=new Uint8Array(_t),rn=new Uint8Array(Qt);for(let on=0;on<hn.length;on++)if(hn[on]!==rn[on])return!1;return!0}return!1},initialize:function(){let _t;at=[],_t=Ne(yt).getInstance({BASE64:xt,settings:Ct}),at.push(_t),_t=zt(yt).getInstance({BASE64:xt}),at.push(_t),_t=ve(yt).getInstance({BASE64:xt}),at.push(_t),Pt=_t,_t=xe(yt).getInstance({BASE64:xt,debug:At}),at.push(_t),Yt=_t},isClearKey:function(_t){return _t===Pt||_t===Yt},processClearKeyLicenseRequest:function(_t,Qt,hn){try{return _t.getClearKeysFromProtectionData(Qt,hn)}catch{return ft.error("Failed to retrieve clearkeys from ProtectionData"),null}},setConfig:function(_t){_t&&(_t.debug&&(At=_t.debug,ft=At.getLogger(Nt)),_t.BASE64&&(xt=_t.BASE64),_t.settings&&(Ct=_t.settings))},setKeySystems:function(_t){at=_t},setProtectionData:function(_t){for(var Qt,hn,rn=0;rn<at.length;rn++){var on=at[rn];on.hasOwnProperty("init")&&on.init((Qt=on.systemString,hn=void 0,hn=null,_t&&(hn=Qt in _t?_t[Qt]:null),hn))}}},Nt}Ye.__dashjs_factory_name="ProtectionKeyController";var ze=oe.default.getSingletonFactory(Ye),je=t(445),Oe=class{constructor(Nt,At){this.initData=Nt,this.initDataType=At}},Ve=class{constructor(Nt,At,ft,at){this.sessionToken=Nt,this.message=At,this.defaultURL=ft,this.messageType=at||n.default.MEDIA_KEY_MESSAGE_TYPES.LICENSE_REQUEST}},tt=class{constructor(Nt,At){this.keySystem=Nt,this.ksConfiguration=At,this.nativeMediaKeySystemAccessObject=null,this.selectedSystemString=null}};const Je={};function mt(Nt){Nt=Nt||{};const At=this.context,ft=Nt.eventBus,at=Nt.events,xt=Nt.debug;let Ct,Pt,Yt,yt,bt,Ot,Gt,_t;function Qt(rt,We,Mt,Kt){if(navigator.requestMediaKeySystemAccess===void 0||typeof navigator.requestMediaKeySystemAccess!="function"){const Ln="Insecure origins are not allowed";return ft.trigger(at.KEY_SYSTEM_ACCESS_COMPLETE,{error:Ln}),void Kt({error:Ln})}const dn=rt[We].protData&&rt[We].protData.systemStringPriority?rt[We].protData.systemStringPriority:null,kn=rt[We].configs,xn=rt[We].ks;let Kn=xn.systemString;(function(Ln,qn){return new Promise(((fe,Vn)=>{hn(Ln,qn,0,fe,Vn)}))})(dn||(Je[Kn]?Je[Kn]:[Kn]),kn).then((Ln=>{const qn=Ln&&Ln.nativeMediaKeySystemAccessObject&&typeof Ln.nativeMediaKeySystemAccessObject.getConfiguration=="function"?Ln.nativeMediaKeySystemAccessObject.getConfiguration():null,fe=new tt(xn,qn);fe.selectedSystemString=Ln.selectedSystemString,fe.nativeMediaKeySystemAccessObject=Ln.nativeMediaKeySystemAccessObject,ft.trigger(at.KEY_SYSTEM_ACCESS_COMPLETE,{data:fe}),Mt({data:fe})})).catch((Ln=>{if(We+1<rt.length)Qt(rt,We+1,Mt,Kt);else{const qn="Key system access denied! ";ft.trigger(at.KEY_SYSTEM_ACCESS_COMPLETE,{error:qn+Ln.message}),Kt({error:qn+Ln.message})}}))}function hn(rt,We,Mt,Kt,dn){const kn=rt[Mt];Pt.debug(`Requesting key system access for system string ${kn}`),navigator.requestMediaKeySystemAccess(kn,We).then((xn=>{Kt({nativeMediaKeySystemAccessObject:xn,selectedSystemString:kn})})).catch((xn=>{Mt+1<rt.length?hn(rt,We,Mt+1,Kt,dn):dn(xn)}))}function rn(rt){if(!rt||!rt.session)return Promise.resolve;const We=rt.session;return We.removeEventListener("keystatuseschange",rt),We.removeEventListener("message",rt),We.close()}function on(rt){for(let We=0;We<Ot.length;We++)if(Ot[We]===rt){Ot.splice(We,1);break}}function Sn(rt,We){const Mt={session:rt,keyId:We.keyId,normalizedKeyId:We&&We.keyId&&typeof We.keyId=="string"?We.keyId.replace(/-/g,"").toLowerCase():"",initData:We.initData,sessionId:We.sessionId,sessionType:We.sessionType,hasTriggeredKeyStatusMapUpdate:!1,handleEvent:function(Kt){switch(Kt.type){case"keystatuseschange":this._onKeyStatusesChange(Kt);break;case"message":this._onKeyMessage(Kt)}},_onKeyStatusesChange:function(Kt){ft.trigger(at.KEY_STATUSES_CHANGED,{data:this});const dn=[];Kt.target.keyStatuses.forEach((function(){dn.push(Bt(arguments))})),ft.trigger(at.INTERNAL_KEY_STATUSES_CHANGED,{parsedKeyStatuses:dn,sessionToken:Mt})},_onKeyMessage:function(Kt){let dn=ArrayBuffer.isView(Kt.message)?Kt.message.buffer:Kt.message;ft.trigger(at.INTERNAL_KEY_MESSAGE,{data:new Ve(this,dn,void 0,Kt.messageType)})},getKeyId:function(){return this.keyId},getSessionId:function(){return rt.sessionId},getSessionType:function(){return this.sessionType},getExpirationTime:function(){return rt.expiration},getKeyStatuses:function(){return rt.keyStatuses},getUsable:function(){let Kt=!1;return rt.keyStatuses.forEach((function(){Bt(arguments).status===n.default.MEDIA_KEY_STATUSES.USABLE&&(Kt=!0)})),Kt}};return rt.addEventListener("keystatuseschange",Mt),rt.addEventListener("message",Mt),rt.closed.then((()=>{on(Mt),Pt.debug("DRM: Session closed.  SessionID = "+Mt.getSessionId()),ft.trigger(at.KEY_SESSION_CLOSED,{data:Mt.getSessionId()})})),Ot.push(Mt),Mt}function Bt(rt){let We,Mt;return rt&&rt.length>0&&(rt[0]&&(typeof rt[0]=="string"?We=rt[0]:Mt=rt[0]),rt[1]&&(typeof rt[1]=="string"?We=rt[1]:Mt=rt[1])),{status:We,keyId:Mt}}return Ct={closeKeySession:function(rt){rn(rt).catch((function(We){on(rt),ft.trigger(at.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+rt.getSessionId()+") "+We.name})}))},createKeySession:function(rt){if(!Yt||!bt)throw new Error("Can not create sessions until you have selected a key system");const We=bt.createSession(rt.sessionType),Mt=Sn(We,rt),Kt=Yt.systemString===n.default.CLEARKEY_KEYSTEM_STRING&&(rt.initData||rt.protData&&rt.protData.clearkeys)?n.default.INITIALIZATION_DATA_TYPE_KEYIDS:n.default.INITIALIZATION_DATA_TYPE_CENC;We.generateRequest(Kt,rt.initData).then((function(){Pt.debug("DRM: Session created.  SessionID = "+Mt.getSessionId()),ft.trigger(at.KEY_SESSION_CREATED,{data:Mt})})).catch((function(dn){on(Mt),ft.trigger(at.KEY_SESSION_CREATED,{data:null,error:new f.default(T.default.KEY_SESSION_CREATED_ERROR_CODE,T.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Error generating key request -- "+dn.name)})}))},getAllInitData:function(){const rt=[];for(let We=0;We<Ot.length;We++)Ot[We].initData&&rt.push(Ot[We].initData);return rt},getSessionTokens:function(){return Ot},loadKeySession:function(rt){if(!Yt||!bt)throw new Error("Can not load sessions until you have selected a key system");const We=rt.sessionId;for(let dn=0;dn<Ot.length;dn++)if(We===Ot[dn].sessionId)return void Pt.warn("DRM: Ignoring session ID because we have already seen it!");const Mt=bt.createSession(rt.sessionType),Kt=Sn(Mt,rt);Kt.hasTriggeredKeyStatusMapUpdate=!0,Mt.load(We).then((function(dn){dn?(Pt.debug("DRM: Session loaded.  SessionID = "+Kt.getSessionId()),ft.trigger(at.KEY_SESSION_CREATED,{data:Kt})):(on(Kt),ft.trigger(at.KEY_SESSION_CREATED,{data:null,error:new f.default(T.default.KEY_SESSION_CREATED_ERROR_CODE,T.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session! Invalid Session ID ("+We+")")}))})).catch((function(dn){on(Kt),ft.trigger(at.KEY_SESSION_CREATED,{data:null,error:new f.default(T.default.KEY_SESSION_CREATED_ERROR_CODE,T.default.KEY_SESSION_CREATED_ERROR_MESSAGE+"Could not load session ("+We+")! "+dn.name)})}))},removeKeySession:function(rt){rt.session.remove().then((function(){Pt.debug("DRM: Session removed.  SessionID = "+rt.getSessionId()),ft.trigger(at.KEY_SESSION_REMOVED,{data:rt.getSessionId()})}),(function(We){ft.trigger(at.KEY_SESSION_REMOVED,{data:null,error:"Error removing session ("+rt.getSessionId()+"). "+We.name})}))},requestKeySystemAccess:function(rt){return new Promise(((We,Mt)=>{Qt(rt,0,We,Mt)}))},reset:function(){const rt=Ot.length;let We;if(rt!==0){const Mt=function(Kt){on(Kt),Ot.length===0&&(yt?(yt.removeEventListener("encrypted",Gt),yt.setMediaKeys(null).then((function(){ft.trigger(at.TEARDOWN_COMPLETE)}))):ft.trigger(at.TEARDOWN_COMPLETE))};for(let Kt=0;Kt<rt;Kt++)We=Ot[Kt],(function(dn){rn(We),Mt(dn)})(We)}else ft.trigger(at.TEARDOWN_COMPLETE)},selectKeySystem:function(rt){return new Promise(((We,Mt)=>{rt.nativeMediaKeySystemAccessObject.createMediaKeys().then((Kt=>(Yt=rt.keySystem,bt=Kt,yt?yt.setMediaKeys(bt):Promise.resolve()))).then((()=>{We(Yt)})).catch((function(){Mt({error:"Error selecting keys system ("+rt.keySystem.systemString+")! Could not create MediaKeys -- TODO"})}))}))},setMediaElement:function(rt){yt!==rt&&(yt&&(yt.removeEventListener("encrypted",Gt),yt.setMediaKeys&&yt.setMediaKeys(null)),yt=rt,yt&&(yt.addEventListener("encrypted",Gt),yt.setMediaKeys&&bt&&yt.setMediaKeys(bt)))},setServerCertificate:function(rt){return new Promise((We=>{bt.setServerCertificate(rt).then((function(){Pt.info("DRM: License server certificate successfully updated."),ft.trigger(at.SERVER_CERTIFICATE_UPDATED),We()})).catch((Mt=>{ft.trigger(at.SERVER_CERTIFICATE_UPDATED,{error:new f.default(T.default.SERVER_CERTIFICATE_UPDATED_ERROR_CODE,T.default.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE+Mt.name)}),We()}))}))},stop:function(){let rt;for(let We=0;We<Ot.length;We++)rt=Ot[We],rt.getUsable()||(rn(rt),on(rt))},updateKeySession:function(rt,We){const Mt=rt.session;_t.isClearKey(Yt)&&(We=We.toJWK()),Mt.update(We).then((()=>{ft.trigger(at.KEY_SESSION_UPDATED)})).catch((function(Kt){ft.trigger(at.KEY_ERROR,{error:new f.default(T.default.MEDIA_KEYERR_CODE,"Error sending update() message! "+Kt.name,rt)})}))}},Pt=xt.getLogger(Ct),Yt=null,yt=null,bt=null,Ot=[],_t=ze(At).getInstance(),Gt={handleEvent:function(rt){if(rt.type==="encrypted"&&rt.initData){let We=ArrayBuffer.isView(rt.initData)?rt.initData.buffer:rt.initData;ft.trigger(at.NEED_KEY,{key:new Oe(We,rt.initDataType)})}}},Ct}Je[n.default.PLAYREADY_KEYSTEM_STRING]=[n.default.PLAYREADY_KEYSTEM_STRING,n.default.PLAYREADY_RECOMMENDATION_KEYSTEM_STRING],Je[n.default.WIDEVINE_KEYSTEM_STRING]=[n.default.WIDEVINE_KEYSTEM_STRING],Je[n.default.CLEARKEY_KEYSTEM_STRING]=[n.default.CLEARKEY_KEYSTEM_STRING],mt.__dashjs_factory_name="DefaultProtectionModel";var Vt=oe.default.getClassFactory(mt);function Dt(Nt){Nt=Nt||{};const At=this.context,ft=Nt.eventBus,at=Nt.events,xt=Nt.debug,Ct=Nt.api;let Pt,Yt,yt,bt,Ot,Gt,_t,Qt,hn;function rn(){try{for(let Bt=0;Bt<_t.length;Bt++)on(_t[Bt]);yt&&yt.removeEventListener(Ct.needkey,Qt),ft.trigger(at.TEARDOWN_COMPLETE)}catch(Bt){ft.trigger(at.TEARDOWN_COMPLETE,{error:"Error tearing down key sessions and MediaKeys! -- "+Bt.message})}}function on(Bt){const rt=Bt.session;rt.removeEventListener(Ct.error,Bt),rt.removeEventListener(Ct.message,Bt),rt.removeEventListener(Ct.ready,Bt),rt.removeEventListener(Ct.close,Bt);for(let We=0;We<_t.length;We++)if(_t[We]===Bt){_t.splice(We,1);break}rt[Ct.release]()}function Sn(){let Bt=null;const rt=function(){yt.removeEventListener("loadedmetadata",Bt),yt[Ct.setMediaKeys](Ot),ft.trigger(at.VIDEO_ELEMENT_SELECTED)};yt.readyState>=1?rt():(Bt=rt.bind(this),yt.addEventListener("loadedmetadata",Bt))}return Pt={getAllInitData:function(){const Bt=[];for(let rt=0;rt<_t.length;rt++)Bt.push(_t[rt].initData);return Bt},getSessionTokens:function(){return _t},requestKeySystemAccess:function(Bt){return new Promise(((rt,We)=>{let Mt=!1;for(let Kt=0;Kt<Bt.length;Kt++){const dn=Bt[Kt].ks.systemString,kn=Bt[Kt].configs;let xn=null,Kn=null;for(let Ln=0;Ln<kn.length;Ln++){const qn=kn[Ln].audioCapabilities,fe=kn[Ln].videoCapabilities;if(qn&&qn.length!==0){xn=[];for(let ea=0;ea<qn.length;ea++)window[Ct.MediaKeys].isTypeSupported(dn,qn[ea].contentType)&&xn.push(qn[ea])}if(fe&&fe.length!==0){Kn=[];for(let ea=0;ea<fe.length;ea++)window[Ct.MediaKeys].isTypeSupported(dn,fe[ea].contentType)&&Kn.push(fe[ea])}if(!xn&&!Kn||xn&&xn.length===0||Kn&&Kn.length===0)continue;Mt=!0;const Vn=new g(xn,Kn),ma=hn.getKeySystemBySystemString(dn),Fa=new tt(ma,Vn);ft.trigger(at.KEY_SYSTEM_ACCESS_COMPLETE,{data:Fa}),rt({data:Fa});break}}if(!Mt){const Kt="Key system access denied! -- No valid audio/video content configurations detected!";ft.trigger(at.KEY_SYSTEM_ACCESS_COMPLETE,{error:Kt}),We({error:Kt})}}))},selectKeySystem:function(Bt){return new Promise(((rt,We)=>{try{Ot=Bt.mediaKeys=new window[Ct.MediaKeys](Bt.keySystem.systemString),bt=Bt.keySystem,Gt=Bt,yt&&Sn(),rt(bt)}catch{We({error:"Error selecting keys system ("+bt.systemString+")! Could not create MediaKeys -- TODO"})}}))},setMediaElement:function(Bt){yt!==Bt&&(yt&&yt.removeEventListener(Ct.needkey,Qt),yt=Bt,yt&&(yt.addEventListener(Ct.needkey,Qt),Ot&&Sn()))},createKeySession:function(Bt){if(!bt||!Ot||!Gt)throw new Error("Can not create sessions until you have selected a key system");let rt=null;if(Gt.ksConfiguration.videoCapabilities&&Gt.ksConfiguration.videoCapabilities.length>0&&(rt=Gt.ksConfiguration.videoCapabilities[0]),rt===null&&Gt.ksConfiguration.audioCapabilities&&Gt.ksConfiguration.audioCapabilities.length>0&&(rt=Gt.ksConfiguration.audioCapabilities[0]),rt===null)throw new Error("Can not create sessions for unknown content types.");const We=rt.contentType,Mt=Ot.createSession(We,new Uint8Array(Bt.initData),Bt.cdmData?new Uint8Array(Bt.cdmData):null),Kt=(function(dn,kn){return{session:dn,keyId:kn.keyId,normalizedKeyId:kn&&kn.keyId&&typeof kn.keyId=="string"?kn.keyId.replace(/-/g,"").toLowerCase():"",initData:kn.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.session.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}},handleEvent:function(xn){switch(xn.type){case Ct.error:let Kn="KeyError";ft.trigger(at.KEY_ERROR,{error:new f.default(T.default.MEDIA_KEYERR_CODE,Kn,this)});break;case Ct.message:let Ln=ArrayBuffer.isView(xn.message)?xn.message.buffer:xn.message;ft.trigger(at.INTERNAL_KEY_MESSAGE,{data:new Ve(this,Ln,xn.destinationURL)});break;case Ct.ready:Yt.debug("DRM: Key added."),ft.trigger(at.KEY_ADDED);break;case Ct.close:Yt.debug("DRM: Session closed.  SessionID = "+this.getSessionId()),ft.trigger(at.KEY_SESSION_CLOSED,{data:this.getSessionId()})}}}})(Mt,Bt);Mt.addEventListener(Ct.error,Kt),Mt.addEventListener(Ct.message,Kt),Mt.addEventListener(Ct.ready,Kt),Mt.addEventListener(Ct.close,Kt),_t.push(Kt),Yt.debug("DRM: Session created.  SessionID = "+Kt.getSessionId()),ft.trigger(at.KEY_SESSION_CREATED,{data:Kt})},updateKeySession:function(Bt,rt){const We=Bt.session;hn.isClearKey(bt)?We.update(new Uint8Array(rt.toJWK())):We.update(new Uint8Array(rt)),ft.trigger(at.KEY_SESSION_UPDATED)},closeKeySession:on,setServerCertificate:function(){return Promise.resolve()},loadKeySession:function(){},removeKeySession:function(){},stop:rn,reset:rn},Yt=xt.getLogger(Pt),yt=null,bt=null,Ot=null,Gt=null,_t=[],hn=ze(At).getInstance(),Qt={handleEvent:function(Bt){if(Bt.type===Ct.needkey&&Bt.initData){const rt=ArrayBuffer.isView(Bt.initData)?Bt.initData.buffer:Bt.initData;ft.trigger(at.NEED_KEY,{key:new Oe(rt,n.default.INITIALIZATION_DATA_TYPE_CENC)})}}},Pt}Dt.__dashjs_factory_name="ProtectionModel_3Feb2014";var Ut=oe.default.getClassFactory(Dt);function It(Nt){Nt=Nt||{};const At=this.context,ft=Nt.eventBus,at=Nt.events,xt=Nt.debug,Ct=Nt.api,Pt=Nt.errHandler;let Yt,yt,bt,Ot,Gt,_t,Qt,hn,rn;function on(){bt&&rt();for(let We=0;We<Qt.length;We++)Sn(Qt[We]);ft.trigger(at.TEARDOWN_COMPLETE)}function Sn(We){try{bt[Ct.cancelKeyRequest](Ot.systemString,We.sessionId)}catch(Mt){ft.trigger(at.KEY_SESSION_CLOSED,{data:null,error:"Error closing session ("+We.sessionId+") "+Mt.message})}}function Bt(We,Mt){if(Mt&&We){const Kt=We.length;for(let dn=0;dn<Kt;dn++)if(We[dn].sessionId==Mt)return We[dn];return null}return null}function rt(){bt.removeEventListener(Ct.keyerror,rn),bt.removeEventListener(Ct.needkey,rn),bt.removeEventListener(Ct.keymessage,rn),bt.removeEventListener(Ct.keyadded,rn)}return Yt={getAllInitData:function(){const We=[];for(let Mt=0;Mt<_t.length;Mt++)We.push(_t[Mt].initData);for(let Mt=0;Mt<Qt.length;Mt++)We.push(Qt[Mt].initData);return We},getSessionTokens:function(){return Qt.concat(_t)},requestKeySystemAccess:function(We){return new Promise(((Mt,Kt)=>{let dn=bt;dn||(dn=document.createElement("video"));let kn=!1;for(let xn=0;xn<We.length;xn++){const Kn=We[xn].ks.systemString,Ln=We[xn].configs;let qn=null,fe=null;for(let Vn=0;Vn<Ln.length;Vn++){const ma=Ln[Vn].videoCapabilities;if(ma&&ma.length!==0){fe=[];for(let ta=0;ta<ma.length;ta++)dn.canPlayType(ma[ta].contentType,Kn)!==""&&fe.push(ma[ta])}if(!fe||qn||fe&&fe.length===0)continue;kn=!0;const Fa=new g(qn,fe),ea=Gt.getKeySystemBySystemString(Kn),sr=new tt(ea,Fa);ft.trigger(at.KEY_SYSTEM_ACCESS_COMPLETE,{data:sr}),Mt({data:sr});break}}if(!kn){const xn="Key system access denied! -- No valid audio/video content configurations detected!";ft.trigger(at.KEY_SYSTEM_ACCESS_COMPLETE,{error:xn}),Kt({error:xn})}}))},selectKeySystem:function(We){return Ot=We.keySystem,Promise.resolve(Ot)},setMediaElement:function(We){if(bt!==We){if(bt){rt();for(var Mt=0;Mt<Qt.length;Mt++)Sn(Qt[Mt]);Qt=[]}bt=We,bt&&(bt.addEventListener(Ct.keyerror,rn),bt.addEventListener(Ct.needkey,rn),bt.addEventListener(Ct.keymessage,rn),bt.addEventListener(Ct.keyadded,rn),ft.trigger(at.VIDEO_ELEMENT_SELECTED))}},createKeySession:function(We){if(!Ot)throw new Error("Can not create sessions until you have selected a key system");if(hn||Qt.length===0){const Mt={sessionId:null,keyId:We.keyId,normalizedKeyId:We&&We.keyId&&typeof We.keyId=="string"?We.keyId.replace(/-/g,"").toLowerCase():"",initData:We.initData,hasTriggeredKeyStatusMapUpdate:!1,getKeyId:function(){return this.keyId},getSessionId:function(){return this.sessionId},getExpirationTime:function(){return NaN},getSessionType:function(){return"temporary"},getKeyStatuses:function(){return{size:0,has:()=>!1,get:()=>{}}}};return _t.push(Mt),bt[Ct.generateKeyRequest](Ot.systemString,new Uint8Array(We.initData)),Mt}throw new Error("Multiple sessions not allowed!")},updateKeySession:function(We,Mt){const Kt=We.sessionId;if(Gt.isClearKey(Ot))for(let dn=0;dn<Mt.keyPairs.length;dn++)bt[Ct.addKey](Ot.systemString,Mt.keyPairs[dn].key,Mt.keyPairs[dn].keyID,Kt);else bt[Ct.addKey](Ot.systemString,new Uint8Array(Mt),new Uint8Array(We.initData),Kt);ft.trigger(at.KEY_SESSION_UPDATED)},closeKeySession:Sn,setServerCertificate:function(){return Promise.resolve()},loadKeySession:function(){},removeKeySession:function(){},stop:on,reset:on},yt=xt.getLogger(Yt),bt=null,Ot=null,_t=[],Qt=[],Gt=ze(At).getInstance(),rn={handleEvent:function(We){let Mt=null;switch(We.type){case Ct.needkey:let Kt=ArrayBuffer.isView(We.initData)?We.initData.buffer:We.initData;ft.trigger(at.NEED_KEY,{key:new Oe(Kt,n.default.INITIALIZATION_DATA_TYPE_CENC)});break;case Ct.keyerror:if(Mt=Bt(Qt,We.sessionId),Mt||(Mt=Bt(_t,We.sessionId)),Mt){let dn=T.default.MEDIA_KEYERR_CODE,kn="";switch(We.errorCode.code){case 1:dn=T.default.MEDIA_KEYERR_UNKNOWN_CODE,kn+="MEDIA_KEYERR_UNKNOWN - "+T.default.MEDIA_KEYERR_UNKNOWN_MESSAGE;break;case 2:dn=T.default.MEDIA_KEYERR_CLIENT_CODE,kn+="MEDIA_KEYERR_CLIENT - "+T.default.MEDIA_KEYERR_CLIENT_MESSAGE;break;case 3:dn=T.default.MEDIA_KEYERR_SERVICE_CODE,kn+="MEDIA_KEYERR_SERVICE - "+T.default.MEDIA_KEYERR_SERVICE_MESSAGE;break;case 4:dn=T.default.MEDIA_KEYERR_OUTPUT_CODE,kn+="MEDIA_KEYERR_OUTPUT - "+T.default.MEDIA_KEYERR_OUTPUT_MESSAGE;break;case 5:dn=T.default.MEDIA_KEYERR_HARDWARECHANGE_CODE,kn+="MEDIA_KEYERR_HARDWARECHANGE - "+T.default.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE;break;case 6:dn=T.default.MEDIA_KEYERR_DOMAIN_CODE,kn+="MEDIA_KEYERR_DOMAIN - "+T.default.MEDIA_KEYERR_DOMAIN_MESSAGE}kn+="  System Code = "+We.systemCode,ft.trigger(at.KEY_ERROR,{error:new f.default(dn,kn,Mt)})}else yt.error("No session token found for key error");break;case Ct.keyadded:Mt=Bt(Qt,We.sessionId),Mt||(Mt=Bt(_t,We.sessionId)),Mt?(yt.debug("DRM: Key added."),ft.trigger(at.KEY_ADDED,{data:Mt})):yt.debug("No session token found for key added");break;case Ct.keymessage:if(hn=We.sessionId!==null&&We.sessionId!==void 0,hn?(Mt=Bt(Qt,We.sessionId),!Mt&&_t.length>0&&(Mt=_t.shift(),Qt.push(Mt),Mt.sessionId=We.sessionId,ft.trigger(at.KEY_SESSION_CREATED,{data:Mt}))):_t.length>0&&(Mt=_t.shift(),Qt.push(Mt),_t.length!==0&&Pt.error(new f.default(T.default.MEDIA_KEY_MESSAGE_ERROR_CODE,T.default.MEDIA_KEY_MESSAGE_ERROR_MESSAGE))),Mt){let dn=ArrayBuffer.isView(We.message)?We.message.buffer:We.message;Mt.keyMessage=dn,ft.trigger(at.INTERNAL_KEY_MESSAGE,{data:new Ve(Mt,dn,We.defaultURL)})}else yt.warn("No session token found for key message")}}},Yt}It.__dashjs_factory_name="ProtectionModel_01b";var gn=oe.default.getClassFactory(It);const Rn=[{generateKeyRequest:"generateKeyRequest",addKey:"addKey",cancelKeyRequest:"cancelKeyRequest",needkey:"needkey",keyerror:"keyerror",keyadded:"keyadded",keymessage:"keymessage"},{generateKeyRequest:"webkitGenerateKeyRequest",addKey:"webkitAddKey",cancelKeyRequest:"webkitCancelKeyRequest",needkey:"webkitneedkey",keyerror:"webkitkeyerror",keyadded:"webkitkeyadded",keymessage:"webkitkeymessage"}],jn=[{setMediaKeys:"setMediaKeys",MediaKeys:"MediaKeys",release:"close",needkey:"needkey",error:"keyerror",message:"keymessage",ready:"keyadded",close:"keyclose"},{setMediaKeys:"msSetMediaKeys",MediaKeys:"MSMediaKeys",release:"close",needkey:"msneedkey",error:"mskeyerror",message:"mskeymessage",ready:"mskeyadded",close:"mskeyclose"}];function Zn(){let Nt;const At=this.context;function ft(at,xt){for(let Ct=0;Ct<xt.length;Ct++){const Pt=xt[Ct];if(typeof at[Pt[Object.keys(Pt)[0]]]=="function")return Pt}return null}return Nt={createProtectionSystem:function(at){let xt=null;const Ct=ze(At).getInstance();Ct.setConfig({debug:at.debug,BASE64:at.BASE64,settings:at.settings}),Ct.initialize();let Pt=(function(Yt){const yt=Yt.debug,bt=yt.getLogger(Nt),Ot=Yt.eventBus,Gt=Yt.errHandler,_t=Yt.videoModel?Yt.videoModel.getElement():null;return _t&&_t.onencrypted===void 0||_t&&_t.mediaKeys===void 0?ft(_t,jn)?(bt.info("EME detected on this user agent! (ProtectionModel_3Feb2014)"),Ut(At).create({debug:yt,eventBus:Ot,events:Yt.events,api:ft(_t,jn)})):ft(_t,Rn)?(bt.info("EME detected on this user agent! (ProtectionModel_01b)"),gn(At).create({debug:yt,eventBus:Ot,errHandler:Gt,events:Yt.events,api:ft(_t,Rn)})):(bt.warn("No supported version of EME detected on this user agent! - Attempts to play encrypted content will fail!"),null):(bt.info("EME detected on this user agent! (DefaultProtectionModel"),Vt(At).create({debug:yt,eventBus:Ot,events:Yt.events}))})(at);return Pt&&(xt=Se(At).create({BASE64:at.BASE64,cmcdModel:at.cmcdModel,constants:at.constants,customParametersModel:at.customParametersModel,debug:at.debug,eventBus:at.eventBus,events:at.events,protectionKeyController:Ct,protectionModel:Pt,settings:at.settings}),at.capabilities.setEncryptedMediaSupported(!0)),xt}},Nt}Zn.__dashjs_factory_name="Protection";const ra=oe.default.getClassFactory(Zn);ra.events=je.default,ra.errors=T.default,oe.default.updateClassFactory(Zn.__dashjs_factory_name,ra);var Wn=ra},445:function(h,e,t){t.r(e);var o=t(7252);class n extends o.default{constructor(){super(),this.INTERNAL_KEY_MESSAGE="internalKeyMessage",this.INTERNAL_KEY_STATUSES_CHANGED="internalkeyStatusesChanged",this.KEY_ADDED="public_keyAdded",this.KEY_ERROR="public_keyError",this.KEY_MESSAGE="public_keyMessage",this.KEY_SESSION_CLOSED="public_keySessionClosed",this.KEY_SESSION_CREATED="public_keySessionCreated",this.KEY_SESSION_REMOVED="public_keySessionRemoved",this.KEY_STATUSES_CHANGED="public_keyStatusesChanged",this.KEY_STATUSES_MAP_UPDATED="keyStatusesMapUpdated",this.KEY_SYSTEM_ACCESS_COMPLETE="public_keySystemAccessComplete",this.KEY_SYSTEM_SELECTED="public_keySystemSelected",this.LICENSE_REQUEST_COMPLETE="public_licenseRequestComplete",this.LICENSE_REQUEST_SENDING="public_licenseRequestSending",this.NEED_KEY="needkey",this.PROTECTION_CREATED="public_protectioncreated",this.PROTECTION_DESTROYED="public_protectiondestroyed",this.SERVER_CERTIFICATE_UPDATED="serverCertificateUpdated",this.TEARDOWN_COMPLETE="protectionTeardownComplete",this.VIDEO_ELEMENT_SELECTED="videoElementSelected",this.KEY_SESSION_UPDATED="public_keySessionUpdated"}}let r=new n;e.default=r},1923:function(h,e,t){t.r(e);var o=t(8748);class n extends o.default{constructor(){super(),this.MEDIA_KEYERR_CODE=100,this.MEDIA_KEYERR_UNKNOWN_CODE=101,this.MEDIA_KEYERR_CLIENT_CODE=102,this.MEDIA_KEYERR_SERVICE_CODE=103,this.MEDIA_KEYERR_OUTPUT_CODE=104,this.MEDIA_KEYERR_HARDWARECHANGE_CODE=105,this.MEDIA_KEYERR_DOMAIN_CODE=106,this.MEDIA_KEY_MESSAGE_ERROR_CODE=107,this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_CODE=108,this.SERVER_CERTIFICATE_UPDATED_ERROR_CODE=109,this.KEY_STATUS_CHANGED_EXPIRED_ERROR_CODE=110,this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_CODE=111,this.KEY_SYSTEM_ACCESS_DENIED_ERROR_CODE=112,this.KEY_SESSION_CREATED_ERROR_CODE=113,this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_CODE=114,this.MEDIA_KEYERR_UNKNOWN_MESSAGE="An unspecified error occurred. This value is used for errors that don't match any of the other codes.",this.MEDIA_KEYERR_CLIENT_MESSAGE="The Key System could not be installed or updated.",this.MEDIA_KEYERR_SERVICE_MESSAGE="The message passed into update indicated an error from the license service.",this.MEDIA_KEYERR_OUTPUT_MESSAGE="There is no available output device with the required characteristics for the content protection system.",this.MEDIA_KEYERR_HARDWARECHANGE_MESSAGE="A hardware configuration change caused a content protection error.",this.MEDIA_KEYERR_DOMAIN_MESSAGE="An error occurred in a multi-device domain licensing configuration. The most common error is a failure to join the domain.",this.MEDIA_KEY_MESSAGE_ERROR_MESSAGE="Multiple key sessions were creates with a user-agent that does not support sessionIDs!! Unpredictable behavior ahead!",this.MEDIA_KEY_MESSAGE_NO_CHALLENGE_ERROR_MESSAGE="DRM: Empty key message from CDM",this.SERVER_CERTIFICATE_UPDATED_ERROR_MESSAGE="Error updating server certificate -- ",this.KEY_STATUS_CHANGED_EXPIRED_ERROR_MESSAGE="DRM: KeyStatusChange error! -- License has expired",this.MEDIA_KEY_MESSAGE_NO_LICENSE_SERVER_URL_ERROR_MESSAGE="DRM: No license server URL specified!",this.KEY_SYSTEM_ACCESS_DENIED_ERROR_MESSAGE="DRM: KeySystem Access Denied! -- ",this.KEY_SESSION_CREATED_ERROR_MESSAGE="DRM: unable to create session! --",this.MEDIA_KEY_MESSAGE_LICENSER_ERROR_MESSAGE="DRM: licenser error! --"}}let r=new n;e.default=r},4246:function(h,e,t){t.r(e);var o=t(138);const n={DEFAULT:.5,STRONG:1,WEAK:0};function r(p,m,g,T){let f,c,v,_,x;return c=p===void 0?null:p,v=(function(te){let oe=n.DEFAULT;return te!==n.DEFAULT&&te!==n.STRONG&&te!==n.WEAK||(oe=te),oe})(g),_=m===void 0?null:m,x=T===void 0?null:T,f={representation:c,reason:_,rule:x,priority:v},f}r.__dashjs_factory_name="SwitchRequest";const u=o.default.getClassFactory(r);u.NO_CHANGE=null,u.PRIORITY=n,o.default.updateClassFactory(r.__dashjs_factory_name,u),e.default=u},559:function(h,e,t){t.r(e),t.d(e,{supportsMediaSource:function(){return m}});var o=t(138),n=t(5212),r=t(2861),u=t(7393),p=t(649);function m(){let T="ManagedMediaSource"in window,f="WebKitMediaSource"in window,c="MediaSource"in window;return T||f||c}function g(){let T,f,c,v,_,x;const te=this.context,oe=(0,u.default)(te).getInstance();function Te(re,se){let he;se===n.default.VIDEO?he=(function(ke){const Fe={video:{}};return ke&&(ke.width&&(Fe.video.width=ke.width),ke.height&&(Fe.video.height=ke.height),ke.framerate&&(Fe.video.framerate=parseFloat(ke.framerate)),ke.hdrMetadataType&&(Fe.video.hdrMetadataType=ke.hdrMetadataType),ke.colorGamut&&(Fe.video.colorGamut=ke.colorGamut),ke.transferFunction&&(Fe.video.transferFunction=ke.transferFunction)),Fe})(re):se===n.default.AUDIO&&(he=(function(ke){const Fe={audio:{}};return ke.samplerate&&(Fe.audio.samplerate=ke.samplerate),ke.channels&&(Fe.audio.channels=ke.channels),Fe})(re)),he[se].contentType=re.codec,he[se].bitrate=parseInt(re.bitrate),he.type="media-source";let ve=re.codec;return re.width&&re.height&&(ve+=';width="'+re.width+'";height="'+re.height+'"'),he.mediaSourceCodecString=ve,(function(ke,Fe,ye){if(!Fe||!Fe.keySystemsMetadata||Fe.keySystemsMetadata.length===0)return[ke];const Qe=[];return Fe.keySystemsMetadata.forEach((xe=>{if(!xe.ks)return void Qe.push({...ke});const Le=xe.protData&&xe.protData.systemStringPriority?xe.protData.systemStringPriority:null;let ot=xe.ks.systemString;(Le||[ot]).forEach((Ht=>{const Et={...ke};Et.keySystemConfiguration={},Ht&&(Et.keySystemConfiguration.keySystem=Ht);let zt="";xe.ks.systemString===r.default.WIDEVINE_KEYSTEM_STRING&&(zt=r.default.ROBUSTNESS_STRINGS.WIDEVINE.SW_SECURE_CRYPTO);const Rt=xe.protData,Xt=Rt&&Rt.audioRobustness&&Rt.audioRobustness.length>0?Rt.audioRobustness:zt,tn=Rt&&Rt.videoRobustness&&Rt.videoRobustness.length>0?Rt.videoRobustness:zt;ye===n.default.AUDIO?Et.keySystemConfiguration[ye]={robustness:Xt}:ye===n.default.VIDEO&&(Et.keySystemConfiguration[ye]={robustness:tn}),Qe.push(Et)}))})),Qe})(he,re,se)}function Se(re){return f.get().streaming.enhancement.codecs.some((se=>re.includes(se)))}function Re(re){if(v&&v.length!==0&&re)return v.find((se=>{const he=Be(re,se,n.default.AUDIO),ve=Be(re,se,n.default.VIDEO),ke=Be(re,se,"keySystemConfiguration");return he&&ve&&ke}))}function Be(re,se,he){return!re[he]&&!se[he]||!(!re[he]||!se[he])&&oe.areEqual(re[he],se[he])}function De(re,se){return(re=re.filter((he=>!(he.schemeIdUri&&se.some((ve=>ve.schemeIdUri===he.schemeIdUri)))))).push(...se),re}return T={areKeyIdsExpired:function(re){return!!(c&&re&&re.normalizedKeyIds&&re.normalizedKeyIds.size!==0)&&c.areKeyIdsExpired(re.normalizedKeyIds)},areKeyIdsUsable:function(re){return!(c&&re&&re.normalizedKeyIds&&re.normalizedKeyIds.size!==0)||c.areKeyIdsUsable(re.normalizedKeyIds)},isCodecSupportedBasedOnTestedConfigurations:function(re,se){if(!re||!re.codec||re.isSupported===!1)return!1;const he=Te(re,se).map((ve=>Re(ve))).filter((ve=>ve!=null));return!(he&&he.length>0)||(function(ve){return ve.some((ke=>ke&&ke.decodingInfo&&ke.decodingInfo.supported))})(he)},isProtectionCompatible:function(re,se){return!se||!(!re.isEncrypted&&se.isEncrypted)},runCodecSupportCheck:function(re,se){if(se!==n.default.AUDIO&&se!==n.default.VIDEO)return Promise.resolve();if(f.get().streaming.enhancement.enabled&&Se(re.codec))return v=v.filter((ve=>!Se(ve.mediaSourceCodecString))),Promise.resolve(!0);const he=Te(re,se);return(function(ve,ke){return f.get().streaming.capabilities.useMediaCapabilitiesApi&&navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo&&(ve.codec&&ke===n.default.AUDIO||ke===n.default.VIDEO&&ve.codec&&ve.width&&ve.height&&ve.bitrate&&ve.framerate)})(re,se)?(function(ve){return new Promise((ke=>{if(!ve||ve.length===0)return void ke();const Fe=ve.map((ye=>(function(Qe){return new Promise((xe=>{Re(Qe)?xe():navigator.mediaCapabilities.decodingInfo(Qe).then((Le=>{Qe.decodingInfo=Le,v.push(Qe),xe()})).catch((Le=>{Qe.decodingInfo={supported:!1},v.push(Qe),x.error(Le),xe()}))}))})(ye)));Promise.allSettled(Fe).then((()=>{ke()})).catch((ye=>{x.error(ye),ke()}))}))})(he):((function(ve){if(!ve||!ve.length)return;const ke=ve[0];if(Re(ke))return;let Fe={supported:!1};("ManagedMediaSource"in window&&ManagedMediaSource.isTypeSupported(ke.mediaSourceCodecString)||"MediaSource"in window&&MediaSource.isTypeSupported(ke.mediaSourceCodecString)||"WebKitMediaSource"in window&&WebKitMediaSource.isTypeSupported(ke.mediaSourceCodecString))&&(Fe.supported=!0),ke.decodingInfo=Fe,v.push(ke)})(he),Promise.resolve())},setConfig:function(re){re&&(re.settings&&(f=re.settings),re.protectionController&&(c=re.protectionController))},setEncryptedMediaSupported:function(re){_=re},setProtectionController:function(re){c=re},supportsChangeType:function(){return!!window.SourceBuffer&&!!SourceBuffer.prototype&&!!SourceBuffer.prototype.changeType},supportsEncryptedMedia:function(){return _},supportsEssentialProperty:function(re){let se=f.get().streaming.capabilities.supportedEssentialProperties;f.get().streaming.capabilities.useMediaCapabilitiesApi&&f.get().streaming.capabilities.filterVideoColorimetryEssentialProperties&&(se=De(se,[{schemeIdUri:n.default.COLOUR_PRIMARIES_SCHEME_ID_URI},{schemeIdUri:n.default.MATRIX_COEFFICIENTS_SCHEME_ID_URI},{schemeIdUri:n.default.TRANSFER_CHARACTERISTICS_SCHEME_ID_URI}])),f.get().streaming.capabilities.useMediaCapabilitiesApi&&f.get().streaming.capabilities.filterHDRMetadataFormatEssentialProperties&&(se=De(se,[{schemeIdUri:n.default.HDR_METADATA_FORMAT_SCHEME_ID_URI}]));try{return re.inArray(se)}catch{return!0}},supportsMediaSource:m},_=!1,v=[],x=(0,p.default)(te).getInstance().getLogger(T),T}g.__dashjs_factory_name="Capabilities",e.default=o.default.getSingletonFactory(g)},7377:function(h,e,t){t.r(e);var o=t(138),n=t(656);function r(){return{customTimeRangeArray:[],length:0,add:function(u,p){let m;for(m=0;m<this.customTimeRangeArray.length&&u>this.customTimeRangeArray[m].start;m++);for(this.customTimeRangeArray.splice(m,0,{start:u,end:p}),m=0;m<this.customTimeRangeArray.length-1;m++)this.mergeRanges(m,m+1)&&m--;this.length=this.customTimeRangeArray.length},clear:function(){this.customTimeRangeArray=[],this.length=0},remove:function(u,p){for(let m=0;m<this.customTimeRangeArray.length;m++)if(u<=this.customTimeRangeArray[m].start&&p>=this.customTimeRangeArray[m].end)this.customTimeRangeArray.splice(m,1),m--;else{if(u>this.customTimeRangeArray[m].start&&p<this.customTimeRangeArray[m].end){this.customTimeRangeArray.splice(m+1,0,{start:p,end:this.customTimeRangeArray[m].end}),this.customTimeRangeArray[m].end=u;break}u>this.customTimeRangeArray[m].start&&u<this.customTimeRangeArray[m].end?this.customTimeRangeArray[m].end=u:p>this.customTimeRangeArray[m].start&&p<this.customTimeRangeArray[m].end&&(this.customTimeRangeArray[m].start=p)}this.length=this.customTimeRangeArray.length},mergeRanges:function(u,p){let m=this.customTimeRangeArray[u],g=this.customTimeRangeArray[p];return m.start<=g.start&&g.start<=m.end&&m.end<=g.end?(m.end=g.end,this.customTimeRangeArray.splice(p,1),!0):g.start<=m.start&&m.start<=g.end&&g.end<=m.end?(m.start=g.start,this.customTimeRangeArray.splice(p,1),!0):g.start<=m.start&&m.start<=g.end&&m.end<=g.end?(this.customTimeRangeArray.splice(u,1),!0):m.start<=g.start&&g.start<=m.end&&g.end<=m.end&&(this.customTimeRangeArray.splice(p,1),!0)},start:function(u){return(0,n.checkInteger)(u),u>=this.customTimeRangeArray.length||u<0?NaN:this.customTimeRangeArray[u].start},end:function(u){return(0,n.checkInteger)(u),u>=this.customTimeRangeArray.length||u<0?NaN:this.customTimeRangeArray[u].end}}}r.__dashjs_factory_name="CustomTimeRanges",e.default=o.default.getClassFactory(r)},7393:function(h,e,t){t.r(e);var o=t(138),n=t(7316);function r(){let u;return u={areEqual:function(p,m){return n(p,m)}},u}r.__dashjs_factory_name="ObjectUtils",e.default=o.default.getSingletonFactory(r)},656:function(h,e,t){t.r(e),t.d(e,{checkInteger:function(){return r},checkIsVideoOrAudioType:function(){return p},checkParameterType:function(){return n},checkRange:function(){return u}});var o=t(5212);function n(m,g){if(typeof m!==g)throw o.default.BAD_ARGUMENT_ERROR}function r(m){if(m===null||isNaN(m)||m%1!=0)throw o.default.BAD_ARGUMENT_ERROR+" : argument is not an integer"}function u(m,g,T){if(m<g||m>T)throw o.default.BAD_ARGUMENT_ERROR+" : argument out of range"}function p(m){if(typeof m!="string"||m!==o.default.AUDIO&&m!==o.default.VIDEO)throw o.default.BAD_ARGUMENT_ERROR}},1944:function(h,e,t){t.r(e),e.default=class{constructor(o,n,r){this.code=o||null,this.message=n||null,this.data=r||null}}},5560:function(h,e,t){t.r(e);var o=t(8854);e.default=class{constructor(n){this.id=n.id,this.url=n.url,this.language=n.language,this.mimeType=n.mimeType,this.bandwidth=n.bandwidth,this.periodId=n.periodId||null}serializeToMpdParserFormat(){return{tagName:o.default.ADAPTATION_SET,mimeType:this.mimeType,lang:this.language,Representation:[{tagName:o.default.REPRESENTATION,id:this.id,bandwidth:this.bandwidth,BaseURL:[{tagName:o.default.BASE_URL,__text:this.url}],mimeType:this.mimeType}]}}}},7568:function(h,e,t){t.r(e),t.d(e,{HTTPRequest:function(){return o},HTTPRequestTrace:function(){return n}});class o{constructor(){this.tcpid=null,this.type=null,this.url=null,this.actualurl=null,this.range=null,this.trequest=null,this.tresponse=null,this.responsecode=null,this.interval=null,this.trace=[],this.cmsd=null,this._stream=null,this._tfinish=null,this._mediaduration=null,this._responseHeaders=null,this._serviceLocation=null,this._fileLoaderType=null,this._resourceTimingValues=null}}class n{constructor(){this.s=null,this.d=null,this.b=[]}}o.GET="GET",o.HEAD="HEAD",o.MPD_TYPE="MPD",o.XLINK_EXPANSION_TYPE="XLinkExpansion",o.INIT_SEGMENT_TYPE="InitializationSegment",o.INDEX_SEGMENT_TYPE="IndexSegment",o.MEDIA_SEGMENT_TYPE="MediaSegment",o.BITSTREAM_SWITCHING_SEGMENT_TYPE="BitstreamSwitchingSegment",o.MSS_FRAGMENT_INFO_SEGMENT_TYPE="FragmentInfoSegment",o.DVB_REPORTING_TYPE="DVBReporting",o.LICENSE="license",o.CONTENT_STEERING_TYPE="ContentSteering",o.OTHER_TYPE="other"}},ju={};function Xn(h){var e=ju[h];if(e!==void 0)return e.exports;var t=ju[h]={exports:{}};return Lg[h].call(t.exports,t,t.exports,Xn),t.exports}Xn.amdO={},Xn.d=function(h,e){for(var t in e)Xn.o(e,t)&&!Xn.o(h,t)&&Object.defineProperty(h,t,{enumerable:!0,get:e[t]})},Xn.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})(),Xn.o=function(h,e){return Object.prototype.hasOwnProperty.call(h,e)},Xn.r=function(h){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(h,"__esModule",{value:!0})};var Ta={};Xn.r(Ta),Xn.d(Ta,{Constants:function(){return Ac.default},Debug:function(){return Ic.default},ExternalSubtitle:function(){return Cc.default},MediaPlayer:function(){return Mg.MediaPlayer},MediaPlayerFactory:function(){return kc},MetricsReporting:function(){return _c.default},Protection:function(){return Sc.default},default:function(){return Og},supportsMediaSource:function(){return Rc.supportsMediaSource}});var Mg=Xn(5393),_c=Xn(4469),Sc=Xn(3888),Pg=Xn(8200);let qu,zi=(function(){const h="application/dash+xml";let e;function t(n,r,u){if(!n||!/^VIDEO$/i.test(n.nodeName))return null;if(n._dashjs_player)return n._dashjs_player;let p,m=n.id||n.name||"video element";if(!(r=r||[].slice.call(n.querySelectorAll("source")).filter((function(g){return g.type==h}))[0])&&n.src)(r=document.createElement("source")).src=n.src;else if(!r&&!n.src)return null;return u=u||{},p=(0,Pg.default)(u).create(),p.initialize(n,r.src,n.autoplay),e||(e=p.getDebug().getLogger()),e.debug("Converted "+m+" to dash.js player and added content: "+r.src),n._dashjs_player=p,p}function o(n){return/^VIDEO$/i.test(n.nodeName)?n:o(n.parentNode)}return{create:t,createAll:function(n,r){let u=[];n=n||"[data-dashjs-player]";let p=(r=r||document).querySelectorAll(n);for(let g=0;g<p.length;g++){let T=t(p[g],null);u.push(T)}let m=r.querySelectorAll('source[type="'+h+'"]');for(let g=0;g<m.length;g++){let T=t(o(m[g]),null);u.push(T)}return u}}})();!(typeof window<"u"&&window&&window.dashjs&&window.dashjs.skipAutoCreate)&&typeof window<"u"&&window&&window.addEventListener&&(window.document.readyState==="complete"?window.dashjs?zi.createAll():qu=window.setInterval((function(){window.dashjs&&(window.clearInterval(qu),zi.createAll())}),500):window.addEventListener("load",(function h(){window.removeEventListener("load",h),zi.createAll()})));var kc=zi,Ic=Xn(649),Ac=Xn(5212),Rc=Xn(559),Cc=Xn(5560);dashjs.Protection=Sc.default,dashjs.MetricsReporting=_c.default,dashjs.MediaPlayerFactory=kc,dashjs.Debug=Ic.default,dashjs.supportsMediaSource=Rc.supportsMediaSource,dashjs.Constants=Ac.default,dashjs.ExternalSubtitle=Cc.default;var Og=dashjs;(Ta=Ta.default).Constants;Ta.Debug;Ta.ExternalSubtitle;var zg=Ta.MediaPlayer;Ta.MediaPlayerFactory;Ta.MetricsReporting;Ta.Protection;Ta.default;Ta.supportsMediaSource;class Fg{constructor(e,t,o="LOSSLESS"){this.audio=e,this.api=t,this.quality=o,this.queue=[],this.shuffledQueue=[],this.originalQueueBeforeShuffle=[],this.currentQueueIndex=-1,this.shuffleActive=!1,this.repeatMode=Ea.OFF,this.preloadCache=new Map,this.preloadAbortController=null,this.currentTrack=null,this.currentRgValues=null,this.userVolume=parseFloat(localStorage.getItem("volume")||"0.7"),this.sleepTimer=null,this.sleepTimerEndTime=null,this.sleepTimerInterval=null,this.dashPlayer=zg().create(),this.dashPlayer.updateSettings({streaming:{buffer:{fastSwitchEnabled:!0}}}),this.dashInitialized=!1,this.loadQueueState(),this.setupMediaSession(),window.addEventListener("beforeunload",()=>{this.saveQueueState()})}setVolume(e){this.userVolume=Math.max(0,Math.min(1,e)),localStorage.setItem("volume",this.userVolume),this.applyReplayGain()}applyReplayGain(){const e=Nr.getMode();let t=0,o=1;if(e!=="off"&&this.currentRgValues){const{trackReplayGain:u,trackPeakAmplitude:p,albumReplayGain:m,albumPeakAmplitude:g}=this.currentRgValues;e==="album"&&m!==void 0?(t=m,o=g||1):u!==void 0&&(t=u,o=p||1),t+=Nr.getPreamp()}let n=Math.pow(10,t/20);n*o>1&&(n=1/o);const r=this.userVolume*n;this.audio.volume=Math.max(0,Math.min(1,r))}loadQueueState(){const e=ku.getQueue();if(e){this.queue=e.queue||[],this.shuffledQueue=e.shuffledQueue||[],this.originalQueueBeforeShuffle=e.originalQueueBeforeShuffle||[],this.currentQueueIndex=e.currentQueueIndex??-1,this.shuffleActive=e.shuffleActive||!1,this.repeatMode=e.repeatMode||Ea.OFF;const t=this.shuffleActive?this.shuffledQueue:this.queue;if(this.currentQueueIndex>=0&&this.currentQueueIndex<t.length){this.currentTrack=t[this.currentQueueIndex];const o=this.currentTrack,n=za(o),r=Ru(o);let u="";const p=o.album?.releaseDate||o.streamStartDate;if(p){const _=new Date(p);isNaN(_.getTime())||(u=` • ${_.getFullYear()}`)}const m=document.querySelector(".now-playing-bar .cover"),g=document.querySelector(".now-playing-bar .title"),T=document.querySelector(".now-playing-bar .album"),f=document.querySelector(".now-playing-bar .artist");if(m&&(m.src=this.api.getCoverUrl(o.album?.cover)),g){const _=Zr(o);g.innerHTML=`${n} ${_}`}if(T){const _=o.album?.title||"";_&&_!==n?(T.textContent=_,T.style.display="block"):(T.textContent="",T.style.display="none")}f&&(f.innerHTML=r+u);const c=document.getElementById("now-playing-mix-btn");c&&(c.style.display=o.mixes&&o.mixes.TRACK_MIX?"flex":"none");const v=document.getElementById("total-duration");v&&(v.textContent=Pr(o.duration)),document.title=`${n} • ${Da(o)}`,this.updatePlayingTrackIndicator(),this.updateMediaSession(o)}}}saveQueueState(){ku.saveQueue({queue:this.queue,shuffledQueue:this.shuffledQueue,originalQueueBeforeShuffle:this.originalQueueBeforeShuffle,currentQueueIndex:this.currentQueueIndex,shuffleActive:this.shuffleActive,repeatMode:this.repeatMode})}setupMediaSession(){"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("play",()=>{this.audio.play().catch(console.error)}),navigator.mediaSession.setActionHandler("pause",()=>{this.audio.pause()}),navigator.mediaSession.setActionHandler("previoustrack",()=>{this.playPrev()}),navigator.mediaSession.setActionHandler("nexttrack",()=>{this.playNext()}),navigator.mediaSession.setActionHandler("seekbackward",e=>{const t=e.seekOffset||10;this.seekBackward(t)}),navigator.mediaSession.setActionHandler("seekforward",e=>{const t=e.seekOffset||10;this.seekForward(t)}),navigator.mediaSession.setActionHandler("seekto",e=>{e.seekTime!==void 0&&(this.audio.currentTime=Math.max(0,e.seekTime),this.updateMediaSessionPositionState())}),navigator.mediaSession.setActionHandler("stop",()=>{this.audio.pause(),this.audio.currentTime=0,this.updateMediaSessionPlaybackState()}))}setQuality(e){this.quality=e}async preloadNextTracks(){this.preloadAbortController&&this.preloadAbortController.abort(),this.preloadAbortController=new AbortController;const e=this.shuffleActive?this.shuffledQueue:this.queue,t=[];for(let o=1;o<=2;o++){const n=this.currentQueueIndex+o;n<e.length&&t.push({track:e[n],index:n})}for(const{track:o}of t)if(!this.preloadCache.has(o.id)&&!o.isLocal)try{const n=await this.api.getStreamUrl(o.id,this.quality);if(this.preloadAbortController.signal.aborted)break;this.preloadCache.set(o.id,n),n.startsWith("blob:")||fetch(n,{method:"HEAD",signal:this.preloadAbortController.signal}).catch(()=>{})}catch(n){n.name}}async playTrackFromQueue(e=0){const t=this.shuffleActive?this.shuffledQueue:this.queue;if(this.currentQueueIndex<0||this.currentQueueIndex>=t.length)return;const o=t[this.currentQueueIndex];if(o.isUnavailable){console.warn(`Attempted to play unavailable track: ${o.title}. Skipping...`),this.playNext();return}this.saveQueueState(),this.currentTrack=o;const n=za(o),r=Ru(o);let u="";const p=o.album?.releaseDate||o.streamStartDate;if(p){const f=new Date(p);isNaN(f.getTime())||(u=` • ${f.getFullYear()}`)}document.querySelector(".now-playing-bar .cover").src=this.api.getCoverUrl(o.album?.cover);const m=Zr(o);document.querySelector(".now-playing-bar .title").innerHTML=`${n} ${m}`;const g=document.querySelector(".now-playing-bar .album");if(g){const f=o.album?.title||"";f&&f!==n?(g.textContent=f,g.style.display="block"):(g.textContent="",g.style.display="none")}document.querySelector(".now-playing-bar .artist").innerHTML=r+u;const T=document.getElementById("now-playing-mix-btn");T&&(T.style.display=o.mixes&&o.mixes.TRACK_MIX?"flex":"none"),document.title=`${n} • ${Da(o)}`,this.updatePlayingTrackIndicator();try{let f;if(o.isLocal&&o.file)this.dashInitialized&&(this.dashPlayer.reset(),this.dashInitialized=!1),f=URL.createObjectURL(o.file),this.currentRgValues=null,this.applyReplayGain(),this.audio.src=f,e>0&&(this.audio.currentTime=e),await this.audio.play();else{const c=await this.api.getTrack(o.id,this.quality);c&&c.info?this.currentRgValues={trackReplayGain:c.info.trackReplayGain,trackPeakAmplitude:c.info.trackPeakAmplitude,albumReplayGain:c.info.albumReplayGain,albumPeakAmplitude:c.info.albumPeakAmplitude}:this.currentRgValues=null,this.applyReplayGain(),this.preloadCache.has(o.id)?f=this.preloadCache.get(o.id):c.originalTrackUrl?f=c.originalTrackUrl:f=this.api.extractStreamUrlFromManifest(c.info.manifest),f&&f.startsWith("blob:")&&!o.isLocal?(this.dashInitialized?this.dashPlayer.attachSource(f):(this.dashPlayer.initialize(this.audio,f,!0),this.dashInitialized=!0),e>0&&this.dashPlayer.seek(e)):(this.dashInitialized&&(this.dashPlayer.reset(),this.dashInitialized=!1),this.audio.src=f,e>0&&(this.audio.currentTime=e),await this.audio.play())}this.updateMediaSession(o),this.updateMediaSessionPlaybackState(),this.preloadNextTracks()}catch(f){console.error(`Could not play track: ${n}`,f)}}playAtIndex(e){const t=this.shuffleActive?this.shuffledQueue:this.queue;e>=0&&e<t.length&&(this.currentQueueIndex=e,this.playTrackFromQueue())}playNext(e=0){const t=this.shuffleActive?this.shuffledQueue:this.queue,o=this.currentQueueIndex>=t.length-1;if(e>t.length){console.error("All tracks in queue are unavailable."),this.audio.pause();return}if(this.repeatMode===Ea.ONE&&!t[this.currentQueueIndex]?.isUnavailable){this.audio.currentTime=0,this.audio.play();return}if(o)if(this.repeatMode===Ea.ALL){if(this.currentQueueIndex=0,t[this.currentQueueIndex].isUnavailable)return this.playNext(e+1)}else return;else if(this.currentQueueIndex++,t[this.currentQueueIndex].isUnavailable)return this.playNext(e+1);this.playTrackFromQueue()}playPrev(e=0){if(this.audio.currentTime>3)this.audio.currentTime=0,this.updateMediaSessionPositionState();else if(this.currentQueueIndex>0){this.currentQueueIndex--;const t=this.shuffleActive?this.shuffledQueue:this.queue;if(e>t.length){console.error("All tracks in queue are unavailable."),this.audio.pause();return}if(t[this.currentQueueIndex].isUnavailable)return this.playPrev(e+1);this.playTrackFromQueue()}}handlePlayPause(){if(!this.audio.src||this.audio.error){this.currentTrack&&this.playTrackFromQueue();return}this.audio.paused?this.audio.play().catch(e=>{e.name==="NotAllowedError"||e.name==="AbortError"||(console.error("Play failed, reloading track:",e),this.currentTrack&&this.playTrackFromQueue())}):(this.audio.pause(),this.saveQueueState())}seekBackward(e=10){const t=Math.max(0,this.audio.currentTime-e);this.audio.currentTime=t,this.updateMediaSessionPositionState()}seekForward(e=10){const t=this.audio.duration||0,o=Math.min(t,this.audio.currentTime+e);this.audio.currentTime=o,this.updateMediaSessionPositionState()}toggleShuffle(){if(this.shuffleActive=!this.shuffleActive,this.shuffleActive){this.originalQueueBeforeShuffle=[...this.queue];const e=this.queue[this.currentQueueIndex],t=[...this.queue];e&&this.currentQueueIndex>=0&&t.splice(this.currentQueueIndex,1),t.sort(()=>Math.random()-.5),e?(this.shuffledQueue=[e,...t],this.currentQueueIndex=0):(this.shuffledQueue=t,this.currentQueueIndex=-1)}else{const e=this.shuffledQueue[this.currentQueueIndex];this.queue=[...this.originalQueueBeforeShuffle],this.currentQueueIndex=this.queue.findIndex(t=>t.id===e?.id)}this.preloadCache.clear(),this.preloadNextTracks(),this.saveQueueState()}toggleRepeat(){return this.repeatMode=(this.repeatMode+1)%3,this.saveQueueState(),this.repeatMode}setQueue(e,t=0){this.queue=e,this.currentQueueIndex=t,this.shuffleActive=!1,this.preloadCache.clear(),this.saveQueueState()}addToQueue(e){this.queue.push(e),(!this.currentTrack||this.currentQueueIndex===-1)&&(this.currentQueueIndex=this.queue.length-1,this.playTrackFromQueue()),this.saveQueueState()}addNextToQueue(e){const t=this.shuffleActive?this.shuffledQueue:this.queue,o=this.currentQueueIndex+1;t.splice(o,0,e),this.shuffleActive&&this.originalQueueBeforeShuffle.push(e),this.saveQueueState(),this.preloadNextTracks()}removeFromQueue(e){const t=this.shuffleActive?this.shuffledQueue:this.queue;this.currentQueueIndex,e<this.currentQueueIndex&&this.currentQueueIndex--;const o=t.splice(e,1)[0];if(this.shuffleActive){const n=this.originalQueueBeforeShuffle.findIndex(r=>r.id===o.id);n!==-1&&this.originalQueueBeforeShuffle.splice(n,1)}this.saveQueueState(),this.preloadNextTracks()}clearQueue(){this.queue=[],this.shuffledQueue=[],this.originalQueueBeforeShuffle=[],this.currentQueueIndex=-1,this.preloadCache.clear(),this.saveQueueState()}moveInQueue(e,t){const o=this.shuffleActive?this.shuffledQueue:this.queue;if(e<0||e>=o.length||t<0||t>=o.length)return;const[n]=o.splice(e,1);o.splice(t,0,n),this.currentQueueIndex===e?this.currentQueueIndex=t:e<this.currentQueueIndex&&t>=this.currentQueueIndex?this.currentQueueIndex--:e>this.currentQueueIndex&&t<=this.currentQueueIndex&&this.currentQueueIndex++,this.saveQueueState()}getCurrentQueue(){return this.shuffleActive?this.shuffledQueue:this.queue}getNextTrack(){const e=this.getCurrentQueue();if(this.currentQueueIndex===-1||e.length===0)return null;const t=this.currentQueueIndex+1;return t<e.length?e[t]:this.repeatMode===Ea.ALL?e[0]:null}updatePlayingTrackIndicator(){const e=this.getCurrentQueue()[this.currentQueueIndex];document.querySelectorAll(".track-item").forEach(t=>{t.classList.toggle("playing",e&&t.dataset.trackId==e.id)}),document.querySelectorAll(".queue-track-item").forEach(t=>{const o=parseInt(t.dataset.queueIndex);t.classList.toggle("playing",o===this.currentQueueIndex)})}updateMediaSession(e){if(!("mediaSession"in navigator))return;navigator.mediaSession.metadata=null;const t=[],o=["320"],n=e.album?.cover,r=za(e);n&&o.forEach(u=>{t.push({src:this.api.getCoverUrl(n,u),sizes:`${u}x${u}`,type:"image/jpeg"})}),navigator.mediaSession.metadata=new MediaMetadata({title:r||"Unknown Title",artist:Da(e)||"Unknown Artist",album:e.album?.title||"Unknown Album",artwork:t.length>0?t:void 0}),this.updateMediaSessionPlaybackState(),this.updateMediaSessionPositionState()}updateMediaSessionPlaybackState(){"mediaSession"in navigator&&(navigator.mediaSession.playbackState=this.audio.paused?"paused":"playing")}updateMediaSessionPositionState(){if(!("mediaSession"in navigator)||!("setPositionState"in navigator.mediaSession))return;const e=this.audio.duration;if(!(!e||isNaN(e)||!isFinite(e)))try{navigator.mediaSession.setPositionState({duration:e,playbackRate:this.audio.playbackRate||1,position:Math.min(this.audio.currentTime,e)})}catch(t){console.log("Failed to update Media Session position:",t)}}setSleepTimer(e){this.clearSleepTimer(),this.sleepTimerEndTime=Date.now()+e*60*1e3,this.sleepTimer=setTimeout(()=>{this.audio.pause(),this.clearSleepTimer(),this.updateSleepTimerUI()},e*60*1e3),this.sleepTimerInterval=setInterval(()=>{this.updateSleepTimerUI()},1e3),this.updateSleepTimerUI()}clearSleepTimer(){this.sleepTimer&&(clearTimeout(this.sleepTimer),this.sleepTimer=null),this.sleepTimerInterval&&(clearInterval(this.sleepTimerInterval),this.sleepTimerInterval=null),this.sleepTimerEndTime=null,this.updateSleepTimerUI()}getSleepTimerRemaining(){if(!this.sleepTimerEndTime)return null;const e=Math.max(0,this.sleepTimerEndTime-Date.now());return Math.ceil(e/1e3)}isSleepTimerActive(){return this.sleepTimer!==null}updateSleepTimerUI(){const e=document.getElementById("sleep-timer-btn"),t=document.getElementById("sleep-timer-btn-desktop"),o=n=>{if(n)if(this.isSleepTimerActive()){const r=this.getSleepTimerRemaining();if(r>0){const u=Math.floor(r/60),p=r%60;n.innerHTML=`<span style="font-size: 12px; font-weight: bold;">${u}:${p.toString().padStart(2,"0")}</span>`,n.title=`Sleep Timer: ${u}:${p.toString().padStart(2,"0")} remaining`,n.classList.add("active"),n.style.color="var(--primary)"}else n.innerHTML=`
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12,6 12,12 16,14"/>
                        </svg>
                    `,n.title="Sleep Timer",n.classList.remove("active"),n.style.color=""}else n.innerHTML=`
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12,6 12,12 16,14"/>
                    </svg>
                `,n.title="Sleep Timer",n.classList.remove("active"),n.style.color=""};o(e),o(t)}}class Ug{constructor(){this.API_KEY="0ecf01914957b40c17030db822845a76",this.API_SECRET="bd37e61e0b16b8c7bf8de2862de5493c",this.API_URL="https://ws.audioscrobbler.com/2.0/",this.sessionKey=null,this.username=null,this.currentTrack=null,this.scrobbleTimer=null,this.scrobbleThreshold=0,this.hasScrobbled=!1,this.loadSession()}loadSession(){try{const e=localStorage.getItem("lastfm-session");if(e){const t=JSON.parse(e);this.sessionKey=t.key,this.username=t.name}}catch{console.error("Failed to load Last.fm session")}}saveSession(e,t){this.sessionKey=e,this.username=t,localStorage.setItem("lastfm-session",JSON.stringify({key:e,name:t}))}clearSession(){this.sessionKey=null,this.username=null,localStorage.removeItem("lastfm-session")}isAuthenticated(){return!!this.sessionKey}async generateSignature(e){const t={...e};delete t.format,delete t.callback;const n=Object.keys(t).sort().map(r=>`${r}${t[r]}`).join("")+this.API_SECRET;console.log("Signature string:",n);try{const{default:r}=await aa(async()=>{const{default:u}=await import("https://cdn.jsdelivr.net/npm/md5@2.3.0/+esm");return{default:u}},[],import.meta.url);return r(n)}catch{throw console.error("MD5 library not available"),new Error("MD5 library required for Last.fm")}}async makeRequest(e,t={},o=!1){const n={method:e,api_key:this.API_KEY,...t};o&&this.sessionKey&&(n.sk=this.sessionKey);const r=await this.generateSignature(n),u=new URLSearchParams({...n,api_sig:r,format:"json"});try{const m=await(await fetch(this.API_URL,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:u})).json();if(m.error)throw new Error(m.message||"Last.fm API error");return m}catch(p){throw console.error("Last.fm API request failed:",p),p}}async getAuthUrl(){try{const t=(await this.makeRequest("auth.getToken")).token;return{token:t,url:`https://www.last.fm/api/auth/?api_key=${this.API_KEY}&token=${t}`}}catch(e){throw console.error("Failed to get auth URL:",e),e}}async completeAuthentication(e){try{const t=await this.makeRequest("auth.getSession",{token:e});if(t.session)return this.saveSession(t.session.key,t.session.name),{success:!0,username:t.session.name};throw new Error("No session returned")}catch(t){throw console.error("Authentication failed:",t),t}}async updateNowPlaying(e){if(this.isAuthenticated()){this.currentTrack=e,this.hasScrobbled=!1,this.clearScrobbleTimer();try{const t={artist:e.artists?.[0]?.name||e.artist?.name||"Unknown Artist",track:e.title};e.album?.title&&(t.album=e.album.title),e.duration&&(t.duration=Math.floor(e.duration)),e.trackNumber&&(t.trackNumber=e.trackNumber),await this.makeRequest("track.updateNowPlaying",t,!0),console.log("Now playing updated:",e.title),this.scrobbleThreshold=Math.min(e.duration/2,240),this.scheduleScrobble(this.scrobbleThreshold*1e3)}catch(t){console.error("Failed to update now playing:",t)}}}scheduleScrobble(e){this.clearScrobbleTimer(),this.scrobbleTimer=setTimeout(()=>{this.scrobbleCurrentTrack()},e)}clearScrobbleTimer(){this.scrobbleTimer&&(clearTimeout(this.scrobbleTimer),this.scrobbleTimer=null)}async scrobbleCurrentTrack(){if(!(!this.isAuthenticated()||!this.currentTrack||this.hasScrobbled))try{const e=Math.floor(Date.now()/1e3),t={artist:this.currentTrack.artists?.[0]?.name||this.currentTrack.artist?.name||"Unknown Artist",track:this.currentTrack.title,timestamp:e};this.currentTrack.album?.title&&(t.album=this.currentTrack.album.title),this.currentTrack.duration&&(t.duration=Math.floor(this.currentTrack.duration)),this.currentTrack.trackNumber&&(t.trackNumber=this.currentTrack.trackNumber),await this.makeRequest("track.scrobble",t,!0),this.hasScrobbled=!0,console.log("Scrobbled:",this.currentTrack.title)}catch(e){console.error("Failed to scrobble:",e)}}async loveTrack(e){if(this.isAuthenticated())try{const t={artist:e.artists?.[0]?.name||e.artist?.name||"Unknown Artist",track:e.title};await this.makeRequest("track.love",t,!0),console.log("Loved track on Last.fm:",e.title)}catch(t){console.error("Failed to love track on Last.fm:",t)}}onTrackChange(e){this.isAuthenticated()&&this.updateNowPlaying(e)}onPlaybackStop(){this.clearScrobbleTimer()}disconnect(){this.clearSession(),this.clearScrobbleTimer(),this.currentTrack=null}}function Bg(h){return async()=>{const t=window.location.hash.substring(1)||"home",[o,n]=t.split("/");switch(o){case"search":await h.renderSearchPage(decodeURIComponent(n));break;case"album":await h.renderAlbumPage(n);break;case"artist":await h.renderArtistPage(n);break;case"playlist":await h.renderPlaylistPage(n,"api");break;case"userplaylist":await h.renderPlaylistPage(n,"user");break;case"mix":await h.renderMixPage(n);break;case"library":await h.renderLibraryPage();break;case"recent":await h.renderRecentPage();break;case"home":await h.renderHomePage();break;default:h.showPage(o);break}}}function Nc(h){if(h.currentTrack){const e=h.currentTrack;document.title=`${e.title} • ${Da(e)}`}else{const e=window.location.hash;if(e.includes("#album/")||e.includes("#playlist/"))return;document.title="Monochrome Music"}}function jg(h,e,t,o){ca.updateUI(ca.user);const n=document.getElementById("toggle-email-auth-btn"),r=document.getElementById("cancel-email-auth-btn"),u=document.getElementById("email-auth-container"),p=document.getElementById("auth-buttons-container"),m=document.getElementById("auth-email"),g=document.getElementById("auth-password"),T=document.getElementById("email-signin-btn"),f=document.getElementById("email-signup-btn");n&&u&&p&&n.addEventListener("click",()=>{u.style.display="flex",p.style.display="none"}),r&&u&&p&&r.addEventListener("click",()=>{u.style.display="none",p.style.display="flex"}),T&&T.addEventListener("click",async()=>{const I=m.value,J=g.value;if(!I||!J){alert("Please enter both email and password.");return}try{await ca.signInWithEmail(I,J),u.style.display="none",p.style.display="flex",m.value="",g.value=""}catch{}}),f&&f.addEventListener("click",async()=>{const I=m.value,J=g.value;if(!I||!J){alert("Please enter both email and password.");return}try{await ca.signUpWithEmail(I,J),u.style.display="none",p.style.display="flex",m.value="",g.value=""}catch{}});const c=document.getElementById("lastfm-connect-btn"),v=document.getElementById("lastfm-status"),_=document.getElementById("lastfm-toggle"),x=document.getElementById("lastfm-toggle-setting"),te=document.getElementById("lastfm-love-toggle"),oe=document.getElementById("lastfm-love-setting");function Te(){h.isAuthenticated()?(v.textContent=`Connected as ${h.username}`,c.textContent="Disconnect",c.classList.add("danger"),x.style.display="flex",oe.style.display="flex",_.checked=rr.isEnabled(),te.checked=rr.shouldLoveOnLike()):(v.textContent="Connect your Last.fm account to scrobble tracks",c.textContent="Connect Last.fm",c.classList.remove("danger"),x.style.display="none",oe.style.display="none")}Te(),c?.addEventListener("click",async()=>{if(h.isAuthenticated()){confirm("Disconnect from Last.fm?")&&(h.disconnect(),Te());return}const I=window.open("","_blank");c.disabled=!0,c.textContent="Opening Last.fm...";try{const{token:J,url:G}=await h.getAuthUrl();if(I)I.location.href=G;else{alert("Popup blocked! Please allow popups."),c.textContent="Connect Last.fm",c.disabled=!1;return}c.textContent="Waiting for authorization...";let Ae=0;const Ye=30,ze=setInterval(async()=>{if(Ae++,Ae>Ye){clearInterval(ze),c.textContent="Connect Last.fm",c.disabled=!1,I&&!I.closed&&I.close(),alert("Authorization timed out. Please try again.");return}try{const je=await h.completeAuthentication(J);je.success&&(clearInterval(ze),I&&!I.closed&&I.close(),Te(),c.disabled=!1,rr.setEnabled(!0),_.checked=!0,alert(`Successfully connected to Last.fm as ${je.username}!`))}catch{}},2e3)}catch(J){console.error("Last.fm connection failed:",J),alert("Failed to connect to Last.fm: "+J.message),c.textContent="Connect Last.fm",c.disabled=!1,I&&!I.closed&&I.close()}}),_?.addEventListener("change",I=>{rr.setEnabled(I.target.checked)}),te?.addEventListener("change",I=>{rr.setLoveOnLike(I.target.checked)});const Se=document.getElementById("theme-picker"),Re=ar.getTheme();Se.querySelectorAll(".theme-option").forEach(I=>{I.dataset.theme===Re&&I.classList.add("active"),I.addEventListener("click",()=>{const J=I.dataset.theme;Se.querySelectorAll(".theme-option").forEach(G=>G.classList.remove("active")),I.classList.add("active"),J==="custom"?(document.getElementById("custom-theme-editor").classList.add("show"),Be(),ar.setTheme("custom")):(document.getElementById("custom-theme-editor").classList.remove("show"),ar.setTheme(J))})});function Be(){const I=document.getElementById("theme-color-grid"),J=ar.getCustomTheme()||{background:"#000000",foreground:"#fafafa",primary:"#ffffff",secondary:"#27272a",muted:"#27272a",border:"#27272a",highlight:"#ffffff"};I.innerHTML=Object.entries(J).map(([G,Ae])=>`
            <div class="theme-color-input">
                <label>${G}</label>
                <input type="color" data-color="${G}" value="${Ae}">
            </div>
        `).join("")}document.getElementById("apply-custom-theme")?.addEventListener("click",()=>{const I={};document.querySelectorAll('#theme-color-grid input[type="color"]').forEach(J=>{I[J.dataset.color]=J.value}),ar.setCustomTheme(I)}),document.getElementById("reset-custom-theme")?.addEventListener("click",()=>{Be()});const De=document.getElementById("streaming-quality-setting");if(De){const I=localStorage.getItem("playback-quality")||"LOSSLESS";De.value=I,e.setQuality(I),De.addEventListener("change",J=>{const G=J.target.value;e.setQuality(G),localStorage.setItem("playback-quality",G)})}const re=document.getElementById("download-quality-setting");re&&(re.value=ir.getQuality(),re.addEventListener("change",I=>{ir.setQuality(I.target.value)}));const se=document.getElementById("show-quality-badges-toggle");se&&(se.checked=Ms.isEnabled(),se.addEventListener("change",I=>{Ms.setEnabled(I.target.checked),o.renderLibraryPage(),window.renderQueueFunction&&window.renderQueueFunction()}));const he=document.getElementById("zipped-bulk-downloads-toggle");he&&(he.checked=!Fi.shouldForceIndividual(),he.addEventListener("change",I=>{Fi.setForceIndividual(!I.target.checked)}));const ve=document.getElementById("replay-gain-mode");ve&&(ve.value=Nr.getMode(),ve.addEventListener("change",I=>{Nr.setMode(I.target.value),e.applyReplayGain()}));const ke=document.getElementById("replay-gain-preamp");ke&&(ke.value=Nr.getPreamp(),ke.addEventListener("change",I=>{Nr.setPreamp(parseFloat(I.target.value)||3),e.applyReplayGain()}));const Fe=document.getElementById("now-playing-mode");Fe&&(Fe.value=Ns.getMode(),Fe.addEventListener("change",I=>{Ns.setMode(I.target.value)}));const ye=document.getElementById("track-list-actions-mode");ye&&(ye.value=xs.getMode(),ye.addEventListener("change",I=>{xs.setMode(I.target.value)}));const Qe=document.getElementById("compact-artist-toggle");Qe&&(Qe.checked=Ha.isCompactArtist(),Qe.addEventListener("change",I=>{Ha.setCompactArtist(I.target.checked)}));const xe=document.getElementById("compact-album-toggle");xe&&(xe.checked=Ha.isCompactAlbum(),xe.addEventListener("change",I=>{Ha.setCompactAlbum(I.target.checked)}));const Le=document.getElementById("download-lyrics-toggle");Le&&(Le.checked=Mr.shouldDownloadLyrics(),Le.addEventListener("change",I=>{Mr.setDownloadLyrics(I.target.checked)}));const ot=document.getElementById("romaji-lyrics-toggle");ot&&(ot.checked=localStorage.getItem("lyricsRomajiMode")==="true",ot.addEventListener("change",I=>{localStorage.setItem("lyricsRomajiMode",I.target.checked?"true":"false")}));const Ht=document.getElementById("album-background-toggle");Ht&&(Ht.checked=Cr.isEnabled(),Ht.addEventListener("change",I=>{Cr.setEnabled(I.target.checked)}));const Et=document.getElementById("waveform-toggle");Et&&(Et.checked=Ds.isEnabled(),Et.addEventListener("change",I=>{Ds.setEnabled(I.target.checked),window.dispatchEvent(new CustomEvent("waveform-toggle",{detail:{enabled:I.target.checked}}))}));const zt=document.getElementById("smooth-scrolling-toggle");zt&&(zt.checked=Ls.isEnabled(),zt.addEventListener("change",I=>{Ls.setEnabled(I.target.checked),window.dispatchEvent(new CustomEvent("smooth-scrolling-toggle",{detail:{enabled:I.target.checked}}))}));const Rt=document.getElementById("filename-template");Rt&&(Rt.value=localStorage.getItem("filename-template")||"{trackNumber} - {artist} - {title}",Rt.addEventListener("change",I=>{localStorage.setItem("filename-template",I.target.value)}));const Xt=document.getElementById("zip-folder-template");Xt&&(Xt.value=localStorage.getItem("zip-folder-template")||"{albumTitle} - {albumArtist}",Xt.addEventListener("change",I=>{localStorage.setItem("zip-folder-template",I.target.value)})),document.getElementById("refresh-speed-test-btn")?.addEventListener("click",async()=>{const I=document.getElementById("refresh-speed-test-btn"),J=I.textContent;I.textContent="Testing...",I.disabled=!0;try{await t.settings.refreshSpeedTests(),o.renderApiSettings(),I.textContent="Done!",setTimeout(()=>{I.textContent=J,I.disabled=!1},1500)}catch(G){console.error("Failed to refresh speed tests:",G),I.textContent="Error",setTimeout(()=>{I.textContent=J,I.disabled=!1},1500)}}),document.getElementById("api-instance-list")?.addEventListener("click",async I=>{const J=I.target.closest("button");if(!J)return;const G=J.closest("li"),Ae=parseInt(G.dataset.index,10),Ye=G.dataset.type||"api",ze=await t.settings.getInstances(Ye);J.classList.contains("move-up")&&Ae>0?[ze[Ae],ze[Ae-1]]=[ze[Ae-1],ze[Ae]]:J.classList.contains("move-down")&&Ae<ze.length-1&&([ze[Ae],ze[Ae+1]]=[ze[Ae+1],ze[Ae]]),t.settings.saveInstances(ze,Ye),o.renderApiSettings()}),document.getElementById("clear-cache-btn")?.addEventListener("click",async()=>{const I=document.getElementById("clear-cache-btn"),J=I.textContent;I.textContent="Clearing...",I.disabled=!0;try{await t.clearCache(),I.textContent="Cleared!",setTimeout(()=>{I.textContent=J,I.disabled=!1,window.location.hash.includes("settings")&&o.renderApiSettings()},1500)}catch(G){console.error("Failed to clear cache:",G),I.textContent="Error",setTimeout(()=>{I.textContent=J,I.disabled=!1},1500)}}),document.getElementById("firebase-clear-cloud-btn")?.addEventListener("click",async()=>{if(confirm("Are you sure you want to delete ALL your data from the cloud? This cannot be undone."))try{await Yn.clearCloudData(),alert("Cloud data cleared successfully."),ca.signOut()}catch(I){console.error("Failed to clear cloud data:",I),alert("Failed to clear cloud data: "+I.message)}}),document.getElementById("export-library-btn")?.addEventListener("click",async()=>{const I=await Tn.exportData(),J=new Blob([JSON.stringify(I,null,2)],{type:"application/json"}),G=URL.createObjectURL(J),Ae=document.createElement("a");Ae.href=G,Ae.download=`monochrome-library-${new Date().toISOString().split("T")[0]}.json`,Ae.click(),URL.revokeObjectURL(G)});const tn=document.getElementById("import-library-input");document.getElementById("import-library-btn")?.addEventListener("click",()=>{tn.click()}),tn?.addEventListener("change",async I=>{const J=I.target.files[0];if(!J)return;const G=new FileReader;G.onload=async Ae=>{try{const Ye=JSON.parse(Ae.target.result);await Tn.importData(Ye),alert("Library imported successfully!"),window.location.reload()}catch(Ye){console.error("Import failed:",Ye),alert("Failed to import library. Please check the file format.")}},G.readAsText(J)});const cn=document.getElementById("custom-db-btn"),Ne=document.getElementById("custom-db-modal"),Ce=document.getElementById("custom-pb-url"),lt=document.getElementById("custom-firebase-config"),$=document.getElementById("custom-db-save"),Y=document.getElementById("custom-db-reset"),A=document.getElementById("custom-db-cancel");if(cn&&Ne){cn.addEventListener("click",()=>{const J=localStorage.getItem("monochrome-pocketbase-url")||"",G=localStorage.getItem("monochrome-firebase-config");if(Ce.value=J,G)try{lt.value=JSON.stringify(JSON.parse(G),null,2)}catch{lt.value=G}else lt.value="";Ne.classList.add("active")});const I=()=>{Ne.classList.remove("active")};A.addEventListener("click",I),Ne.querySelector(".modal-overlay").addEventListener("click",I),$.addEventListener("click",()=>{const J=Ce.value.trim(),G=lt.value.trim();if(J?localStorage.setItem("monochrome-pocketbase-url",J):localStorage.removeItem("monochrome-pocketbase-url"),G)try{const Ae=JSON.parse(G);Cg(Ae)}catch{alert("Invalid JSON for Firebase Config");return}else Bu();alert("Settings saved. Reloading..."),window.location.reload()}),Y.addEventListener("click",()=>{confirm("Reset custom database settings to default?")&&(localStorage.removeItem("monochrome-pocketbase-url"),Bu(),alert("Settings reset. Reloading..."),window.location.reload())})}}class qg{constructor(){this.audioContext=new(window.AudioContext||window.webkitAudioContext),this.cache=new Map}async getWaveform(e,t){if(this.cache.has(t))return this.cache.get(t);try{const n=await(await fetch(e)).arrayBuffer(),r=await this.audioContext.decodeAudioData(n),p={peaks:this.extractPeaks(r),duration:r.duration};return this.cache.set(t,p),p}catch(o){return console.error("Waveform generation failed:",o),null}}extractPeaks(e){const{length:t,duration:o}=e,n=Math.min(Math.floor(4*o),1e3),r=new Float32Array(n),u=e.getChannelData(0),p=Math.floor(t/n),m=8;for(let T=0;T<n;T++){let f=0;const c=T*p,v=c+p;for(let _=c;_<v;_+=m){const x=u[_];x>f?f=x:-x>f&&(f=-x)}r[T]=f}let g=0;for(let T=0;T<n;T++)r[T]>g&&(g=r[T]);if(g>0)for(let T=0;T<n;T++)r[T]/=g;return r}drawWaveform(e,t){if(!e||!t)return;const o=e.getContext("2d"),n=e.width,r=e.height;o.clearRect(0,0,n,r);const u=n/t.length,p=r/2;o.fillStyle="#000",o.beginPath(),o.moveTo(0,p);for(let m=0;m<t.length;m++){const g=t[m],T=Math.max(1.5,g*r*.9);o.lineTo(m*u,p-T/2)}for(let m=t.length-1;m>=0;m--){const g=t[m],T=Math.max(1.5,g*r*.9);o.lineTo(m*u,p+T/2)}o.closePath(),o.fill()}}const Li=new qg;let Mi=null;function Hg(h,e,t,o){const n=document.querySelector(".play-pause-btn"),r=document.getElementById("next-btn"),u=document.getElementById("prev-btn"),p=document.getElementById("shuffle-btn"),m=document.getElementById("repeat-btn"),g=document.getElementById("sleep-timer-btn-desktop"),T=document.getElementById("sleep-timer-btn");let f=null;e.addEventListener("loadstart",()=>{f=null}),h.shuffleActive&&p.classList.add("active"),h.repeatMode!==Ea.OFF?(m.classList.add("active"),h.repeatMode===Ea.ONE&&m.classList.add("repeat-one"),m.title=h.repeatMode===Ea.ALL?"Repeat Queue":"Repeat One"):m.title="Repeat",e.addEventListener("play",()=>{h.currentTrack&&(t.isAuthenticated()&&rr.isEnabled()&&t.updateNowPlaying(h.currentTrack),Li.audioContext.state==="suspended"&&Li.audioContext.resume(),x()),n.innerHTML=Im,h.updateMediaSessionPlaybackState(),h.updateMediaSessionPositionState(),Nc(h)}),e.addEventListener("playing",()=>{h.updateMediaSessionPlaybackState(),h.updateMediaSessionPositionState()}),e.addEventListener("pause",()=>{n.innerHTML=pr,h.updateMediaSessionPlaybackState(),h.updateMediaSessionPositionState()}),e.addEventListener("ended",()=>{h.playNext()}),e.addEventListener("timeupdate",async()=>{const{currentTime:Se,duration:Re}=e;if(Re){const Be=document.getElementById("progress-fill"),De=document.getElementById("current-time");if(Be.style.width=`${Se/Re*100}%`,De.textContent=Pr(Se),Se>=10&&h.currentTrack&&h.currentTrack.id!==f){f=h.currentTrack.id;const re=await Tn.addToHistory(h.currentTrack);Yn.syncHistoryItem(re),window.location.hash==="#recent"&&o.renderRecentPage()}}}),e.addEventListener("loadedmetadata",()=>{const Se=document.getElementById("total-duration");Se.textContent=Pr(e.duration),h.updateMediaSessionPositionState()}),e.addEventListener("error",Se=>{console.error("Audio playback error:",Se),n.innerHTML=pr}),n.addEventListener("click",()=>h.handlePlayPause()),r.addEventListener("click",()=>h.playNext()),u.addEventListener("click",()=>h.playPrev()),p.addEventListener("click",()=>{h.toggleShuffle(),p.classList.toggle("active",h.shuffleActive),window.renderQueueFunction&&window.renderQueueFunction()}),m.addEventListener("click",()=>{const Se=h.toggleRepeat();m.classList.toggle("active",Se!==Ea.OFF),m.classList.toggle("repeat-one",Se===Ea.ONE),m.title=Se===Ea.OFF?"Repeat":Se===Ea.ALL?"Repeat Queue":"Repeat One"}),g&&g.addEventListener("click",()=>{h.isSleepTimerActive()?(h.clearSleepTimer(),Jn("Sleep timer cancelled")):Gu(h)}),T&&T.addEventListener("click",()=>{h.isSleepTimerActive()?(h.clearSleepTimer(),Jn("Sleep timer cancelled")):Gu(h)});const c=document.getElementById("volume-bar"),v=document.getElementById("volume-fill"),_=document.getElementById("volume-btn"),x=async()=>{const Se=document.getElementById("progress-bar"),Re=document.querySelector(".player-controls");if(!Ds.isEnabled()||!h.currentTrack){Se&&(Se.style.webkitMaskImage="",Se.style.maskImage="",Se.classList.remove("has-waveform","waveform-loaded")),Re&&Re.classList.remove("waveform-loaded"),Mi=null;return}if(Se&&Mi!==h.currentTrack.id){Mi=h.currentTrack.id,Se.classList.add("has-waveform"),Se.classList.remove("waveform-loaded"),Re&&Re.classList.remove("waveform-loaded"),Se.style.webkitMaskImage="",Se.style.maskImage="";try{const Be=await h.api.getStreamUrl(h.currentTrack.id,"LOW"),De=await Li.getWaveform(Be,h.currentTrack.id);if(De&&Mi===h.currentTrack.id){let{peaks:re,duration:se}=De;const he=h.currentTrack.duration;if(he&&se&&se<he){const ye=he-se;if(ye>.5){const Qe=re.length/se,xe=Math.floor(ye*Qe);if(xe>0){const Le=new Float32Array(re.length+xe);Le.set(re,xe),re=Le}}}const ve=document.createElement("canvas"),ke=Se.getBoundingClientRect();ve.width=ke.width||500,ve.height=28,Li.drawWaveform(ve,re);const Fe=ve.toDataURL();Se.style.webkitMaskImage=`url(${Fe})`,Se.style.webkitMaskSize="100% 100%",Se.style.webkitMaskRepeat="no-repeat",Se.style.maskImage=`url(${Fe})`,Se.style.maskSize="100% 100%",Se.style.maskRepeat="no-repeat",Se.classList.add("waveform-loaded"),Re&&Re.classList.add("waveform-loaded")}}catch(Be){console.error("Failed to load waveform mask:",Be)}}};window.addEventListener("waveform-toggle",Se=>{if(!Se.detail.enabled){const Re=document.getElementById("progress-bar"),Be=document.querySelector(".player-controls");Re&&(Re.style.webkitMaskImage="",Re.style.maskImage="",Re.classList.remove("has-waveform","waveform-loaded")),Be&&Be.classList.remove("waveform-loaded")}x()});const te=()=>{const{muted:Se}=e,Re=h.userVolume;_.innerHTML=Se||Re===0?Rm:Am;const Be=Se?0:Re*100;v.style.setProperty("--volume-level",`${Be}%`),v.style.width=`${Be}%`};_.addEventListener("click",()=>{e.muted=!e.muted,localStorage.setItem("muted",e.muted)}),e.addEventListener("volumechange",te);const oe=parseFloat(localStorage.getItem("volume")||"0.7"),Te=localStorage.getItem("muted")==="true";h.setVolume(oe),e.muted=Te,v.style.width=`${oe*100}%`,c.style.setProperty("--volume-level",`${oe*100}%`),te(),Gg(e,h)}function Gg(h,e){const t=document.getElementById("progress-bar"),o=document.getElementById("progress-fill"),n=document.getElementById("current-time"),r=document.getElementById("volume-bar"),u=document.getElementById("volume-fill"),p=document.getElementById("volume-btn");let m=!1,g=!1,T=!1,f=0;const c=(_,x,te)=>{const oe=_.getBoundingClientRect(),Te=Math.max(0,Math.min(1,(x.clientX-oe.left)/oe.width));te(Te)},v=_=>{isNaN(h.duration)||(o.style.width=`${_*100}%`,n&&(n.textContent=Pr(_*h.duration)))};t.addEventListener("mousedown",_=>{m=!0,g=!h.paused,g&&h.pause(),c(t,_,x=>{f=x,v(x)})}),t.addEventListener("touchstart",_=>{_.preventDefault(),m=!0,g=!h.paused,g&&h.pause();const x=_.touches[0],te=t.getBoundingClientRect(),oe=Math.max(0,Math.min(1,(x.clientX-te.left)/te.width));f=oe,v(oe)}),document.addEventListener("mousemove",_=>{m&&c(t,_,x=>{f=x,v(x)}),T&&c(r,_,x=>{h.muted&&(h.muted=!1,localStorage.setItem("muted",!1)),e.setVolume(x),u.style.width=`${x*100}%`,r.style.setProperty("--volume-level",`${x*100}%`)})}),document.addEventListener("touchmove",_=>{if(m){const x=_.touches[0],te=t.getBoundingClientRect(),oe=Math.max(0,Math.min(1,(x.clientX-te.left)/te.width));f=oe,v(oe)}if(T){const x=_.touches[0],te=r.getBoundingClientRect(),oe=Math.max(0,Math.min(1,(x.clientX-te.left)/te.width));h.muted&&(h.muted=!1,localStorage.setItem("muted",!1)),e.setVolume(oe),u.style.width=`${oe*100}%`,r.style.setProperty("--volume-level",`${oe*100}%`)}}),document.addEventListener("mouseup",()=>{m&&(isNaN(h.duration)||(h.currentTime=f*h.duration,e.updateMediaSessionPositionState(),g&&h.play()),m=!1),T&&(T=!1)}),document.addEventListener("touchend",()=>{m&&(isNaN(h.duration)||(h.currentTime=f*h.duration,e.updateMediaSessionPositionState(),g&&h.play()),m=!1),T&&(T=!1)}),t.addEventListener("click",_=>{m||c(t,_,x=>{if(!isNaN(h.duration)&&h.duration>0&&h.duration!==1/0)h.currentTime=x*h.duration,e.updateMediaSessionPositionState();else if(e.currentTrack&&e.currentTrack.duration){const te=x*e.currentTrack.duration,oe=document.querySelector(".progress-fill");oe&&(oe.style.width=`${x*100}%`),e.playTrackFromQueue(te)}})}),r.addEventListener("mousedown",_=>{T=!0,c(r,_,x=>{h.muted&&(h.muted=!1,localStorage.setItem("muted",!1)),e.setVolume(x),u.style.width=`${x*100}%`,r.style.setProperty("--volume-level",`${x*100}%`)})}),r.addEventListener("touchstart",_=>{_.preventDefault(),T=!0;const x=_.touches[0],te=r.getBoundingClientRect(),oe=Math.max(0,Math.min(1,(x.clientX-te.left)/te.width));h.muted&&(h.muted=!1,localStorage.setItem("muted",!1)),e.setVolume(oe),u.style.width=`${oe*100}%`,r.style.setProperty("--volume-level",`${oe*100}%`)}),r.addEventListener("click",_=>{T||c(r,_,x=>{h.muted&&(h.muted=!1,localStorage.setItem("muted",!1)),e.setVolume(x),u.style.width=`${x*100}%`,r.style.setProperty("--volume-level",`${x*100}%`)})}),r.addEventListener("wheel",_=>{_.preventDefault();const x=_.deltaY>0?-.05:.05,te=Math.max(0,Math.min(1,e.userVolume+x));x>0&&h.muted&&(h.muted=!1,localStorage.setItem("muted",!1)),e.setVolume(te),u.style.width=`${te*100}%`,r.style.setProperty("--volume-level",`${te*100}%`)},{passive:!1}),p?.addEventListener("wheel",_=>{_.preventDefault();const x=_.deltaY>0?-.05:.05,te=Math.max(0,Math.min(1,e.userVolume+x));x>0&&h.muted&&(h.muted=!1,localStorage.setItem("muted",!1)),e.setVolume(te),u.style.width=`${te*100}%`,r.style.setProperty("--volume-level",`${te*100}%`)},{passive:!1})}async function hr(h,e,t,o,n,r="track",u=null,p=null){if(!e)return;const m=["add-to-queue","play-next","track-mix","download"];if(e.isUnavailable&&m.includes(h)){Jn("This track is unavailable.");return}if(h==="add-to-queue")t.addToQueue(e),window.renderQueueFunction&&window.renderQueueFunction(),Jn(`Added to queue: ${e.title}`);else if(h==="play-next")t.addNextToQueue(e),window.renderQueueFunction&&window.renderQueueFunction(),Jn(`Playing next: ${e.title}`);else if(h==="track-mix")e.mixes&&e.mixes.TRACK_MIX&&(window.location.hash=`#mix/${e.mixes.TRACK_MIX}`);else if(h==="play-card")try{let g=[];if(r==="album")g=(await o.getAlbum(e.id)).tracks;else if(r==="playlist")g=(await o.getPlaylist(e.uuid)).tracks;else if(r==="user-playlist"){let T=await Tn.getPlaylist(e.id);if(!T)try{T=await Yn.getPublicPlaylist(e.id)}catch{}g=T?T.tracks:e.tracks||[]}if(g.length>0){t.setQueue(g,0);const T=document.getElementById("shuffle-btn");T&&T.classList.remove("active"),t.playAtIndex(0);const f=r==="user-playlist"?e.name:e.title;Jn(`Playing ${r.replace("user-","")}: ${f}`)}else Jn(`No tracks found in this ${r}`)}catch(g){console.error("Failed to play card:",g),Jn(`Failed to play ${r}`)}else if(h==="download")await fc(e,ir.getQuality(),o,n);else if(h==="toggle-like"){const g=await Tn.toggleFavorite(r,e);Yn.syncLibraryItem(r,e,g),g&&r==="track"&&p&&rr.isEnabled()&&rr.shouldLoveOnLike()&&p.loveTrack(e);const T=r==="playlist"?e.uuid:e.id,f=r==="track"?`[data-track-id="${T}"] .like-btn`:`.card[data-${r}-id="${T}"] .like-btn, .card[data-playlist-id="${T}"] .like-btn`,c=document.getElementById(`like-${r}-btn`),v=[...document.querySelectorAll(f)];c&&v.push(c);const _=document.getElementById("now-playing-like-btn");if(_&&r==="track"&&t?.currentTrack?.id===e.id&&v.push(_),v.forEach(x=>{const te=x.querySelector("svg");te&&(te.classList.toggle("filled",g),te.hasAttribute("fill")&&te.setAttribute("fill",g?"currentColor":"none")),x.classList.toggle("active",g),x.title=g?"Remove from Favorites":"Add to Favorites"}),window.location.hash==="#library"){const x=r==="track"?`.track-item[data-track-id="${T}"]`:`.card[data-${r}-id="${T}"], .card[data-playlist-id="${T}"]`,te=document.querySelector(x);if(!g&&te){const oe=te.parentElement;if(te.remove(),oe&&oe.children.length===0){const Te=r==="track"?"No liked tracks yet.":`No liked ${r}s yet.`;oe.innerHTML=`<div class="placeholder-text">${Te}</div>`}}else if(g&&!te&&u&&r==="track"){const oe=document.getElementById("library-tracks-container");if(oe){const Te=oe.querySelector(".placeholder-text");Te&&Te.remove();const Se=oe.children.length,Re=u.createTrackItemHTML(e,Se,!0,!1),Be=document.createElement("div");Be.innerHTML=Re;const De=Be.firstElementChild;De&&(oe.appendChild(De),Gn.set(De,e),u.updateLikeState(De,"track",e.id))}}}}else if(h==="add-to-playlist"){const g=document.getElementById("playlist-select-modal"),T=document.getElementById("playlist-select-list"),f=document.getElementById("playlist-select-cancel"),c=g.querySelector(".modal-overlay"),v=async()=>{const oe=await Tn.getPlaylists(!0);if(oe.length===0)return Jn("No playlists yet. Create one first."),!1;const Te=e.id,Se=new Set;for(const Re of oe)Re.tracks&&Re.tracks.some(Be=>Be.id==Te)&&Se.add(Re.id);return T.innerHTML=oe.map(Re=>{const Be=Se.has(Re.id);return`
                    <div class="modal-option ${Be?"already-contains":""}" data-id="${Re.id}">
                        <span>${Re.name}</span>
                        ${Be?`<button class="remove-from-playlist-btn-modal" title="Remove from playlist" style="background: transparent; border: none; color: inherit; cursor: pointer; padding: 4px; display: flex; align-items: center;">${Wu}</button>`:""}
                    </div>
                `}).join(""),!0};if(!await v())return;const _=()=>{g.classList.remove("active"),te()},x=async oe=>{const Te=oe.target.closest(".remove-from-playlist-btn-modal"),Se=oe.target.closest(".modal-option");if(!Se)return;const Re=Se.dataset.id;if(Te){oe.stopPropagation(),await Tn.removeTrackFromPlaylist(Re,e.id);const Be=await Tn.getPlaylist(Re);Yn.syncUserPlaylist(Be,"update"),Jn(`Removed from playlist: ${Se.querySelector("span").textContent}`),await v()}else{if(Se.classList.contains("already-contains"))return;await Tn.addTrackToPlaylist(Re,e);const Be=await Tn.getPlaylist(Re);Yn.syncUserPlaylist(Be,"update"),Jn(`Added to playlist: ${Se.querySelector("span").textContent}`),_()}},te=()=>{f.removeEventListener("click",_),c.removeEventListener("click",_),T.removeEventListener("click",x)};f.addEventListener("click",_),c.addEventListener("click",_),T.addEventListener("click",x),g.classList.add("active")}else if(h==="go-to-artist"){const g=e.artist?.id||e.artists?.[0]?.id;g&&(window.location.hash=`#artist/${g}`)}else h==="go-to-album"&&e.album?.id&&(window.location.hash=`#album/${e.album.id}`)}async function Hu(h,e){if(!h||!e)return;const t=h.querySelector('li[data-action="toggle-like"]');if(t){const{db:n}=await aa(async()=>{const{db:u}=await Promise.resolve().then(()=>Rr);return{db:u}},void 0,import.meta.url),r=await n.isFavorite("track",e.id);t.textContent=r?"Unlike":"Like"}const o=h.querySelector('li[data-action="track-mix"]');if(o){const n=e.mixes&&e.mixes.TRACK_MIX;o.style.display=n?"block":"none"}}function Yg(h,e,t,o,n,r,u){let p=null;t.addEventListener("click",async c=>{const v=c.target.closest(".track-action-btn, .like-btn, .play-btn");if(v&&v.dataset.action){c.preventDefault(),c.stopPropagation();const oe=v.closest(".track-item, .card"),Te=v.dataset.action,Se=v.dataset.type||"track";let Re=oe?Gn.get(oe):null;if(!Re&&Te==="toggle-like"){const Be=window.location.hash.split("/")[1];if(Be)try{Se==="album"?Re=(await e.getAlbum(Be)).album:Se==="artist"?Re=await e.getArtist(Be):Se==="playlist"?Re=(await e.getPlaylist(Be)).playlist:Se==="mix"&&(Re=(await e.getMix(Be)).mix)}catch(De){console.error(De)}}Re&&await hr(Te,Re,h,e,n,Se,r,u);return}const _=c.target.closest(".track-menu-btn");if(_){c.stopPropagation();const oe=_.closest(".track-item");if(oe&&!oe.dataset.queueIndex){const Te=Gn.get(oe);if(Te&&Te.isLocal)return;if(o.style.display==="block"&&p&&Te&&p.id===Te.id){o.style.display="none";return}if(p=Te,p){await Hu(o,p);const Se=_.getBoundingClientRect();Yu(o,Se.left,Se.bottom+5,Se)}}return}const x=c.target.closest(".track-item");if(x&&x.classList.contains("unavailable"))return;if(x&&!x.dataset.queueIndex&&!c.target.closest(".remove-from-playlist-btn")){const oe=x.closest(".track-list"),Se=Array.from(oe.querySelectorAll(".track-item")).map(Re=>Gn.get(Re)).filter(Boolean);if(Se.length>0){const Re=x.dataset.trackId,Be=Se.findIndex(De=>De.id==Re);h.setQueue(Se,Be),document.getElementById("shuffle-btn").classList.remove("active"),h.playTrackFromQueue()}}const te=c.target.closest(".card");if(te){if(c.target.closest(".edit-playlist-btn")||c.target.closest(".delete-playlist-btn"))return;const oe=te.dataset.href;if(oe){if(c.target.closest("a"))return;c.preventDefault(),window.location.hash=oe}}}),t.addEventListener("contextmenu",async c=>{const v=c.target.closest(".track-item, .queue-track-item");if(v){if(c.preventDefault(),v.classList.contains("queue-track-item")){const _=parseInt(v.dataset.queueIndex);p=h.getCurrentQueue()[_]}else p=Gn.get(v);if(p){if(p.isLocal)return;const _=["play-next","add-to-queue","download","track-mix"];o.querySelectorAll("[data-action]").forEach(x=>{_.includes(x.dataset.action)&&(x.style.display=p.isUnavailable?"none":"block")}),o._contextTrack=p,await Hu(o,p),Yu(o,c.pageX,c.pageY)}}}),document.addEventListener("click",()=>{o.style.display="none"}),o.addEventListener("click",async c=>{c.stopPropagation();const v=c.target.closest("[data-action]");if(!v)return;const _=v.dataset.action,x=o._contextTrack||p;_&&x&&await hr(_,x,h,e,n,"track",r,u),o.style.display="none"}),document.querySelector(".now-playing-bar .title").addEventListener("click",()=>{const c=h.currentTrack;c?.album?.id&&(window.location.hash=`#album/${c.album.id}`)}),document.querySelector(".now-playing-bar .artist").addEventListener("click",c=>{const v=c.target.closest(".artist-link");if(v){c.stopPropagation();const x=v.dataset.artistId;x&&(window.location.hash=`#artist/${x}`);return}const _=h.currentTrack;_?.artist?.id&&(window.location.hash=`#artist/${_.artist.id}`)});const m=document.getElementById("now-playing-like-btn");m&&m.addEventListener("click",async c=>{c.stopPropagation(),h.currentTrack&&await hr("toggle-like",h.currentTrack,h,e,n,"track",r,u)});const g=document.getElementById("now-playing-mix-btn");g&&g.addEventListener("click",async c=>{c.stopPropagation(),h.currentTrack&&await hr("track-mix",h.currentTrack,h,e,n,"track",r,u)});const T=document.getElementById("now-playing-add-playlist-btn");T&&T.addEventListener("click",async c=>{c.stopPropagation(),h.currentTrack&&await hr("add-to-playlist",h.currentTrack,h,e,n,"track",r,u)});const f=document.getElementById("mobile-add-playlist-btn");f&&f.addEventListener("click",async c=>{c.stopPropagation(),h.currentTrack&&await hr("add-to-playlist",h.currentTrack,h,e,n,"track",r,u)})}function Gu(h){const e=document.getElementById("sleep-timer-modal");if(!e)return;const t=()=>{e.classList.remove("active"),r()},o=u=>{const p=u.target.closest(".timer-option");if(p){let m;if(p.id==="custom-timer-btn"){const g=document.getElementById("custom-minutes");if(m=parseInt(g.value),!m||m<1){Jn("Please enter a valid number of minutes");return}}else m=parseInt(p.dataset.minutes);m&&(h.setSleepTimer(m),Jn(`Sleep timer set for ${m} minute${m===1?"":"s"}`),t())}},n=u=>{(u.target.id==="cancel-sleep-timer"||u.target.classList.contains("modal-overlay"))&&t()},r=()=>{e.removeEventListener("click",o),e.removeEventListener("click",n)};e.addEventListener("click",o),e.addEventListener("click",n),e.classList.add("active")}function Yu(h,e,t,o=null){h.style.visibility="hidden",h.style.display="block";const n=h.offsetWidth,r=h.offsetHeight,u=window.innerWidth,p=window.innerHeight;let m=e,g=t;o?(m+n>u-10&&(m=o.right-n,m<10&&(m=10)),g+r>p-10&&(g=o.top-r-5)):(m+n>u-10&&(m=u-n-10),g+r>p-10&&(g=t-r)),h.style.top=`${g}px`,h.style.left=`${m}px`,h.style.visibility="visible"}function Kg(h,e){const t=document.querySelector(".sidebar"),o=document.getElementById("sidebar-overlay"),n=document.getElementById("hamburger-btn"),r=document.getElementById("queue-btn");let u=null;n.addEventListener("click",()=>{t.classList.add("is-open"),o.classList.add("is-visible")});const p=()=>{t.classList.remove("is-open"),o.classList.remove("is-visible")};o.addEventListener("click",p),t.addEventListener("click",_=>{_.target.closest("a")&&p()});const m=_=>{const x=h.getCurrentQueue(),te=x.length>0;_.innerHTML=`
            <button id="download-queue-btn" class="btn-icon" title="Download Queue" style="display: ${te?"flex":"none"}">
                ${Ir}
            </button>
            <button id="like-queue-btn" class="btn-icon" title="Add Queue to Liked" style="display: ${te?"flex":"none"}">
                ${tr}
            </button>
            <button id="add-queue-to-playlist-btn" class="btn-icon" title="Add Queue to Playlist" style="display: ${te?"flex":"none"}">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
                </svg>
            </button>
            <button id="clear-queue-btn" class="btn-icon" title="Clear Queue" style="display: ${te?"flex":"none"}">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 6h18"/><path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/><path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/></svg>
            </button>
            <button id="close-side-panel-btn" class="btn-icon" title="Close">
                ${Bi}
            </button>
        `,_.querySelector("#close-side-panel-btn").addEventListener("click",()=>{$n.close()});const oe=_.querySelector("#download-queue-btn");oe&&oe.addEventListener("click",async()=>{const{downloadTracks:Be}=await aa(async()=>{const{downloadTracks:De}=await Promise.resolve().then(()=>Ni);return{downloadTracks:De}},void 0,import.meta.url);Be(x,e,ir.getQuality())});const Te=_.querySelector("#like-queue-btn");Te&&Te.addEventListener("click",async()=>{const{db:Be}=await aa(async()=>{const{db:he}=await Promise.resolve().then(()=>Rr);return{db:he}},void 0,import.meta.url),{syncManager:De}=await aa(async()=>{const{syncManager:he}=await Promise.resolve().then(()=>Cs);return{syncManager:he}},void 0,import.meta.url),{showNotification:re}=await aa(async()=>{const{showNotification:he}=await Promise.resolve().then(()=>Ni);return{showNotification:he}},void 0,import.meta.url);let se=0;for(const he of x)await Be.toggleFavorite("track",he)&&(De.syncLibraryItem("track",he,!0),se++);se>0?re(`Added ${se} track${se>1?"s":""} to Liked`):re("All tracks in queue are already liked"),T()});const Se=_.querySelector("#add-queue-to-playlist-btn");Se&&Se.addEventListener("click",async()=>{const{db:Be}=await aa(async()=>{const{db:ke}=await Promise.resolve().then(()=>Rr);return{db:ke}},void 0,import.meta.url),{syncManager:De}=await aa(async()=>{const{syncManager:ke}=await Promise.resolve().then(()=>Cs);return{syncManager:ke}},void 0,import.meta.url),{showNotification:re}=await aa(async()=>{const{showNotification:ke}=await Promise.resolve().then(()=>Ni);return{showNotification:ke}},void 0,import.meta.url),se=await Be.getPlaylists();if(se.length===0){re("No playlists yet. Create one first.");return}const he=document.createElement("div");he.className="modal active",he.innerHTML=`
                    <div class="modal-overlay"></div>
                    <div class="modal-content">
                        <h3>Add Queue to Playlist</h3>
                        <div class="modal-list">
                            ${se.map(ke=>`
                                <div class="modal-option" data-id="${ke.id}">${ua(ke.name)}</div>
                            `).join("")}
                        </div>
                        <div class="modal-actions">
                            <button class="btn-secondary cancel-btn">Cancel</button>
                        </div>
                    </div>
                `,document.body.appendChild(he);const ve=()=>{he.remove()};he.addEventListener("click",async ke=>{if(ke.target.classList.contains("modal-overlay")||ke.target.classList.contains("cancel-btn")){ve();return}const Fe=ke.target.closest(".modal-option");if(Fe){const ye=Fe.dataset.id,Qe=Fe.textContent;try{let xe=0;for(const ot of x)await Be.addTrackToPlaylist(ye,ot),xe++;const Le=await Be.getPlaylist(ye);De.syncUserPlaylist(Le,"update"),re(`Added ${xe} tracks to playlist: ${Qe}`)}catch(xe){console.error("Failed to add tracks to playlist:",xe),re("Failed to add tracks to playlist")}ve()}})});const Re=_.querySelector("#clear-queue-btn");Re&&Re.addEventListener("click",()=>{h.clearQueue(),T()})},g=_=>{const x=h.getCurrentQueue();if(x.length===0){_.innerHTML='<div class="placeholder-text">Queue is empty.</div>';return}const te=x.map((oe,Te)=>{const Se=Te===h.currentQueueIndex,Re=za(oe),Be=Da(oe,{fallback:"Unknown"});return`
                <div class="queue-track-item ${Se?"playing":""}" data-queue-index="${Te}" data-track-id="${oe.id}" draggable="true">
                    <div class="drag-handle">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="5" y1="8" x2="19" y2="8"></line>
                            <line x1="5" y1="16" x2="19" y2="16"></line>
                        </svg>
                    </div>
                    <div class="track-item-info">
                        <img src="${e.getCoverUrl(oe.album?.cover)}"
                             class="track-item-cover" loading="lazy">
                        <div class="track-item-details">
                            <div class="title">${ua(Re)}</div>
                            <div class="artist">${ua(Be)}</div>
                        </div>
                    </div>
                    <div class="track-item-duration">${Pr(oe.duration)}</div>
                    <button class="queue-like-btn" data-action="toggle-like" title="Add to Liked">
                        ${tr}
                    </button>
                    <button class="queue-remove-btn" data-track-index="${Te}" title="Remove from queue">
                        ${Wu}
                    </button>
                </div>
            `}).join("");_.innerHTML=te,_.querySelectorAll(".queue-track-item").forEach(async oe=>{const Te=parseInt(oe.dataset.queueIndex),Se=h.getCurrentQueue()[Te],Re=oe.querySelector(".queue-like-btn");if(Re&&Se){const{db:Be}=await aa(async()=>{const{db:re}=await Promise.resolve().then(()=>Rr);return{db:re}},void 0,import.meta.url),De=await Be.isFavorite("track",Se.id);Re.classList.toggle("active",De),Re.innerHTML=De?tr.replace('class="heart-icon"','class="heart-icon filled"'):tr}oe.addEventListener("click",async Be=>{if(Be.target.closest(".queue-remove-btn")){Be.stopPropagation(),h.removeFromQueue(Te),T();return}const re=Be.target.closest(".queue-like-btn");if(re&&re.dataset.action==="toggle-like"){Be.stopPropagation();const se=h.getCurrentQueue()[Te];if(se){const{db:he}=await aa(async()=>{const{db:ye}=await Promise.resolve().then(()=>Rr);return{db:ye}},void 0,import.meta.url),{syncManager:ve}=await aa(async()=>{const{syncManager:ye}=await Promise.resolve().then(()=>Cs);return{syncManager:ye}},void 0,import.meta.url),{showNotification:ke}=await aa(async()=>{const{showNotification:ye}=await Promise.resolve().then(()=>Ni);return{showNotification:ye}},void 0,import.meta.url),Fe=await he.toggleFavorite("track",se);ve.syncLibraryItem("track",se,Fe),re.classList.toggle("active",Fe),re.innerHTML=Fe?tr.replace('class="heart-icon"','class="heart-icon filled"'):tr,ke(Fe?`Added to Liked: ${se.title}`:`Removed from Liked: ${se.title}`)}return}h.playAtIndex(Te),T()}),oe.addEventListener("contextmenu",async Be=>{Be.preventDefault();const De=document.getElementById("context-menu");if(De){const re=h.getCurrentQueue()[Te];if(re){const{db:se}=await aa(async()=>{const{db:Le}=await Promise.resolve().then(()=>Rr);return{db:Le}},void 0,import.meta.url),he=await se.isFavorite("track",re.id),ve=De.querySelector('li[data-action="toggle-like"]');ve&&(ve.textContent=he?"Unlike":"Like");const ke=De.querySelector('li[data-action="track-mix"]');if(ke){const Le=re.mixes&&re.mixes.TRACK_MIX;ke.style.display=Le?"block":"none"}const Fe=150,ye=200;let Qe=Be.clientX,xe=Be.clientY;Qe+Fe>window.innerWidth&&(Qe=window.innerWidth-Fe-10),xe+ye>window.innerHeight&&(xe=Be.clientY-ye-10),De.style.left=`${Qe}px`,De.style.top=`${xe}px`,De.style.display="block",De._contextTrack=re}}}),oe.addEventListener("dragstart",()=>{u=Te,oe.style.opacity="0.5"}),oe.addEventListener("dragend",()=>{oe.style.opacity="1"}),oe.addEventListener("dragover",Be=>{Be.preventDefault()}),oe.addEventListener("drop",Be=>{Be.preventDefault(),u!==null&&u!==Te&&(h.moveInQueue(u,Te),T())})})},T=()=>{$n.refresh("queue",m,g)},f=()=>{$n.open("queue","Queue",m,g)};r.addEventListener("click",f),window.renderQueueFunction=()=>{$n.isActive("queue")&&T()},document.querySelectorAll(".search-tab").forEach(_=>{_.addEventListener("click",()=>{const x=_.closest(".page");if(!x)return;x.querySelectorAll(".search-tab").forEach(Te=>Te.classList.remove("active")),x.querySelectorAll(".search-tab-content").forEach(Te=>Te.classList.remove("active")),_.classList.add("active");const oe=`${x.id==="page-library"?"library-tab-":"search-tab-"}${_.dataset.tab}`;document.getElementById(oe)?.classList.add("active")})});let c=document.getElementById("custom-tooltip");c||(c=document.createElement("div"),c.id="custom-tooltip",document.body.appendChild(c));const v=_=>{const x=_.clientX+15,te=_.clientY+15,oe=c.getBoundingClientRect(),Te=window.innerWidth,Se=window.innerHeight;let Re=x,Be=te;x+oe.width>Te&&(Re=_.clientX-oe.width-10),te+oe.height>Se&&(Be=_.clientY-oe.height-10),c.style.transform=`translate(${Re}px, ${Be}px)`,c.style.top="0",c.style.left="0"};document.body.addEventListener("mouseover",_=>{const te=_.target.closest(".card-title, .card-subtitle, .track-item-details .title, .track-item-details .artist, .now-playing-bar .title, .now-playing-bar .artist, .now-playing-bar .album");if(te&&(te.hasAttribute("title")&&te.removeAttribute("title"),te.scrollWidth>te.clientWidth)){c.innerHTML=te.innerHTML.trim(),c.classList.add("visible"),v(_);const oe=Se=>{v(Se)},Te=()=>{c.classList.remove("visible"),te.removeEventListener("mousemove",oe),te.removeEventListener("mouseleave",Te)};te.addEventListener("mousemove",oe),te.addEventListener("mouseleave",Te)}})}function Vg(h={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:o,onRegistered:n,onRegisteredSW:r,onRegisterError:u}=h;let p,m,g;const T=async(c=!0)=>{await m,g?.()};async function f(){if("serviceWorker"in navigator){if(p=await aa(async()=>{const{Workbox:c}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:c}},[],import.meta.url).then(({Workbox:c})=>new c("./sw.js",{scope:"./",type:"classic"})).catch(c=>{u?.(c)}),!p)return;g=()=>{p?.messageSkipWaiting()};{let c=!1;const v=()=>{c=!0,p?.addEventListener("controlling",_=>{_.isUpdate&&window.location.reload()}),t?.()};p.addEventListener("installed",_=>{typeof _.isUpdate>"u"?typeof _.isExternal<"u"&&_.isExternal?v():!c&&o?.():_.isUpdate||o?.()}),p.addEventListener("waiting",v)}p.register({immediate:e}).then(c=>{r?r("./sw.js",c):n?.(c)}).catch(c=>{u?.(c)})}}return m=f(),T}let Lr=null;function Ku(){if(Lr)return;Lr=new Lenis({wrapper:document.querySelector(".main-content"),content:document.querySelector(".main-content"),lerp:.1,smoothWheel:!0,smoothTouch:!1,normalizeWheel:!0,wheelMultiplier:.8});function h(e){Lr.raf(e),requestAnimationFrame(h)}requestAnimationFrame(h)}function $g(){Lr&&(Lr.destroy(),Lr=null)}function Vu(){Ls.isEnabled()&&Ku(),window.addEventListener("smooth-scrolling-toggle",function(e){e.detail.enabled?Ku():$g()})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",Vu):Vu();function Wg(h,e){e&&("remote"in h?(h.remote.watchAvailability(t=>{t&&(e.style.display="flex",e.classList.add("available"))}).catch(t=>{console.log("Remote playback not available:",t),window.innerWidth>768&&(e.style.display="flex")}),e.addEventListener("click",()=>{if(!h.src){alert("Please play a track first to enable casting.");return}h.remote.prompt().catch(t=>{if(t.name!=="NotAllowedError"){if(t.name==="NotFoundError"){alert("No remote playback devices (Chromecast/AirPlay) were found on your network.");return}console.log("Cast prompt error:",t)}})}),h.addEventListener("playing",()=>{h.remote&&h.remote.state==="connected"&&e.classList.add("connected")}),h.addEventListener("pause",()=>{h.remote&&h.remote.state==="disconnected"&&e.classList.remove("connected")})):h.webkitShowPlaybackTargetPicker?(e.style.display="flex",e.classList.add("available"),e.addEventListener("click",()=>{h.webkitShowPlaybackTargetPicker()}),h.addEventListener("webkitplaybacktargetavailabilitychanged",t=>{t.availability==="available"&&e.classList.add("available")}),h.addEventListener("webkitcurrentplaybacktargetiswirelesschanged",()=>{h.webkitCurrentPlaybackTargetIsWireless?e.classList.add("connected"):e.classList.remove("connected")})):window.innerWidth>768&&(e.style.display="flex",e.addEventListener("click",()=>{alert("Casting is not supported in this browser. Try Chrome for Chromecast or Safari for AirPlay.")})))}function Qg(h,e){document.addEventListener("keydown",t=>{if(!t.target.matches("input, textarea"))switch(t.key.toLowerCase()){case" ":t.preventDefault(),h.handlePlayPause();break;case"arrowright":t.shiftKey?h.playNext():e.currentTime=Math.min(e.duration,e.currentTime+10);break;case"arrowleft":t.shiftKey?h.playPrev():e.currentTime=Math.max(0,e.currentTime-10);break;case"arrowup":t.preventDefault(),h.setVolume(h.userVolume+.1);break;case"arrowdown":t.preventDefault(),h.setVolume(h.userVolume-.1);break;case"m":e.muted=!e.muted;break;case"s":document.getElementById("shuffle-btn")?.click();break;case"r":document.getElementById("repeat-btn")?.click();break;case"q":document.getElementById("queue-btn")?.click();break;case"/":t.preventDefault(),document.getElementById("search-input")?.focus();break;case"escape":document.getElementById("search-input")?.blur(),$n.close(),ti(e,$n.panel);break;case"l":document.querySelector(".now-playing-bar .cover")?.click();break}})}function Xg(){const h=document.createElement("div");h.className="offline-notification",h.innerHTML=`
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
            <line x1="12" y1="9" x2="12" y2="13"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>
        <span>You are offline. Some features may not work.</span>
    `,document.body.appendChild(h),setTimeout(()=>{h.style.animation="slide-out 0.3s ease forwards",setTimeout(()=>h.remove(),300)},5e3)}function Jg(){const h=document.querySelector(".offline-notification");h&&(h.style.animation="slide-out 0.3s ease forwards",setTimeout(()=>h.remove(),300))}document.addEventListener("DOMContentLoaded",async()=>{const h=new Jm(_m),e=document.getElementById("audio-player"),t=localStorage.getItem("playback-quality")||"LOSSLESS",o=new Fg(e,h,t),n=new Dg(h,o),r=new Ug,u=new mc(h),p=document.getElementById("select-local-folder-btn"),m=document.getElementById("local-browser-warning");if(p&&m){const he=navigator.userAgent,ve=(he.indexOf("Chrome")>-1||he.indexOf("Edg")>-1)&&!/Mobile|Android/.test(he),ke="showDirectoryPicker"in window;(!ve||!ke)&&(p.style.display="none",m.style.display="block")}u.loadKuroshiro().catch(he=>{console.warn("Failed to pre-load Kuroshiro:",he)});const g=ar.getTheme();ar.setTheme(g),xs.getMode(),jg(r,o,h,n),Hg(o,e,r,n),Yg(o,h,document.querySelector(".main-content"),document.getElementById("context-menu"),u,n,r),Kg(o,h),Qg(o,e);const T=document.getElementById("cast-btn");Wg(e,T),o.currentTrack&&n.setCurrentTrack(o.currentTrack),document.querySelector(".now-playing-bar .cover").addEventListener("click",async()=>{if(!o.currentTrack){alert("No track is currently playing");return}const he=Ns.getMode();if(he==="lyrics")$n.isActive("lyrics")?($n.close(),ti(e,$n.panel)):Oi(o.currentTrack,e,u);else if(he==="cover"){const ve=document.getElementById("fullscreen-cover-overlay");if(ve&&ve.style.display==="flex")n.closeFullscreenCover();else{const ke=o.getNextTrack();n.showFullscreenCover(o.currentTrack,ke,u,e)}}else o.currentTrack.album?.id&&(window.location.hash=`#album/${o.currentTrack.album.id}`)}),document.getElementById("playlist-public-toggle")?.addEventListener("change",he=>{const ve=document.getElementById("playlist-share-btn");ve&&(ve.style.display=he.target.checked?"flex":"none")}),document.getElementById("close-fullscreen-cover-btn")?.addEventListener("click",()=>{n.closeFullscreenCover()}),document.getElementById("fullscreen-cover-image")?.addEventListener("click",()=>{n.closeFullscreenCover()}),document.getElementById("nav-back")?.addEventListener("click",()=>{window.history.back()}),document.getElementById("nav-forward")?.addEventListener("click",()=>{window.history.forward()}),document.getElementById("toggle-lyrics-btn")?.addEventListener("click",async he=>{if(he.stopPropagation(),!o.currentTrack){alert("No track is currently playing");return}$n.isActive("lyrics")?($n.close(),ti(e,$n.panel)):Oi(o.currentTrack,e,u)}),document.getElementById("download-current-btn")?.addEventListener("click",()=>{o.currentTrack&&hr("download",o.currentTrack,o,h,u,"track",n)});let f=null;e.addEventListener("play",async()=>{if(!o.currentTrack)return;n.setCurrentTrack(o.currentTrack);const he=o.currentTrack.id;if(he===f)return;f=he,$n.isActive("lyrics")&&Oi(o.currentTrack,e,u,!0);const ve=document.getElementById("fullscreen-cover-overlay");if(ve&&getComputedStyle(ve).display!=="none"){const ke=o.getNextTrack();n.showFullscreenCover(o.currentTrack,ke,u,e)}}),document.addEventListener("click",async he=>{if(he.target.closest("#play-album-btn")){if(he.target.closest("#play-album-btn").disabled)return;const ke=window.location.hash.split("/")[1];if(!ke)return;try{const{tracks:Fe}=await h.getAlbum(ke);Fe.length>0&&(o.setQueue(Fe,0),document.getElementById("shuffle-btn").classList.remove("active"),o.playTrackFromQueue())}catch(Fe){console.error("Failed to play album:",Fe),alert("Failed to play album: "+Fe.message)}}if(he.target.closest("#download-mix-btn")){const ve=he.target.closest("#download-mix-btn");if(ve.disabled)return;const ke=window.location.hash.split("#mix/")[1];if(!ke)return;ve.disabled=!0;const Fe=ve.innerHTML;ve.innerHTML='<svg class="animate-spin" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle></svg><span>Downloading...</span>';try{const{mix:ye,tracks:Qe}=await h.getMix(ke);await Os(ye,Qe,h,ir.getQuality(),u)}catch(ye){console.error("Mix download failed:",ye),alert("Failed to download mix: "+ye.message)}finally{ve.disabled=!1,ve.innerHTML=Fe}}if(he.target.closest("#download-playlist-btn")){const ve=he.target.closest("#download-playlist-btn");if(ve.disabled)return;const ke=window.location.hash.split("/")[1];if(!ke)return;ve.disabled=!0;const Fe=ve.innerHTML;ve.innerHTML='<svg class="animate-spin" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle></svg><span>Downloading...</span>';try{let ye,Qe,xe=await Tn.getPlaylist(ke);if(!xe)try{xe=await Yn.getPublicPlaylist(ke)}catch{}if(xe)ye={...xe,title:xe.name||xe.title},Qe=xe.tracks||[];else{const Le=await h.getPlaylist(ke);ye=Le.playlist,Qe=Le.tracks}await Os(ye,Qe,h,ir.getQuality(),u)}catch(ye){console.error("Playlist download failed:",ye),alert("Failed to download playlist: "+ye.message)}finally{ve.disabled=!1,ve.innerHTML=Fe}}if(he.target.closest("#create-playlist-btn")){const ve=document.getElementById("playlist-modal");document.getElementById("playlist-modal-title").textContent="Create Playlist",document.getElementById("playlist-name-input").value="",document.getElementById("playlist-cover-input").value="",ve.dataset.editingId="",document.getElementById("csv-import-section").style.display="block",document.getElementById("csv-file-input").value="";const ke=document.getElementById("playlist-public-toggle"),Fe=document.getElementById("playlist-share-btn");ke&&(ke.checked=!1),Fe&&(Fe.style.display="none"),ve.classList.add("active"),document.getElementById("playlist-name-input").focus()}if(he.target.closest("#playlist-modal-save")){const ve=document.getElementById("playlist-name-input").value.trim(),ke=document.getElementById("playlist-public-toggle")?.checked;if(ve){const Fe=document.getElementById("playlist-modal"),ye=Fe.dataset.editingId,Qe=async xe=>{if(xe.isPublic=ke,ke)try{await Yn.publishPlaylist(xe)}catch(Le){console.error("Failed to publish playlist:",Le),alert("Failed to publish playlist. Please ensure you are logged in.")}else try{await Yn.unpublishPlaylist(xe.id)}catch{}return xe};if(ye){const xe=document.getElementById("playlist-cover-input").value.trim();Tn.getPlaylist(ye).then(async Le=>{Le&&(Le.name=ve,Le.cover=xe,await Qe(Le),await Tn.performTransaction("user_playlists","readwrite",ot=>ot.put(Le)),Yn.syncUserPlaylist(Le,"update"),n.renderLibraryPage(),window.location.hash===`#userplaylist/${ye}`&&n.renderPlaylistPage(ye,"user"),Fe.classList.remove("active"),delete Fe.dataset.editingId)})}else{const xe=document.getElementById("csv-file-input");let Le=[];if(xe.files.length>0){const Ht=xe.files[0],Et=document.getElementById("csv-import-progress"),zt=document.getElementById("csv-progress-fill"),Rt=document.getElementById("csv-progress-current"),Xt=document.getElementById("csv-progress-total"),tn=Et.querySelector(".current-track"),cn=Et.querySelector(".current-artist");try{Et.style.display="block",zt.style.width="0%",Rt.textContent="0",tn.textContent="Reading CSV file...",cn&&(cn.textContent="");const Ne=await Ht.text(),Ce=Ne.trim().split(`
`),lt=Math.max(0,Ce.length-1);Xt.textContent=lt.toString();const $=await nh(Ne,h,A=>{const I=lt>0?A.current/lt*100:0;zt.style.width=`${Math.min(I,100)}%`,Rt.textContent=A.current.toString(),tn.textContent=A.currentTrack,cn&&(cn.textContent=A.currentArtist||"")});Le=$.tracks;const Y=$.missingTracks;if(Le.length===0){alert("No valid tracks found in the CSV file! Please check the format."),Et.style.display="none";return}console.log(`Imported ${Le.length} tracks from CSV`),Y.length>0&&setTimeout(()=>{th(Y)},500)}catch(Ne){console.error("Failed to parse CSV!",Ne),alert("Failed to parse CSV file! "+Ne.message),Et.style.display="none";return}finally{setTimeout(()=>{Et.style.display="none"},1e3)}}const ot=document.getElementById("playlist-cover-input").value.trim();Tn.createPlaylist(ve,Le,ot).then(async Ht=>{await Qe(Ht),await Tn.performTransaction("user_playlists","readwrite",Et=>Et.put(Ht)),Yn.syncUserPlaylist(Ht,"create"),n.renderLibraryPage(),Fe.classList.remove("active")})}}}if(he.target.closest("#playlist-modal-cancel")&&document.getElementById("playlist-modal").classList.remove("active"),he.target.closest(".edit-playlist-btn")){const ke=he.target.closest(".user-playlist").dataset.userPlaylistId;Tn.getPlaylist(ke).then(async Fe=>{if(Fe){const ye=document.getElementById("playlist-modal");document.getElementById("playlist-modal-title").textContent="Edit Playlist",document.getElementById("playlist-name-input").value=Fe.name,document.getElementById("playlist-cover-input").value=Fe.cover||"";const Qe=document.getElementById("playlist-public-toggle"),xe=document.getElementById("playlist-share-btn");Qe&&(Qe.checked=!!Fe.isPublic),xe&&(xe.style.display=Fe.isPublic?"flex":"none",xe.onclick=()=>{const Le=`${window.location.origin}${window.location.pathname}#userplaylist/${Fe.id}`;navigator.clipboard.writeText(Le).then(()=>alert("Link copied to clipboard!"))}),ye.dataset.editingId=ke,document.getElementById("csv-import-section").style.display="none",ye.classList.add("active"),document.getElementById("playlist-name-input").focus()}})}if(he.target.closest(".delete-playlist-btn")){const ke=he.target.closest(".user-playlist").dataset.userPlaylistId;confirm("Are you sure you want to delete this playlist?")&&Tn.deletePlaylist(ke).then(()=>{Yn.syncUserPlaylist({id:ke},"delete"),n.renderLibraryPage()})}if(he.target.closest("#edit-playlist-btn")){const ve=window.location.hash.split("/")[1];Tn.getPlaylist(ve).then(ke=>{if(ke){const Fe=document.getElementById("playlist-modal");document.getElementById("playlist-modal-title").textContent="Edit Playlist",document.getElementById("playlist-name-input").value=ke.name,document.getElementById("playlist-cover-input").value=ke.cover||"";const ye=document.getElementById("playlist-public-toggle"),Qe=document.getElementById("playlist-share-btn");ye&&(ye.checked=!!ke.isPublic),Qe&&(Qe.style.display=ke.isPublic?"flex":"none",Qe.onclick=()=>{const xe=`${window.location.origin}${window.location.pathname}#userplaylist/${ke.id}`;navigator.clipboard.writeText(xe).then(()=>alert("Link copied to clipboard!"))}),Fe.dataset.editingId=ve,document.getElementById("csv-import-section").style.display="none",Fe.classList.add("active"),document.getElementById("playlist-name-input").focus()}})}if(he.target.closest("#delete-playlist-btn")){const ve=window.location.hash.split("/")[1];confirm("Are you sure you want to delete this playlist?")&&Tn.deletePlaylist(ve).then(()=>{Yn.syncUserPlaylist({id:ve},"delete"),window.location.hash="#library"})}if(he.target.closest(".remove-from-playlist-btn")){he.stopPropagation();const ve=he.target.closest(".remove-from-playlist-btn"),ke=parseInt(ve.dataset.trackIndex),Fe=window.location.hash.split("/")[1];Tn.getPlaylist(Fe).then(async ye=>{if(ye&&ye.tracks[ke]){const Qe=ye.tracks[ke].id,xe=await Tn.removeTrackFromPlaylist(Fe,Qe);Yn.syncUserPlaylist(xe,"update");const Le=document.querySelector(".main-content").scrollTop;await n.renderPlaylistPage(Fe,"user"),document.querySelector(".main-content").scrollTop=Le}})}if(he.target.closest("#play-playlist-btn")){if(he.target.closest("#play-playlist-btn").disabled)return;const ke=window.location.hash.split("/")[1];if(!ke)return;try{let Fe;const ye=await Tn.getPlaylist(ke);if(ye)Fe=ye.tracks;else try{const{tracks:Qe}=await h.getPlaylist(ke);Fe=Qe}catch(Qe){const xe=await Yn.getPublicPlaylist(ke);if(xe)Fe=xe.tracks;else throw Qe}Fe.length>0&&(o.setQueue(Fe,0),document.getElementById("shuffle-btn").classList.remove("active"),o.playTrackFromQueue())}catch(Fe){console.error("Failed to play playlist:",Fe),alert("Failed to play playlist: "+Fe.message)}}if(he.target.closest("#download-album-btn")){const ve=he.target.closest("#download-album-btn");if(ve.disabled)return;const ke=window.location.hash.split("/")[1];if(!ke)return;ve.disabled=!0;const Fe=ve.innerHTML;ve.innerHTML='<svg class="animate-spin" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle></svg><span>Downloading...</span>';try{const{album:ye,tracks:Qe}=await h.getAlbum(ke);await uc(ye,Qe,h,ir.getQuality(),u)}catch(ye){console.error("Album download failed:",ye),alert("Failed to download album: "+ye.message)}finally{ve.disabled=!1,ve.innerHTML=Fe}}if(he.target.closest("#play-artist-radio-btn")){const ve=he.target.closest("#play-artist-radio-btn");if(ve.disabled)return;const ke=window.location.hash.split("/")[1];if(!ke)return;ve.disabled=!0;const Fe=ve.innerHTML;ve.innerHTML='<svg class="animate-spin" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle></svg><span>Loading...</span>';try{const ye=await h.getArtist(ke),Qe=[...ye.albums||[],...ye.eps||[]];if(Qe.length===0)throw new Error("No albums or EPs found for this artist");const xe=new Set,Le=[],ot=[],Ht=3,Et=Qe;for(let zt=0;zt<Et.length;zt+=Ht)ot.push(Et.slice(zt,zt+Ht));for(const zt of ot)await Promise.all(zt.map(async Rt=>{try{const{tracks:Xt}=await h.getAlbum(Rt.id);Xt.forEach(tn=>{xe.has(tn.id)||(xe.add(tn.id),Le.push(tn))})}catch(Xt){console.warn(`Failed to fetch tracks for album ${Rt.title}:`,Xt)}}));if(Le.length>0){for(let zt=Le.length-1;zt>0;zt--){const Rt=Math.floor(Math.random()*(zt+1));[Le[zt],Le[Rt]]=[Le[Rt],Le[zt]]}o.setQueue(Le,0),o.playTrackFromQueue()}else throw new Error("No tracks found across all albums")}catch(ye){console.error("Artist radio failed:",ye),alert("Failed to start artist radio: "+ye.message)}finally{document.body.contains(ve)&&(ve.disabled=!1,ve.innerHTML=Fe)}}if(he.target.closest("#shuffle-liked-tracks-btn")){if(he.target.closest("#shuffle-liked-tracks-btn").disabled)return;try{const ke=await Tn.getFavorites("track");if(ke.length>0){for(let Fe=ke.length-1;Fe>0;Fe--){const ye=Math.floor(Math.random()*(Fe+1));[ke[Fe],ke[ye]]=[ke[ye],ke[Fe]]}o.setQueue(ke,0),document.getElementById("shuffle-btn").classList.remove("active"),o.playTrackFromQueue()}}catch(ke){console.error("Failed to shuffle liked tracks:",ke)}}if(he.target.closest("#download-discography-btn")){const ve=he.target.closest("#download-discography-btn");if(ve.disabled)return;const ke=window.location.hash.split("/")[1];if(!ke)return;try{const Fe=await h.getArtist(ke);ah(Fe,h,ir.getQuality(),u,ve)}catch(Fe){console.error("Failed to load artist for discography download:",Fe),alert("Failed to load artist: "+Fe.message)}}if(he.target.closest("#select-local-folder-btn")||he.target.closest("#change-local-folder-btn"))try{const ve=await window.showDirectoryPicker({id:"music-folder",mode:"read"});await Tn.saveSetting("local_folder_handle",ve);const ke=document.getElementById("select-local-folder-btn"),Fe=document.getElementById("select-local-folder-text");ke&&(Fe?Fe.textContent="Scanning...":ke.textContent="Scanning...",ke.disabled=!0);const ye=[];let Qe=0;async function xe(Le){for await(const ot of Le.values())if(ot.kind==="file"){const Ht=ot.name.toLowerCase();if(Ht.endsWith(".flac")||Ht.endsWith(".mp3")||Ht.endsWith(".m4a")||Ht.endsWith(".wav")||Ht.endsWith(".ogg")){const Et=await ot.getFile(),zt=await zm(Et);zt.id=`local-${Qe++}-${Et.name}`,ye.push(zt)}}else ot.kind==="directory"&&await xe(ot)}await xe(ve),ye.sort((Le,ot)=>{const Ht=Le.artist.name||"",Et=ot.artist.name||"";return Ht.localeCompare(Et)}),window.localFilesCache=ye,n.renderLibraryPage()}catch(ve){ve.name!=="AbortError"&&(console.error("Error selecting folder:",ve),alert("Failed to access folder. Please try again."));const ke=document.getElementById("select-local-folder-btn"),Fe=document.getElementById("select-local-folder-text");ke&&(Fe?Fe.textContent="Select Music Folder":ke.textContent="Select Music Folder",ke.disabled=!1)}});const c=document.getElementById("search-form"),v=document.getElementById("search-input"),_=Dm(he=>{he&&(window.location.hash=`#search/${encodeURIComponent(he)}`)},300);v.addEventListener("input",he=>{const ve=he.target.value.trim();ve.length>2&&_(ve)}),c.addEventListener("submit",he=>{he.preventDefault();const ve=v.value.trim();ve&&(window.location.hash=`#search/${encodeURIComponent(ve)}`)}),window.addEventListener("online",()=>{Jg(),console.log("Back online")}),window.addEventListener("offline",()=>{Xg(),console.log("Gone offline")}),document.querySelector(".play-pause-btn").innerHTML=pr;const x=Bg(n),te=new Map,oe=[window.location.hash];let Te=0,Se=!1;const Re=()=>{const he=document.getElementById("nav-back"),ve=document.getElementById("nav-forward");he&&(he.disabled=Te<=0),ve&&(ve.disabled=Te>=oe.length-1)},Be=async he=>{const ve=window.location.hash;if(he&&he.oldURL)try{const ye=new URL(he.oldURL).hash||"#home",Qe=document.querySelector(".main-content");Qe&&te.set(ye,Qe.scrollTop),ve!==oe[Te]&&(Te>0&&ve===oe[Te-1]?(Te--,Se=!0):Te<oe.length-1&&ve===oe[Te+1]?(Te++,Se=!1):(Te++,oe.splice(Te),oe.push(ve),Se=!1))}catch{Se=!1}await x(),Re();const ke=document.querySelector(".main-content");if(ke)if(Se){const Fe=te.get(ve||"#home");Fe!==void 0&&setTimeout(()=>{ke.scrollTop=Fe},0)}else ke.scrollTop=0;Se=!1};await Be(null),window.addEventListener("hashchange",Be),Re(),e.addEventListener("play",()=>{Nc(o)});const De=Vg({onNeedRefresh(){Zg(()=>De(!0))},onOfflineReady(){console.log("App ready to work offline")}});let re;window.addEventListener("beforeinstallprompt",he=>{he.preventDefault(),re=he;const ve=document.getElementById("install-app-setting");ve&&(ve.style.display="flex"),localStorage.getItem("installPromptDismissed")||eh(re)}),document.getElementById("manual-install-btn")?.addEventListener("click",async()=>{if(re){re.prompt();const{outcome:he}=await re.userChoice;console.log(`User response to install prompt: ${he}`),re=null;const ve=document.getElementById("install-app-setting");ve&&(ve.style.display="none")}}),document.getElementById("show-shortcuts-btn")?.addEventListener("click",()=>{rh()}),window.addEventListener("library-changed",()=>{const he=window.location.hash;if(he==="#library")n.renderLibraryPage();else if(he==="#home"||he==="")n.renderHomePage();else if(he.startsWith("#userplaylist/")){const ve=he.split("/")[1],ke=document.querySelector(".main-content"),Fe=ke?ke.scrollTop:0;n.renderPlaylistPage(ve,"user").then(()=>{ke&&(ke.scrollTop=Fe)})}}),window.addEventListener("history-changed",()=>{window.location.hash==="#recent"&&n.renderRecentPage()});const se=document.getElementById("context-menu");se&&new MutationObserver(ve=>{ve.forEach(ke=>{if(ke.type==="attributes"&&ke.attributeName==="style"&&se.style.display==="block"){const Fe=se._contextTrack,ye=se.querySelector('[data-action="go-to-album"]'),Qe=se.querySelector('[data-action="go-to-artist"]');if(Fe){if(ye){let xe="Album";const Le=Fe.album?.type?.toUpperCase(),ot=Fe.album?.numberOfTracks;Le==="SINGLE"||ot===1?xe="Single":(Le==="EP"||ot&&ot<=6)&&(xe="EP"),ye.textContent=`Go to ${xe}`,ye.style.display=Fe.album?"block":"none"}if(Qe){const xe=Fe.artist||Fe.artists&&Fe.artists.length>0;Qe.style.display=xe?"block":"none"}}}})}).observe(se,{attributes:!0})});function Zg(h){const e=document.createElement("div");e.className="update-notification",e.innerHTML=`
        <div>
            <strong>Update Available</strong>
            <p>A new version of Monochrome is available.</p>
        </div>
        <button class="btn-primary" id="update-now-btn">Update Now</button>
    `,document.body.appendChild(e),document.getElementById("update-now-btn").addEventListener("click",()=>{typeof h=="function"?h():h&&h.postMessage?h.postMessage({action:"skipWaiting"}):window.location.reload()})}function eh(h){if(!h)return;const e=document.createElement("div");e.className="install-prompt",e.innerHTML=`
        <div>
            <strong>Install Monochrome</strong>
            <p>Install this app for a better experience.</p>
        </div>
        <div style="display: flex; gap: 0.5rem;">
            <button class="btn-primary" id="install-btn">Install</button>
            <button class="btn-secondary" id="dismiss-install">Dismiss</button>
        </div>
    `,document.body.appendChild(e),document.getElementById("install-btn").addEventListener("click",async()=>{e.remove(),h.prompt();const{outcome:t}=await h.userChoice;console.log(`User response to install prompt: ${t}`),h=null}),document.getElementById("dismiss-install").addEventListener("click",()=>{e.remove(),localStorage.setItem("installPromptDismissed","true")})}function th(h){const e=document.getElementById("missing-tracks-modal"),t=document.getElementById("missing-tracks-list-ul");t.innerHTML=h.map(r=>`<li>${r}</li>`).join("");const o=()=>e.classList.remove("active"),n=r=>{(r.target===e||r.target.closest(".close-missing-tracks")||r.target.id==="close-missing-tracks-btn"||r.target.classList.contains("modal-overlay"))&&(o(),e.removeEventListener("click",n))};e.addEventListener("click",n),e.classList.add("active")}async function nh(h,e,t){const o=h.trim().split(`
`);if(o.length<2)return[];const n=T=>{const f=[];let c="",v=!1;for(let _=0;_<T.length;_++){const x=T[_];x==='"'?v=!v:x===","&&!v?(f.push(c),c=""):c+=x}return f.push(c),f.map(_=>_.trim().replace(/^"|"$/g,"").replace(/""/g,'"').trim())},r=n(o[0]),u=o.slice(1),p=[],m=[],g=u.length;for(let T=0;T<u.length;T++){const f=u[T];if(!f.trim())continue;const c=n(f);if(c.length>=r.length){let v="",_="",x="";if(r.forEach((te,oe)=>{const Te=c[oe];if(Te)switch(te.toLowerCase()){case"track name":case"title":case"song":v=Te;break;case"artist name(s)":case"artist name":case"artist":case"artists":_=Te;break;case"album":case"album name":x=Te;break}}),t&&t({current:T,total:g,currentTrack:v||"Unknown track",currentArtist:_||""}),v&&_){await new Promise(te=>setTimeout(te,300));try{let te=null;const oe=De=>De.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toLowerCase().replace(/[^\w\s]/g," ").replace(/\s+/g," ").trim(),Te=(De,re,se,he)=>{if(!De)return!1;const ve=oe(De.title||""),ke=(De.artists||[]).map(Ht=>oe(Ht.name||"")).join(" "),Fe=oe(De.album?.name||""),ye=oe(re),Qe=oe(se),xe=oe(he||"");return!(ve===ye||ve.includes(ye)||ye.includes(ve))||!(ke.includes(Qe.split(" ")[0])||Qe.includes(ke.split(" ")[0]))?!1:xe?Fe===xe||Fe.includes(xe)||xe.includes(Fe):!0};if(!te){let De=`${v} ${_}`;x&&(De+=` ${x}`);const re=await e.searchTracks(De);if(re.items&&re.items.length>0){for(const se of re.items)if(Te(se,v,_,x)){te=se;break}if(!te&&x){const se=re.items[0];Te(se,v,_,x)&&(te=se)}}}if(!te&&_){const De=_.split(",")[0].trim();if(De&&De!==_){let re=`${v} ${De}`;x&&(re+=` ${x}`);const se=await e.searchTracks(re);if(se.items&&se.items.length>0){for(const he of se.items)if(Te(he,v,De,x)){te=he,console.log(`Found (Retry 1 - Main Artist): ${v}`);break}}}}if(!te&&x){const De=`${v} ${x}`,re=await e.searchTracks(De);if(re.items&&re.items.length>0){for(const se of re.items)if(Te(se,v,_,x)){te=se,console.log(`Found (Retry 2 - Album): ${v}`);break}}}const Re=(De=>De.split(" - ")[0].replace(/\s*[([]feat\.?.*?[)\]]/i,"").trim())(v),Be=Re!==v;if(!te&&Be){const De=(_||"").split(",")[0].trim();if(Re){let re=`${Re} ${De}`;x&&(re+=` ${x}`);const se=await e.searchTracks(re);if(se.items&&se.items.length>0){for(const he of se.items)if(Te(he,Re,De,x)){te=he,console.log(`Found (Retry 3 - Cleaned Title): ${v}`);break}}}}if(!te){const De=(_||"").split(",")[0].trim(),re=`${v} ${De}`,se=await e.searchTracks(re);if(se.items&&se.items.length>0){for(const he of se.items)if(Te(he,v,De,null)){te=he,console.log(`Found (Retry 4 - Ignore Album): ${v}`);break}}}if(!te&&Be){const De=(_||"").split(",")[0].trim(),re=`${Re} ${De}`,se=await e.searchTracks(re);if(se.items&&se.items.length>0){for(const he of se.items)if(Te(he,Re,De,null)){te=he,console.log(`Found (Retry 5 - Cleaned Title + Ignore Album): ${v}`);break}}}te?(p.push(te),console.log(`✓ "${v}" by ${_}${x?" ["+x+"]":""}`)):(console.warn(`✗ Track not found: "${v}" by ${_}${x?" ["+x+"]":""}`),m.push(`${v} - ${_}${x?" (album: "+x+")":""}`))}catch(te){console.error(`Error searching for track "${v}":`,te),m.push(`${v} - ${_}${x?" (album: "+x+")":""}`)}}}}return t&&t({current:g,total:g,currentTrack:"Import complete"}),{tracks:p,missingTracks:m}}function ah(h,e,t,o,n){const r=document.getElementById("discography-download-modal");document.getElementById("discography-artist-name").textContent=h.name,document.getElementById("albums-count").textContent=h.albums?.length||0,document.getElementById("eps-count").textContent=(h.eps||[]).filter(m=>m.type==="EP").length,document.getElementById("singles-count").textContent=(h.eps||[]).filter(m=>m.type==="SINGLE").length,document.getElementById("download-albums").checked=!0,document.getElementById("download-eps").checked=!0,document.getElementById("download-singles").checked=!0;const u=()=>{r.classList.remove("active")},p=m=>{(m.target===r||m.target.classList.contains("modal-overlay")||m.target.closest(".close-modal-btn")||m.target.id==="cancel-discography-download")&&u()};r.addEventListener("click",p),document.getElementById("start-discography-download").onclick=async()=>{const m=document.getElementById("download-albums").checked,g=document.getElementById("download-eps").checked,T=document.getElementById("download-singles").checked;if(!m&&!g&&!T){alert("Please select at least one type of release to download.");return}u();let f=[];m&&(f=f.concat(h.albums||[])),g&&(f=f.concat((h.eps||[]).filter(v=>v.type==="EP"))),T&&(f=f.concat((h.eps||[]).filter(v=>v.type==="SINGLE"))),n.disabled=!0;const c=n.innerHTML;n.innerHTML='<svg class="animate-spin" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle></svg><span>Downloading...</span>';try{await cc(h,f,e,t,o)}catch(v){console.error("Discography download failed:",v),alert("Failed to download discography: "+v.message)}finally{n.disabled=!1,n.innerHTML=c}},r.classList.add("active")}function rh(){const h=document.getElementById("shortcuts-modal"),e=()=>{h.classList.remove("active"),h.removeEventListener("click",t)},t=o=>{(o.target===h||o.target.classList.contains("close-shortcuts")||o.target.classList.contains("modal-overlay"))&&e()};h.addEventListener("click",t),h.classList.add("active")}
